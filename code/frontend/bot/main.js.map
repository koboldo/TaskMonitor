{"version":3,"sources":["webpack:///../node_modules/core-js/es6/reflect.js","webpack:///../node_modules/core-js/es7/reflect.js","webpack:///../node_modules/core-js/modules/_a-function.js","webpack:///../node_modules/core-js/modules/_an-instance.js","webpack:///../node_modules/core-js/modules/_an-object.js","webpack:///../node_modules/core-js/modules/_array-from-iterable.js","webpack:///../node_modules/core-js/modules/_array-includes.js","webpack:///../node_modules/core-js/modules/_array-methods.js","webpack:///../node_modules/core-js/modules/_array-species-constructor.js","webpack:///../node_modules/core-js/modules/_array-species-create.js","webpack:///../node_modules/core-js/modules/_bind.js","webpack:///../node_modules/core-js/modules/_classof.js","webpack:///../node_modules/core-js/modules/_cof.js","webpack:///../node_modules/core-js/modules/_collection-strong.js","webpack:///../node_modules/core-js/modules/_collection-weak.js","webpack:///../node_modules/core-js/modules/_collection.js","webpack:///../node_modules/core-js/modules/_core.js","webpack:///../node_modules/core-js/modules/_ctx.js","webpack:///../node_modules/core-js/modules/_defined.js","webpack:///../node_modules/core-js/modules/_descriptors.js","webpack:///../node_modules/core-js/modules/_dom-create.js","webpack:///../node_modules/core-js/modules/_enum-bug-keys.js","webpack:///../node_modules/core-js/modules/_export.js","webpack:///../node_modules/core-js/modules/_fails.js","webpack:///../node_modules/core-js/modules/_for-of.js","webpack:///../node_modules/core-js/modules/_global.js","webpack:///../node_modules/core-js/modules/_has.js","webpack:///../node_modules/core-js/modules/_hide.js","webpack:///../node_modules/core-js/modules/_html.js","webpack:///../node_modules/core-js/modules/_ie8-dom-define.js","webpack:///../node_modules/core-js/modules/_inherit-if-required.js","webpack:///../node_modules/core-js/modules/_invoke.js","webpack:///../node_modules/core-js/modules/_iobject.js","webpack:///../node_modules/core-js/modules/_is-array-iter.js","webpack:///../node_modules/core-js/modules/_is-array.js","webpack:///../node_modules/core-js/modules/_is-object.js","webpack:///../node_modules/core-js/modules/_iter-call.js","webpack:///../node_modules/core-js/modules/_iter-create.js","webpack:///../node_modules/core-js/modules/_iter-define.js","webpack:///../node_modules/core-js/modules/_iter-detect.js","webpack:///../node_modules/core-js/modules/_iter-step.js","webpack:///../node_modules/core-js/modules/_iterators.js","webpack:///../node_modules/core-js/modules/_library.js","webpack:///../node_modules/core-js/modules/_meta.js","webpack:///../node_modules/core-js/modules/_metadata.js","webpack:///../node_modules/core-js/modules/_object-assign.js","webpack:///../node_modules/core-js/modules/_object-create.js","webpack:///../node_modules/core-js/modules/_object-dp.js","webpack:///../node_modules/core-js/modules/_object-dps.js","webpack:///../node_modules/core-js/modules/_object-gopd.js","webpack:///../node_modules/core-js/modules/_object-gopn.js","webpack:///../node_modules/core-js/modules/_object-gops.js","webpack:///../node_modules/core-js/modules/_object-gpo.js","webpack:///../node_modules/core-js/modules/_object-keys-internal.js","webpack:///../node_modules/core-js/modules/_object-keys.js","webpack:///../node_modules/core-js/modules/_object-pie.js","webpack:///../node_modules/core-js/modules/_own-keys.js","webpack:///../node_modules/core-js/modules/_property-desc.js","webpack:///../node_modules/core-js/modules/_redefine-all.js","webpack:///../node_modules/core-js/modules/_redefine.js","webpack:///../node_modules/core-js/modules/_set-proto.js","webpack:///../node_modules/core-js/modules/_set-species.js","webpack:///../node_modules/core-js/modules/_set-to-string-tag.js","webpack:///../node_modules/core-js/modules/_shared-key.js","webpack:///../node_modules/core-js/modules/_shared.js","webpack:///../node_modules/core-js/modules/_to-absolute-index.js","webpack:///../node_modules/core-js/modules/_to-integer.js","webpack:///../node_modules/core-js/modules/_to-iobject.js","webpack:///../node_modules/core-js/modules/_to-length.js","webpack:///../node_modules/core-js/modules/_to-object.js","webpack:///../node_modules/core-js/modules/_to-primitive.js","webpack:///../node_modules/core-js/modules/_uid.js","webpack:///../node_modules/core-js/modules/_validate-collection.js","webpack:///../node_modules/core-js/modules/_wks.js","webpack:///../node_modules/core-js/modules/core.get-iterator-method.js","webpack:///../node_modules/core-js/modules/es6.map.js","webpack:///../node_modules/core-js/modules/es6.reflect.apply.js","webpack:///../node_modules/core-js/modules/es6.reflect.construct.js","webpack:///../node_modules/core-js/modules/es6.reflect.define-property.js","webpack:///../node_modules/core-js/modules/es6.reflect.delete-property.js","webpack:///../node_modules/core-js/modules/es6.reflect.enumerate.js","webpack:///../node_modules/core-js/modules/es6.reflect.get-own-property-descriptor.js","webpack:///../node_modules/core-js/modules/es6.reflect.get-prototype-of.js","webpack:///../node_modules/core-js/modules/es6.reflect.get.js","webpack:///../node_modules/core-js/modules/es6.reflect.has.js","webpack:///../node_modules/core-js/modules/es6.reflect.is-extensible.js","webpack:///../node_modules/core-js/modules/es6.reflect.own-keys.js","webpack:///../node_modules/core-js/modules/es6.reflect.prevent-extensions.js","webpack:///../node_modules/core-js/modules/es6.reflect.set-prototype-of.js","webpack:///../node_modules/core-js/modules/es6.reflect.set.js","webpack:///../node_modules/core-js/modules/es6.set.js","webpack:///../node_modules/core-js/modules/es6.weak-map.js","webpack:///../node_modules/core-js/modules/es7.reflect.define-metadata.js","webpack:///../node_modules/core-js/modules/es7.reflect.delete-metadata.js","webpack:///../node_modules/core-js/modules/es7.reflect.get-metadata-keys.js","webpack:///../node_modules/core-js/modules/es7.reflect.get-metadata.js","webpack:///../node_modules/core-js/modules/es7.reflect.get-own-metadata-keys.js","webpack:///../node_modules/core-js/modules/es7.reflect.get-own-metadata.js","webpack:///../node_modules/core-js/modules/es7.reflect.has-metadata.js","webpack:///../node_modules/core-js/modules/es7.reflect.has-own-metadata.js","webpack:///../node_modules/core-js/modules/es7.reflect.metadata.js","webpack:///../node_modules/zone.js/dist/zone.js","webpack:///./$_lazy_route_resource lazy namespace object","webpack:///./app/_directives/alert.component.html","webpack:///./app/_directives/alert.component.ts","webpack:///./app/_directives/index.ts","webpack:///./app/_guards/auth.guard.ts","webpack:///./app/_guards/index.ts","webpack:///./app/_models/calendar.ts","webpack:///./app/_models/code.ts","webpack:///./app/_models/comment.ts","webpack:///./app/_models/dateRange.ts","webpack:///./app/_models/index.ts","webpack:///./app/_models/order.ts","webpack:///./app/_models/orderHistory.ts","webpack:///./app/_models/relatedItem.ts","webpack:///./app/_models/searchedUser.ts","webpack:///./app/_models/timesheet.ts","webpack:///./app/_models/timestats.ts","webpack:///./app/_models/user.ts","webpack:///./app/_models/userPayroll.ts","webpack:///./app/_models/userReport.ts","webpack:///./app/_models/workType.ts","webpack:///./app/_services/alert.service.ts","webpack:///./app/_services/authentication.service.ts","webpack:///./app/_services/autoLogout.service.ts","webpack:///./app/_services/dict.service.ts","webpack:///./app/_services/httpBotWrapper.service.ts","webpack:///./app/_services/httpCacheInterceptor.service.ts","webpack:///./app/_services/httpHeadersInterceptor.service.ts","webpack:///./app/_services/httpProgressInterceptor.service.ts","webpack:///./app/_services/index.ts","webpack:///./app/_services/payroll.service.ts","webpack:///./app/_services/progress.service.ts","webpack:///./app/_services/relatedItem.service.ts","webpack:///./app/_services/timesheet.service.ts","webpack:///./app/_services/tools.service.ts","webpack:///./app/_services/user.service.ts","webpack:///./app/_services/userTimeStats.service.ts","webpack:///./app/_services/version.service.ts","webpack:///./app/_services/wo.service.ts","webpack:///./app/_services/workType.service.ts","webpack:///./app/app-version/app-version.component.css","webpack:///./app/app-version/app-version.component.html","webpack:///./app/app-version/app-version.component.ts","webpack:///./app/app.component.html","webpack:///./app/app.component.ts","webpack:///./app/app.module.ts","webpack:///./app/app.routing.ts","webpack:///./app/change-wo-complexity/change-wo-complexity.component.css","webpack:///./app/change-wo-complexity/change-wo-complexity.component.html","webpack:///./app/change-wo-complexity/change-wo-complexity.component.ts","webpack:///./app/contractors/contractors.component.css","webpack:///./app/contractors/contractors.component.html","webpack:///./app/contractors/contractors.component.ts","webpack:///./app/group-status-change/group-status-change.component.css","webpack:///./app/group-status-change/group-status-change.component.html","webpack:///./app/group-status-change/group-status-change.component.ts","webpack:///./app/home/home.component.html","webpack:///./app/home/home.component.ts","webpack:///./app/home/index.ts","webpack:///./app/login/index.ts","webpack:///./app/login/login.component.html","webpack:///./app/login/login.component.ts","webpack:///./app/my-payroll/my-payroll.component.css","webpack:///./app/my-payroll/my-payroll.component.html","webpack:///./app/my-payroll/my-payroll.component.ts","webpack:///./app/my-wo/my-wo.component.css","webpack:///./app/my-wo/my-wo.component.html","webpack:///./app/my-wo/my-wo.component.ts","webpack:///./app/progress/progress.component.css","webpack:///./app/progress/progress.component.html","webpack:///./app/progress/progress.component.ts","webpack:///./app/report-monitor-engineers/report-monitor-engineers.component.css","webpack:///./app/report-monitor-engineers/report-monitor-engineers.component.html","webpack:///./app/report-monitor-engineers/report-monitor-engineers.component.ts","webpack:///./app/report-monthly-engineers/report-monthly-engineers.component.css","webpack:///./app/report-monthly-engineers/report-monthly-engineers.component.html","webpack:///./app/report-monthly-engineers/report-monthly-engineers.component.ts","webpack:///./app/report-unaccepted-orders/report-unaccepted-orders.component.css","webpack:///./app/report-unaccepted-orders/report-unaccepted-orders.component.html","webpack:///./app/report-unaccepted-orders/report-unaccepted-orders.component.ts","webpack:///./app/status-details/status-details.component.css","webpack:///./app/status-details/status-details.component.html","webpack:///./app/status-details/status-details.component.ts","webpack:///./app/timesheets/timesheets.component.css","webpack:///./app/timesheets/timesheets.component.html","webpack:///./app/timesheets/timesheets.component.ts","webpack:///./app/user-attendance-register/user-attendance-register.component.css","webpack:///./app/user-attendance-register/user-attendance-register.component.html","webpack:///./app/user-attendance-register/user-attendance-register.component.ts","webpack:///./app/user-change/user-change.component.css","webpack:///./app/user-change/user-change.component.html","webpack:///./app/user-change/user-change.component.ts","webpack:///./app/user-history/user-history.component.css","webpack:///./app/user-history/user-history.component.html","webpack:///./app/user-history/user-history.component.ts","webpack:///./app/user-leave/user-leave.component.css","webpack:///./app/user-leave/user-leave.component.html","webpack:///./app/user-leave/user-leave.component.ts","webpack:///./app/user-register/user-register.component.html","webpack:///./app/user-register/user-register.component.ts","webpack:///./app/user-reset-password/user-reset-password.component.css","webpack:///./app/user-reset-password/user-reset-password.component.html","webpack:///./app/user-reset-password/user-reset-password.component.ts","webpack:///./app/users-display/users-display.component.css","webpack:///./app/users-display/users-display.component.html","webpack:///./app/users-display/users-display.component.ts","webpack:///./app/users-payroll/users-payroll.component.css","webpack:///./app/users-payroll/users-payroll.component.html","webpack:///./app/users-payroll/users-payroll.component.ts","webpack:///./app/users-time-stats/users-time-stats.component.css","webpack:///./app/users-time-stats/users-time-stats.component.html","webpack:///./app/users-time-stats/users-time-stats.component.ts","webpack:///./app/wo-cancelled/wo-cancelled.component.css","webpack:///./app/wo-cancelled/wo-cancelled.component.html","webpack:///./app/wo-cancelled/wo-cancelled.component.ts","webpack:///./app/wo-clearing/wo-clearing.component.css","webpack:///./app/wo-clearing/wo-clearing.component.html","webpack:///./app/wo-clearing/wo-clearing.component.ts","webpack:///./app/wo-details/wo-details.component.css","webpack:///./app/wo-details/wo-details.component.html","webpack:///./app/wo-details/wo-details.component.ts","webpack:///./app/wo-list/wo-list.component.css","webpack:///./app/wo-list/wo-list.component.html","webpack:///./app/wo-list/wo-list.component.ts","webpack:///./app/wo-stopped-list/wo-stopped-list.component.css","webpack:///./app/wo-stopped-list/wo-stopped-list.component.html","webpack:///./app/wo-stopped-list/wo-stopped-list.component.ts","webpack:///./app/wo-suspended/wo-suspended.component.css","webpack:///./app/wo-suspended/wo-suspended.component.html","webpack:///./app/wo-suspended/wo-suspended.component.ts","webpack:///./app/wo-turbo-table/wo-turbo-table.component.css","webpack:///./app/wo-turbo-table/wo-turbo-table.component.html","webpack:///./app/wo-turbo-table/wo-turbo-table.component.ts","webpack:///./app/wo/wo.component.css","webpack:///./app/wo/wo.component.html","webpack:///./app/wo/wo.component.ts","webpack:///./app/work-types/work-types.component.css","webpack:///./app/work-types/work-types.component.html","webpack:///./app/work-types/work-types.component.ts","webpack:///./environments/environment.ts","webpack:///./main.ts","webpack:///./polyfills.ts"],"names":[],"mappings":"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AAiB,mBAAO,CAAC,uEAAgB;AACzC,kBAAkB,mBAAO,CAAC,uEAAgB;AAC1C,cAAc,mBAAO,CAAC,yDAAS;AAC/B,eAAe,mBAAO,CAAC,uFAAwB;AAC/C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,6BAA6B;AAC7B,0BAA0B;AAC1B,0BAA0B;AAC1B,qBAAqB;AACrB;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,8EAA8E,OAAO;AACrF;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC,qBAAqB;AACrB,0BAA0B;AAC1B,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;;;;;;;;;;;;AC/Ia;AACb,kBAAkB,mBAAO,CAAC,yEAAiB;AAC3C,cAAc,mBAAO,CAAC,yDAAS;AAC/B,eAAe,mBAAO,CAAC,mEAAc;AACrC,eAAe,mBAAO,CAAC,mEAAc;AACrC,iBAAiB,mBAAO,CAAC,uEAAgB;AACzC,YAAY,mBAAO,CAAC,6DAAW;AAC/B,wBAAwB,mBAAO,CAAC,2EAAkB;AAClD,WAAW,mBAAO,CAAC,uDAAQ;AAC3B,eAAe,mBAAO,CAAC,uFAAwB;AAC/C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,qBAAqB;AACrB,0BAA0B;AAC1B;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;;;;;;;;;;;;ACpFa;AACb,aAAa,mBAAO,CAAC,6DAAW;AAChC,cAAc,mBAAO,CAAC,6DAAW;AACjC,eAAe,mBAAO,CAAC,iEAAa;AACpC,kBAAkB,mBAAO,CAAC,yEAAiB;AAC3C,WAAW,mBAAO,CAAC,yDAAS;AAC5B,YAAY,mBAAO,CAAC,6DAAW;AAC/B,iBAAiB,mBAAO,CAAC,uEAAgB;AACzC,eAAe,mBAAO,CAAC,mEAAc;AACrC,YAAY,mBAAO,CAAC,2DAAU;AAC9B,kBAAkB,mBAAO,CAAC,uEAAgB;AAC1C,qBAAqB,mBAAO,CAAC,mFAAsB;AACnD,wBAAwB,mBAAO,CAAC,uFAAwB;;AAExD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO,mCAAmC,gCAAgC,aAAa;AACvF,8BAA8B,mCAAmC,aAAa;AAC9E;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,qDAAqD;AACrD;AACA,kDAAkD,iBAAiB,EAAE;AACrE;AACA,wDAAwD,aAAa,EAAE,EAAE;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AAC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AACjD,CAAC;AACD;AACA,qBAAqB;AACrB;AACA,SAAS;AACT,GAAG,EAAE;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACpDA,UAAU,mBAAO,CAAC,6DAAW;AAC7B,cAAc,mBAAO,CAAC,6DAAW;AACjC,aAAa,mBAAO,CAAC,6DAAW;AAChC,iDAAiD,mBAAO,CAAC,uEAAgB;;AAEzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,gBAAgB,EAAE;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AClDa;AACb;AACA,cAAc,mBAAO,CAAC,uEAAgB;AACtC,WAAW,mBAAO,CAAC,uEAAgB;AACnC,UAAU,mBAAO,CAAC,qEAAe;AACjC,eAAe,mBAAO,CAAC,mEAAc;AACrC,cAAc,mBAAO,CAAC,+DAAY;AAClC;;AAEA;AACA,6BAA6B,mBAAO,CAAC,2DAAU;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,UAAU,EAAE;AAChD,mBAAmB,sCAAsC;AACzD,CAAC,qCAAqC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;;;;;;;;;;;;ACjCD;AACA,eAAe,mBAAO,CAAC,mEAAc;AACrC,UAAU,mBAAO,CAAC,qEAAe;AACjC,kBAAkB,mBAAO,CAAC,2EAAkB;AAC5C,eAAe,mBAAO,CAAC,qEAAe;AACtC,yBAAyB;AACzB;;AAEA;AACA;AACA;AACA,eAAe,mBAAO,CAAC,qEA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AAO,CAAC,iEAAa;AACpC,eAAe,mBAAO,CAAC,mEAAc;AACrC;AACA;;AAEA,cAAc;AACd;AACA;AACA,CAAC,EAAE;;;;;;;;;;;;ACRH,gBAAgB,mBAAO,CAAC,iEAAa;AACrC,eAAe,mBAAO,CAAC,mEAAc;AACrC,gBAAgB,mBAAO,CAAC,qEAAe;AACvC;AACA;;AAEA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE;;;;;;;;;;;;ACdH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,KAA4D;AAC7D,CAAC,SACW;AACZ,CAAC,qBAAqB;;AAEtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,uBAAuB;AAC9D,uCAAuC,kBAAkB;AACzD,oCAAoC,eAAe;AACnD,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,kBAAkB;AACzD,uCAAuC,kBAAkB;AACzD,oCAAoC,eAAe;AACnD,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,0BAA0B;AACrD;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT,kFAAkF,gEAAgE,EAAE;AACpJ;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,kBAAkB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA,uCAAuC,0BAA0B,EAAE;AACnE;AACA;AACA;AACA,wCAAwC,6DAA6D,EAAE;AACvG,uCAAuC,WAAW,EAAE;AACpD;AACA,kCAAkC,aAAa,EAAE;AACjD,oCAAoC,aAAa,EAAE;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,6BAA6B;AAC7B;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4HAA4H,wBAAwB,oCAAoC;AACxL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gFAAgF,sEAAsE;AACtJ;AACA;AACA,+BAA+B,kBAAkB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,oDAAoD;AAC5F;AACA;AACA;AACA;AACA;AACA,2BAA2B,mCAAmC;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,qEAAqE,gBAAgB;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,sBAAsB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,+CAA+C,sBAAsB;AACrE;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA,kBAAkB,EAAE;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,QAAQ;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,mBAAmB,oBAAoB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,uBAAuB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,yBAAyB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,EAAE;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,EAAE;AACR;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,oCAAoC;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,sBAAsB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,sBAAsB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,0BAA0B;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,sBAAsB;AAChE,qCAAqC,iBAAiB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,8BAA8B;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,0BAA0B;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,0BAA0B;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,kBAAkB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,iBAAiB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,wBAAwB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,wBAAwB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,kBAAkB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0FAA0F;AAC1F;AACA;AACA;AACA;AACA;AACA,UAAU,EAAE;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,EAAE;AACZ;AACA,6DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,EAAE;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,0BAA0B,EAAE;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,6BAA6B,EAAE;AACpF;AACA;AACA;AACA;AACA,8CAA8C,kDAAkD,EAAE;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,0FAA0F;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,mBAAmB,uBAAuB;AAC1C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,+BAA+B,EAAE;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE,gBAAgB;AACrF;AACA,mBAAmB,uBAAuB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,0BAA0B;AAC7C;AACA;AACA,uBAAuB,uBAAuB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;AACA;AACA,yCAAyC,6BAA6B;AACtE;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA,mBAAmB,4BAA4B;AAC/C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,SAAS;AACT;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mFAAmF;AACnF;AACA;AACA;AACA,UAAU,EAAE;AACZ;AACA,mFAAmF;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,EAAE;AACZ,qFAAqF;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,EAAE;AA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SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,EAAC,SAAS,CAAC,CAAC;QAW/8D,IAAI,CAAC,WAAW,CAA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","file":"main.js","sourcesContent":["require('../modules/es6.reflect.apply');\nrequire('../modules/es6.reflect.construct');\nrequire('../modules/es6.reflect.define-property');\nrequire('../modules/es6.reflect.delete-property');\nrequire('../modules/es6.reflect.enumerate');\nrequire('../modules/es6.reflect.get');\nrequire('../modules/es6.reflect.get-own-property-descriptor');\nrequire('../modules/es6.reflect.get-prototype-of');\nrequire('../modules/es6.reflect.has');\nrequire('../modules/es6.reflect.is-extensible');\nrequire('../modules/es6.reflect.own-keys');\nrequire('../modules/es6.reflect.prevent-extensions');\nrequire('../modules/es6.reflect.set');\nrequire('../modules/es6.reflect.set-prototype-of');\nmodule.exports = require('../modules/_core').Reflect;\n","require('../modules/es7.reflect.define-metadata');\nrequire('../modules/es7.reflect.delete-metadata');\nrequire('../modules/es7.reflect.get-metadata');\nrequire('../modules/es7.reflect.get-metadata-keys');\nrequire('../modules/es7.reflect.get-own-metadata');\nrequire('../modules/es7.reflect.get-own-metadata-keys');\nrequire('../modules/es7.reflect.has-metadata');\nrequire('../modules/es7.reflect.has-own-metadata');\nrequire('../modules/es7.reflect.metadata');\nmodule.exports = require('../modules/_core').Reflect;\n","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n","module.exports = function (it, Constructor, name, forbiddenField) {\n  if (!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)) {\n    throw TypeError(name + ': incorrect invocation!');\n  } return it;\n};\n","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n","var forOf = require('./_for-of');\n\nmodule.exports = function (iter, ITERATOR) {\n  var result = [];\n  forOf(iter, false, result.push, result, ITERATOR);\n  return result;\n};\n","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject');\nvar toLength = require('./_to-length');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n","// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\nvar ctx = require('./_ctx');\nvar IObject = require('./_iobject');\nvar toObject = require('./_to-object');\nvar toLength = require('./_to-length');\nvar asc = require('./_array-species-create');\nmodule.exports = function (TYPE, $create) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  var create = $create || asc;\n  return function ($this, callbackfn, that) {\n    var O = toObject($this);\n    var self = IObject(O);\n    var f = ctx(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;\n    var val, res;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      val = self[index];\n      res = f(val, index, O);\n      if (TYPE) {\n        if (IS_MAP) result[index] = res;   // map\n        else if (res) switch (TYPE) {\n          case 3: return true;             // some\n          case 5: return val;              // find\n          case 6: return index;            // findIndex\n          case 2: result.push(val);        // filter\n        } else if (IS_EVERY) return false; // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};\n","var isObject = require('./_is-object');\nvar isArray = require('./_is-array');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (original) {\n  var C;\n  if (isArray(original)) {\n    C = original.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? Array : C;\n};\n","// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\nvar speciesConstructor = require('./_array-species-constructor');\n\nmodule.exports = function (original, length) {\n  return new (speciesConstructor(original))(length);\n};\n","'use strict';\nvar aFunction = require('./_a-function');\nvar isObject = require('./_is-object');\nvar invoke = require('./_invoke');\nvar arraySlice = [].slice;\nvar factories = {};\n\nvar construct = function (F, len, args) {\n  if (!(len in factories)) {\n    for (var n = [], i = 0; i < len; i++) n[i] = 'a[' + i + ']';\n    // eslint-disable-next-line no-new-func\n    factories[len] = Function('F,a', 'return new F(' + n.join(',') + ')');\n  } return factories[len](F, args);\n};\n\nmodule.exports = Function.bind || function bind(that /* , ...args */) {\n  var fn = aFunction(this);\n  var partArgs = arraySlice.call(arguments, 1);\n  var bound = function (/* args... */) {\n    var args = partArgs.concat(arraySlice.call(arguments));\n    return this instanceof bound ? construct(fn, args.length, args) : invoke(fn, args, that);\n  };\n  if (isObject(fn.prototype)) bound.prototype = fn.prototype;\n  return bound;\n};\n","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof');\nvar TAG = require('./_wks')('toStringTag');\n// ES3 wrong here\nvar ARG = cof(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (e) { /* empty */ }\n};\n\nmodule.exports = function (it) {\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","'use strict';\nvar dP = require('./_object-dp').f;\nvar create = require('./_object-create');\nvar redefineAll = require('./_redefine-all');\nvar ctx = require('./_ctx');\nvar anInstance = require('./_an-instance');\nvar forOf = require('./_for-of');\nvar $iterDefine = require('./_iter-define');\nvar step = require('./_iter-step');\nvar setSpecies = require('./_set-species');\nvar DESCRIPTORS = require('./_descriptors');\nvar fastKey = require('./_meta').fastKey;\nvar validate = require('./_validate-collection');\nvar SIZE = DESCRIPTORS ? '_s' : 'size';\n\nvar getEntry = function (that, key) {\n  // fast case\n  var index = fastKey(key);\n  var entry;\n  if (index !== 'F') return that._i[index];\n  // frozen object case\n  for (entry = that._f; entry; entry = entry.n) {\n    if (entry.k == key) return entry;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function (wrapper, NAME, IS_MAP, ADDER) {\n    var C = wrapper(function (that, iterable) {\n      anInstance(that, C, NAME, '_i');\n      that._t = NAME;         // collection type\n      that._i = create(null); // index\n      that._f = undefined;    // first entry\n      that._l = undefined;    // last entry\n      that[SIZE] = 0;         // size\n      if (iterable != undefined) forOf(iterable, IS_MAP, that[ADDER], that);\n    });\n    redefineAll(C.prototype, {\n      // 23.1.3.1 Map.prototype.clear()\n      // 23.2.3.2 Set.prototype.clear()\n      clear: function clear() {\n        for (var that = validate(this, NAME), data = that._i, entry = that._f; entry; entry = entry.n) {\n          entry.r = true;\n          if (entry.p) entry.p = entry.p.n = undefined;\n          delete data[entry.i];\n        }\n        that._f = that._l = undefined;\n        that[SIZE] = 0;\n      },\n      // 23.1.3.3 Map.prototype.delete(key)\n      // 23.2.3.4 Set.prototype.delete(value)\n      'delete': function (key) {\n        var that = validate(this, NAME);\n        var entry = getEntry(that, key);\n        if (entry) {\n          var next = entry.n;\n          var prev = entry.p;\n          delete that._i[entry.i];\n          entry.r = true;\n          if (prev) prev.n = next;\n          if (next) next.p = prev;\n          if (that._f == entry) that._f = next;\n          if (that._l == entry) that._l = prev;\n          that[SIZE]--;\n        } return !!entry;\n      },\n      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)\n      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)\n      forEach: function forEach(callbackfn /* , that = undefined */) {\n        validate(this, NAME);\n        var f = ctx(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3);\n        var entry;\n        while (entry = entry ? entry.n : this._f) {\n          f(entry.v, entry.k, this);\n          // revert to the last existing entry\n          while (entry && entry.r) entry = entry.p;\n        }\n      },\n      // 23.1.3.7 Map.prototype.has(key)\n      // 23.2.3.7 Set.prototype.has(value)\n      has: function has(key) {\n        return !!getEntry(validate(this, NAME), key);\n      }\n    });\n    if (DESCRIPTORS) dP(C.prototype, 'size', {\n      get: function () {\n        return validate(this, NAME)[SIZE];\n      }\n    });\n    return C;\n  },\n  def: function (that, key, value) {\n    var entry = getEntry(that, key);\n    var prev, index;\n    // change existing entry\n    if (entry) {\n      entry.v = value;\n    // create new entry\n    } else {\n      that._l = entry = {\n        i: index = fastKey(key, true), // <- index\n        k: key,                        // <- key\n        v: value,                      // <- value\n        p: prev = that._l,             // <- previous entry\n        n: undefined,                  // <- next entry\n        r: false                       // <- removed\n      };\n      if (!that._f) that._f = entry;\n      if (prev) prev.n = entry;\n      that[SIZE]++;\n      // add to index\n      if (index !== 'F') that._i[index] = entry;\n    } return that;\n  },\n  getEntry: getEntry,\n  setStrong: function (C, NAME, IS_MAP) {\n    // add .keys, .values, .entries, [@@iterator]\n    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11\n    $iterDefine(C, NAME, function (iterated, kind) {\n      this._t = validate(iterated, NAME); // target\n      this._k = kind;                     // kind\n      this._l = undefined;                // previous\n    }, function () {\n      var that = this;\n      var kind = that._k;\n      var entry = that._l;\n      // revert to the last existing entry\n      while (entry && entry.r) entry = entry.p;\n      // get next entry\n      if (!that._t || !(that._l = entry = entry ? entry.n : that._t._f)) {\n        // or finish the iteration\n        that._t = undefined;\n        return step(1);\n      }\n      // return step by kind\n      if (kind == 'keys') return step(0, entry.k);\n      if (kind == 'values') return step(0, entry.v);\n      return step(0, [entry.k, entry.v]);\n    }, IS_MAP ? 'entries' : 'values', !IS_MAP, true);\n\n    // add [@@species], 23.1.2.2, 23.2.2.2\n    setSpecies(NAME);\n  }\n};\n","'use strict';\nvar redefineAll = require('./_redefine-all');\nvar getWeak = require('./_meta').getWeak;\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar anInstance = require('./_an-instance');\nvar forOf = require('./_for-of');\nvar createArrayMethod = require('./_array-methods');\nvar $has = require('./_has');\nvar validate = require('./_validate-collection');\nvar arrayFind = createArrayMethod(5);\nvar arrayFindIndex = createArrayMethod(6);\nvar id = 0;\n\n// fallback for uncaught frozen keys\nvar uncaughtFrozenStore = function (that) {\n  return that._l || (that._l = new UncaughtFrozenStore());\n};\nvar UncaughtFrozenStore = function () {\n  this.a = [];\n};\nvar findUncaughtFrozen = function (store, key) {\n  return arrayFind(store.a, function (it) {\n    return it[0] === key;\n  });\n};\nUncaughtFrozenStore.prototype = {\n  get: function (key) {\n    var entry = findUncaughtFrozen(this, key);\n    if (entry) return entry[1];\n  },\n  has: function (key) {\n    return !!findUncaughtFrozen(this, key);\n  },\n  set: function (key, value) {\n    var entry = findUncaughtFrozen(this, key);\n    if (entry) entry[1] = value;\n    else this.a.push([key, value]);\n  },\n  'delete': function (key) {\n    var index = arrayFindIndex(this.a, function (it) {\n      return it[0] === key;\n    });\n    if (~index) this.a.splice(index, 1);\n    return !!~index;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function (wrapper, NAME, IS_MAP, ADDER) {\n    var C = wrapper(function (that, iterable) {\n      anInstance(that, C, NAME, '_i');\n      that._t = NAME;      // collection type\n      that._i = id++;      // collection id\n      that._l = undefined; // leak store for uncaught frozen objects\n      if (iterable != undefined) forOf(iterable, IS_MAP, that[ADDER], that);\n    });\n    redefineAll(C.prototype, {\n      // 23.3.3.2 WeakMap.prototype.delete(key)\n      // 23.4.3.3 WeakSet.prototype.delete(value)\n      'delete': function (key) {\n        if (!isObject(key)) return false;\n        var data = getWeak(key);\n        if (data === true) return uncaughtFrozenStore(validate(this, NAME))['delete'](key);\n        return data && $has(data, this._i) && delete data[this._i];\n      },\n      // 23.3.3.4 WeakMap.prototype.has(key)\n      // 23.4.3.4 WeakSet.prototype.has(value)\n      has: function has(key) {\n        if (!isObject(key)) return false;\n        var data = getWeak(key);\n        if (data === true) return uncaughtFrozenStore(validate(this, NAME)).has(key);\n        return data && $has(data, this._i);\n      }\n    });\n    return C;\n  },\n  def: function (that, key, value) {\n    var data = getWeak(anObject(key), true);\n    if (data === true) uncaughtFrozenStore(that).set(key, value);\n    else data[that._i] = value;\n    return that;\n  },\n  ufstore: uncaughtFrozenStore\n};\n","'use strict';\nvar global = require('./_global');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar redefineAll = require('./_redefine-all');\nvar meta = require('./_meta');\nvar forOf = require('./_for-of');\nvar anInstance = require('./_an-instance');\nvar isObject = require('./_is-object');\nvar fails = require('./_fails');\nvar $iterDetect = require('./_iter-detect');\nvar setToStringTag = require('./_set-to-string-tag');\nvar inheritIfRequired = require('./_inherit-if-required');\n\nmodule.exports = function (NAME, wrapper, methods, common, IS_MAP, IS_WEAK) {\n  var Base = global[NAME];\n  var C = Base;\n  var ADDER = IS_MAP ? 'set' : 'add';\n  var proto = C && C.prototype;\n  var O = {};\n  var fixMethod = function (KEY) {\n    var fn = proto[KEY];\n    redefine(proto, KEY,\n      KEY == 'delete' ? function (a) {\n        return IS_WEAK && !isObject(a) ? false : fn.call(this, a === 0 ? 0 : a);\n      } : KEY == 'has' ? function has(a) {\n        return IS_WEAK && !isObject(a) ? false : fn.call(this, a === 0 ? 0 : a);\n      } : KEY == 'get' ? function get(a) {\n        return IS_WEAK && !isObject(a) ? undefined : fn.call(this, a === 0 ? 0 : a);\n      } : KEY == 'add' ? function add(a) { fn.call(this, a === 0 ? 0 : a); return this; }\n        : function set(a, b) { fn.call(this, a === 0 ? 0 : a, b); return this; }\n    );\n  };\n  if (typeof C != 'function' || !(IS_WEAK || proto.forEach && !fails(function () {\n    new C().entries().next();\n  }))) {\n    // create collection constructor\n    C = common.getConstructor(wrapper, NAME, IS_MAP, ADDER);\n    redefineAll(C.prototype, methods);\n    meta.NEED = true;\n  } else {\n    var instance = new C();\n    // early implementations not supports chaining\n    var HASNT_CHAINING = instance[ADDER](IS_WEAK ? {} : -0, 1) != instance;\n    // V8 ~  Chromium 40- weak-collections throws on primitives, but should return false\n    var THROWS_ON_PRIMITIVES = fails(function () { instance.has(1); });\n    // most early implementations doesn't supports iterables, most modern - not close it correctly\n    var ACCEPT_ITERABLES = $iterDetect(function (iter) { new C(iter); }); // eslint-disable-line no-new\n    // for early implementations -0 and +0 not the same\n    var BUGGY_ZERO = !IS_WEAK && fails(function () {\n      // V8 ~ Chromium 42- fails only with 5+ elements\n      var $instance = new C();\n      var index = 5;\n      while (index--) $instance[ADDER](index, index);\n      return !$instance.has(-0);\n    });\n    if (!ACCEPT_ITERABLES) {\n      C = wrapper(function (target, iterable) {\n        anInstance(target, C, NAME);\n        var that = inheritIfRequired(new Base(), target, C);\n        if (iterable != undefined) forOf(iterable, IS_MAP, that[ADDER], that);\n        return that;\n      });\n      C.prototype = proto;\n      proto.constructor = C;\n    }\n    if (THROWS_ON_PRIMITIVES || BUGGY_ZERO) {\n      fixMethod('delete');\n      fixMethod('has');\n      IS_MAP && fixMethod('get');\n    }\n    if (BUGGY_ZERO || HASNT_CHAINING) fixMethod(ADDER);\n    // weak collections should not contains .clear method\n    if (IS_WEAK && proto.clear) delete proto.clear;\n  }\n\n  setToStringTag(C, NAME);\n\n  O[NAME] = C;\n  $export($export.G + $export.W + $export.F * (C != Base), O);\n\n  if (!IS_WEAK) common.setStrong(C, NAME, IS_MAP);\n\n  return C;\n};\n","var core = module.exports = { version: '2.6.1' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n","var global = require('./_global');\nvar core = require('./_core');\nvar hide = require('./_hide');\nvar redefine = require('./_redefine');\nvar ctx = require('./_ctx');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] || (global[name] = {}) : (global[name] || {})[PROTOTYPE];\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE] || (exports[PROTOTYPE] = {});\n  var key, own, out, exp;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    // export native or passed\n    out = (own ? target : source)[key];\n    // bind timers to global for call from export context\n    exp = IS_BIND && own ? ctx(out, global) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // extend global\n    if (target) redefine(target, key, out, type & $export.U);\n    // export\n    if (exports[key] != out) hide(exports, key, exp);\n    if (IS_PROTO && expProto[key] != out) expProto[key] = out;\n  }\n};\nglobal.core = core;\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n","var ctx = require('./_ctx');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar anObject = require('./_an-object');\nvar toLength = require('./_to-length');\nvar getIterFn = require('./core.get-iterator-method');\nvar BREAK = {};\nvar RETURN = {};\nvar exports = module.exports = function (iterable, entries, fn, that, ITERATOR) {\n  var iterFn = ITERATOR ? function () { return iterable; } : getIterFn(iterable);\n  var f = ctx(fn, that, entries ? 2 : 1);\n  var index = 0;\n  var length, step, iterator, result;\n  if (typeof iterFn != 'function') throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if (isArrayIter(iterFn)) for (length = toLength(iterable.length); length > index; index++) {\n    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n    if (result === BREAK || result === RETURN) return result;\n  } else for (iterator = iterFn.call(iterable); !(step = iterator.next()).done;) {\n    result = call(iterator, f, step.value, entries);\n    if (result === BREAK || result === RETURN) return result;\n  }\n};\nexports.BREAK = BREAK;\nexports.RETURN = RETURN;\n","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var document = require('./_global').document;\nmodule.exports = document && document.documentElement;\n","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n","var isObject = require('./_is-object');\nvar setPrototypeOf = require('./_set-proto').set;\nmodule.exports = function (that, target, C) {\n  var S = target.constructor;\n  var P;\n  if (S !== C && typeof S == 'function' && (P = S.prototype) !== C.prototype && isObject(P) && setPrototypeOf) {\n    setPrototypeOf(that, P);\n  } return that;\n};\n","// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function (fn, args, that) {\n  var un = that === undefined;\n  switch (args.length) {\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return fn.apply(that, args);\n};\n","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n","// check on default Array iterator\nvar Iterators = require('./_iterators');\nvar ITERATOR = require('./_wks')('iterator');\nvar ArrayProto = Array.prototype;\n\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","// call something on iterator step with safe closing on error\nvar anObject = require('./_an-object');\nmodule.exports = function (iterator, fn, value, entries) {\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (e) {\n    var ret = iterator['return'];\n    if (ret !== undefined) anObject(ret.call(iterator));\n    throw e;\n  }\n};\n","'use strict';\nvar create = require('./_object-create');\nvar descriptor = require('./_property-desc');\nvar setToStringTag = require('./_set-to-string-tag');\nvar IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function () { return this; });\n\nmodule.exports = function (Constructor, NAME, next) {\n  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n","'use strict';\nvar LIBRARY = require('./_library');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar $iterCreate = require('./_iter-create');\nvar setToStringTag = require('./_set-to-string-tag');\nvar getPrototypeOf = require('./_object-gpo');\nvar ITERATOR = require('./_wks')('iterator');\nvar BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`\nvar FF_ITERATOR = '@@iterator';\nvar KEYS = 'keys';\nvar VALUES = 'values';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function (kind) {\n    if (!BUGGY && kind in proto) return proto[kind];\n    switch (kind) {\n      case KEYS: return function keys() { return new Constructor(this, kind); };\n      case VALUES: return function values() { return new Constructor(this, kind); };\n    } return function entries() { return new Constructor(this, kind); };\n  };\n  var TAG = NAME + ' Iterator';\n  var DEF_VALUES = DEFAULT == VALUES;\n  var VALUES_BUG = false;\n  var proto = Base.prototype;\n  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];\n  var $default = $native || getMethod(DEFAULT);\n  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;\n  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;\n  var methods, key, IteratorPrototype;\n  // Fix native\n  if ($anyNative) {\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));\n    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if (!LIBRARY && typeof IteratorPrototype[ITERATOR] != 'function') hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEF_VALUES && $native && $native.name !== VALUES) {\n    VALUES_BUG = true;\n    $default = function values() { return $native.call(this); };\n  }\n  // Define iterator\n  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG] = returnThis;\n  if (DEFAULT) {\n    methods = {\n      values: DEF_VALUES ? $default : getMethod(VALUES),\n      keys: IS_SET ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if (FORCED) for (key in methods) {\n      if (!(key in proto)) redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n","var ITERATOR = require('./_wks')('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function () { SAFE_CLOSING = true; };\n  // eslint-disable-next-line no-throw-literal\n  Array.from(riter, function () { throw 2; });\n} catch (e) { /* empty */ }\n\nmodule.exports = function (exec, skipClosing) {\n  if (!skipClosing && !SAFE_CLOSING) return false;\n  var safe = false;\n  try {\n    var arr = [7];\n    var iter = arr[ITERATOR]();\n    iter.next = function () { return { done: safe = true }; };\n    arr[ITERATOR] = function () { return iter; };\n    exec(arr);\n  } catch (e) { /* empty */ }\n  return safe;\n};\n","module.exports = function (done, value) {\n  return { value: value, done: !!done };\n};\n","module.exports = {};\n","module.exports = false;\n","var META = require('./_uid')('meta');\nvar isObject = require('./_is-object');\nvar has = require('./_has');\nvar setDesc = require('./_object-dp').f;\nvar id = 0;\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\nvar FREEZE = !require('./_fails')(function () {\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function (it) {\n  setDesc(it, META, { value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  } });\n};\nvar fastKey = function (it, create) {\n  // return primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function (it, create) {\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY: META,\n  NEED: false,\n  fastKey: fastKey,\n  getWeak: getWeak,\n  onFreeze: onFreeze\n};\n","var Map = require('./es6.map');\nvar $export = require('./_export');\nvar shared = require('./_shared')('metadata');\nvar store = shared.store || (shared.store = new (require('./es6.weak-map'))());\n\nvar getOrCreateMetadataMap = function (target, targetKey, create) {\n  var targetMetadata = store.get(target);\n  if (!targetMetadata) {\n    if (!create) return undefined;\n    store.set(target, targetMetadata = new Map());\n  }\n  var keyMetadata = targetMetadata.get(targetKey);\n  if (!keyMetadata) {\n    if (!create) return undefined;\n    targetMetadata.set(targetKey, keyMetadata = new Map());\n  } return keyMetadata;\n};\nvar ordinaryHasOwnMetadata = function (MetadataKey, O, P) {\n  var metadataMap = getOrCreateMetadataMap(O, P, false);\n  return metadataMap === undefined ? false : metadataMap.has(MetadataKey);\n};\nvar ordinaryGetOwnMetadata = function (MetadataKey, O, P) {\n  var metadataMap = getOrCreateMetadataMap(O, P, false);\n  return metadataMap === undefined ? undefined : metadataMap.get(MetadataKey);\n};\nvar ordinaryDefineOwnMetadata = function (MetadataKey, MetadataValue, O, P) {\n  getOrCreateMetadataMap(O, P, true).set(MetadataKey, MetadataValue);\n};\nvar ordinaryOwnMetadataKeys = function (target, targetKey) {\n  var metadataMap = getOrCreateMetadataMap(target, targetKey, false);\n  var keys = [];\n  if (metadataMap) metadataMap.forEach(function (_, key) { keys.push(key); });\n  return keys;\n};\nvar toMetaKey = function (it) {\n  return it === undefined || typeof it == 'symbol' ? it : String(it);\n};\nvar exp = function (O) {\n  $export($export.S, 'Reflect', O);\n};\n\nmodule.exports = {\n  store: store,\n  map: getOrCreateMetadataMap,\n  has: ordinaryHasOwnMetadata,\n  get: ordinaryGetOwnMetadata,\n  set: ordinaryDefineOwnMetadata,\n  keys: ordinaryOwnMetadataKeys,\n  key: toMetaKey,\n  exp: exp\n};\n","'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nvar toObject = require('./_to-object');\nvar IObject = require('./_iobject');\nvar $assign = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function () {\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line no-undef\n  var S = Symbol();\n  var K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function (k) { B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n  var T = toObject(target);\n  var aLen = arguments.length;\n  var index = 1;\n  var getSymbols = gOPS.f;\n  var isEnum = pIE.f;\n  while (aLen > index) {\n    var S = IObject(arguments[index++]);\n    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) if (isEnum.call(S, key = keys[j++])) T[key] = S[key];\n  } return T;\n} : $assign;\n","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = require('./_an-object');\nvar dPs = require('./_object-dps');\nvar enumBugKeys = require('./_enum-bug-keys');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar Empty = function () { /* empty */ };\nvar PROTOTYPE = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe');\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var dP = require('./_object-dp');\nvar anObject = require('./_an-object');\nvar getKeys = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n  while (length > i) dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n","var pIE = require('./_object-pie');\nvar createDesc = require('./_property-desc');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar has = require('./_has');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return gOPD(O, P);\n  } catch (e) { /* empty */ }\n  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);\n};\n","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys = require('./_object-keys-internal');\nvar hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return $keys(O, hiddenKeys);\n};\n","exports.f = Object.getOwnPropertySymbols;\n","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has = require('./_has');\nvar toObject = require('./_to-object');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n","var has = require('./_has');\nvar toIObject = require('./_to-iobject');\nvar arrayIndexOf = require('./_array-includes')(false);\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = require('./_object-keys-internal');\nvar enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n","exports.f = {}.propertyIsEnumerable;\n","// all object keys, includes non-enumerable and symbols\nvar gOPN = require('./_object-gopn');\nvar gOPS = require('./_object-gops');\nvar anObject = require('./_an-object');\nvar Reflect = require('./_global').Reflect;\nmodule.exports = Reflect && Reflect.ownKeys || function ownKeys(it) {\n  var keys = gOPN.f(anObject(it));\n  var getSymbols = gOPS.f;\n  return getSymbols ? keys.concat(getSymbols(it)) : keys;\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var redefine = require('./_redefine');\nmodule.exports = function (target, src, safe) {\n  for (var key in src) redefine(target, key, src[key], safe);\n  return target;\n};\n","var global = require('./_global');\nvar hide = require('./_hide');\nvar has = require('./_has');\nvar SRC = require('./_uid')('src');\nvar TO_STRING = 'toString';\nvar $toString = Function[TO_STRING];\nvar TPL = ('' + $toString).split(TO_STRING);\n\nrequire('./_core').inspectSource = function (it) {\n  return $toString.call(it);\n};\n\n(module.exports = function (O, key, val, safe) {\n  var isFunction = typeof val == 'function';\n  if (isFunction) has(val, 'name') || hide(val, 'name', key);\n  if (O[key] === val) return;\n  if (isFunction) has(val, SRC) || hide(val, SRC, O[key] ? '' + O[key] : TPL.join(String(key)));\n  if (O === global) {\n    O[key] = val;\n  } else if (!safe) {\n    delete O[key];\n    hide(O, key, val);\n  } else if (O[key]) {\n    O[key] = val;\n  } else {\n    hide(O, key, val);\n  }\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, TO_STRING, function toString() {\n  return typeof this == 'function' && this[SRC] || $toString.call(this);\n});\n","// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = require('./_is-object');\nvar anObject = require('./_an-object');\nvar check = function (O, proto) {\n  anObject(O);\n  if (!isObject(proto) && proto !== null) throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function (test, buggy, set) {\n      try {\n        set = require('./_ctx')(Function.call, require('./_object-gopd').f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch (e) { buggy = true; }\n      return function setPrototypeOf(O, proto) {\n        check(O, proto);\n        if (buggy) O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n","'use strict';\nvar global = require('./_global');\nvar dP = require('./_object-dp');\nvar DESCRIPTORS = require('./_descriptors');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (KEY) {\n  var C = global[KEY];\n  if (DESCRIPTORS && C && !C[SPECIES]) dP.f(C, SPECIES, {\n    configurable: true,\n    get: function () { return this; }\n  });\n};\n","var def = require('./_object-dp').f;\nvar has = require('./_has');\nvar TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function (it, tag, stat) {\n  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });\n};\n","var shared = require('./_shared')('keys');\nvar uid = require('./_uid');\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n","var core = require('./_core');\nvar global = require('./_global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: core.version,\n  mode: require('./_library') ? 'pure' : 'global',\n  copyright: '© 2018 Denis Pushkarev (zloirock.ru)'\n});\n","var toInteger = require('./_to-integer');\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n","// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject');\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer');\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n","var isObject = require('./_is-object');\nmodule.exports = function (it, TYPE) {\n  if (!isObject(it) || it._t !== TYPE) throw TypeError('Incompatible receiver, ' + TYPE + ' required!');\n  return it;\n};\n","var store = require('./_shared')('wks');\nvar uid = require('./_uid');\nvar Symbol = require('./_global').Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n","var classof = require('./_classof');\nvar ITERATOR = require('./_wks')('iterator');\nvar Iterators = require('./_iterators');\nmodule.exports = require('./_core').getIteratorMethod = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n","'use strict';\nvar strong = require('./_collection-strong');\nvar validate = require('./_validate-collection');\nvar MAP = 'Map';\n\n// 23.1 Map Objects\nmodule.exports = require('./_collection')(MAP, function (get) {\n  return function Map() { return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.1.3.6 Map.prototype.get(key)\n  get: function get(key) {\n    var entry = strong.getEntry(validate(this, MAP), key);\n    return entry && entry.v;\n  },\n  // 23.1.3.9 Map.prototype.set(key, value)\n  set: function set(key, value) {\n    return strong.def(validate(this, MAP), key === 0 ? 0 : key, value);\n  }\n}, strong, true);\n","// 26.1.1 Reflect.apply(target, thisArgument, argumentsList)\nvar $export = require('./_export');\nvar aFunction = require('./_a-function');\nvar anObject = require('./_an-object');\nvar rApply = (require('./_global').Reflect || {}).apply;\nvar fApply = Function.apply;\n// MS Edge argumentsList argument is optional\n$export($export.S + $export.F * !require('./_fails')(function () {\n  rApply(function () { /* empty */ });\n}), 'Reflect', {\n  apply: function apply(target, thisArgument, argumentsList) {\n    var T = aFunction(target);\n    var L = anObject(argumentsList);\n    return rApply ? rApply(T, thisArgument, L) : fApply.call(T, thisArgument, L);\n  }\n});\n","// 26.1.2 Reflect.construct(target, argumentsList [, newTarget])\nvar $export = require('./_export');\nvar create = require('./_object-create');\nvar aFunction = require('./_a-function');\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar fails = require('./_fails');\nvar bind = require('./_bind');\nvar rConstruct = (require('./_global').Reflect || {}).construct;\n\n// MS Edge supports only 2 arguments and argumentsList argument is optional\n// FF Nightly sets third argument as `new.target`, but does not create `this` from it\nvar NEW_TARGET_BUG = fails(function () {\n  function F() { /* empty */ }\n  return !(rConstruct(function () { /* empty */ }, [], F) instanceof F);\n});\nvar ARGS_BUG = !fails(function () {\n  rConstruct(function () { /* empty */ });\n});\n\n$export($export.S + $export.F * (NEW_TARGET_BUG || ARGS_BUG), 'Reflect', {\n  construct: function construct(Target, args /* , newTarget */) {\n    aFunction(Target);\n    anObject(args);\n    var newTarget = arguments.length < 3 ? Target : aFunction(arguments[2]);\n    if (ARGS_BUG && !NEW_TARGET_BUG) return rConstruct(Target, args, newTarget);\n    if (Target == newTarget) {\n      // w/o altered newTarget, optimization for 0-4 arguments\n      switch (args.length) {\n        case 0: return new Target();\n        case 1: return new Target(args[0]);\n        case 2: return new Target(args[0], args[1]);\n        case 3: return new Target(args[0], args[1], args[2]);\n        case 4: return new Target(args[0], args[1], args[2], args[3]);\n      }\n      // w/o altered newTarget, lot of arguments case\n      var $args = [null];\n      $args.push.apply($args, args);\n      return new (bind.apply(Target, $args))();\n    }\n    // with altered newTarget, not support built-in constructors\n    var proto = newTarget.prototype;\n    var instance = create(isObject(proto) ? proto : Object.prototype);\n    var result = Function.apply.call(Target, instance, args);\n    return isObject(result) ? result : instance;\n  }\n});\n","// 26.1.3 Reflect.defineProperty(target, propertyKey, attributes)\nvar dP = require('./_object-dp');\nvar $export = require('./_export');\nvar anObject = require('./_an-object');\nvar toPrimitive = require('./_to-primitive');\n\n// MS Edge has broken Reflect.defineProperty - throwing instead of returning false\n$export($export.S + $export.F * require('./_fails')(function () {\n  // eslint-disable-next-line no-undef\n  Reflect.defineProperty(dP.f({}, 1, { value: 1 }), 1, { value: 2 });\n}), 'Reflect', {\n  defineProperty: function defineProperty(target, propertyKey, attributes) {\n    anObject(target);\n    propertyKey = toPrimitive(propertyKey, true);\n    anObject(attributes);\n    try {\n      dP.f(target, propertyKey, attributes);\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n});\n","// 26.1.4 Reflect.deleteProperty(target, propertyKey)\nvar $export = require('./_export');\nvar gOPD = require('./_object-gopd').f;\nvar anObject = require('./_an-object');\n\n$export($export.S, 'Reflect', {\n  deleteProperty: function deleteProperty(target, propertyKey) {\n    var desc = gOPD(anObject(target), propertyKey);\n    return desc && !desc.configurable ? false : delete target[propertyKey];\n  }\n});\n","'use strict';\n// 26.1.5 Reflect.enumerate(target)\nvar $export = require('./_export');\nvar anObject = require('./_an-object');\nvar Enumerate = function (iterated) {\n  this._t = anObject(iterated); // target\n  this._i = 0;                  // next index\n  var keys = this._k = [];      // keys\n  var key;\n  for (key in iterated) keys.push(key);\n};\nrequire('./_iter-create')(Enumerate, 'Object', function () {\n  var that = this;\n  var keys = that._k;\n  var key;\n  do {\n    if (that._i >= keys.length) return { value: undefined, done: true };\n  } while (!((key = keys[that._i++]) in that._t));\n  return { value: key, done: false };\n});\n\n$export($export.S, 'Reflect', {\n  enumerate: function enumerate(target) {\n    return new Enumerate(target);\n  }\n});\n","// 26.1.7 Reflect.getOwnPropertyDescriptor(target, propertyKey)\nvar gOPD = require('./_object-gopd');\nvar $export = require('./_export');\nvar anObject = require('./_an-object');\n\n$export($export.S, 'Reflect', {\n  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(target, propertyKey) {\n    return gOPD.f(anObject(target), propertyKey);\n  }\n});\n","// 26.1.8 Reflect.getPrototypeOf(target)\nvar $export = require('./_export');\nvar getProto = require('./_object-gpo');\nvar anObject = require('./_an-object');\n\n$export($export.S, 'Reflect', {\n  getPrototypeOf: function getPrototypeOf(target) {\n    return getProto(anObject(target));\n  }\n});\n","// 26.1.6 Reflect.get(target, propertyKey [, receiver])\nvar gOPD = require('./_object-gopd');\nvar getPrototypeOf = require('./_object-gpo');\nvar has = require('./_has');\nvar $export = require('./_export');\nvar isObject = require('./_is-object');\nvar anObject = require('./_an-object');\n\nfunction get(target, propertyKey /* , receiver */) {\n  var receiver = arguments.length < 3 ? target : arguments[2];\n  var desc, proto;\n  if (anObject(target) === receiver) return target[propertyKey];\n  if (desc = gOPD.f(target, propertyKey)) return has(desc, 'value')\n    ? desc.value\n    : desc.get !== undefined\n      ? desc.get.call(receiver)\n      : undefined;\n  if (isObject(proto = getPrototypeOf(target))) return get(proto, propertyKey, receiver);\n}\n\n$export($export.S, 'Reflect', { get: get });\n","// 26.1.9 Reflect.has(target, propertyKey)\nvar $export = require('./_export');\n\n$export($export.S, 'Reflect', {\n  has: function has(target, propertyKey) {\n    return propertyKey in target;\n  }\n});\n","// 26.1.10 Reflect.isExtensible(target)\nvar $export = require('./_export');\nvar anObject = require('./_an-object');\nvar $isExtensible = Object.isExtensible;\n\n$export($export.S, 'Reflect', {\n  isExtensible: function isExtensible(target) {\n    anObject(target);\n    return $isExtensible ? $isExtensible(target) : true;\n  }\n});\n","// 26.1.11 Reflect.ownKeys(target)\nvar $export = require('./_export');\n\n$export($export.S, 'Reflect', { ownKeys: require('./_own-keys') });\n","// 26.1.12 Reflect.preventExtensions(target)\nvar $export = require('./_export');\nvar anObject = require('./_an-object');\nvar $preventExtensions = Object.preventExtensions;\n\n$export($export.S, 'Reflect', {\n  preventExtensions: function preventExtensions(target) {\n    anObject(target);\n    try {\n      if ($preventExtensions) $preventExtensions(target);\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n});\n","// 26.1.14 Reflect.setPrototypeOf(target, proto)\nvar $export = require('./_export');\nvar setProto = require('./_set-proto');\n\nif (setProto) $export($export.S, 'Reflect', {\n  setPrototypeOf: function setPrototypeOf(target, proto) {\n    setProto.check(target, proto);\n    try {\n      setProto.set(target, proto);\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n});\n","// 26.1.13 Reflect.set(target, propertyKey, V [, receiver])\nvar dP = require('./_object-dp');\nvar gOPD = require('./_object-gopd');\nvar getPrototypeOf = require('./_object-gpo');\nvar has = require('./_has');\nvar $export = require('./_export');\nvar createDesc = require('./_property-desc');\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\n\nfunction set(target, propertyKey, V /* , receiver */) {\n  var receiver = arguments.length < 4 ? target : arguments[3];\n  var ownDesc = gOPD.f(anObject(target), propertyKey);\n  var existingDescriptor, proto;\n  if (!ownDesc) {\n    if (isObject(proto = getPrototypeOf(target))) {\n      return set(proto, propertyKey, V, receiver);\n    }\n    ownDesc = createDesc(0);\n  }\n  if (has(ownDesc, 'value')) {\n    if (ownDesc.writable === false || !isObject(receiver)) return false;\n    if (existingDescriptor = gOPD.f(receiver, propertyKey)) {\n      if (existingDescriptor.get || existingDescriptor.set || existingDescriptor.writable === false) return false;\n      existingDescriptor.value = V;\n      dP.f(receiver, propertyKey, existingDescriptor);\n    } else dP.f(receiver, propertyKey, createDesc(0, V));\n    return true;\n  }\n  return ownDesc.set === undefined ? false : (ownDesc.set.call(receiver, V), true);\n}\n\n$export($export.S, 'Reflect', { set: set });\n","'use strict';\nvar strong = require('./_collection-strong');\nvar validate = require('./_validate-collection');\nvar SET = 'Set';\n\n// 23.2 Set Objects\nmodule.exports = require('./_collection')(SET, function (get) {\n  return function Set() { return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.2.3.1 Set.prototype.add(value)\n  add: function add(value) {\n    return strong.def(validate(this, SET), value = value === 0 ? 0 : value, value);\n  }\n}, strong);\n","'use strict';\nvar each = require('./_array-methods')(0);\nvar redefine = require('./_redefine');\nvar meta = require('./_meta');\nvar assign = require('./_object-assign');\nvar weak = require('./_collection-weak');\nvar isObject = require('./_is-object');\nvar fails = require('./_fails');\nvar validate = require('./_validate-collection');\nvar WEAK_MAP = 'WeakMap';\nvar getWeak = meta.getWeak;\nvar isExtensible = Object.isExtensible;\nvar uncaughtFrozenStore = weak.ufstore;\nvar tmp = {};\nvar InternalMap;\n\nvar wrapper = function (get) {\n  return function WeakMap() {\n    return get(this, arguments.length > 0 ? arguments[0] : undefined);\n  };\n};\n\nvar methods = {\n  // 23.3.3.3 WeakMap.prototype.get(key)\n  get: function get(key) {\n    if (isObject(key)) {\n      var data = getWeak(key);\n      if (data === true) return uncaughtFrozenStore(validate(this, WEAK_MAP)).get(key);\n      return data ? data[this._i] : undefined;\n    }\n  },\n  // 23.3.3.5 WeakMap.prototype.set(key, value)\n  set: function set(key, value) {\n    return weak.def(validate(this, WEAK_MAP), key, value);\n  }\n};\n\n// 23.3 WeakMap Objects\nvar $WeakMap = module.exports = require('./_collection')(WEAK_MAP, wrapper, methods, weak, true, true);\n\n// IE11 WeakMap frozen keys fix\nif (fails(function () { return new $WeakMap().set((Object.freeze || Object)(tmp), 7).get(tmp) != 7; })) {\n  InternalMap = weak.getConstructor(wrapper, WEAK_MAP);\n  assign(InternalMap.prototype, methods);\n  meta.NEED = true;\n  each(['delete', 'has', 'get', 'set'], function (key) {\n    var proto = $WeakMap.prototype;\n    var method = proto[key];\n    redefine(proto, key, function (a, b) {\n      // store frozen objects on internal weakmap shim\n      if (isObject(a) && !isExtensible(a)) {\n        if (!this._f) this._f = new InternalMap();\n        var result = this._f[key](a, b);\n        return key == 'set' ? this : result;\n      // store all the rest on native weakmap\n      } return method.call(this, a, b);\n    });\n  });\n}\n","var metadata = require('./_metadata');\nvar anObject = require('./_an-object');\nvar toMetaKey = metadata.key;\nvar ordinaryDefineOwnMetadata = metadata.set;\n\nmetadata.exp({ defineMetadata: function defineMetadata(metadataKey, metadataValue, target, targetKey) {\n  ordinaryDefineOwnMetadata(metadataKey, metadataValue, anObject(target), toMetaKey(targetKey));\n} });\n","var metadata = require('./_metadata');\nvar anObject = require('./_an-object');\nvar toMetaKey = metadata.key;\nvar getOrCreateMetadataMap = metadata.map;\nvar store = metadata.store;\n\nmetadata.exp({ deleteMetadata: function deleteMetadata(metadataKey, target /* , targetKey */) {\n  var targetKey = arguments.length < 3 ? undefined : toMetaKey(arguments[2]);\n  var metadataMap = getOrCreateMetadataMap(anObject(target), targetKey, false);\n  if (metadataMap === undefined || !metadataMap['delete'](metadataKey)) return false;\n  if (metadataMap.size) return true;\n  var targetMetadata = store.get(target);\n  targetMetadata['delete'](targetKey);\n  return !!targetMetadata.size || store['delete'](target);\n} });\n","var Set = require('./es6.set');\nvar from = require('./_array-from-iterable');\nvar metadata = require('./_metadata');\nvar anObject = require('./_an-object');\nvar getPrototypeOf = require('./_object-gpo');\nvar ordinaryOwnMetadataKeys = metadata.keys;\nvar toMetaKey = metadata.key;\n\nvar ordinaryMetadataKeys = function (O, P) {\n  var oKeys = ordinaryOwnMetadataKeys(O, P);\n  var parent = getPrototypeOf(O);\n  if (parent === null) return oKeys;\n  var pKeys = ordinaryMetadataKeys(parent, P);\n  return pKeys.length ? oKeys.length ? from(new Set(oKeys.concat(pKeys))) : pKeys : oKeys;\n};\n\nmetadata.exp({ getMetadataKeys: function getMetadataKeys(target /* , targetKey */) {\n  return ordinaryMetadataKeys(anObject(target), arguments.length < 2 ? undefined : toMetaKey(arguments[1]));\n} });\n","var metadata = require('./_metadata');\nvar anObject = require('./_an-object');\nvar getPrototypeOf = require('./_object-gpo');\nvar ordinaryHasOwnMetadata = metadata.has;\nvar ordinaryGetOwnMetadata = metadata.get;\nvar toMetaKey = metadata.key;\n\nvar ordinaryGetMetadata = function (MetadataKey, O, P) {\n  var hasOwn = ordinaryHasOwnMetadata(MetadataKey, O, P);\n  if (hasOwn) return ordinaryGetOwnMetadata(MetadataKey, O, P);\n  var parent = getPrototypeOf(O);\n  return parent !== null ? ordinaryGetMetadata(MetadataKey, parent, P) : undefined;\n};\n\nmetadata.exp({ getMetadata: function getMetadata(metadataKey, target /* , targetKey */) {\n  return ordinaryGetMetadata(metadataKey, anObject(target), arguments.length < 3 ? undefined : toMetaKey(arguments[2]));\n} });\n","var metadata = require('./_metadata');\nvar anObject = require('./_an-object');\nvar ordinaryOwnMetadataKeys = metadata.keys;\nvar toMetaKey = metadata.key;\n\nmetadata.exp({ getOwnMetadataKeys: function getOwnMetadataKeys(target /* , targetKey */) {\n  return ordinaryOwnMetadataKeys(anObject(target), arguments.length < 2 ? undefined : toMetaKey(arguments[1]));\n} });\n","var metadata = require('./_metadata');\nvar anObject = require('./_an-object');\nvar ordinaryGetOwnMetadata = metadata.get;\nvar toMetaKey = metadata.key;\n\nmetadata.exp({ getOwnMetadata: function getOwnMetadata(metadataKey, target /* , targetKey */) {\n  return ordinaryGetOwnMetadata(metadataKey, anObject(target)\n    , arguments.length < 3 ? undefined : toMetaKey(arguments[2]));\n} });\n","var metadata = require('./_metadata');\nvar anObject = require('./_an-object');\nvar getPrototypeOf = require('./_object-gpo');\nvar ordinaryHasOwnMetadata = metadata.has;\nvar toMetaKey = metadata.key;\n\nvar ordinaryHasMetadata = function (MetadataKey, O, P) {\n  var hasOwn = ordinaryHasOwnMetadata(MetadataKey, O, P);\n  if (hasOwn) return true;\n  var parent = getPrototypeOf(O);\n  return parent !== null ? ordinaryHasMetadata(MetadataKey, parent, P) : false;\n};\n\nmetadata.exp({ hasMetadata: function hasMetadata(metadataKey, target /* , targetKey */) {\n  return ordinaryHasMetadata(metadataKey, anObject(target), arguments.length < 3 ? undefined : toMetaKey(arguments[2]));\n} });\n","var metadata = require('./_metadata');\nvar anObject = require('./_an-object');\nvar ordinaryHasOwnMetadata = metadata.has;\nvar toMetaKey = metadata.key;\n\nmetadata.exp({ hasOwnMetadata: function hasOwnMetadata(metadataKey, target /* , targetKey */) {\n  return ordinaryHasOwnMetadata(metadataKey, anObject(target)\n    , arguments.length < 3 ? undefined : toMetaKey(arguments[2]));\n} });\n","var $metadata = require('./_metadata');\nvar anObject = require('./_an-object');\nvar aFunction = require('./_a-function');\nvar toMetaKey = $metadata.key;\nvar ordinaryDefineOwnMetadata = $metadata.set;\n\n$metadata.exp({ metadata: function metadata(metadataKey, metadataValue) {\n  return function decorator(target, targetKey) {\n    ordinaryDefineOwnMetadata(\n      metadataKey, metadataValue,\n      (targetKey !== undefined ? anObject : aFunction)(target),\n      toMetaKey(targetKey)\n    );\n  };\n} });\n","/**\n* @license\n* Copyright Google Inc. All Rights Reserved.\n*\n* Use of this source code is governed by an MIT-style license that can be\n* found in the LICENSE file at https://angular.io/license\n*/\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(factory());\n}(this, (function () { 'use strict';\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar Zone$1 = (function (global) {\n    var FUNCTION = 'function';\n    var performance = global['performance'];\n    function mark(name) {\n        performance && performance['mark'] && performance['mark'](name);\n    }\n    function performanceMeasure(name, label) {\n        performance && performance['measure'] && performance['measure'](name, label);\n    }\n    mark('Zone');\n    if (global['Zone']) {\n        throw new Error('Zone already loaded.');\n    }\n    var Zone = /** @class */ (function () {\n        function Zone(parent, zoneSpec) {\n            this._properties = null;\n            this._parent = parent;\n            this._name = zoneSpec ? zoneSpec.name || 'unnamed' : '<root>';\n            this._properties = zoneSpec && zoneSpec.properties || {};\n            this._zoneDelegate =\n                new ZoneDelegate(this, this._parent && this._parent._zoneDelegate, zoneSpec);\n        }\n        Zone.assertZonePatched = function () {\n            if (global['Promise'] !== patches['ZoneAwarePromise']) {\n                throw new Error('Zone.js has detected that ZoneAwarePromise `(window|global).Promise` ' +\n                    'has been overwritten.\\n' +\n                    'Most likely cause is that a Promise polyfill has been loaded ' +\n                    'after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. ' +\n                    'If you must load one, do so before loading zone.js.)');\n            }\n        };\n        Object.defineProperty(Zone, \"root\", {\n            get: function () {\n                var zone = Zone.current;\n                while (zone.parent) {\n                    zone = zone.parent;\n                }\n                return zone;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(Zone, \"current\", {\n            get: function () {\n                return _currentZoneFrame.zone;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(Zone, \"currentTask\", {\n            get: function () {\n                return _currentTask;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Zone.__load_patch = function (name, fn) {\n            if (patches.hasOwnProperty(name)) {\n                throw Error('Already loaded patch: ' + name);\n            }\n            else if (!global['__Zone_disable_' + name]) {\n                var perfName = 'Zone:' + name;\n                mark(perfName);\n                patches[name] = fn(global, Zone, _api);\n                performanceMeasure(perfName, perfName);\n            }\n        };\n        Object.defineProperty(Zone.prototype, \"parent\", {\n            get: function () {\n                return this._parent;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(Zone.prototype, \"name\", {\n            get: function () {\n                return this._name;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Zone.prototype.get = function (key) {\n            var zone = this.getZoneWith(key);\n            if (zone)\n                return zone._properties[key];\n        };\n        Zone.prototype.getZoneWith = function (key) {\n            var current = this;\n            while (current) {\n                if (current._properties.hasOwnProperty(key)) {\n                    return current;\n                }\n                current = current._parent;\n            }\n            return null;\n        };\n        Zone.prototype.fork = function (zoneSpec) {\n            if (!zoneSpec)\n                throw new Error('ZoneSpec required!');\n            return this._zoneDelegate.fork(this, zoneSpec);\n        };\n        Zone.prototype.wrap = function (callback, source) {\n            if (typeof callback !== FUNCTION) {\n                throw new Error('Expecting function got: ' + callback);\n            }\n            var _callback = this._zoneDelegate.intercept(this, callback, source);\n            var zone = this;\n            return function () {\n                return zone.runGuarded(_callback, this, arguments, source);\n            };\n        };\n        Zone.prototype.run = function (callback, applyThis, applyArgs, source) {\n            if (applyThis === void 0) { applyThis = undefined; }\n            if (applyArgs === void 0) { applyArgs = null; }\n            if (source === void 0) { source = null; }\n            _currentZoneFrame = { parent: _currentZoneFrame, zone: this };\n            try {\n                return this._zoneDelegate.invoke(this, callback, applyThis, applyArgs, source);\n            }\n            finally {\n                _currentZoneFrame = _currentZoneFrame.parent;\n            }\n        };\n        Zone.prototype.runGuarded = function (callback, applyThis, applyArgs, source) {\n            if (applyThis === void 0) { applyThis = null; }\n            if (applyArgs === void 0) { applyArgs = null; }\n            if (source === void 0) { source = null; }\n            _currentZoneFrame = { parent: _currentZoneFrame, zone: this };\n            try {\n                try {\n                    return this._zoneDelegate.invoke(this, callback, applyThis, applyArgs, source);\n                }\n                catch (error) {\n                    if (this._zoneDelegate.handleError(this, error)) {\n                        throw error;\n                    }\n                }\n            }\n            finally {\n                _currentZoneFrame = _currentZoneFrame.parent;\n            }\n        };\n        Zone.prototype.runTask = function (task, applyThis, applyArgs) {\n            if (task.zone != this) {\n                throw new Error('A task can only be run in the zone of creation! (Creation: ' +\n                    (task.zone || NO_ZONE).name + '; Execution: ' + this.name + ')');\n            }\n            // https://github.com/angular/zone.js/issues/778, sometimes eventTask\n            // will run in notScheduled(canceled) state, we should not try to\n            // run such kind of task but just return\n            // we have to define an variable here, if not\n            // typescript compiler will complain below\n            var isNotScheduled = task.state === notScheduled;\n            if (isNotScheduled && task.type === eventTask) {\n                return;\n            }\n            var reEntryGuard = task.state != running;\n            reEntryGuard && task._transitionTo(running, scheduled);\n            task.runCount++;\n            var previousTask = _currentTask;\n            _currentTask = task;\n            _currentZoneFrame = { parent: _currentZoneFrame, zone: this };\n            try {\n                if (task.type == macroTask && task.data && !task.data.isPeriodic) {\n                    task.cancelFn = null;\n                }\n                try {\n                    return this._zoneDelegate.invokeTask(this, task, applyThis, applyArgs);\n                }\n                catch (error) {\n                    if (this._zoneDelegate.handleError(this, error)) {\n                        throw error;\n                    }\n                }\n            }\n            finally {\n                // if the task's state is notScheduled or unknown, then it has already been cancelled\n                // we should not reset the state to scheduled\n                if (task.state !== notScheduled && task.state !== unknown) {\n                    if (task.type == eventTask || (task.data && task.data.isPeriodic)) {\n                        reEntryGuard && task._transitionTo(scheduled, running);\n                    }\n                    else {\n                        task.runCount = 0;\n                        this._updateTaskCount(task, -1);\n                        reEntryGuard &&\n                            task._transitionTo(notScheduled, running, notScheduled);\n                    }\n                }\n                _currentZoneFrame = _currentZoneFrame.parent;\n                _currentTask = previousTask;\n            }\n        };\n        Zone.prototype.scheduleTask = function (task) {\n            if (task.zone && task.zone !== this) {\n                // check if the task was rescheduled, the newZone\n                // should not be the children of the original zone\n                var newZone = this;\n                while (newZone) {\n                    if (newZone === task.zone) {\n                        throw Error(\"can not reschedule task to \" + this\n                            .name + \" which is descendants of the original zone \" + task.zone.name);\n                    }\n                    newZone = newZone.parent;\n                }\n            }\n            task._transitionTo(scheduling, notScheduled);\n            var zoneDelegates = [];\n            task._zoneDelegates = zoneDelegates;\n            task._zone = this;\n            try {\n                task = this._zoneDelegate.scheduleTask(this, task);\n            }\n            catch (err) {\n                // should set task's state to unknown when scheduleTask throw error\n                // because the err may from reschedule, so the fromState maybe notScheduled\n                task._transitionTo(unknown, scheduling, notScheduled);\n                // TODO: @JiaLiPassion, should we check the result from handleError?\n                this._zoneDelegate.handleError(this, err);\n                throw err;\n            }\n            if (task._zoneDelegates === zoneDelegates) {\n                // we have to check because internally the delegate can reschedule the task.\n                this._updateTaskCount(task, 1);\n            }\n            if (task.state == scheduling) {\n                task._transitionTo(scheduled, scheduling);\n            }\n            return task;\n        };\n        Zone.prototype.scheduleMicroTask = function (source, callback, data, customSchedule) {\n            return this.scheduleTask(new ZoneTask(microTask, source, callback, data, customSchedule, null));\n        };\n        Zone.prototype.scheduleMacroTask = function (source, callback, data, customSchedule, customCancel) {\n            return this.scheduleTask(new ZoneTask(macroTask, source, callback, data, customSchedule, customCancel));\n        };\n        Zone.prototype.scheduleEventTask = function (source, callback, data, customSchedule, customCancel) {\n            return this.scheduleTask(new ZoneTask(eventTask, source, callback, data, customSchedule, customCancel));\n        };\n        Zone.prototype.cancelTask = function (task) {\n            if (task.zone != this)\n                throw new Error('A task can only be cancelled in the zone of creation! (Creation: ' +\n                    (task.zone || NO_ZONE).name + '; Execution: ' + this.name + ')');\n            task._transitionTo(canceling, scheduled, running);\n            try {\n                this._zoneDelegate.cancelTask(this, task);\n            }\n            catch (err) {\n                // if error occurs when cancelTask, transit the state to unknown\n                task._transitionTo(unknown, canceling);\n                this._zoneDelegate.handleError(this, err);\n                throw err;\n            }\n            this._updateTaskCount(task, -1);\n            task._transitionTo(notScheduled, canceling);\n            task.runCount = 0;\n            return task;\n        };\n        Zone.prototype._updateTaskCount = function (task, count) {\n            var zoneDelegates = task._zoneDelegates;\n            if (count == -1) {\n                task._zoneDelegates = null;\n            }\n            for (var i = 0; i < zoneDelegates.length; i++) {\n                zoneDelegates[i]._updateTaskCount(task.type, count);\n            }\n        };\n        Zone.__symbol__ = __symbol__;\n        return Zone;\n    }());\n    var DELEGATE_ZS = {\n        name: '',\n        onHasTask: function (delegate, _, target, hasTaskState) {\n            return delegate.hasTask(target, hasTaskState);\n        },\n        onScheduleTask: function (delegate, _, target, task) {\n            return delegate.scheduleTask(target, task);\n        },\n        onInvokeTask: function (delegate, _, target, task, applyThis, applyArgs) { return delegate.invokeTask(target, task, applyThis, applyArgs); },\n        onCancelTask: function (delegate, _, target, task) {\n            return delegate.cancelTask(target, task);\n        }\n    };\n    var ZoneDelegate = /** @class */ (function () {\n        function ZoneDelegate(zone, parentDelegate, zoneSpec) {\n            this._taskCounts = { 'microTask': 0, 'macroTask': 0, 'eventTask': 0 };\n            this.zone = zone;\n            this._parentDelegate = parentDelegate;\n            this._forkZS = zoneSpec && (zoneSpec && zoneSpec.onFork ? zoneSpec : parentDelegate._forkZS);\n            this._forkDlgt = zoneSpec && (zoneSpec.onFork ? parentDelegate : parentDelegate._forkDlgt);\n            this._forkCurrZone = zoneSpec && (zoneSpec.onFork ? this.zone : parentDelegate.zone);\n            this._interceptZS =\n                zoneSpec && (zoneSpec.onIntercept ? zoneSpec : parentDelegate._interceptZS);\n            this._interceptDlgt =\n                zoneSpec && (zoneSpec.onIntercept ? parentDelegate : parentDelegate._interceptDlgt);\n            this._interceptCurrZone =\n                zoneSpec && (zoneSpec.onIntercept ? this.zone : parentDelegate.zone);\n            this._invokeZS = zoneSpec && (zoneSpec.onInvoke ? zoneSpec : parentDelegate._invokeZS);\n            this._invokeDlgt =\n                zoneSpec && (zoneSpec.onInvoke ? parentDelegate : parentDelegate._invokeDlgt);\n            this._invokeCurrZone = zoneSpec && (zoneSpec.onInvoke ? this.zone : parentDelegate.zone);\n            this._handleErrorZS =\n                zoneSpec && (zoneSpec.onHandleError ? zoneSpec : parentDelegate._handleErrorZS);\n            this._handleErrorDlgt =\n                zoneSpec && (zoneSpec.onHandleError ? parentDelegate : parentDelegate._handleErrorDlgt);\n            this._handleErrorCurrZone =\n                zoneSpec && (zoneSpec.onHandleError ? this.zone : parentDelegate.zone);\n            this._scheduleTaskZS =\n                zoneSpec && (zoneSpec.onScheduleTask ? zoneSpec : parentDelegate._scheduleTaskZS);\n            this._scheduleTaskDlgt =\n                zoneSpec && (zoneSpec.onScheduleTask ? parentDelegate : parentDelegate._scheduleTaskDlgt);\n            this._scheduleTaskCurrZone =\n                zoneSpec && (zoneSpec.onScheduleTask ? this.zone : parentDelegate.zone);\n            this._invokeTaskZS =\n                zoneSpec && (zoneSpec.onInvokeTask ? zoneSpec : parentDelegate._invokeTaskZS);\n            this._invokeTaskDlgt =\n                zoneSpec && (zoneSpec.onInvokeTask ? parentDelegate : parentDelegate._invokeTaskDlgt);\n            this._invokeTaskCurrZone =\n                zoneSpec && (zoneSpec.onInvokeTask ? this.zone : parentDelegate.zone);\n            this._cancelTaskZS =\n                zoneSpec && (zoneSpec.onCancelTask ? zoneSpec : parentDelegate._cancelTaskZS);\n            this._cancelTaskDlgt =\n                zoneSpec && (zoneSpec.onCancelTask ? parentDelegate : parentDelegate._cancelTaskDlgt);\n            this._cancelTaskCurrZone =\n                zoneSpec && (zoneSpec.onCancelTask ? this.zone : parentDelegate.zone);\n            this._hasTaskZS = null;\n            this._hasTaskDlgt = null;\n            this._hasTaskDlgtOwner = null;\n            this._hasTaskCurrZone = null;\n            var zoneSpecHasTask = zoneSpec && zoneSpec.onHasTask;\n            var parentHasTask = parentDelegate && parentDelegate._hasTaskZS;\n            if (zoneSpecHasTask || parentHasTask) {\n                // If we need to report hasTask, than this ZS needs to do ref counting on tasks. In such\n                // a case all task related interceptors must go through this ZD. We can't short circuit it.\n                this._hasTaskZS = zoneSpecHasTask ? zoneSpec : DELEGATE_ZS;\n                this._hasTaskDlgt = parentDelegate;\n                this._hasTaskDlgtOwner = this;\n                this._hasTaskCurrZone = zone;\n                if (!zoneSpec.onScheduleTask) {\n                    this._scheduleTaskZS = DELEGATE_ZS;\n                    this._scheduleTaskDlgt = parentDelegate;\n                    this._scheduleTaskCurrZone = this.zone;\n                }\n                if (!zoneSpec.onInvokeTask) {\n                    this._invokeTaskZS = DELEGATE_ZS;\n                    this._invokeTaskDlgt = parentDelegate;\n                    this._invokeTaskCurrZone = this.zone;\n                }\n                if (!zoneSpec.onCancelTask) {\n                    this._cancelTaskZS = DELEGATE_ZS;\n                    this._cancelTaskDlgt = parentDelegate;\n                    this._cancelTaskCurrZone = this.zone;\n                }\n            }\n        }\n        ZoneDelegate.prototype.fork = function (targetZone, zoneSpec) {\n            return this._forkZS ? this._forkZS.onFork(this._forkDlgt, this.zone, targetZone, zoneSpec) :\n                new Zone(targetZone, zoneSpec);\n        };\n        ZoneDelegate.prototype.intercept = function (targetZone, callback, source) {\n            return this._interceptZS ?\n                this._interceptZS.onIntercept(this._interceptDlgt, this._interceptCurrZone, targetZone, callback, source) :\n                callback;\n        };\n        ZoneDelegate.prototype.invoke = function (targetZone, callback, applyThis, applyArgs, source) {\n            return this._invokeZS ?\n                this._invokeZS.onInvoke(this._invokeDlgt, this._invokeCurrZone, targetZone, callback, applyThis, applyArgs, source) :\n                callback.apply(applyThis, applyArgs);\n        };\n        ZoneDelegate.prototype.handleError = function (targetZone, error) {\n            return this._handleErrorZS ?\n                this._handleErrorZS.onHandleError(this._handleErrorDlgt, this._handleErrorCurrZone, targetZone, error) :\n                true;\n        };\n        ZoneDelegate.prototype.scheduleTask = function (targetZone, task) {\n            var returnTask = task;\n            if (this._scheduleTaskZS) {\n                if (this._hasTaskZS) {\n                    returnTask._zoneDelegates.push(this._hasTaskDlgtOwner);\n                }\n                returnTask = this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt, this._scheduleTaskCurrZone, targetZone, task);\n                if (!returnTask)\n                    returnTask = task;\n            }\n            else {\n                if (task.scheduleFn) {\n                    task.scheduleFn(task);\n                }\n                else if (task.type == microTask) {\n                    scheduleMicroTask(task);\n                }\n                else {\n                    throw new Error('Task is missing scheduleFn.');\n                }\n            }\n            return returnTask;\n        };\n        ZoneDelegate.prototype.invokeTask = function (targetZone, task, applyThis, applyArgs) {\n            return this._invokeTaskZS ?\n                this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt, this._invokeTaskCurrZone, targetZone, task, applyThis, applyArgs) :\n                task.callback.apply(applyThis, applyArgs);\n        };\n        ZoneDelegate.prototype.cancelTask = function (targetZone, task) {\n            var value;\n            if (this._cancelTaskZS) {\n                value = this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt, this._cancelTaskCurrZone, targetZone, task);\n            }\n            else {\n                if (!task.cancelFn) {\n                    throw Error('Task is not cancelable');\n                }\n                value = task.cancelFn(task);\n            }\n            return value;\n        };\n        ZoneDelegate.prototype.hasTask = function (targetZone, isEmpty) {\n            // hasTask should not throw error so other ZoneDelegate\n            // can still trigger hasTask callback\n            try {\n                return this._hasTaskZS &&\n                    this._hasTaskZS.onHasTask(this._hasTaskDlgt, this._hasTaskCurrZone, targetZone, isEmpty);\n            }\n            catch (err) {\n                this.handleError(targetZone, err);\n            }\n        };\n        ZoneDelegate.prototype._updateTaskCount = function (type, count) {\n            var counts = this._taskCounts;\n            var prev = counts[type];\n            var next = counts[type] = prev + count;\n            if (next < 0) {\n                throw new Error('More tasks executed then were scheduled.');\n            }\n            if (prev == 0 || next == 0) {\n                var isEmpty = {\n                    microTask: counts['microTask'] > 0,\n                    macroTask: counts['macroTask'] > 0,\n                    eventTask: counts['eventTask'] > 0,\n                    change: type\n                };\n                this.hasTask(this.zone, isEmpty);\n            }\n        };\n        return ZoneDelegate;\n    }());\n    var ZoneTask = /** @class */ (function () {\n        function ZoneTask(type, source, callback, options, scheduleFn, cancelFn) {\n            this._zone = null;\n            this.runCount = 0;\n            this._zoneDelegates = null;\n            this._state = 'notScheduled';\n            this.type = type;\n            this.source = source;\n            this.data = options;\n            this.scheduleFn = scheduleFn;\n            this.cancelFn = cancelFn;\n            this.callback = callback;\n            var self = this;\n            // TODO: @JiaLiPassion options should have interface\n            if (type === eventTask && options && options.useG) {\n                this.invoke = ZoneTask.invokeTask;\n            }\n            else {\n                this.invoke = function () {\n                    return ZoneTask.invokeTask.call(global, self, this, arguments);\n                };\n            }\n        }\n        ZoneTask.invokeTask = function (task, target, args) {\n            if (!task) {\n                task = this;\n            }\n            _numberOfNestedTaskFrames++;\n            try {\n                task.runCount++;\n                return task.zone.runTask(task, target, args);\n            }\n            finally {\n                if (_numberOfNestedTaskFrames == 1) {\n                    drainMicroTaskQueue();\n                }\n                _numberOfNestedTaskFrames--;\n            }\n        };\n        Object.defineProperty(ZoneTask.prototype, \"zone\", {\n            get: function () {\n                return this._zone;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(ZoneTask.prototype, \"state\", {\n            get: function () {\n                return this._state;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        ZoneTask.prototype.cancelScheduleRequest = function () {\n            this._transitionTo(notScheduled, scheduling);\n        };\n        ZoneTask.prototype._transitionTo = function (toState, fromState1, fromState2) {\n            if (this._state === fromState1 || this._state === fromState2) {\n                this._state = toState;\n                if (toState == notScheduled) {\n                    this._zoneDelegates = null;\n                }\n            }\n            else {\n                throw new Error(this.type + \" '\" + this.source + \"': can not transition to '\" + toState + \"', expecting state '\" + fromState1 + \"'\" + (fromState2 ?\n                    ' or \\'' + fromState2 + '\\'' :\n                    '') + \", was '\" + this._state + \"'.\");\n            }\n        };\n        ZoneTask.prototype.toString = function () {\n            if (this.data && typeof this.data.handleId !== 'undefined') {\n                return this.data.handleId;\n            }\n            else {\n                return Object.prototype.toString.call(this);\n            }\n        };\n        // add toJSON method to prevent cyclic error when\n        // call JSON.stringify(zoneTask)\n        ZoneTask.prototype.toJSON = function () {\n            return {\n                type: this.type,\n                state: this.state,\n                source: this.source,\n                zone: this.zone.name,\n                runCount: this.runCount\n            };\n        };\n        return ZoneTask;\n    }());\n    //////////////////////////////////////////////////////\n    //////////////////////////////////////////////////////\n    ///  MICROTASK QUEUE\n    //////////////////////////////////////////////////////\n    //////////////////////////////////////////////////////\n    var symbolSetTimeout = __symbol__('setTimeout');\n    var symbolPromise = __symbol__('Promise');\n    var symbolThen = __symbol__('then');\n    var _microTaskQueue = [];\n    var _isDrainingMicrotaskQueue = false;\n    var nativeMicroTaskQueuePromise;\n    function scheduleMicroTask(task) {\n        // if we are not running in any task, and there has not been anything scheduled\n        // we must bootstrap the initial task creation by manually scheduling the drain\n        if (_numberOfNestedTaskFrames === 0 && _microTaskQueue.length === 0) {\n            // We are not running in Task, so we need to kickstart the microtask queue.\n            if (!nativeMicroTaskQueuePromise) {\n                if (global[symbolPromise]) {\n                    nativeMicroTaskQueuePromise = global[symbolPromise].resolve(0);\n                }\n            }\n            if (nativeMicroTaskQueuePromise) {\n                nativeMicroTaskQueuePromise[symbolThen](drainMicroTaskQueue);\n            }\n            else {\n                global[symbolSetTimeout](drainMicroTaskQueue, 0);\n            }\n        }\n        task && _microTaskQueue.push(task);\n    }\n    function drainMicroTaskQueue() {\n        if (!_isDrainingMicrotaskQueue) {\n            _isDrainingMicrotaskQueue = true;\n            while (_microTaskQueue.length) {\n                var queue = _microTaskQueue;\n                _microTaskQueue = [];\n                for (var i = 0; i < queue.length; i++) {\n                    var task = queue[i];\n                    try {\n                        task.zone.runTask(task, null, null);\n                    }\n                    catch (error) {\n                        _api.onUnhandledError(error);\n                    }\n                }\n            }\n            _api.microtaskDrainDone();\n            _isDrainingMicrotaskQueue = false;\n        }\n    }\n    //////////////////////////////////////////////////////\n    //////////////////////////////////////////////////////\n    ///  BOOTSTRAP\n    //////////////////////////////////////////////////////\n    //////////////////////////////////////////////////////\n    var NO_ZONE = { name: 'NO ZONE' };\n    var notScheduled = 'notScheduled', scheduling = 'scheduling', scheduled = 'scheduled', running = 'running', canceling = 'canceling', unknown = 'unknown';\n    var microTask = 'microTask', macroTask = 'macroTask', eventTask = 'eventTask';\n    var patches = {};\n    var _api = {\n        symbol: __symbol__,\n        currentZoneFrame: function () { return _currentZoneFrame; },\n        onUnhandledError: noop,\n        microtaskDrainDone: noop,\n        scheduleMicroTask: scheduleMicroTask,\n        showUncaughtError: function () { return !Zone[__symbol__('ignoreConsoleErrorUncaughtError')]; },\n        patchEventTarget: function () { return []; },\n        patchOnProperties: noop,\n        patchMethod: function () { return noop; },\n        bindArguments: function () { return null; },\n        setNativePromise: function (NativePromise) {\n            // sometimes NativePromise.resolve static function\n            // is not ready yet, (such as core-js/es6.promise)\n            // so we need to check here.\n            if (NativePromise && typeof NativePromise.resolve === FUNCTION) {\n                nativeMicroTaskQueuePromise = NativePromise.resolve(0);\n            }\n        },\n    };\n    var _currentZoneFrame = { parent: null, zone: new Zone(null, null) };\n    var _currentTask = null;\n    var _numberOfNestedTaskFrames = 0;\n    function noop() { }\n    function __symbol__(name) {\n        return '__zone_symbol__' + name;\n    }\n    performanceMeasure('Zone', 'Zone');\n    return global['Zone'] = Zone;\n})(typeof window !== 'undefined' && window || typeof self !== 'undefined' && self || global);\n\nZone.__load_patch('ZoneAwarePromise', function (global, Zone, api) {\n    var ObjectGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n    var ObjectDefineProperty = Object.defineProperty;\n    function readableObjectToString(obj) {\n        if (obj && obj.toString === Object.prototype.toString) {\n            var className = obj.constructor && obj.constructor.name;\n            return (className ? className : '') + ': ' + JSON.stringify(obj);\n        }\n        return obj ? obj.toString() : Object.prototype.toString.call(obj);\n    }\n    var __symbol__ = api.symbol;\n    var _uncaughtPromiseErrors = [];\n    var symbolPromise = __symbol__('Promise');\n    var symbolThen = __symbol__('then');\n    var creationTrace = '__creationTrace__';\n    api.onUnhandledError = function (e) {\n        if (api.showUncaughtError()) {\n            var rejection = e && e.rejection;\n            if (rejection) {\n                console.error('Unhandled Promise rejection:', rejection instanceof Error ? rejection.message : rejection, '; Zone:', e.zone.name, '; Task:', e.task && e.task.source, '; Value:', rejection, rejection instanceof Error ? rejection.stack : undefined);\n            }\n            else {\n                console.error(e);\n            }\n        }\n    };\n    api.microtaskDrainDone = function () {\n        while (_uncaughtPromiseErrors.length) {\n            var _loop_1 = function () {\n                var uncaughtPromiseError = _uncaughtPromiseErrors.shift();\n                try {\n                    uncaughtPromiseError.zone.runGuarded(function () {\n                        throw uncaughtPromiseError;\n                    });\n                }\n                catch (error) {\n                    handleUnhandledRejection(error);\n                }\n            };\n            while (_uncaughtPromiseErrors.length) {\n                _loop_1();\n            }\n        }\n    };\n    var UNHANDLED_PROMISE_REJECTION_HANDLER_SYMBOL = __symbol__('unhandledPromiseRejectionHandler');\n    function handleUnhandledRejection(e) {\n        api.onUnhandledError(e);\n        try {\n            var handler = Zone[UNHANDLED_PROMISE_REJECTION_HANDLER_SYMBOL];\n            if (handler && typeof handler === 'function') {\n                handler.call(this, e);\n            }\n        }\n        catch (err) {\n        }\n    }\n    function isThenable(value) {\n        return value && value.then;\n    }\n    function forwardResolution(value) {\n        return value;\n    }\n    function forwardRejection(rejection) {\n        return ZoneAwarePromise.reject(rejection);\n    }\n    var symbolState = __symbol__('state');\n    var symbolValue = __symbol__('value');\n    var symbolFinally = __symbol__('finally');\n    var symbolParentPromiseValue = __symbol__('parentPromiseValue');\n    var symbolParentPromiseState = __symbol__('parentPromiseState');\n    var source = 'Promise.then';\n    var UNRESOLVED = null;\n    var RESOLVED = true;\n    var REJECTED = false;\n    var REJECTED_NO_CATCH = 0;\n    function makeResolver(promise, state) {\n        return function (v) {\n            try {\n                resolvePromise(promise, state, v);\n            }\n            catch (err) {\n                resolvePromise(promise, false, err);\n            }\n            // Do not return value or you will break the Promise spec.\n        };\n    }\n    var once = function () {\n        var wasCalled = false;\n        return function wrapper(wrappedFunction) {\n            return function () {\n                if (wasCalled) {\n                    return;\n                }\n                wasCalled = true;\n                wrappedFunction.apply(null, arguments);\n            };\n        };\n    };\n    var TYPE_ERROR = 'Promise resolved with itself';\n    var CURRENT_TASK_TRACE_SYMBOL = __symbol__('currentTaskTrace');\n    // Promise Resolution\n    function resolvePromise(promise, state, value) {\n        var onceWrapper = once();\n        if (promise === value) {\n            throw new TypeError(TYPE_ERROR);\n        }\n        if (promise[symbolState] === UNRESOLVED) {\n            // should only get value.then once based on promise spec.\n            var then = null;\n            try {\n                if (typeof value === 'object' || typeof value === 'function') {\n                    then = value && value.then;\n                }\n            }\n            catch (err) {\n                onceWrapper(function () {\n                    resolvePromise(promise, false, err);\n                })();\n                return promise;\n            }\n            // if (value instanceof ZoneAwarePromise) {\n            if (state !== REJECTED && value instanceof ZoneAwarePromise &&\n                value.hasOwnProperty(symbolState) && value.hasOwnProperty(symbolValue) &&\n                value[symbolState] !== UNRESOLVED) {\n                clearRejectedNoCatch(value);\n                resolvePromise(promise, value[symbolState], value[symbolValue]);\n            }\n            else if (state !== REJECTED && typeof then === 'function') {\n                try {\n                    then.call(value, onceWrapper(makeResolver(promise, state)), onceWrapper(makeResolver(promise, false)));\n                }\n                catch (err) {\n                    onceWrapper(function () {\n                        resolvePromise(promise, false, err);\n                    })();\n                }\n            }\n            else {\n                promise[symbolState] = state;\n                var queue = promise[symbolValue];\n                promise[symbolValue] = value;\n                if (promise[symbolFinally] === symbolFinally) {\n                    // the promise is generated by Promise.prototype.finally          \n                    if (state === RESOLVED) {\n                        // the state is resolved, should ignore the value\n                        // and use parent promise value\n                        promise[symbolState] = promise[symbolParentPromiseState];\n                        promise[symbolValue] = promise[symbolParentPromiseValue];\n                    }\n                }\n                // record task information in value when error occurs, so we can\n                // do some additional work such as render longStackTrace\n                if (state === REJECTED && value instanceof Error) {\n                    // check if longStackTraceZone is here\n                    var trace = Zone.currentTask && Zone.currentTask.data &&\n                        Zone.currentTask.data[creationTrace];\n                    if (trace) {\n                        // only keep the long stack trace into error when in longStackTraceZone\n                        ObjectDefineProperty(value, CURRENT_TASK_TRACE_SYMBOL, { configurable: true, enumerable: false, writable: true, value: trace });\n                    }\n                }\n                for (var i = 0; i < queue.length;) {\n                    scheduleResolveOrReject(promise, queue[i++], queue[i++], queue[i++], queue[i++]);\n                }\n                if (queue.length == 0 && state == REJECTED) {\n                    promise[symbolState] = REJECTED_NO_CATCH;\n                    try {\n                        // try to print more readable error log\n                        throw new Error('Uncaught (in promise): ' + readableObjectToString(value) +\n                            (value && value.stack ? '\\n' + value.stack : ''));\n                    }\n                    catch (err) {\n                        var error_1 = err;\n                        error_1.rejection = value;\n                        error_1.promise = promise;\n                        error_1.zone = Zone.current;\n                        error_1.task = Zone.currentTask;\n                        _uncaughtPromiseErrors.push(error_1);\n                        api.scheduleMicroTask(); // to make sure that it is running\n                    }\n                }\n            }\n        }\n        // Resolving an already resolved promise is a noop.\n        return promise;\n    }\n    var REJECTION_HANDLED_HANDLER = __symbol__('rejectionHandledHandler');\n    function clearRejectedNoCatch(promise) {\n        if (promise[symbolState] === REJECTED_NO_CATCH) {\n            // if the promise is rejected no catch status\n            // and queue.length > 0, means there is a error handler\n            // here to handle the rejected promise, we should trigger\n            // windows.rejectionhandled eventHandler or nodejs rejectionHandled\n            // eventHandler\n            try {\n                var handler = Zone[REJECTION_HANDLED_HANDLER];\n                if (handler && typeof handler === 'function') {\n                    handler.call(this, { rejection: promise[symbolValue], promise: promise });\n                }\n            }\n            catch (err) {\n            }\n            promise[symbolState] = REJECTED;\n            for (var i = 0; i < _uncaughtPromiseErrors.length; i++) {\n                if (promise === _uncaughtPromiseErrors[i].promise) {\n                    _uncaughtPromiseErrors.splice(i, 1);\n                }\n            }\n        }\n    }\n    function scheduleResolveOrReject(promise, zone, chainPromise, onFulfilled, onRejected) {\n        clearRejectedNoCatch(promise);\n        var promiseState = promise[symbolState];\n        var delegate = promiseState ?\n            (typeof onFulfilled === 'function') ? onFulfilled : forwardResolution :\n            (typeof onRejected === 'function') ? onRejected : forwardRejection;\n        zone.scheduleMicroTask(source, function () {\n            try {\n                var parentPromiseValue = promise[symbolValue];\n                var isFinallyPromise = chainPromise && symbolFinally === chainPromise[symbolFinally];\n                if (isFinallyPromise) {\n                    // if the promise is generated from finally call, keep parent promise's state and value\n                    chainPromise[symbolParentPromiseValue] = parentPromiseValue;\n                    chainPromise[symbolParentPromiseState] = promiseState;\n                }\n                // should not pass value to finally callback\n                var value = zone.run(delegate, undefined, isFinallyPromise && delegate !== forwardRejection && delegate !== forwardResolution ? [] : [parentPromiseValue]);\n                resolvePromise(chainPromise, true, value);\n            }\n            catch (error) {\n                // if error occurs, should always return this error\n                resolvePromise(chainPromise, false, error);\n            }\n        }, chainPromise);\n    }\n    var ZONE_AWARE_PROMISE_TO_STRING = 'function ZoneAwarePromise() { [native code] }';\n    var ZoneAwarePromise = /** @class */ (function () {\n        function ZoneAwarePromise(executor) {\n            var promise = this;\n            if (!(promise instanceof ZoneAwarePromise)) {\n                throw new Error('Must be an instanceof Promise.');\n            }\n            promise[symbolState] = UNRESOLVED;\n            promise[symbolValue] = []; // queue;\n            try {\n                executor && executor(makeResolver(promise, RESOLVED), makeResolver(promise, REJECTED));\n            }\n            catch (error) {\n                resolvePromise(promise, false, error);\n            }\n        }\n        ZoneAwarePromise.toString = function () {\n            return ZONE_AWARE_PROMISE_TO_STRING;\n        };\n        ZoneAwarePromise.resolve = function (value) {\n            return resolvePromise(new this(null), RESOLVED, value);\n        };\n        ZoneAwarePromise.reject = function (error) {\n            return resolvePromise(new this(null), REJECTED, error);\n        };\n        ZoneAwarePromise.race = function (values) {\n            var resolve;\n            var reject;\n            var promise = new this(function (res, rej) {\n                resolve = res;\n                reject = rej;\n            });\n            function onResolve(value) {\n                promise && (promise = null || resolve(value));\n            }\n            function onReject(error) {\n                promise && (promise = null || reject(error));\n            }\n            for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\n                var value = values_1[_i];\n                if (!isThenable(value)) {\n                    value = this.resolve(value);\n                }\n                value.then(onResolve, onReject);\n            }\n            return promise;\n        };\n        ZoneAwarePromise.all = function (values) {\n            var resolve;\n            var reject;\n            var promise = new this(function (res, rej) {\n                resolve = res;\n                reject = rej;\n            });\n            var count = 0;\n            var resolvedValues = [];\n            for (var _i = 0, values_2 = values; _i < values_2.length; _i++) {\n                var value = values_2[_i];\n                if (!isThenable(value)) {\n                    value = this.resolve(value);\n                }\n                value.then((function (index) { return function (value) {\n                    resolvedValues[index] = value;\n                    count--;\n                    if (!count) {\n                        resolve(resolvedValues);\n                    }\n                }; })(count), reject);\n                count++;\n            }\n            if (!count)\n                resolve(resolvedValues);\n            return promise;\n        };\n        ZoneAwarePromise.prototype.then = function (onFulfilled, onRejected) {\n            var chainPromise = new this.constructor(null);\n            var zone = Zone.current;\n            if (this[symbolState] == UNRESOLVED) {\n                this[symbolValue].push(zone, chainPromise, onFulfilled, onRejected);\n            }\n            else {\n                scheduleResolveOrReject(this, zone, chainPromise, onFulfilled, onRejected);\n            }\n            return chainPromise;\n        };\n        ZoneAwarePromise.prototype.catch = function (onRejected) {\n            return this.then(null, onRejected);\n        };\n        ZoneAwarePromise.prototype.finally = function (onFinally) {\n            var chainPromise = new this.constructor(null);\n            chainPromise[symbolFinally] = symbolFinally;\n            var zone = Zone.current;\n            if (this[symbolState] == UNRESOLVED) {\n                this[symbolValue].push(zone, chainPromise, onFinally, onFinally);\n            }\n            else {\n                scheduleResolveOrReject(this, zone, chainPromise, onFinally, onFinally);\n            }\n            return chainPromise;\n        };\n        return ZoneAwarePromise;\n    }());\n    // Protect against aggressive optimizers dropping seemingly unused properties.\n    // E.g. Closure Compiler in advanced mode.\n    ZoneAwarePromise['resolve'] = ZoneAwarePromise.resolve;\n    ZoneAwarePromise['reject'] = ZoneAwarePromise.reject;\n    ZoneAwarePromise['race'] = ZoneAwarePromise.race;\n    ZoneAwarePromise['all'] = ZoneAwarePromise.all;\n    var NativePromise = global[symbolPromise] = global['Promise'];\n    var ZONE_AWARE_PROMISE = Zone.__symbol__('ZoneAwarePromise');\n    var desc = ObjectGetOwnPropertyDescriptor(global, 'Promise');\n    if (!desc || desc.configurable) {\n        desc && delete desc.writable;\n        desc && delete desc.value;\n        if (!desc) {\n            desc = { configurable: true, enumerable: true };\n        }\n        desc.get = function () {\n            // if we already set ZoneAwarePromise, use patched one\n            // otherwise return native one.\n            return global[ZONE_AWARE_PROMISE] ? global[ZONE_AWARE_PROMISE] : global[symbolPromise];\n        };\n        desc.set = function (NewNativePromise) {\n            if (NewNativePromise === ZoneAwarePromise) {\n                // if the NewNativePromise is ZoneAwarePromise\n                // save to global\n                global[ZONE_AWARE_PROMISE] = NewNativePromise;\n            }\n            else {\n                // if the NewNativePromise is not ZoneAwarePromise\n                // for example: after load zone.js, some library just\n                // set es6-promise to global, if we set it to global\n                // directly, assertZonePatched will fail and angular\n                // will not loaded, so we just set the NewNativePromise\n                // to global[symbolPromise], so the result is just like\n                // we load ES6 Promise before zone.js\n                global[symbolPromise] = NewNativePromise;\n                if (!NewNativePromise.prototype[symbolThen]) {\n                    patchThen(NewNativePromise);\n                }\n                api.setNativePromise(NewNativePromise);\n            }\n        };\n        ObjectDefineProperty(global, 'Promise', desc);\n    }\n    global['Promise'] = ZoneAwarePromise;\n    var symbolThenPatched = __symbol__('thenPatched');\n    function patchThen(Ctor) {\n        var proto = Ctor.prototype;\n        var prop = ObjectGetOwnPropertyDescriptor(proto, 'then');\n        if (prop && (prop.writable === false || !prop.configurable)) {\n            // check Ctor.prototype.then propertyDescriptor is writable or not\n            // in meteor env, writable is false, we should ignore such case\n            return;\n        }\n        var originalThen = proto.then;\n        // Keep a reference to the original method.\n        proto[symbolThen] = originalThen;\n        Ctor.prototype.then = function (onResolve, onReject) {\n            var _this = this;\n            var wrapped = new ZoneAwarePromise(function (resolve, reject) {\n                originalThen.call(_this, resolve, reject);\n            });\n            return wrapped.then(onResolve, onReject);\n        };\n        Ctor[symbolThenPatched] = true;\n    }\n    function zoneify(fn) {\n        return function () {\n            var resultPromise = fn.apply(this, arguments);\n            if (resultPromise instanceof ZoneAwarePromise) {\n                return resultPromise;\n            }\n            var ctor = resultPromise.constructor;\n            if (!ctor[symbolThenPatched]) {\n                patchThen(ctor);\n            }\n            return resultPromise;\n        };\n    }\n    if (NativePromise) {\n        patchThen(NativePromise);\n        var fetch_1 = global['fetch'];\n        if (typeof fetch_1 == 'function') {\n            global['fetch'] = zoneify(fetch_1);\n        }\n    }\n    // This is not part of public API, but it is useful for tests, so we expose it.\n    Promise[Zone.__symbol__('uncaughtPromiseErrors')] = _uncaughtPromiseErrors;\n    return ZoneAwarePromise;\n});\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Suppress closure compiler errors about unknown 'Zone' variable\n * @fileoverview\n * @suppress {undefinedVars,globalThis,missingRequire}\n */\n// issue #989, to reduce bundle size, use short name\n/** Object.getOwnPropertyDescriptor */\nvar ObjectGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n/** Object.defineProperty */\nvar ObjectDefineProperty = Object.defineProperty;\n/** Object.getPrototypeOf */\nvar ObjectGetPrototypeOf = Object.getPrototypeOf;\n/** Object.create */\nvar ObjectCreate = Object.create;\n/** Array.prototype.slice */\nvar ArraySlice = Array.prototype.slice;\n/** addEventListener string const */\nvar ADD_EVENT_LISTENER_STR = 'addEventListener';\n/** removeEventListener string const */\nvar REMOVE_EVENT_LISTENER_STR = 'removeEventListener';\n/** zoneSymbol addEventListener */\nvar ZONE_SYMBOL_ADD_EVENT_LISTENER = Zone.__symbol__(ADD_EVENT_LISTENER_STR);\n/** zoneSymbol removeEventListener */\nvar ZONE_SYMBOL_REMOVE_EVENT_LISTENER = Zone.__symbol__(REMOVE_EVENT_LISTENER_STR);\n/** true string const */\nvar TRUE_STR = 'true';\n/** false string const */\nvar FALSE_STR = 'false';\n/** __zone_symbol__ string const */\nvar ZONE_SYMBOL_PREFIX = '__zone_symbol__';\nfunction wrapWithCurrentZone(callback, source) {\n    return Zone.current.wrap(callback, source);\n}\nfunction scheduleMacroTaskWithCurrentZone(source, callback, data, customSchedule, customCancel) {\n    return Zone.current.scheduleMacroTask(source, callback, data, customSchedule, customCancel);\n}\nvar zoneSymbol = Zone.__symbol__;\nvar isWindowExists = typeof window !== 'undefined';\nvar internalWindow = isWindowExists ? window : undefined;\nvar _global = isWindowExists && internalWindow || typeof self === 'object' && self || global;\nvar REMOVE_ATTRIBUTE = 'removeAttribute';\nvar NULL_ON_PROP_VALUE = [null];\nfunction bindArguments(args, source) {\n    for (var i = args.length - 1; i >= 0; i--) {\n        if (typeof args[i] === 'function') {\n            args[i] = wrapWithCurrentZone(args[i], source + '_' + i);\n        }\n    }\n    return args;\n}\nfunction patchPrototype(prototype, fnNames) {\n    var source = prototype.constructor['name'];\n    var _loop_1 = function (i) {\n        var name_1 = fnNames[i];\n        var delegate = prototype[name_1];\n        if (delegate) {\n            var prototypeDesc = ObjectGetOwnPropertyDescriptor(prototype, name_1);\n            if (!isPropertyWritable(prototypeDesc)) {\n                return \"continue\";\n            }\n            prototype[name_1] = (function (delegate) {\n                var patched = function () {\n                    return delegate.apply(this, bindArguments(arguments, source + '.' + name_1));\n                };\n                attachOriginToPatched(patched, delegate);\n                return patched;\n            })(delegate);\n        }\n    };\n    for (var i = 0; i < fnNames.length; i++) {\n        _loop_1(i);\n    }\n}\nfunction isPropertyWritable(propertyDesc) {\n    if (!propertyDesc) {\n        return true;\n    }\n    if (propertyDesc.writable === false) {\n        return false;\n    }\n    return !(typeof propertyDesc.get === 'function' && typeof propertyDesc.set === 'undefined');\n}\nvar isWebWorker = (typeof WorkerGlobalScope !== 'undefined' && self instanceof WorkerGlobalScope);\n// Make sure to access `process` through `_global` so that WebPack does not accidentally browserify\n// this code.\nvar isNode = (!('nw' in _global) && typeof _global.process !== 'undefined' &&\n    {}.toString.call(_global.process) === '[object process]');\nvar isBrowser = !isNode && !isWebWorker && !!(isWindowExists && internalWindow['HTMLElement']);\n// we are in electron of nw, so we are both browser and nodejs\n// Make sure to access `process` through `_global` so that WebPack does not accidentally browserify\n// this code.\nvar isMix = typeof _global.process !== 'undefined' &&\n    {}.toString.call(_global.process) === '[object process]' && !isWebWorker &&\n    !!(isWindowExists && internalWindow['HTMLElement']);\nvar zoneSymbolEventNames = {};\nvar wrapFn = function (event) {\n    // https://github.com/angular/zone.js/issues/911, in IE, sometimes\n    // event will be undefined, so we need to use window.event\n    event = event || _global.event;\n    if (!event) {\n        return;\n    }\n    var eventNameSymbol = zoneSymbolEventNames[event.type];\n    if (!eventNameSymbol) {\n        eventNameSymbol = zoneSymbolEventNames[event.type] = zoneSymbol('ON_PROPERTY' + event.type);\n    }\n    var target = this || event.target || _global;\n    var listener = target[eventNameSymbol];\n    var result = listener && listener.apply(this, arguments);\n    if (result != undefined && !result) {\n        event.preventDefault();\n    }\n    return result;\n};\nfunction patchProperty(obj, prop, prototype) {\n    var desc = ObjectGetOwnPropertyDescriptor(obj, prop);\n    if (!desc && prototype) {\n        // when patch window object, use prototype to check prop exist or not\n        var prototypeDesc = ObjectGetOwnPropertyDescriptor(prototype, prop);\n        if (prototypeDesc) {\n            desc = { enumerable: true, configurable: true };\n        }\n    }\n    // if the descriptor not exists or is not configurable\n    // just return\n    if (!desc || !desc.configurable) {\n        return;\n    }\n    // A property descriptor cannot have getter/setter and be writable\n    // deleting the writable and value properties avoids this error:\n    //\n    // TypeError: property descriptors must not specify a value or be writable when a\n    // getter or setter has been specified\n    delete desc.writable;\n    delete desc.value;\n    var originalDescGet = desc.get;\n    var originalDescSet = desc.set;\n    // substr(2) cuz 'onclick' -> 'click', etc\n    var eventName = prop.substr(2);\n    var eventNameSymbol = zoneSymbolEventNames[eventName];\n    if (!eventNameSymbol) {\n        eventNameSymbol = zoneSymbolEventNames[eventName] = zoneSymbol('ON_PROPERTY' + eventName);\n    }\n    desc.set = function (newValue) {\n        // in some of windows's onproperty callback, this is undefined\n        // so we need to check it\n        var target = this;\n        if (!target && obj === _global) {\n            target = _global;\n        }\n        if (!target) {\n            return;\n        }\n        var previousValue = target[eventNameSymbol];\n        if (previousValue) {\n            target.removeEventListener(eventName, wrapFn);\n        }\n        // issue #978, when onload handler was added before loading zone.js\n        // we should remove it with originalDescSet\n        if (originalDescSet) {\n            originalDescSet.apply(target, NULL_ON_PROP_VALUE);\n        }\n        if (typeof newValue === 'function') {\n            target[eventNameSymbol] = newValue;\n            target.addEventListener(eventName, wrapFn, false);\n        }\n        else {\n            target[eventNameSymbol] = null;\n        }\n    };\n    // The getter would return undefined for unassigned properties but the default value of an\n    // unassigned property is null\n    desc.get = function () {\n        // in some of windows's onproperty callback, this is undefined\n        // so we need to check it\n        var target = this;\n        if (!target && obj === _global) {\n            target = _global;\n        }\n        if (!target) {\n            return null;\n        }\n        var listener = target[eventNameSymbol];\n        if (listener) {\n            return listener;\n        }\n        else if (originalDescGet) {\n            // result will be null when use inline event attribute,\n            // such as <button onclick=\"func();\">OK</button>\n            // because the onclick function is internal raw uncompiled handler\n            // the onclick will be evaluated when first time event was triggered or\n            // the property is accessed, https://github.com/angular/zone.js/issues/525\n            // so we should use original native get to retrieve the handler\n            var value = originalDescGet && originalDescGet.call(this);\n            if (value) {\n                desc.set.call(this, value);\n                if (typeof target[REMOVE_ATTRIBUTE] === 'function') {\n                    target.removeAttribute(prop);\n                }\n                return value;\n            }\n        }\n        return null;\n    };\n    ObjectDefineProperty(obj, prop, desc);\n}\nfunction patchOnProperties(obj, properties, prototype) {\n    if (properties) {\n        for (var i = 0; i < properties.length; i++) {\n            patchProperty(obj, 'on' + properties[i], prototype);\n        }\n    }\n    else {\n        var onProperties = [];\n        for (var prop in obj) {\n            if (prop.substr(0, 2) == 'on') {\n                onProperties.push(prop);\n            }\n        }\n        for (var j = 0; j < onProperties.length; j++) {\n            patchProperty(obj, onProperties[j], prototype);\n        }\n    }\n}\nvar originalInstanceKey = zoneSymbol('originalInstance');\n// wrap some native API on `window`\nfunction patchClass(className) {\n    var OriginalClass = _global[className];\n    if (!OriginalClass)\n        return;\n    // keep original class in global\n    _global[zoneSymbol(className)] = OriginalClass;\n    _global[className] = function () {\n        var a = bindArguments(arguments, className);\n        switch (a.length) {\n            case 0:\n                this[originalInstanceKey] = new OriginalClass();\n                break;\n            case 1:\n                this[originalInstanceKey] = new OriginalClass(a[0]);\n                break;\n            case 2:\n                this[originalInstanceKey] = new OriginalClass(a[0], a[1]);\n                break;\n            case 3:\n                this[originalInstanceKey] = new OriginalClass(a[0], a[1], a[2]);\n                break;\n            case 4:\n                this[originalInstanceKey] = new OriginalClass(a[0], a[1], a[2], a[3]);\n                break;\n            default:\n                throw new Error('Arg list too long.');\n        }\n    };\n    // attach original delegate to patched function\n    attachOriginToPatched(_global[className], OriginalClass);\n    var instance = new OriginalClass(function () { });\n    var prop;\n    for (prop in instance) {\n        // https://bugs.webkit.org/show_bug.cgi?id=44721\n        if (className === 'XMLHttpRequest' && prop === 'responseBlob')\n            continue;\n        (function (prop) {\n            if (typeof instance[prop] === 'function') {\n                _global[className].prototype[prop] = function () {\n                    return this[originalInstanceKey][prop].apply(this[originalInstanceKey], arguments);\n                };\n            }\n            else {\n                ObjectDefineProperty(_global[className].prototype, prop, {\n                    set: function (fn) {\n                        if (typeof fn === 'function') {\n                            this[originalInstanceKey][prop] = wrapWithCurrentZone(fn, className + '.' + prop);\n                            // keep callback in wrapped function so we can\n                            // use it in Function.prototype.toString to return\n                            // the native one.\n                            attachOriginToPatched(this[originalInstanceKey][prop], fn);\n                        }\n                        else {\n                            this[originalInstanceKey][prop] = fn;\n                        }\n                    },\n                    get: function () {\n                        return this[originalInstanceKey][prop];\n                    }\n                });\n            }\n        }(prop));\n    }\n    for (prop in OriginalClass) {\n        if (prop !== 'prototype' && OriginalClass.hasOwnProperty(prop)) {\n            _global[className][prop] = OriginalClass[prop];\n        }\n    }\n}\nfunction patchMethod(target, name, patchFn) {\n    var proto = target;\n    while (proto && !proto.hasOwnProperty(name)) {\n        proto = ObjectGetPrototypeOf(proto);\n    }\n    if (!proto && target[name]) {\n        // somehow we did not find it, but we can see it. This happens on IE for Window properties.\n        proto = target;\n    }\n    var delegateName = zoneSymbol(name);\n    var delegate;\n    if (proto && !(delegate = proto[delegateName])) {\n        delegate = proto[delegateName] = proto[name];\n        // check whether proto[name] is writable\n        // some property is readonly in safari, such as HtmlCanvasElement.prototype.toBlob\n        var desc = proto && ObjectGetOwnPropertyDescriptor(proto, name);\n        if (isPropertyWritable(desc)) {\n            var patchDelegate_1 = patchFn(delegate, delegateName, name);\n            proto[name] = function () {\n                return patchDelegate_1(this, arguments);\n            };\n            attachOriginToPatched(proto[name], delegate);\n        }\n    }\n    return delegate;\n}\n// TODO: @JiaLiPassion, support cancel task later if necessary\nfunction patchMacroTask(obj, funcName, metaCreator) {\n    var setNative = null;\n    function scheduleTask(task) {\n        var data = task.data;\n        data.args[data.cbIdx] = function () {\n            task.invoke.apply(this, arguments);\n        };\n        setNative.apply(data.target, data.args);\n        return task;\n    }\n    setNative = patchMethod(obj, funcName, function (delegate) { return function (self, args) {\n        var meta = metaCreator(self, args);\n        if (meta.cbIdx >= 0 && typeof args[meta.cbIdx] === 'function') {\n            return scheduleMacroTaskWithCurrentZone(meta.name, args[meta.cbIdx], meta, scheduleTask, null);\n        }\n        else {\n            // cause an error by calling it directly.\n            return delegate.apply(self, args);\n        }\n    }; });\n}\n\nfunction attachOriginToPatched(patched, original) {\n    patched[zoneSymbol('OriginalDelegate')] = original;\n}\nvar isDetectedIEOrEdge = false;\nvar ieOrEdge = false;\nfunction isIEOrEdge() {\n    if (isDetectedIEOrEdge) {\n        return ieOrEdge;\n    }\n    isDetectedIEOrEdge = true;\n    try {\n        var ua = internalWindow.navigator.userAgent;\n        if (ua.indexOf('MSIE ') !== -1 || ua.indexOf('Trident/') !== -1 || ua.indexOf('Edge/') !== -1) {\n            ieOrEdge = true;\n        }\n        return ieOrEdge;\n    }\n    catch (error) {\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// override Function.prototype.toString to make zone.js patched function\n// look like native function\nZone.__load_patch('toString', function (global) {\n    // patch Func.prototype.toString to let them look like native\n    var originalFunctionToString = Function.prototype.toString;\n    var ORIGINAL_DELEGATE_SYMBOL = zoneSymbol('OriginalDelegate');\n    var PROMISE_SYMBOL = zoneSymbol('Promise');\n    var ERROR_SYMBOL = zoneSymbol('Error');\n    var newFunctionToString = function toString() {\n        if (typeof this === 'function') {\n            var originalDelegate = this[ORIGINAL_DELEGATE_SYMBOL];\n            if (originalDelegate) {\n                if (typeof originalDelegate === 'function') {\n                    return originalFunctionToString.apply(this[ORIGINAL_DELEGATE_SYMBOL], arguments);\n                }\n                else {\n                    return Object.prototype.toString.call(originalDelegate);\n                }\n            }\n            if (this === Promise) {\n                var nativePromise = global[PROMISE_SYMBOL];\n                if (nativePromise) {\n                    return originalFunctionToString.apply(nativePromise, arguments);\n                }\n            }\n            if (this === Error) {\n                var nativeError = global[ERROR_SYMBOL];\n                if (nativeError) {\n                    return originalFunctionToString.apply(nativeError, arguments);\n                }\n            }\n        }\n        return originalFunctionToString.apply(this, arguments);\n    };\n    newFunctionToString[ORIGINAL_DELEGATE_SYMBOL] = originalFunctionToString;\n    Function.prototype.toString = newFunctionToString;\n    // patch Object.prototype.toString to let them look like native\n    var originalObjectToString = Object.prototype.toString;\n    var PROMISE_OBJECT_TO_STRING = '[object Promise]';\n    Object.prototype.toString = function () {\n        if (this instanceof Promise) {\n            return PROMISE_OBJECT_TO_STRING;\n        }\n        return originalObjectToString.apply(this, arguments);\n    };\n});\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @fileoverview\n * @suppress {missingRequire}\n */\n// an identifier to tell ZoneTask do not create a new invoke closure\nvar OPTIMIZED_ZONE_EVENT_TASK_DATA = {\n    useG: true\n};\nvar zoneSymbolEventNames$1 = {};\nvar globalSources = {};\nvar EVENT_NAME_SYMBOL_REGX = /^__zone_symbol__(\\w+)(true|false)$/;\nvar IMMEDIATE_PROPAGATION_SYMBOL = ('__zone_symbol__propagationStopped');\nfunction patchEventTarget(_global, apis, patchOptions) {\n    var ADD_EVENT_LISTENER = (patchOptions && patchOptions.add) || ADD_EVENT_LISTENER_STR;\n    var REMOVE_EVENT_LISTENER = (patchOptions && patchOptions.rm) || REMOVE_EVENT_LISTENER_STR;\n    var LISTENERS_EVENT_LISTENER = (patchOptions && patchOptions.listeners) || 'eventListeners';\n    var REMOVE_ALL_LISTENERS_EVENT_LISTENER = (patchOptions && patchOptions.rmAll) || 'removeAllListeners';\n    var zoneSymbolAddEventListener = zoneSymbol(ADD_EVENT_LISTENER);\n    var ADD_EVENT_LISTENER_SOURCE = '.' + ADD_EVENT_LISTENER + ':';\n    var PREPEND_EVENT_LISTENER = 'prependListener';\n    var PREPEND_EVENT_LISTENER_SOURCE = '.' + PREPEND_EVENT_LISTENER + ':';\n    var invokeTask = function (task, target, event) {\n        // for better performance, check isRemoved which is set\n        // by removeEventListener\n        if (task.isRemoved) {\n            return;\n        }\n        var delegate = task.callback;\n        if (typeof delegate === 'object' && delegate.handleEvent) {\n            // create the bind version of handleEvent when invoke\n            task.callback = function (event) { return delegate.handleEvent(event); };\n            task.originalDelegate = delegate;\n        }\n        // invoke static task.invoke\n        task.invoke(task, target, [event]);\n        var options = task.options;\n        if (options && typeof options === 'object' && options.once) {\n            // if options.once is true, after invoke once remove listener here\n            // only browser need to do this, nodejs eventEmitter will cal removeListener\n            // inside EventEmitter.once\n            var delegate_1 = task.originalDelegate ? task.originalDelegate : task.callback;\n            target[REMOVE_EVENT_LISTENER].call(target, event.type, delegate_1, options);\n        }\n    };\n    // global shared zoneAwareCallback to handle all event callback with capture = false\n    var globalZoneAwareCallback = function (event) {\n        // https://github.com/angular/zone.js/issues/911, in IE, sometimes\n        // event will be undefined, so we need to use window.event\n        event = event || _global.event;\n        if (!event) {\n            return;\n        }\n        // event.target is needed for Samsung TV and SourceBuffer\n        // || global is needed https://github.com/angular/zone.js/issues/190\n        var target = this || event.target || _global;\n        var tasks = target[zoneSymbolEventNames$1[event.type][FALSE_STR]];\n        if (tasks) {\n            // invoke all tasks which attached to current target with given event.type and capture = false\n            // for performance concern, if task.length === 1, just invoke\n            if (tasks.length === 1) {\n                invokeTask(tasks[0], target, event);\n            }\n            else {\n                // https://github.com/angular/zone.js/issues/836\n                // copy the tasks array before invoke, to avoid\n                // the callback will remove itself or other listener\n                var copyTasks = tasks.slice();\n                for (var i = 0; i < copyTasks.length; i++) {\n                    if (event && event[IMMEDIATE_PROPAGATION_SYMBOL] === true) {\n                        break;\n                    }\n                    invokeTask(copyTasks[i], target, event);\n                }\n            }\n        }\n    };\n    // global shared zoneAwareCallback to handle all event callback with capture = true\n    var globalZoneAwareCaptureCallback = function (event) {\n        // https://github.com/angular/zone.js/issues/911, in IE, sometimes\n        // event will be undefined, so we need to use window.event\n        event = event || _global.event;\n        if (!event) {\n            return;\n        }\n        // event.target is needed for Samsung TV and SourceBuffer\n        // || global is needed https://github.com/angular/zone.js/issues/190\n        var target = this || event.target || _global;\n        var tasks = target[zoneSymbolEventNames$1[event.type][TRUE_STR]];\n        if (tasks) {\n            // invoke all tasks which attached to current target with given event.type and capture = false\n            // for performance concern, if task.length === 1, just invoke\n            if (tasks.length === 1) {\n                invokeTask(tasks[0], target, event);\n            }\n            else {\n                // https://github.com/angular/zone.js/issues/836\n                // copy the tasks array before invoke, to avoid\n                // the callback will remove itself or other listener\n                var copyTasks = tasks.slice();\n                for (var i = 0; i < copyTasks.length; i++) {\n                    if (event && event[IMMEDIATE_PROPAGATION_SYMBOL] === true) {\n                        break;\n                    }\n                    invokeTask(copyTasks[i], target, event);\n                }\n            }\n        }\n    };\n    function patchEventTargetMethods(obj, patchOptions) {\n        if (!obj) {\n            return false;\n        }\n        var useGlobalCallback = true;\n        if (patchOptions && patchOptions.useG !== undefined) {\n            useGlobalCallback = patchOptions.useG;\n        }\n        var validateHandler = patchOptions && patchOptions.vh;\n        var checkDuplicate = true;\n        if (patchOptions && patchOptions.chkDup !== undefined) {\n            checkDuplicate = patchOptions.chkDup;\n        }\n        var returnTarget = false;\n        if (patchOptions && patchOptions.rt !== undefined) {\n            returnTarget = patchOptions.rt;\n        }\n        var proto = obj;\n        while (proto && !proto.hasOwnProperty(ADD_EVENT_LISTENER)) {\n            proto = ObjectGetPrototypeOf(proto);\n        }\n        if (!proto && obj[ADD_EVENT_LISTENER]) {\n            // somehow we did not find it, but we can see it. This happens on IE for Window properties.\n            proto = obj;\n        }\n        if (!proto) {\n            return false;\n        }\n        if (proto[zoneSymbolAddEventListener]) {\n            return false;\n        }\n        // a shared global taskData to pass data for scheduleEventTask\n        // so we do not need to create a new object just for pass some data\n        var taskData = {};\n        var nativeAddEventListener = proto[zoneSymbolAddEventListener] = proto[ADD_EVENT_LISTENER];\n        var nativeRemoveEventListener = proto[zoneSymbol(REMOVE_EVENT_LISTENER)] =\n            proto[REMOVE_EVENT_LISTENER];\n        var nativeListeners = proto[zoneSymbol(LISTENERS_EVENT_LISTENER)] =\n            proto[LISTENERS_EVENT_LISTENER];\n        var nativeRemoveAllListeners = proto[zoneSymbol(REMOVE_ALL_LISTENERS_EVENT_LISTENER)] =\n            proto[REMOVE_ALL_LISTENERS_EVENT_LISTENER];\n        var nativePrependEventListener;\n        if (patchOptions && patchOptions.prepend) {\n            nativePrependEventListener = proto[zoneSymbol(patchOptions.prepend)] =\n                proto[patchOptions.prepend];\n        }\n        var customScheduleGlobal = function () {\n            // if there is already a task for the eventName + capture,\n            // just return, because we use the shared globalZoneAwareCallback here.\n            if (taskData.isExisting) {\n                return;\n            }\n            return nativeAddEventListener.call(taskData.target, taskData.eventName, taskData.capture ? globalZoneAwareCaptureCallback : globalZoneAwareCallback, taskData.options);\n        };\n        var customCancelGlobal = function (task) {\n            // if task is not marked as isRemoved, this call is directly\n            // from Zone.prototype.cancelTask, we should remove the task\n            // from tasksList of target first\n            if (!task.isRemoved) {\n                var symbolEventNames = zoneSymbolEventNames$1[task.eventName];\n                var symbolEventName = void 0;\n                if (symbolEventNames) {\n                    symbolEventName = symbolEventNames[task.capture ? TRUE_STR : FALSE_STR];\n                }\n                var existingTasks = symbolEventName && task.target[symbolEventName];\n                if (existingTasks) {\n                    for (var i = 0; i < existingTasks.length; i++) {\n                        var existingTask = existingTasks[i];\n                        if (existingTask === task) {\n                            existingTasks.splice(i, 1);\n                            // set isRemoved to data for faster invokeTask check\n                            task.isRemoved = true;\n                            if (existingTasks.length === 0) {\n                                // all tasks for the eventName + capture have gone,\n                                // remove globalZoneAwareCallback and remove the task cache from target\n                                task.allRemoved = true;\n                                task.target[symbolEventName] = null;\n                            }\n                            break;\n                        }\n                    }\n                }\n            }\n            // if all tasks for the eventName + capture have gone,\n            // we will really remove the global event callback,\n            // if not, return\n            if (!task.allRemoved) {\n                return;\n            }\n            return nativeRemoveEventListener.call(task.target, task.eventName, task.capture ? globalZoneAwareCaptureCallback : globalZoneAwareCallback, task.options);\n        };\n        var customScheduleNonGlobal = function (task) {\n            return nativeAddEventListener.call(taskData.target, taskData.eventName, task.invoke, taskData.options);\n        };\n        var customSchedulePrepend = function (task) {\n            return nativePrependEventListener.call(taskData.target, taskData.eventName, task.invoke, taskData.options);\n        };\n        var customCancelNonGlobal = function (task) {\n            return nativeRemoveEventListener.call(task.target, task.eventName, task.invoke, task.options);\n        };\n        var customSchedule = useGlobalCallback ? customScheduleGlobal : customScheduleNonGlobal;\n        var customCancel = useGlobalCallback ? customCancelGlobal : customCancelNonGlobal;\n        var compareTaskCallbackVsDelegate = function (task, delegate) {\n            var typeOfDelegate = typeof delegate;\n            return (typeOfDelegate === 'function' && task.callback === delegate) ||\n                (typeOfDelegate === 'object' && task.originalDelegate === delegate);\n        };\n        var compare = (patchOptions && patchOptions.diff) ? patchOptions.diff : compareTaskCallbackVsDelegate;\n        var blackListedEvents = Zone[Zone.__symbol__('BLACK_LISTED_EVENTS')];\n        var makeAddListener = function (nativeListener, addSource, customScheduleFn, customCancelFn, returnTarget, prepend) {\n            if (returnTarget === void 0) { returnTarget = false; }\n            if (prepend === void 0) { prepend = false; }\n            return function () {\n                var target = this || _global;\n                var delegate = arguments[1];\n                if (!delegate) {\n                    return nativeListener.apply(this, arguments);\n                }\n                // don't create the bind delegate function for handleEvent\n                // case here to improve addEventListener performance\n                // we will create the bind delegate when invoke\n                var isHandleEvent = false;\n                if (typeof delegate !== 'function') {\n                    if (!delegate.handleEvent) {\n                        return nativeListener.apply(this, arguments);\n                    }\n                    isHandleEvent = true;\n                }\n                if (validateHandler && !validateHandler(nativeListener, delegate, target, arguments)) {\n                    return;\n                }\n                var eventName = arguments[0];\n                var options = arguments[2];\n                if (blackListedEvents) {\n                    // check black list\n                    for (var i = 0; i < blackListedEvents.length; i++) {\n                        if (eventName === blackListedEvents[i]) {\n                            return nativeListener.apply(this, arguments);\n                        }\n                    }\n                }\n                var capture;\n                var once = false;\n                if (options === undefined) {\n                    capture = false;\n                }\n                else if (options === true) {\n                    capture = true;\n                }\n                else if (options === false) {\n                    capture = false;\n                }\n                else {\n                    capture = options ? !!options.capture : false;\n                    once = options ? !!options.once : false;\n                }\n                var zone = Zone.current;\n                var symbolEventNames = zoneSymbolEventNames$1[eventName];\n                var symbolEventName;\n                if (!symbolEventNames) {\n                    // the code is duplicate, but I just want to get some better performance\n                    var falseEventName = eventName + FALSE_STR;\n                    var trueEventName = eventName + TRUE_STR;\n                    var symbol = ZONE_SYMBOL_PREFIX + falseEventName;\n                    var symbolCapture = ZONE_SYMBOL_PREFIX + trueEventName;\n                    zoneSymbolEventNames$1[eventName] = {};\n                    zoneSymbolEventNames$1[eventName][FALSE_STR] = symbol;\n                    zoneSymbolEventNames$1[eventName][TRUE_STR] = symbolCapture;\n                    symbolEventName = capture ? symbolCapture : symbol;\n                }\n                else {\n                    symbolEventName = symbolEventNames[capture ? TRUE_STR : FALSE_STR];\n                }\n                var existingTasks = target[symbolEventName];\n                var isExisting = false;\n                if (existingTasks) {\n                    // already have task registered\n                    isExisting = true;\n                    if (checkDuplicate) {\n                        for (var i = 0; i < existingTasks.length; i++) {\n                            if (compare(existingTasks[i], delegate)) {\n                                // same callback, same capture, same event name, just return\n                                return;\n                            }\n                        }\n                    }\n                }\n                else {\n                    existingTasks = target[symbolEventName] = [];\n                }\n                var source;\n                var constructorName = target.constructor['name'];\n                var targetSource = globalSources[constructorName];\n                if (targetSource) {\n                    source = targetSource[eventName];\n                }\n                if (!source) {\n                    source = constructorName + addSource + eventName;\n                }\n                // do not create a new object as task.data to pass those things\n                // just use the global shared one\n                taskData.options = options;\n                if (once) {\n                    // if addEventListener with once options, we don't pass it to\n                    // native addEventListener, instead we keep the once setting\n                    // and handle ourselves.\n                    taskData.options.once = false;\n                }\n                taskData.target = target;\n                taskData.capture = capture;\n                taskData.eventName = eventName;\n                taskData.isExisting = isExisting;\n                var data = useGlobalCallback ? OPTIMIZED_ZONE_EVENT_TASK_DATA : null;\n                // keep taskData into data to allow onScheduleEventTask to access the task information\n                if (data) {\n                    data.taskData = taskData;\n                }\n                var task = zone.scheduleEventTask(source, delegate, data, customScheduleFn, customCancelFn);\n                // should clear taskData.target to avoid memory leak\n                // issue, https://github.com/angular/angular/issues/20442\n                taskData.target = null;\n                // need to clear up taskData because it is a global object\n                if (data) {\n                    data.taskData = null;\n                }\n                // have to save those information to task in case\n                // application may call task.zone.cancelTask() directly\n                if (once) {\n                    options.once = true;\n                }\n                task.options = options;\n                task.target = target;\n                task.capture = capture;\n                task.eventName = eventName;\n                if (isHandleEvent) {\n                    // save original delegate for compare to check duplicate\n                    task.originalDelegate = delegate;\n                }\n                if (!prepend) {\n                    existingTasks.push(task);\n                }\n                else {\n                    existingTasks.unshift(task);\n                }\n                if (returnTarget) {\n                    return target;\n                }\n            };\n        };\n        proto[ADD_EVENT_LISTENER] = makeAddListener(nativeAddEventListener, ADD_EVENT_LISTENER_SOURCE, customSchedule, customCancel, returnTarget);\n        if (nativePrependEventListener) {\n            proto[PREPEND_EVENT_LISTENER] = makeAddListener(nativePrependEventListener, PREPEND_EVENT_LISTENER_SOURCE, customSchedulePrepend, customCancel, returnTarget, true);\n        }\n        proto[REMOVE_EVENT_LISTENER] = function () {\n            var target = this || _global;\n            var eventName = arguments[0];\n            var options = arguments[2];\n            var capture;\n            if (options === undefined) {\n                capture = false;\n            }\n            else if (options === true) {\n                capture = true;\n            }\n            else if (options === false) {\n                capture = false;\n            }\n            else {\n                capture = options ? !!options.capture : false;\n            }\n            var delegate = arguments[1];\n            if (!delegate) {\n                return nativeRemoveEventListener.apply(this, arguments);\n            }\n            if (validateHandler &&\n                !validateHandler(nativeRemoveEventListener, delegate, target, arguments)) {\n                return;\n            }\n            var symbolEventNames = zoneSymbolEventNames$1[eventName];\n            var symbolEventName;\n            if (symbolEventNames) {\n                symbolEventName = symbolEventNames[capture ? TRUE_STR : FALSE_STR];\n            }\n            var existingTasks = symbolEventName && target[symbolEventName];\n            if (existingTasks) {\n                for (var i = 0; i < existingTasks.length; i++) {\n                    var existingTask = existingTasks[i];\n                    if (compare(existingTask, delegate)) {\n                        existingTasks.splice(i, 1);\n                        // set isRemoved to data for faster invokeTask check\n                        existingTask.isRemoved = true;\n                        if (existingTasks.length === 0) {\n                            // all tasks for the eventName + capture have gone,\n                            // remove globalZoneAwareCallback and remove the task cache from target\n                            existingTask.allRemoved = true;\n                            target[symbolEventName] = null;\n                        }\n                        existingTask.zone.cancelTask(existingTask);\n                        if (returnTarget) {\n                            return target;\n                        }\n                        return;\n                    }\n                }\n            }\n            // issue 930, didn't find the event name or callback\n            // from zone kept existingTasks, the callback maybe\n            // added outside of zone, we need to call native removeEventListener\n            // to try to remove it.\n            return nativeRemoveEventListener.apply(this, arguments);\n        };\n        proto[LISTENERS_EVENT_LISTENER] = function () {\n            var target = this || _global;\n            var eventName = arguments[0];\n            var listeners = [];\n            var tasks = findEventTasks(target, eventName);\n            for (var i = 0; i < tasks.length; i++) {\n                var task = tasks[i];\n                var delegate = task.originalDelegate ? task.originalDelegate : task.callback;\n                listeners.push(delegate);\n            }\n            return listeners;\n        };\n        proto[REMOVE_ALL_LISTENERS_EVENT_LISTENER] = function () {\n            var target = this || _global;\n            var eventName = arguments[0];\n            if (!eventName) {\n                var keys = Object.keys(target);\n                for (var i = 0; i < keys.length; i++) {\n                    var prop = keys[i];\n                    var match = EVENT_NAME_SYMBOL_REGX.exec(prop);\n                    var evtName = match && match[1];\n                    // in nodejs EventEmitter, removeListener event is\n                    // used for monitoring the removeListener call,\n                    // so just keep removeListener eventListener until\n                    // all other eventListeners are removed\n                    if (evtName && evtName !== 'removeListener') {\n                        this[REMOVE_ALL_LISTENERS_EVENT_LISTENER].call(this, evtName);\n                    }\n                }\n                // remove removeListener listener finally\n                this[REMOVE_ALL_LISTENERS_EVENT_LISTENER].call(this, 'removeListener');\n            }\n            else {\n                var symbolEventNames = zoneSymbolEventNames$1[eventName];\n                if (symbolEventNames) {\n                    var symbolEventName = symbolEventNames[FALSE_STR];\n                    var symbolCaptureEventName = symbolEventNames[TRUE_STR];\n                    var tasks = target[symbolEventName];\n                    var captureTasks = target[symbolCaptureEventName];\n                    if (tasks) {\n                        var removeTasks = tasks.slice();\n                        for (var i = 0; i < removeTasks.length; i++) {\n                            var task = removeTasks[i];\n                            var delegate = task.originalDelegate ? task.originalDelegate : task.callback;\n                            this[REMOVE_EVENT_LISTENER].call(this, eventName, delegate, task.options);\n                        }\n                    }\n                    if (captureTasks) {\n                        var removeTasks = captureTasks.slice();\n                        for (var i = 0; i < removeTasks.length; i++) {\n                            var task = removeTasks[i];\n                            var delegate = task.originalDelegate ? task.originalDelegate : task.callback;\n                            this[REMOVE_EVENT_LISTENER].call(this, eventName, delegate, task.options);\n                        }\n                    }\n                }\n            }\n            if (returnTarget) {\n                return this;\n            }\n        };\n        // for native toString patch\n        attachOriginToPatched(proto[ADD_EVENT_LISTENER], nativeAddEventListener);\n        attachOriginToPatched(proto[REMOVE_EVENT_LISTENER], nativeRemoveEventListener);\n        if (nativeRemoveAllListeners) {\n            attachOriginToPatched(proto[REMOVE_ALL_LISTENERS_EVENT_LISTENER], nativeRemoveAllListeners);\n        }\n        if (nativeListeners) {\n            attachOriginToPatched(proto[LISTENERS_EVENT_LISTENER], nativeListeners);\n        }\n        return true;\n    }\n    var results = [];\n    for (var i = 0; i < apis.length; i++) {\n        results[i] = patchEventTargetMethods(apis[i], patchOptions);\n    }\n    return results;\n}\nfunction findEventTasks(target, eventName) {\n    var foundTasks = [];\n    for (var prop in target) {\n        var match = EVENT_NAME_SYMBOL_REGX.exec(prop);\n        var evtName = match && match[1];\n        if (evtName && (!eventName || evtName === eventName)) {\n            var tasks = target[prop];\n            if (tasks) {\n                for (var i = 0; i < tasks.length; i++) {\n                    foundTasks.push(tasks[i]);\n                }\n            }\n        }\n    }\n    return foundTasks;\n}\nfunction patchEventPrototype(global, api) {\n    var Event = global['Event'];\n    if (Event && Event.prototype) {\n        api.patchMethod(Event.prototype, 'stopImmediatePropagation', function (delegate) { return function (self, args) {\n            self[IMMEDIATE_PROPAGATION_SYMBOL] = true;\n            // we need to call the native stopImmediatePropagation\n            // in case in some hybrid application, some part of\n            // application will be controlled by zone, some are not\n            delegate && delegate.apply(self, args);\n        }; });\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @fileoverview\n * @suppress {missingRequire}\n */\nvar taskSymbol = zoneSymbol('zoneTask');\nfunction patchTimer(window, setName, cancelName, nameSuffix) {\n    var setNative = null;\n    var clearNative = null;\n    setName += nameSuffix;\n    cancelName += nameSuffix;\n    var tasksByHandleId = {};\n    function scheduleTask(task) {\n        var data = task.data;\n        function timer() {\n            try {\n                task.invoke.apply(this, arguments);\n            }\n            finally {\n                // issue-934, task will be cancelled\n                // even it is a periodic task such as\n                // setInterval\n                if (!(task.data && task.data.isPeriodic)) {\n                    if (typeof data.handleId === 'number') {\n                        // in non-nodejs env, we remove timerId\n                        // from local cache\n                        delete tasksByHandleId[data.handleId];\n                    }\n                    else if (data.handleId) {\n                        // Node returns complex objects as handleIds\n                        // we remove task reference from timer object\n                        data.handleId[taskSymbol] = null;\n                    }\n                }\n            }\n        }\n        data.args[0] = timer;\n        data.handleId = setNative.apply(window, data.args);\n        return task;\n    }\n    function clearTask(task) {\n        return clearNative(task.data.handleId);\n    }\n    setNative =\n        patchMethod(window, setName, function (delegate) { return function (self, args) {\n            if (typeof args[0] === 'function') {\n                var options = {\n                    handleId: null,\n                    isPeriodic: nameSuffix === 'Interval',\n                    delay: (nameSuffix === 'Timeout' || nameSuffix === 'Interval') ? args[1] || 0 : null,\n                    args: args\n                };\n                var task = scheduleMacroTaskWithCurrentZone(setName, args[0], options, scheduleTask, clearTask);\n                if (!task) {\n                    return task;\n                }\n                // Node.js must additionally support the ref and unref functions.\n                var handle = task.data.handleId;\n                if (typeof handle === 'number') {\n                    // for non nodejs env, we save handleId: task\n                    // mapping in local cache for clearTimeout\n                    tasksByHandleId[handle] = task;\n                }\n                else if (handle) {\n                    // for nodejs env, we save task\n                    // reference in timerId Object for clearTimeout\n                    handle[taskSymbol] = task;\n                }\n                // check whether handle is null, because some polyfill or browser\n                // may return undefined from setTimeout/setInterval/setImmediate/requestAnimationFrame\n                if (handle && handle.ref && handle.unref && typeof handle.ref === 'function' &&\n                    typeof handle.unref === 'function') {\n                    task.ref = handle.ref.bind(handle);\n                    task.unref = handle.unref.bind(handle);\n                }\n                if (typeof handle === 'number' || handle) {\n                    return handle;\n                }\n                return task;\n            }\n            else {\n                // cause an error by calling it directly.\n                return delegate.apply(window, args);\n            }\n        }; });\n    clearNative =\n        patchMethod(window, cancelName, function (delegate) { return function (self, args) {\n            var id = args[0];\n            var task;\n            if (typeof id === 'number') {\n                // non nodejs env.\n                task = tasksByHandleId[id];\n            }\n            else {\n                // nodejs env.\n                task = id && id[taskSymbol];\n                // other environments.\n                if (!task) {\n                    task = id;\n                }\n            }\n            if (task && typeof task.type === 'string') {\n                if (task.state !== 'notScheduled' &&\n                    (task.cancelFn && task.data.isPeriodic || task.runCount === 0)) {\n                    if (typeof id === 'number') {\n                        delete tasksByHandleId[id];\n                    }\n                    else if (id) {\n                        id[taskSymbol] = null;\n                    }\n                    // Do not cancel already canceled functions\n                    task.zone.cancelTask(task);\n                }\n            }\n            else {\n                // cause an error by calling it directly.\n                delegate.apply(window, args);\n            }\n        }; });\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/*\n * This is necessary for Chrome and Chrome mobile, to enable\n * things like redefining `createdCallback` on an element.\n */\nvar _defineProperty = Object[zoneSymbol('defineProperty')] = Object.defineProperty;\nvar _getOwnPropertyDescriptor = Object[zoneSymbol('getOwnPropertyDescriptor')] =\n    Object.getOwnPropertyDescriptor;\nvar _create = Object.create;\nvar unconfigurablesKey = zoneSymbol('unconfigurables');\nfunction propertyPatch() {\n    Object.defineProperty = function (obj, prop, desc) {\n        if (isUnconfigurable(obj, prop)) {\n            throw new TypeError('Cannot assign to read only property \\'' + prop + '\\' of ' + obj);\n        }\n        var originalConfigurableFlag = desc.configurable;\n        if (prop !== 'prototype') {\n            desc = rewriteDescriptor(obj, prop, desc);\n        }\n        return _tryDefineProperty(obj, prop, desc, originalConfigurableFlag);\n    };\n    Object.defineProperties = function (obj, props) {\n        Object.keys(props).forEach(function (prop) {\n            Object.defineProperty(obj, prop, props[prop]);\n        });\n        return obj;\n    };\n    Object.create = function (obj, proto) {\n        if (typeof proto === 'object' && !Object.isFrozen(proto)) {\n            Object.keys(proto).forEach(function (prop) {\n                proto[prop] = rewriteDescriptor(obj, prop, proto[prop]);\n            });\n        }\n        return _create(obj, proto);\n    };\n    Object.getOwnPropertyDescriptor = function (obj, prop) {\n        var desc = _getOwnPropertyDescriptor(obj, prop);\n        if (isUnconfigurable(obj, prop)) {\n            desc.configurable = false;\n        }\n        return desc;\n    };\n}\nfunction _redefineProperty(obj, prop, desc) {\n    var originalConfigurableFlag = desc.configurable;\n    desc = rewriteDescriptor(obj, prop, desc);\n    return _tryDefineProperty(obj, prop, desc, originalConfigurableFlag);\n}\nfunction isUnconfigurable(obj, prop) {\n    return obj && obj[unconfigurablesKey] && obj[unconfigurablesKey][prop];\n}\nfunction rewriteDescriptor(obj, prop, desc) {\n    // issue-927, if the desc is frozen, don't try to change the desc\n    if (!Object.isFrozen(desc)) {\n        desc.configurable = true;\n    }\n    if (!desc.configurable) {\n        // issue-927, if the obj is frozen, don't try to set the desc to obj\n        if (!obj[unconfigurablesKey] && !Object.isFrozen(obj)) {\n            _defineProperty(obj, unconfigurablesKey, { writable: true, value: {} });\n        }\n        if (obj[unconfigurablesKey]) {\n            obj[unconfigurablesKey][prop] = true;\n        }\n    }\n    return desc;\n}\nfunction _tryDefineProperty(obj, prop, desc, originalConfigurableFlag) {\n    try {\n        return _defineProperty(obj, prop, desc);\n    }\n    catch (error) {\n        if (desc.configurable) {\n            // In case of errors, when the configurable flag was likely set by rewriteDescriptor(), let's\n            // retry with the original flag value\n            if (typeof originalConfigurableFlag == 'undefined') {\n                delete desc.configurable;\n            }\n            else {\n                desc.configurable = originalConfigurableFlag;\n            }\n            try {\n                return _defineProperty(obj, prop, desc);\n            }\n            catch (error) {\n                var descJson = null;\n                try {\n                    descJson = JSON.stringify(desc);\n                }\n                catch (error) {\n                    descJson = desc.toString();\n                }\n                console.log(\"Attempting to configure '\" + prop + \"' with descriptor '\" + descJson + \"' on object '\" + obj + \"' and got error, giving up: \" + error);\n            }\n        }\n        else {\n            throw error;\n        }\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// we have to patch the instance since the proto is non-configurable\nfunction apply(api, _global) {\n    var WS = _global.WebSocket;\n    // On Safari window.EventTarget doesn't exist so need to patch WS add/removeEventListener\n    // On older Chrome, no need since EventTarget was already patched\n    if (!_global.EventTarget) {\n        patchEventTarget(_global, [WS.prototype]);\n    }\n    _global.WebSocket = function (x, y) {\n        var socket = arguments.length > 1 ? new WS(x, y) : new WS(x);\n        var proxySocket;\n        var proxySocketProto;\n        // Safari 7.0 has non-configurable own 'onmessage' and friends properties on the socket instance\n        var onmessageDesc = ObjectGetOwnPropertyDescriptor(socket, 'onmessage');\n        if (onmessageDesc && onmessageDesc.configurable === false) {\n            proxySocket = ObjectCreate(socket);\n            // socket have own property descriptor 'onopen', 'onmessage', 'onclose', 'onerror'\n            // but proxySocket not, so we will keep socket as prototype and pass it to\n            // patchOnProperties method\n            proxySocketProto = socket;\n            [ADD_EVENT_LISTENER_STR, REMOVE_EVENT_LISTENER_STR, 'send', 'close'].forEach(function (propName) {\n                proxySocket[propName] = function () {\n                    var args = ArraySlice.call(arguments);\n                    if (propName === ADD_EVENT_LISTENER_STR || propName === REMOVE_EVENT_LISTENER_STR) {\n                        var eventName = args.length > 0 ? args[0] : undefined;\n                        if (eventName) {\n                            var propertySymbol = Zone.__symbol__('ON_PROPERTY' + eventName);\n                            socket[propertySymbol] = proxySocket[propertySymbol];\n                        }\n                    }\n                    return socket[propName].apply(socket, args);\n                };\n            });\n        }\n        else {\n            // we can patch the real socket\n            proxySocket = socket;\n        }\n        patchOnProperties(proxySocket, ['close', 'error', 'message', 'open'], proxySocketProto);\n        return proxySocket;\n    };\n    var globalWebSocket = _global['WebSocket'];\n    for (var prop in WS) {\n        globalWebSocket[prop] = WS[prop];\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @fileoverview\n * @suppress {globalThis}\n */\nvar globalEventHandlersEventNames = [\n    'abort',\n    'animationcancel',\n    'animationend',\n    'animationiteration',\n    'auxclick',\n    'beforeinput',\n    'blur',\n    'cancel',\n    'canplay',\n    'canplaythrough',\n    'change',\n    'compositionstart',\n    'compositionupdate',\n    'compositionend',\n    'cuechange',\n    'click',\n    'close',\n    'contextmenu',\n    'curechange',\n    'dblclick',\n    'drag',\n    'dragend',\n    'dragenter',\n    'dragexit',\n    'dragleave',\n    'dragover',\n    'drop',\n    'durationchange',\n    'emptied',\n    'ended',\n    'error',\n    'focus',\n    'focusin',\n    'focusout',\n    'gotpointercapture',\n    'input',\n    'invalid',\n    'keydown',\n    'keypress',\n    'keyup',\n    'load',\n    'loadstart',\n    'loadeddata',\n    'loadedmetadata',\n    'lostpointercapture',\n    'mousedown',\n    'mouseenter',\n    'mouseleave',\n    'mousemove',\n    'mouseout',\n    'mouseover',\n    'mouseup',\n    'mousewheel',\n    'orientationchange',\n    'pause',\n    'play',\n    'playing',\n    'pointercancel',\n    'pointerdown',\n    'pointerenter',\n    'pointerleave',\n    'pointerlockchange',\n    'mozpointerlockchange',\n    'webkitpointerlockerchange',\n    'pointerlockerror',\n    'mozpointerlockerror',\n    'webkitpointerlockerror',\n    'pointermove',\n    'pointout',\n    'pointerover',\n    'pointerup',\n    'progress',\n    'ratechange',\n    'reset',\n    'resize',\n    'scroll',\n    'seeked',\n    'seeking',\n    'select',\n    'selectionchange',\n    'selectstart',\n    'show',\n    'sort',\n    'stalled',\n    'submit',\n    'suspend',\n    'timeupdate',\n    'volumechange',\n    'touchcancel',\n    'touchmove',\n    'touchstart',\n    'touchend',\n    'transitioncancel',\n    'transitionend',\n    'waiting',\n    'wheel'\n];\nvar documentEventNames = [\n    'afterscriptexecute', 'beforescriptexecute', 'DOMContentLoaded', 'fullscreenchange',\n    'mozfullscreenchange', 'webkitfullscreenchange', 'msfullscreenchange', 'fullscreenerror',\n    'mozfullscreenerror', 'webkitfullscreenerror', 'msfullscreenerror', 'readystatechange',\n    'visibilitychange'\n];\nvar windowEventNames = [\n    'absolutedeviceorientation',\n    'afterinput',\n    'afterprint',\n    'appinstalled',\n    'beforeinstallprompt',\n    'beforeprint',\n    'beforeunload',\n    'devicelight',\n    'devicemotion',\n    'deviceorientation',\n    'deviceorientationabsolute',\n    'deviceproximity',\n    'hashchange',\n    'languagechange',\n    'message',\n    'mozbeforepaint',\n    'offline',\n    'online',\n    'paint',\n    'pageshow',\n    'pagehide',\n    'popstate',\n    'rejectionhandled',\n    'storage',\n    'unhandledrejection',\n    'unload',\n    'userproximity',\n    'vrdisplyconnected',\n    'vrdisplaydisconnected',\n    'vrdisplaypresentchange'\n];\nvar htmlElementEventNames = [\n    'beforecopy', 'beforecut', 'beforepaste', 'copy', 'cut', 'paste', 'dragstart', 'loadend',\n    'animationstart', 'search', 'transitionrun', 'transitionstart', 'webkitanimationend',\n    'webkitanimationiteration', 'webkitanimationstart', 'webkittransitionend'\n];\nvar mediaElementEventNames = ['encrypted', 'waitingforkey', 'msneedkey', 'mozinterruptbegin', 'mozinterruptend'];\nvar ieElementEventNames = [\n    'activate',\n    'afterupdate',\n    'ariarequest',\n    'beforeactivate',\n    'beforedeactivate',\n    'beforeeditfocus',\n    'beforeupdate',\n    'cellchange',\n    'controlselect',\n    'dataavailable',\n    'datasetchanged',\n    'datasetcomplete',\n    'errorupdate',\n    'filterchange',\n    'layoutcomplete',\n    'losecapture',\n    'move',\n    'moveend',\n    'movestart',\n    'propertychange',\n    'resizeend',\n    'resizestart',\n    'rowenter',\n    'rowexit',\n    'rowsdelete',\n    'rowsinserted',\n    'command',\n    'compassneedscalibration',\n    'deactivate',\n    'help',\n    'mscontentzoom',\n    'msmanipulationstatechanged',\n    'msgesturechange',\n    'msgesturedoubletap',\n    'msgestureend',\n    'msgesturehold',\n    'msgesturestart',\n    'msgesturetap',\n    'msgotpointercapture',\n    'msinertiastart',\n    'mslostpointercapture',\n    'mspointercancel',\n    'mspointerdown',\n    'mspointerenter',\n    'mspointerhover',\n    'mspointerleave',\n    'mspointermove',\n    'mspointerout',\n    'mspointerover',\n    'mspointerup',\n    'pointerout',\n    'mssitemodejumplistitemremoved',\n    'msthumbnailclick',\n    'stop',\n    'storagecommit'\n];\nvar webglEventNames = ['webglcontextrestored', 'webglcontextlost', 'webglcontextcreationerror'];\nvar formEventNames = ['autocomplete', 'autocompleteerror'];\nvar detailEventNames = ['toggle'];\nvar frameEventNames = ['load'];\nvar frameSetEventNames = ['blur', 'error', 'focus', 'load', 'resize', 'scroll', 'messageerror'];\nvar marqueeEventNames = ['bounce', 'finish', 'start'];\nvar XMLHttpRequestEventNames = [\n    'loadstart', 'progress', 'abort', 'error', 'load', 'progress', 'timeout', 'loadend',\n    'readystatechange'\n];\nvar IDBIndexEventNames = ['upgradeneeded', 'complete', 'abort', 'success', 'error', 'blocked', 'versionchange', 'close'];\nvar websocketEventNames = ['close', 'error', 'open', 'message'];\nvar workerEventNames = ['error', 'message'];\nvar eventNames = globalEventHandlersEventNames.concat(webglEventNames, formEventNames, detailEventNames, documentEventNames, windowEventNames, htmlElementEventNames, ieElementEventNames);\nfunction filterProperties(target, onProperties, ignoreProperties) {\n    if (!ignoreProperties) {\n        return onProperties;\n    }\n    var tip = ignoreProperties.filter(function (ip) { return ip.target === target; });\n    if (!tip || tip.length === 0) {\n        return onProperties;\n    }\n    var targetIgnoreProperties = tip[0].ignoreProperties;\n    return onProperties.filter(function (op) { return targetIgnoreProperties.indexOf(op) === -1; });\n}\nfunction patchFilteredProperties(target, onProperties, ignoreProperties, prototype) {\n    // check whether target is available, sometimes target will be undefined\n    // because different browser or some 3rd party plugin.\n    if (!target) {\n        return;\n    }\n    var filteredProperties = filterProperties(target, onProperties, ignoreProperties);\n    patchOnProperties(target, filteredProperties, prototype);\n}\nfunction propertyDescriptorPatch(api, _global) {\n    if (isNode && !isMix) {\n        return;\n    }\n    var supportsWebSocket = typeof WebSocket !== 'undefined';\n    if (canPatchViaPropertyDescriptor()) {\n        var ignoreProperties = _global.__Zone_ignore_on_properties;\n        // for browsers that we can patch the descriptor:  Chrome & Firefox\n        if (isBrowser) {\n            var internalWindow = window;\n            // in IE/Edge, onProp not exist in window object, but in WindowPrototype\n            // so we need to pass WindowPrototype to check onProp exist or not\n            patchFilteredProperties(internalWindow, eventNames.concat(['messageerror']), ignoreProperties, ObjectGetPrototypeOf(internalWindow));\n            patchFilteredProperties(Document.prototype, eventNames, ignoreProperties);\n            if (typeof internalWindow['SVGElement'] !== 'undefined') {\n                patchFilteredProperties(internalWindow['SVGElement'].prototype, eventNames, ignoreProperties);\n            }\n            patchFilteredProperties(Element.prototype, eventNames, ignoreProperties);\n            patchFilteredProperties(HTMLElement.prototype, eventNames, ignoreProperties);\n            patchFilteredProperties(HTMLMediaElement.prototype, mediaElementEventNames, ignoreProperties);\n            patchFilteredProperties(HTMLFrameSetElement.prototype, windowEventNames.concat(frameSetEventNames), ignoreProperties);\n            patchFilteredProperties(HTMLBodyElement.prototype, windowEventNames.concat(frameSetEventNames), ignoreProperties);\n            patchFilteredProperties(HTMLFrameElement.prototype, frameEventNames, ignoreProperties);\n            patchFilteredProperties(HTMLIFrameElement.prototype, frameEventNames, ignoreProperties);\n            var HTMLMarqueeElement_1 = internalWindow['HTMLMarqueeElement'];\n            if (HTMLMarqueeElement_1) {\n                patchFilteredProperties(HTMLMarqueeElement_1.prototype, marqueeEventNames, ignoreProperties);\n            }\n            var Worker_1 = internalWindow['Worker'];\n            if (Worker_1) {\n                patchFilteredProperties(Worker_1.prototype, workerEventNames, ignoreProperties);\n            }\n        }\n        patchFilteredProperties(XMLHttpRequest.prototype, XMLHttpRequestEventNames, ignoreProperties);\n        var XMLHttpRequestEventTarget = _global['XMLHttpRequestEventTarget'];\n        if (XMLHttpRequestEventTarget) {\n            patchFilteredProperties(XMLHttpRequestEventTarget && XMLHttpRequestEventTarget.prototype, XMLHttpRequestEventNames, ignoreProperties);\n        }\n        if (typeof IDBIndex !== 'undefined') {\n            patchFilteredProperties(IDBIndex.prototype, IDBIndexEventNames, ignoreProperties);\n            patchFilteredProperties(IDBRequest.prototype, IDBIndexEventNames, ignoreProperties);\n            patchFilteredProperties(IDBOpenDBRequest.prototype, IDBIndexEventNames, ignoreProperties);\n            patchFilteredProperties(IDBDatabase.prototype, IDBIndexEventNames, ignoreProperties);\n            patchFilteredProperties(IDBTransaction.prototype, IDBIndexEventNames, ignoreProperties);\n            patchFilteredProperties(IDBCursor.prototype, IDBIndexEventNames, ignoreProperties);\n        }\n        if (supportsWebSocket) {\n            patchFilteredProperties(WebSocket.prototype, websocketEventNames, ignoreProperties);\n        }\n    }\n    else {\n        // Safari, Android browsers (Jelly Bean)\n        patchViaCapturingAllTheEvents();\n        patchClass('XMLHttpRequest');\n        if (supportsWebSocket) {\n            apply(api, _global);\n        }\n    }\n}\nfunction canPatchViaPropertyDescriptor() {\n    if ((isBrowser || isMix) && !ObjectGetOwnPropertyDescriptor(HTMLElement.prototype, 'onclick') &&\n        typeof Element !== 'undefined') {\n        // WebKit https://bugs.webkit.org/show_bug.cgi?id=134364\n        // IDL interface attributes are not configurable\n        var desc = ObjectGetOwnPropertyDescriptor(Element.prototype, 'onclick');\n        if (desc && !desc.configurable)\n            return false;\n    }\n    var ON_READY_STATE_CHANGE = 'onreadystatechange';\n    var XMLHttpRequestPrototype = XMLHttpRequest.prototype;\n    var xhrDesc = ObjectGetOwnPropertyDescriptor(XMLHttpRequestPrototype, ON_READY_STATE_CHANGE);\n    // add enumerable and configurable here because in opera\n    // by default XMLHttpRequest.prototype.onreadystatechange is undefined\n    // without adding enumerable and configurable will cause onreadystatechange\n    // non-configurable\n    // and if XMLHttpRequest.prototype.onreadystatechange is undefined,\n    // we should set a real desc instead a fake one\n    if (xhrDesc) {\n        ObjectDefineProperty(XMLHttpRequestPrototype, ON_READY_STATE_CHANGE, {\n            enumerable: true,\n            configurable: true,\n            get: function () {\n                return true;\n            }\n        });\n        var req = new XMLHttpRequest();\n        var result = !!req.onreadystatechange;\n        // restore original desc\n        ObjectDefineProperty(XMLHttpRequestPrototype, ON_READY_STATE_CHANGE, xhrDesc || {});\n        return result;\n    }\n    else {\n        var SYMBOL_FAKE_ONREADYSTATECHANGE_1 = zoneSymbol('fake');\n        ObjectDefineProperty(XMLHttpRequestPrototype, ON_READY_STATE_CHANGE, {\n            enumerable: true,\n            configurable: true,\n            get: function () {\n                return this[SYMBOL_FAKE_ONREADYSTATECHANGE_1];\n            },\n            set: function (value) {\n                this[SYMBOL_FAKE_ONREADYSTATECHANGE_1] = value;\n            }\n        });\n        var req = new XMLHttpRequest();\n        var detectFunc = function () { };\n        req.onreadystatechange = detectFunc;\n        var result = req[SYMBOL_FAKE_ONREADYSTATECHANGE_1] === detectFunc;\n        req.onreadystatechange = null;\n        return result;\n    }\n}\nvar unboundKey = zoneSymbol('unbound');\n// Whenever any eventListener fires, we check the eventListener target and all parents\n// for `onwhatever` properties and replace them with zone-bound functions\n// - Chrome (for now)\nfunction patchViaCapturingAllTheEvents() {\n    var _loop_1 = function (i) {\n        var property = eventNames[i];\n        var onproperty = 'on' + property;\n        self.addEventListener(property, function (event) {\n            var elt = event.target, bound, source;\n            if (elt) {\n                source = elt.constructor['name'] + '.' + onproperty;\n            }\n            else {\n                source = 'unknown.' + onproperty;\n            }\n            while (elt) {\n                if (elt[onproperty] && !elt[onproperty][unboundKey]) {\n                    bound = wrapWithCurrentZone(elt[onproperty], source);\n                    bound[unboundKey] = elt[onproperty];\n                    elt[onproperty] = bound;\n                }\n                elt = elt.parentElement;\n            }\n        }, true);\n    };\n    for (var i = 0; i < eventNames.length; i++) {\n        _loop_1(i);\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction eventTargetPatch(_global, api) {\n    var WTF_ISSUE_555 = 'Anchor,Area,Audio,BR,Base,BaseFont,Body,Button,Canvas,Content,DList,Directory,Div,Embed,FieldSet,Font,Form,Frame,FrameSet,HR,Head,Heading,Html,IFrame,Image,Input,Keygen,LI,Label,Legend,Link,Map,Marquee,Media,Menu,Meta,Meter,Mod,OList,Object,OptGroup,Option,Output,Paragraph,Pre,Progress,Quote,Script,Select,Source,Span,Style,TableCaption,TableCell,TableCol,Table,TableRow,TableSection,TextArea,Title,Track,UList,Unknown,Video';\n    var NO_EVENT_TARGET = 'ApplicationCache,EventSource,FileReader,InputMethodContext,MediaController,MessagePort,Node,Performance,SVGElementInstance,SharedWorker,TextTrack,TextTrackCue,TextTrackList,WebKitNamedFlow,Window,Worker,WorkerGlobalScope,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload,IDBRequest,IDBOpenDBRequest,IDBDatabase,IDBTransaction,IDBCursor,DBIndex,WebSocket'\n        .split(',');\n    var EVENT_TARGET = 'EventTarget';\n    var apis = [];\n    var isWtf = _global['wtf'];\n    var WTF_ISSUE_555_ARRAY = WTF_ISSUE_555.split(',');\n    if (isWtf) {\n        // Workaround for: https://github.com/google/tracing-framework/issues/555\n        apis = WTF_ISSUE_555_ARRAY.map(function (v) { return 'HTML' + v + 'Element'; }).concat(NO_EVENT_TARGET);\n    }\n    else if (_global[EVENT_TARGET]) {\n        apis.push(EVENT_TARGET);\n    }\n    else {\n        // Note: EventTarget is not available in all browsers,\n        // if it's not available, we instead patch the APIs in the IDL that inherit from EventTarget\n        apis = NO_EVENT_TARGET;\n    }\n    var isDisableIECheck = _global['__Zone_disable_IE_check'] || false;\n    var isEnableCrossContextCheck = _global['__Zone_enable_cross_context_check'] || false;\n    var ieOrEdge = isIEOrEdge();\n    var ADD_EVENT_LISTENER_SOURCE = '.addEventListener:';\n    var FUNCTION_WRAPPER = '[object FunctionWrapper]';\n    var BROWSER_TOOLS = 'function __BROWSERTOOLS_CONSOLE_SAFEFUNC() { [native code] }';\n    //  predefine all __zone_symbol__ + eventName + true/false string\n    for (var i = 0; i < eventNames.length; i++) {\n        var eventName = eventNames[i];\n        var falseEventName = eventName + FALSE_STR;\n        var trueEventName = eventName + TRUE_STR;\n        var symbol = ZONE_SYMBOL_PREFIX + falseEventName;\n        var symbolCapture = ZONE_SYMBOL_PREFIX + trueEventName;\n        zoneSymbolEventNames$1[eventName] = {};\n        zoneSymbolEventNames$1[eventName][FALSE_STR] = symbol;\n        zoneSymbolEventNames$1[eventName][TRUE_STR] = symbolCapture;\n    }\n    //  predefine all task.source string\n    for (var i = 0; i < WTF_ISSUE_555.length; i++) {\n        var target = WTF_ISSUE_555_ARRAY[i];\n        var targets = globalSources[target] = {};\n        for (var j = 0; j < eventNames.length; j++) {\n            var eventName = eventNames[j];\n            targets[eventName] = target + ADD_EVENT_LISTENER_SOURCE + eventName;\n        }\n    }\n    var checkIEAndCrossContext = function (nativeDelegate, delegate, target, args) {\n        if (!isDisableIECheck && ieOrEdge) {\n            if (isEnableCrossContextCheck) {\n                try {\n                    var testString = delegate.toString();\n                    if ((testString === FUNCTION_WRAPPER || testString == BROWSER_TOOLS)) {\n                        nativeDelegate.apply(target, args);\n                        return false;\n                    }\n                }\n                catch (error) {\n                    nativeDelegate.apply(target, args);\n                    return false;\n                }\n            }\n            else {\n                var testString = delegate.toString();\n                if ((testString === FUNCTION_WRAPPER || testString == BROWSER_TOOLS)) {\n                    nativeDelegate.apply(target, args);\n                    return false;\n                }\n            }\n        }\n        else if (isEnableCrossContextCheck) {\n            try {\n                delegate.toString();\n            }\n            catch (error) {\n                nativeDelegate.apply(target, args);\n                return false;\n            }\n        }\n        return true;\n    };\n    var apiTypes = [];\n    for (var i = 0; i < apis.length; i++) {\n        var type = _global[apis[i]];\n        apiTypes.push(type && type.prototype);\n    }\n    // vh is validateHandler to check event handler\n    // is valid or not(for security check)\n    patchEventTarget(_global, apiTypes, { vh: checkIEAndCrossContext });\n    api.patchEventTarget = patchEventTarget;\n    return true;\n}\nfunction patchEvent(global, api) {\n    patchEventPrototype(global, api);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction registerElementPatch(_global) {\n    if ((!isBrowser && !isMix) || !('registerElement' in _global.document)) {\n        return;\n    }\n    var _registerElement = document.registerElement;\n    var callbacks = ['createdCallback', 'attachedCallback', 'detachedCallback', 'attributeChangedCallback'];\n    document.registerElement = function (name, opts) {\n        if (opts && opts.prototype) {\n            callbacks.forEach(function (callback) {\n                var source = 'Document.registerElement::' + callback;\n                var prototype = opts.prototype;\n                if (prototype.hasOwnProperty(callback)) {\n                    var descriptor = ObjectGetOwnPropertyDescriptor(prototype, callback);\n                    if (descriptor && descriptor.value) {\n                        descriptor.value = wrapWithCurrentZone(descriptor.value, source);\n                        _redefineProperty(opts.prototype, callback, descriptor);\n                    }\n                    else {\n                        prototype[callback] = wrapWithCurrentZone(prototype[callback], source);\n                    }\n                }\n                else if (prototype[callback]) {\n                    prototype[callback] = wrapWithCurrentZone(prototype[callback], source);\n                }\n            });\n        }\n        return _registerElement.call(document, name, opts);\n    };\n    attachOriginToPatched(document.registerElement, _registerElement);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @fileoverview\n * @suppress {missingRequire}\n */\nZone.__load_patch('util', function (global, Zone, api) {\n    api.patchOnProperties = patchOnProperties;\n    api.patchMethod = patchMethod;\n    api.bindArguments = bindArguments;\n});\nZone.__load_patch('timers', function (global) {\n    var set = 'set';\n    var clear = 'clear';\n    patchTimer(global, set, clear, 'Timeout');\n    patchTimer(global, set, clear, 'Interval');\n    patchTimer(global, set, clear, 'Immediate');\n});\nZone.__load_patch('requestAnimationFrame', function (global) {\n    patchTimer(global, 'request', 'cancel', 'AnimationFrame');\n    patchTimer(global, 'mozRequest', 'mozCancel', 'AnimationFrame');\n    patchTimer(global, 'webkitRequest', 'webkitCancel', 'AnimationFrame');\n});\nZone.__load_patch('blocking', function (global, Zone) {\n    var blockingMethods = ['alert', 'prompt', 'confirm'];\n    for (var i = 0; i < blockingMethods.length; i++) {\n        var name_1 = blockingMethods[i];\n        patchMethod(global, name_1, function (delegate, symbol, name) {\n            return function (s, args) {\n                return Zone.current.run(delegate, global, args, name);\n            };\n        });\n    }\n});\nZone.__load_patch('EventTarget', function (global, Zone, api) {\n    // load blackListEvents from global\n    var SYMBOL_BLACK_LISTED_EVENTS = Zone.__symbol__('BLACK_LISTED_EVENTS');\n    if (global[SYMBOL_BLACK_LISTED_EVENTS]) {\n        Zone[SYMBOL_BLACK_LISTED_EVENTS] = global[SYMBOL_BLACK_LISTED_EVENTS];\n    }\n    patchEvent(global, api);\n    eventTargetPatch(global, api);\n    // patch XMLHttpRequestEventTarget's addEventListener/removeEventListener\n    var XMLHttpRequestEventTarget = global['XMLHttpRequestEventTarget'];\n    if (XMLHttpRequestEventTarget && XMLHttpRequestEventTarget.prototype) {\n        api.patchEventTarget(global, [XMLHttpRequestEventTarget.prototype]);\n    }\n    patchClass('MutationObserver');\n    patchClass('WebKitMutationObserver');\n    patchClass('IntersectionObserver');\n    patchClass('FileReader');\n});\nZone.__load_patch('on_property', function (global, Zone, api) {\n    propertyDescriptorPatch(api, global);\n    propertyPatch();\n    registerElementPatch(global);\n});\nZone.__load_patch('canvas', function (global) {\n    var HTMLCanvasElement = global['HTMLCanvasElement'];\n    if (typeof HTMLCanvasElement !== 'undefined' && HTMLCanvasElement.prototype &&\n        HTMLCanvasElement.prototype.toBlob) {\n        patchMacroTask(HTMLCanvasElement.prototype, 'toBlob', function (self, args) {\n            return { name: 'HTMLCanvasElement.toBlob', target: self, cbIdx: 0, args: args };\n        });\n    }\n});\nZone.__load_patch('XHR', function (global, Zone) {\n    // Treat XMLHttpRequest as a macrotask.\n    patchXHR(global);\n    var XHR_TASK = zoneSymbol('xhrTask');\n    var XHR_SYNC = zoneSymbol('xhrSync');\n    var XHR_LISTENER = zoneSymbol('xhrListener');\n    var XHR_SCHEDULED = zoneSymbol('xhrScheduled');\n    var XHR_URL = zoneSymbol('xhrURL');\n    function patchXHR(window) {\n        var XMLHttpRequestPrototype = XMLHttpRequest.prototype;\n        function findPendingTask(target) {\n            return target[XHR_TASK];\n        }\n        var oriAddListener = XMLHttpRequestPrototype[ZONE_SYMBOL_ADD_EVENT_LISTENER];\n        var oriRemoveListener = XMLHttpRequestPrototype[ZONE_SYMBOL_REMOVE_EVENT_LISTENER];\n        if (!oriAddListener) {\n            var XMLHttpRequestEventTarget = window['XMLHttpRequestEventTarget'];\n            if (XMLHttpRequestEventTarget) {\n                var XMLHttpRequestEventTargetPrototype = XMLHttpRequestEventTarget.prototype;\n                oriAddListener = XMLHttpRequestEventTargetPrototype[ZONE_SYMBOL_ADD_EVENT_LISTENER];\n                oriRemoveListener = XMLHttpRequestEventTargetPrototype[ZONE_SYMBOL_REMOVE_EVENT_LISTENER];\n            }\n        }\n        var READY_STATE_CHANGE = 'readystatechange';\n        var SCHEDULED = 'scheduled';\n        function scheduleTask(task) {\n            XMLHttpRequest[XHR_SCHEDULED] = false;\n            var data = task.data;\n            var target = data.target;\n            // remove existing event listener\n            var listener = target[XHR_LISTENER];\n            if (!oriAddListener) {\n                oriAddListener = target[ZONE_SYMBOL_ADD_EVENT_LISTENER];\n                oriRemoveListener = target[ZONE_SYMBOL_REMOVE_EVENT_LISTENER];\n            }\n            if (listener) {\n                oriRemoveListener.call(target, READY_STATE_CHANGE, listener);\n            }\n            var newListener = target[XHR_LISTENER] = function () {\n                if (target.readyState === target.DONE) {\n                    // sometimes on some browsers XMLHttpRequest will fire onreadystatechange with\n                    // readyState=4 multiple times, so we need to check task state here\n                    if (!data.aborted && XMLHttpRequest[XHR_SCHEDULED] && task.state === SCHEDULED) {\n                        task.invoke();\n                    }\n                }\n            };\n            oriAddListener.call(target, READY_STATE_CHANGE, newListener);\n            var storedTask = target[XHR_TASK];\n            if (!storedTask) {\n                target[XHR_TASK] = task;\n            }\n            sendNative.apply(target, data.args);\n            XMLHttpRequest[XHR_SCHEDULED] = true;\n            return task;\n        }\n        function placeholderCallback() { }\n        function clearTask(task) {\n            var data = task.data;\n            // Note - ideally, we would call data.target.removeEventListener here, but it's too late\n            // to prevent it from firing. So instead, we store info for the event listener.\n            data.aborted = true;\n            return abortNative.apply(data.target, data.args);\n        }\n        var openNative = patchMethod(XMLHttpRequestPrototype, 'open', function () { return function (self, args) {\n            self[XHR_SYNC] = args[2] == false;\n            self[XHR_URL] = args[1];\n            return openNative.apply(self, args);\n        }; });\n        var XMLHTTPREQUEST_SOURCE = 'XMLHttpRequest.send';\n        var sendNative = patchMethod(XMLHttpRequestPrototype, 'send', function () { return function (self, args) {\n            if (self[XHR_SYNC]) {\n                // if the XHR is sync there is no task to schedule, just execute the code.\n                return sendNative.apply(self, args);\n            }\n            else {\n                var options = {\n                    target: self,\n                    url: self[XHR_URL],\n                    isPeriodic: false,\n                    delay: null,\n                    args: args,\n                    aborted: false\n                };\n                return scheduleMacroTaskWithCurrentZone(XMLHTTPREQUEST_SOURCE, placeholderCallback, options, scheduleTask, clearTask);\n            }\n        }; });\n        var abortNative = patchMethod(XMLHttpRequestPrototype, 'abort', function () { return function (self) {\n            var task = findPendingTask(self);\n            if (task && typeof task.type == 'string') {\n                // If the XHR has already completed, do nothing.\n                // If the XHR has already been aborted, do nothing.\n                // Fix #569, call abort multiple times before done will cause\n                // macroTask task count be negative number\n                if (task.cancelFn == null || (task.data && task.data.aborted)) {\n                    return;\n                }\n                task.zone.cancelTask(task);\n            }\n            // Otherwise, we are trying to abort an XHR which has not yet been sent, so there is no\n            // task\n            // to cancel. Do nothing.\n        }; });\n    }\n});\nZone.__load_patch('geolocation', function (global) {\n    /// GEO_LOCATION\n    if (global['navigator'] && global['navigator'].geolocation) {\n        patchPrototype(global['navigator'].geolocation, ['getCurrentPosition', 'watchPosition']);\n    }\n});\nZone.__load_patch('PromiseRejectionEvent', function (global, Zone) {\n    // handle unhandled promise rejection\n    function findPromiseRejectionHandler(evtName) {\n        return function (e) {\n            var eventTasks = findEventTasks(global, evtName);\n            eventTasks.forEach(function (eventTask) {\n                // windows has added unhandledrejection event listener\n                // trigger the event listener\n                var PromiseRejectionEvent = global['PromiseRejectionEvent'];\n                if (PromiseRejectionEvent) {\n                    var evt = new PromiseRejectionEvent(evtName, { promise: e.promise, reason: e.rejection });\n                    eventTask.invoke(evt);\n                }\n            });\n        };\n    }\n    if (global['PromiseRejectionEvent']) {\n        Zone[zoneSymbol('unhandledPromiseRejectionHandler')] =\n            findPromiseRejectionHandler('unhandledrejection');\n        Zone[zoneSymbol('rejectionHandledHandler')] =\n            findPromiseRejectionHandler('rejectionhandled');\n    }\n});\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n})));\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","module.exports = \"<p-growl [(value)]=\\\"growlMsgs\\\"></p-growl>\\r\\n\\r\\n<p-messages [(value)]=\\\"lastMessage\\\"></p-messages>\\r\\n<!--\\r\\n\\r\\n<div *ngIf=\\\"message\\\" [ngClass]=\\\"{ 'alert': message, 'alert-success': message.type === 'success', 'alert-danger': message.type === 'error' }\\\">{{message.text}}</div>-->\\r\\n\"","import { Component, OnDestroy } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { Message } from 'primeng/primeng';\r\n\r\nimport { AlertService, AuthenticationService } from '../_services/index';\r\nimport { User } from '../_models/user';\r\n\r\n@Component({\r\n    selector: 'alert',\r\n    templateUrl: 'alert.component.html'\r\n})\r\n\r\nexport class AlertComponent implements OnDestroy {\r\n    private subscription: Subscription;\r\n    private subLogin: Subscription;\r\n\r\n    growlMsgs: Message[] = [];\r\n    lastMessage: Message[];\r\n\r\n    constructor(private alertService: AlertService, private authService: AuthenticationService) {\r\n        // subscribe to alert messages\r\n        this.subscription = alertService.getMessage().subscribe(message => this.handleMessage(message));\r\n        this.subLogin = this.authService.userAsObs.subscribe(user => this.clean(user));\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        // unsubscribe on destroy to prevent memory leaks\r\n        this.subscription.unsubscribe();\r\n        this.subLogin.unsubscribe();\r\n        this.clean(null);\r\n    }\r\n\r\n    public clean(user: User):void {\r\n        console.log(\"Cleaning message cause user has changed!\" + JSON.stringify(user));\r\n        this.lastMessage = [];\r\n    }\r\n\r\n    private handleMessage(message: Message):void {\r\n        if (message !== undefined) {\r\n\r\n            console.log(\"growl: \"+JSON.stringify(message)  );\r\n            this.growlMsgs.push(message);\r\n            this.lastMessage = [];\r\n            this.lastMessage.push(message);\r\n\r\n            setTimeout(() =>\r\n                {\r\n                    this.removeGrowl(message);\r\n                },\r\n                10000);\r\n        }\r\n    }\r\n\r\n    private removeGrowl(message:Message):void {\r\n        let newMessages: Message[] = [];\r\n        for (let m of this.growlMsgs) {\r\n            if (m.detail !== message.detail) {\r\n                newMessages.push(m);\r\n            }\r\n        }\r\n        this.growlMsgs = newMessages;\r\n    }\r\n}","﻿export * from './alert.component';","﻿import { Injectable } from '@angular/core';\r\nimport { Router, CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\r\nimport { AuthenticationService } from '../_services/index';\r\nimport { User } from '../_models/user';\r\nimport { map } from 'rxjs/operators';\r\n\r\n@Injectable()\r\nexport class AuthGuard implements CanActivate {\r\n\r\n    constructor(private router: Router, private authService:AuthenticationService) { }\r\n\r\n    canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\r\n        console.log(\"AuthGuard canActivate...\");\r\n        return this.authService.userAsObs.pipe(\r\n            map((user: User) => {\r\n                if (user && user.token){\r\n                    return true;\r\n                }\r\n                this.router.navigate(['/logme']);\r\n                return false;\r\n            }));\r\n\r\n    }\r\n}","﻿export * from './auth.guard';","export class Calendar {\r\n\t        firstDayOfWeek: number;\r\n            monthNames: string []; \r\n            monthNamesShort: string [];\r\n            dayNames: string [];\r\n            dayNamesShort: string [];\r\n            dayNamesMin: string [];\r\n            today: string;\r\n            clear: string;\r\n\tconstructor(){\r\n            this.firstDayOfWeek= 1,\r\n            this.monthNames= ['Styczeń','Luty','Marzec','Kwiecień','Maj','Czerwiec','Lipiec','Sierpień','Wrzesień','Październik','Listopad','Grudzień'],\r\n            this.monthNamesShort=['Sty','Lut','Mar','Kwi','Maj','Cze', 'Lip','Sie','Wrz','Paź','Lis','Gru'],\r\n            this.dayNames=['Niedziela','Poniedziałek','Wtorek','Środa','Czwartek','Piątek','Sobota'],\r\n            this.dayNamesShort=['Nie','Pon','Wt','Śr','Czw','Pt','So'],\r\n            this.dayNamesMin=['N','P','W','Ś','Cz','P','S'],\r\n            this.today='Today',\r\n            this.clear='Clear'\r\n    }\r\n}\r\n","export class CodeValue {\r\n\tconstructor(\r\n\t\tpublic code: string,\r\n\t\tpublic paramChar: string\r\n\t){}\r\n}","import { User } from '../_models/index';\r\nimport { forEach } from '@angular/router/src/utils/collection';\r\n\r\nexport const PREFIX:string = \"__\"\r\n/*\r\n {\r\n     \"index\": 1,\r\n     \"reason\": \"any|changeComplexity|cancel|reasign\"\r\n     \"date\": \"2016-09-02 17:32\",\r\n     \"createdBy\": 1,\r\n     \"sCreatedBy\": \"Depp\",\r\n     \"text\": \"To jest komentarz\",\r\n }\r\n */\r\n\r\n\r\nexport class Comment {\r\n\r\n    index: number;\r\n    reason: string;\r\n    date: string;\r\n    createdBy: number;\r\n    sCreatedBy: string;\r\n    text: string;\r\n\r\n}\r\n\r\nexport class Comments {\r\n\r\n    public comments: Comment[] = [];\r\n\r\n    constructor(dbContent:string) {\r\n        //console.log(\"dbContent comment: \" + dbContent);\r\n        if (dbContent && dbContent.length > 3 && dbContent.startsWith(PREFIX)) {\r\n            console.log(\"got new \"+dbContent);\r\n            this.comments = JSON.parse(decodeURIComponent(atob(dbContent.substring(2))));\r\n        } else if (dbContent && dbContent.length > 1) {\r\n            console.log(\"got old \"+dbContent);\r\n            let comment: Comment = <Comment> {index: 1, reason: \"Faza I\", date: \"Brak danych\", createdBy: -1, sCreatedBy: \"Brak danych\", text: dbContent};\r\n            this.comments.push(comment);\r\n        } else {\r\n            console.log(\"No comment!\");\r\n        }\r\n    }\r\n\r\n}\r\n\r\n//its a shame it cannot be object funtions as the contructor does not create object instance with them!\r\n\r\nexport function formatCommentDate(d: Date) {\r\n    let mm = (d.getMonth() + 1) < 10 ? '0'+(d.getMonth() + 1): (d.getMonth() + 1);\r\n    let dd = d.getDate()<10 ? '0'+d.getDate(): d.getDate();\r\n    let yy = d.getFullYear();\r\n\r\n    let HH = d.getHours() < 10 ? '0'+d.getHours() : d.getHours();\r\n    let MM = d.getMinutes() < 10 ? '0'+d.getMinutes() : d.getMinutes();\r\n\r\n    return yy + '-' + mm + '-' + dd+ ' ' + HH + ':' + MM;\r\n}\r\n\r\nexport function commentToDbContent(comments: Comments) {\r\n    console.log(\"returning comment db representation: \"+JSON.stringify(comments.comments));\r\n    try {\r\n        return PREFIX+btoa(encodeURIComponent(JSON.stringify(comments.comments)));\r\n    } catch(e) {\r\n        console.log(\"Cannot base64: \"+encodeURIComponent(JSON.stringify(comments.comments)));\r\n        throw e;\r\n    }\r\n\r\n}\r\n\r\nexport function commentAdd(comments: Comments, reason: string, createdBy: User, content: string): void {\r\n    let index: number = comments.comments.length;\r\n    let now = new Date();\r\n    let sNow = formatCommentDate(now);\r\n    let comment: Comment = <Comment> {index: 1, reason: reason, date: sNow, createdBy: createdBy.id, sCreatedBy: createdBy.firstName+' '+createdBy.lastName, text: content};\r\n    comments.comments.push(comment);\r\n}\r\n\r\n//formatted version for html\r\nexport function commentAsString(comments: Comments): string {\r\n    let result: string = \"\";\r\n    for(let comment of comments.comments) {\r\n        result += comment.date+\", \"+comment.reason+\", \"+comment.sCreatedBy+\", \\\"\"+comment.text+\"\\\"\\n\";\r\n    }\r\n    return result;\r\n}\r\n\r\n//formatted simple version for html\r\nexport function commentAsSimpleString(comments: Comments): string {\r\n    let result: string = \"\";\r\n    for(let comment of comments.comments) {\r\n        result += \"\\\"\"+comment.text+\"\\\" -> \";\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function DisplayTextCommentAsString(comments: Comments): string {\r\n    if (comments && comments.comments && comments.comments.length > 0 && comments.comments[(comments.comments.length)-1]) {\r\n        return comments.comments[(comments.comments.length)-1].text\r\n    }\r\n    return '';\r\n}\r\n\r\n\r\n\r\nexport function commentCancelOrHoldAsString(comments: Comments): string {\r\n    let comentsTab : string [] = [];\r\n    comments.comments.forEach(element => {\r\n        if (element.reason=== 'Anulowanie')\r\n        {\r\n            comentsTab.push(' '+element.sCreatedBy+\": \\\"\" +(element.text? element.text: '')+ \"\\\"\" );                       \r\n        }\r\n\r\n    });\r\n    if (comentsTab.length>0)\r\n    {\r\n        return comentsTab.toString();\r\n    }\r\n    return comments.comments[comments.comments.length-1]? comments.comments[comments.comments.length-1].text: '';\r\n    \r\n\r\n}","\r\nexport class DateRange {\r\n    \r\n    constructor(public beginDate:Date,\r\n                public endDate:Date) {\r\n    }\r\n\r\n}","﻿export * from './user';\r\nexport * from './userReport';\r\nexport * from './userPayroll';\r\nexport * from './order';\r\nexport * from './code';\r\nexport * from './relatedItem';\r\nexport * from './workType';\r\nexport * from './timesheet';\r\nexport * from './searchedUser';\r\nexport * from './orderHistory';\r\nexport * from './comment';\r\nexport * from './calendar';\r\nexport * from './timestats';\r\nexport * from './dateRange';","import { User, RelatedItem, OrderHistory, Comments } from '../_models/index';\r\n\r\nexport class Order {\r\n    //internal backend fields not set by the constuctor\r\n    id:number;\r\n    lastModDate:string;\r\n    creationDate:string;\r\n    protocolNo:string;\r\n\r\n    //related item fields used with GET\r\n    relatedItems:RelatedItem[];\r\n\r\n    //used to enforce relation on update and insert of WO\r\n    itemId:number;\r\n\r\n    //used to search on p-datatable - copying values from relatedItems[0]\r\n    itemNo:string;\r\n    itemBuildingType:string;\r\n    itemConstructionCategory:string;\r\n    itemAddress:string;\r\n    itemDescription:string;\r\n    itemCreationDate:string;\r\n\r\n    ventureId: number;\r\n    ventureDisplay:   string;   //filled by front used in table\r\n    ventureCompany:   string;   //filled by front used in table\r\n    ventureFull:      User;     //filled by front used in edit\r\n\r\n    assignee:string[];\r\n    assigneeFull:User[]; //filled by front\r\n\r\n    assignedDate: string;   //utilization report\r\n    doneDate: string;       //utilization report\r\n\r\n    history: OrderHistory[];\r\n\r\n    officeCode: string;\r\n    office:     string;\r\n    isFromPool: string;\r\n\r\n    comment: string;\r\n    sComments: string; //user to filter\r\n\r\n    frontProcessingDesc:string\r\n\r\n    constructor(public workNo:string,\r\n                public statusCode:string,\r\n                public status:string,\r\n                public typeCode:string,\r\n                public type:string,\r\n                public complexityCode:string,\r\n                public complexity:number,\r\n                public description:string,\r\n                public comments:Comments,\r\n                public mdCapex:string,\r\n                public price:number) {\r\n    }\r\n\r\n}\r\n\r\n","\r\n\r\nimport { User } from '../_models/user';\r\nimport { RelatedItem } from '../_models/relatedItem';\r\nimport { Order } from '../_models/order';\r\n\r\n/*\r\n \"id\": 16,\r\n \"workNo\": \"KRK11\",\r\n \"statusCode\": \"AS\",\r\n \"typeCode\": \"BU\",\r\n \"complexityCode\": \"STD\",\r\n \"complexity\": 8,\r\n \"price\": 1300,\r\n \"lastModDate\": \"2018-02-12 15:20:30\",\r\n \"creationDate\": \"2017-10-01 12:55:30\",\r\n \"versionDate\": \"2018-02-12 15:20:45\",\r\n \"itemId\": 3,\r\n \"ventureId\": 7\r\n */\r\n\r\nexport class OrderHistory extends Order {\r\n    public versionDate :string;\r\n    public modifiedBy: number;\r\n    public modifiedByFull: User;\r\n\r\n}\r\n\r\n","\r\nexport class RelatedItem {\r\n\r\n\t/*\r\n\t \"id\": 1,\r\n\t \"itemNo\": \"WHX12323A\",\r\n\t \"description\": \"BAAAAARDZO WIELKA WIEŻA\",\r\n\t \"mdBuildingType\": \"WIEŻA ORKÓW 1\",\r\n\t \"mdConstructionCategory\": \"WIEŻA STRAŻNICZA\",\r\n\t \"address\": \"ul. Hordy 3\",\r\n\t \"creationDate\": \"2017-11-15 16:42:39\"\r\n\t */\r\n\r\n\t//non front fields\r\n\r\n\r\n\r\n\tconstructor(\r\n\t\tpublic id: number,\r\n\t\tpublic itemNo: string,\r\n\t\tpublic description: string,\r\n\t\tpublic mdBuildingType: string,\r\n\t\tpublic mdConstructionCategory: string,\r\n\t\tpublic address: string,\r\n\t\tpublic creationDate: string\r\n\t){}\r\n}\r\n\r\n","import { User } from '../_models/user';\r\n\r\nexport class SearchUser {\r\n    constructor(public displayName:string,\r\n                public user:User) {\r\n    }\r\n}","export class Timesheet {\r\n\r\n    constructor(public personId:number,\r\n                public from:string,\r\n                public to:string) {\r\n    }\r\n\r\n    public break: string;       // backend assumes minutes\r\n    public usedTime:number;\r\n    public isLeave: string;\r\n    public createdBy: string;\r\n    public modifiedBy: string;\r\n    public training: string;    // backend assumes minutes eg.120 instead of 2:00\r\n\r\n}\r\n\r\n","import { User } from '../_models/user';\r\n\r\nexport class Timestats {\r\n\r\n    /*\r\n     WARN data manipulation - trainingTime added to workTime in userTimeStats.service !!!\r\n     \"personId\": 88,\r\n     \"periodBeginning\": \"2018-03-01\",\r\n     \"periodEnd\": \"2018-03-31\",\r\n     \"leaveTime\": 40,\r\n     \"workTime\": 138.58,\r\n     \"trainingTime\": 0,\r\n     \"poolWorkTime\": 138.58,\r\n     \"nonpoolWorkTime\": 0,\r\n     \"overTime\": 0,\r\n     \"isFromPool\": \"Y\"\r\n     */\r\n\r\n    constructor(public personId:number,\r\n                public periodBeginning:string,\r\n                public periodEnd:string) {\r\n    }\r\n\r\n    public leaveTime: number;\r\n    public workTime:number;\r\n    public trainingTime: number;\r\n    public poolWorkTime: number;\r\n    public nonpoolWorkTime: number;\r\n    public overTime: number;\r\n    public isFromPool: string;\r\n\r\n    //filled by UI\r\n    public user: User;\r\n}\r\n\r\n","﻿export class User {\r\n    public id: number;\r\n    public excelId: number;\r\n\r\n    public email: string;    //person\r\n    public password: string;\r\n    public firstName: string;\r\n    public lastName: string;\r\n    public token: string;\r\n    public roleCode: string[];\r\n    public role: string[];\r\n    public officeCode: string;\r\n    public office: string;\r\n    public isActive: string;\r\n    public isEmployed: string;\r\n    public workOrders: number[];\r\n\r\n    public company: string; //BOT for staff, Play for Ventures\r\n    public agreementCode: string;\r\n    public agreement: string;\r\n    public account: string;\r\n    public phone: string;\r\n    public addressStreet: string;\r\n    public addressPost: string;\r\n\r\n    public rankCode: string;\r\n    public rank: string;\r\n    public isFromPool: string;\r\n    public projectFactor: number;\r\n\r\n    public salary: number;\r\n    public salaryRate: number;\r\n    public leaveRate: number;\r\n\r\n    creationDate: string;\r\n    histCreationDate: string; // only for history\r\n    lastModDate: string;\r\n    modifiedBy: number;\r\n\r\n    modifiedByUser: User;\r\n\r\n\r\n}\r\n\r\n/*\r\n \"id\": 3,\r\n \"firstName\": \"Tom\",\r\n \"lastName\": \"Hanks\",\r\n \"officeCode\": \"GDA\",\r\n \"roleCode\": \"MG\",\r\n \"email\": \"thanks@bot.pl\",\r\n \"isActive\": \"Y\",\r\n \"workOrders\": [\r\n 5,\r\n 20\r\n ],\r\n \"projectFactor\": 1,\r\n \"isFromPool\": \"Y\",\r\n \"company\": \"Weyland Industries\",\r\n \"agreementCode\": \"UOP\",\r\n \"account\": \"PL441090XXXX\",\r\n \"phone\": \"123543765\",\r\n \"position\": \"some\",\r\n \"addressStreet\": \"my street\",\r\n \"addressPost\": \"my post\",\r\n \"office\": \"Gdańsk\",\r\n \"role\": [\r\n \"Inżynier\",\r\n \"Kierownik\"\r\n ]\r\n */","import { User } from '../_models/user';\r\n\r\n/*\r\n     WARN data manipulation - trainingTime added to workTime in payroll.service !!!\r\n{\r\n    \"personId\": 51,\r\n    \"periodDate\": \"2018-01-01\",\r\n    \"leaveTime\": 0,\r\n    \"workTime\": 28800,\r\n    \"poolWorkTime\": 28800,\r\n    \"overTime\": 0,\r\n    \"trainingTime\" 0\r\n\r\n    \"leaveDue\": 0,\r\n    \"workDue\": 0,\r\n    \"overDue\": 0,\r\n    \"totalDue\": 0,\r\n\r\n    \"isFromPool\": \"N\",\r\n    \"rankCode\": \"SEN\",\r\n    \"projectFactor\": 1,\r\n    \"poolRate\": 0.2466,\r\n    \"overTimeFactor\": 1.5,\r\n    \"approved\": \"N\",\r\n    \"modifiedBy\": 137,\r\n    \"lastMod\": \"2018-03-08 11:19:22\"\r\n},\r\n*/\r\n\r\n/*export class PayrollHeader {\r\n\r\n    periodDate: string;\r\n    overTimeFactor: number;\r\n    approved: string;\r\n    modifiedBy: number;\r\n    lastMod: string;\r\n\r\n}*/\r\n\r\nexport class UserPayroll {\r\n\r\n    user: User;\r\n\r\n    personId: number;\r\n\r\n    leaveTime: number;\r\n    workTime: number;\r\n    poolWorkTime: number;\r\n    nonpoolWorkTime: number;\r\n    overTime: number;\r\n    trainingTime: number;\r\n\r\n    leaveDue: number;\r\n    workDue: number;\r\n    overDue: number;\r\n    totalDue: number;\r\n\r\n    // user data but could be changed after raport generation\r\n    isFromPool: string;\r\n    rankCode: string;\r\n    rank: string;\r\n    projectFactor: number;\r\n    poolRate: number;\r\n    formattedPoolRate: string;\r\n\r\n    //payroll report metadata\r\n    periodDate: string;\r\n    overTimeFactor: number;\r\n    formattedOverTimeFactor: string;\r\n    approved: string;\r\n    lastMod: string;\r\n    modifiedBy: number;\r\n    modifiedByUser: User;\r\n\r\n}\r\n\r\n/*\r\nexport class Payroll {\r\n\r\n    header: PayrollHeader;\r\n    userPayrolls: UserPayroll[];\r\n\r\n}*/\r\n","import { Order } from '../_models/order';\r\nimport { DateRange } from '../_models/dateRange';\r\n\r\n/*\r\n {\r\n     \"id\": 1,\r\n     \"firstName\": \"Johnny\",\r\n     \"lastName\": \"Depp\",\r\n     \"officeCode\": \"WAW\",\r\n     \"roleCode\": \"EN\",\r\n     \"email\": \"jdepp@akap.pl\",\r\n        \"workOrders\": [\r\n         {\r\n             \"id\": 1,\r\n             \"workNo\": \"WAW1\",\r\n             \"statusCode\": \"AS\",\r\n             \"assignedDate\": \"2017-11-21 21:49:21\"\r\n         },\r\n         {\r\n             \"id\": 2,\r\n             \"workNo\": \"WAW2\",\r\n             \"statusCode\": \"AS\",\r\n             \"assignedDate\": \"2017-11-21 21:49:21\"\r\n         }\r\n     ]\r\n }\r\n */\r\n\r\n// cannot extend User as it has property workOrders\r\n\r\nexport class UserReport {\r\n\r\n    id: number;\r\n    firstName: string;\r\n    lastName: string;\r\n    officeCode: string;\r\n    office: string;\r\n    public roleCode: string[];\r\n    public role: string[];\r\n    email: string;\r\n\r\n    //timesheet\r\n    declaredTime: number;\r\n\r\n    //calculateTimeUtilization\r\n    noOrdersDone: number;\r\n    expectedTime: number;\r\n    timeUtilizationPercentage: number;\r\n    icon: string;\r\n    iconColor: string;\r\n\r\n    workOrders: Order[];\r\n\r\n    // calculated by front\r\n    earnedMoney: number;\r\n\r\n}\r\n\r\nexport class MonthlyUserReport extends UserReport {\r\n\r\n    dateRange: DateRange;\r\n\r\n\r\n}","\r\nexport class WorkType {\r\n\r\n\tid: number;\r\n\ttypeCode: string;\r\n\tdescription: string;\r\n\tofficeCode: string;\r\n\tcomplexityCode: string;\r\n\tcomplexity: number;\r\n\tprice: number;\r\n\t\r\n\tconstructor(\r\n\t){}\r\n}\r\n\r\n","import { Injectable } from '@angular/core';\r\nimport { Router, NavigationStart } from '@angular/router';\r\nimport { Observable, Subject } from 'rxjs';\r\nimport {Message} from 'primeng/primeng';\r\n\r\n@Injectable()\r\nexport class AlertService {\r\n    private subject = new Subject<any>();\r\n    private keepAfterNavigationChange = false;\r\n\r\n    constructor(private router: Router) {\r\n        // clear alert message on route change\r\n        router.events.subscribe(event => {\r\n            if (event instanceof NavigationStart) {\r\n                if (this.keepAfterNavigationChange) {\r\n                    // only keep for a single location change\r\n                    this.keepAfterNavigationChange = false;\r\n                } else {\r\n                    // clear alert\r\n                    this.subject.next();\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n\r\n    success(message: string, keepAfterNavigationChange = false) {\r\n        this.keepAfterNavigationChange = keepAfterNavigationChange;\r\n        this.subject.next({ severity: 'success', detail: message, summary: 'Sukces!' });\r\n\r\n    }\r\n\r\n    error(message: string, keepAfterNavigationChange = false) {\r\n        this.keepAfterNavigationChange = keepAfterNavigationChange;\r\n        this.subject.next({ severity: 'error', detail: message, summary: 'Błąd!' });\r\n    }\r\n\r\n    warn(message: string, keepAfterNavigationChange = false) {\r\n        this.keepAfterNavigationChange = keepAfterNavigationChange;\r\n        this.subject.next({ severity: 'warn', detail: message, summary: 'Ostrzeżenie' });\r\n    }\r\n\r\n    info(message: string, keepAfterNavigationChange = false) {\r\n        this.keepAfterNavigationChange = keepAfterNavigationChange;\r\n        this.subject.next({ severity: 'info', detail: message, summary: 'Informacja' });\r\n    }\r\n\r\n    getMessage(): Observable<any> {\r\n        return this.subject.asObservable();\r\n    }\r\n}","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { Observable, BehaviorSubject } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { User } from '../_models/user';\r\nimport { TabMenuModule,MenuItem }  from 'primeng/primeng';\r\nimport {Md5} from 'ts-md5/dist/md5';\r\n\r\n@Injectable()\r\nexport class AuthenticationService {\r\n\r\n    constructor(private http: HttpClient) { }\r\n\r\n    private isLoggedFlag: boolean;\r\n    private menuItems = new BehaviorSubject<MenuItem[]>(null);\r\n    private hierarchyItems = new BehaviorSubject<MenuItem[]>(null);\r\n    private user = new BehaviorSubject<User>(null);\r\n    private httpHeaders: HttpHeaders;\r\n\r\n    private fakeSessionId;\r\n\r\n    get isLogged(): boolean {\r\n        return this.isLoggedFlag;\r\n    }\r\n\r\n    get menuItemsAsObs() : Observable<MenuItem[]> {\r\n        return this.menuItems.asObservable();\r\n    }\r\n\r\n    get hierarchyItemsAsObs() : Observable<MenuItem[]> {\r\n        return this.hierarchyItems.asObservable();\r\n    }\r\n\r\n    get userAsObs(): Observable<User> {\r\n        return this.user.asObservable();\r\n    }\r\n\r\n    public getHttpHeaders(): HttpHeaders {\r\n        return this.httpHeaders\r\n    }\r\n\r\n\r\n    login(email: string, password: string) {\r\n\r\n        let data : User = <User> {\r\n            email: email,\r\n            password: password\r\n        };\r\n\r\n\r\n        console.log(\"about to login: \"+JSON.stringify(data));\r\n\r\n        //proxy!!!\r\n        return this.http.post<User>('/login', JSON.stringify(data), {headers: new HttpHeaders({'Content-Type':'application/json'})}).pipe(\r\n            map(user => {\r\n                // login successful if there's a jwt token in the response\r\n                if (user && user.token) {\r\n                    this.user.next(user);\r\n                    this.menuItems.next(this.buildMenu(user));\r\n                    this.hierarchyItems.next(this.buildHierarchyMenu(user));\r\n                    this.initAuthHeaders(user.token);\r\n                    this.isLoggedFlag = true;\r\n                }\r\n\r\n                return user;\r\n            }));\r\n    }\r\n\r\n    private initAuthHeaders(token: string) {\r\n        this.fakeSessionId =  new Md5().appendStr(token).end();\r\n        this.httpHeaders = new HttpHeaders({'Content-Type':'application/json','x-access-token':token, 'Session-Id':this.fakeSessionId});\r\n\r\n    }\r\n\r\n    logout() {\r\n        console.log(\"Logging out!\");\r\n        this.menuItems.next(null);\r\n        this.hierarchyItems.next(null);\r\n        this.user.next(null);\r\n        this.isLoggedFlag = false;\r\n        this.httpHeaders = null;\r\n    }\r\n\r\n    private buildHierarchyMenu(user:User):any {\r\n        let allItems = [\r\n            {\r\n                label: 'Zlecenia',\r\n                icon: 'fa fa-server',\r\n                items: [\r\n                    {label: 'Lista zleceń', icon: 'fa fa-server', routerLink: ['/workOrders'], \"rolesRequired\":[\"OP\", \"PR\", \"EN\", \"MG\"]},\r\n                    {label: 'Zawieszone', icon: 'fa fa-ban',     routerLink: ['/suspendedWorkOrders'], \"rolesRequired\":[\"OP\", \"PR\", \"EN\", \"MG\"]},\r\n                    {label: 'Anulowane',  icon: 'fa fa-trash-o', routerLink: ['/cancelledWorkOrders'], \"rolesRequired\":[\"OP\", \"PR\", \"EN\", \"MG\"]},\r\n                    {label: 'Moje zlecenia', icon: 'fa fa-calendar', routerLink: ['/myWorkOrders'], \"rolesRequired\":[\"EN\", \"MG\"]},\r\n                    {label: 'Wyceny pracochłonności', icon: 'fa fa-life-bouy', routerLink: ['/workOrderComplexity'], \"rolesRequired\":[\"MG\", \"PR\"]},\r\n                    {label: 'Protokół', icon: 'fa fa-envelope-open-o', routerLink: ['/clearing'], \"rolesRequired\":[\"PR\", \"CL\"]}\r\n                ]\r\n            },\r\n            {\r\n                label: 'Czas pracy',\r\n                icon: 'fa fa-clock-o',\r\n                items: [\r\n                    {label: 'Czas pracy', icon: 'fa fa-clock-o', routerLink: ['/addTimesheet'], \"rolesRequired\":[\"OP\", \"PR\", \"MG\", \"EN\"]},\r\n                    {label: 'Podsumowanie czasu', icon: 'fa fa-calendar', routerLink: ['/timeStats'], \"rolesRequired\":[\"MG\", \"PR\", \"OP\"]}\r\n                ]\r\n            },\r\n            {\r\n                label: 'Raporty',\r\n                icon: 'fa fa-bar-chart',\r\n                items: [\r\n                    {label: 'Wydajność zespołu', icon: 'fa fa-bar-chart', routerLink: ['/workMonitor'], \"rolesRequired\":[\"AN\"]},\r\n                    {label: 'Wyniki miesięczne', icon: 'fa fa-dashboard', routerLink: ['/monthlyPerformance'], \"rolesRequired\":[\"AN\"]}\r\n                ]\r\n            },\r\n            {\r\n                label: 'Dane osobowe',\r\n                icon: 'fa fa-address-card',\r\n                items: [\r\n                    {label: 'Pracownicy', icon: 'fa fa-address-card', routerLink: ['/employees'], \"rolesRequired\":[\"PR\", \"OP\"]},\r\n                    {label: 'Kontrahenci', icon: 'fa fa-handshake-o', routerLink: ['/contractors'], \"rolesRequired\":[\"PR\", \"OP\"]},\r\n                    {label: 'Dodaj osobę', icon: 'fa fa-user-plus', routerLink: ['/addPerson'], \"rolesRequired\":[\"OP\", \"PR\"]},\r\n                    {label: 'Zmodyfikuj osobę', icon: 'fa fa-user-o', routerLink: ['/changePerson'], \"rolesRequired\":[\"OP\", \"PR\"]},\r\n                    {label: 'Wynagrodzenie', icon: 'fa fa-money', routerLink: ['/myPayroll'], \"rolesRequired\":[\"EN\", \"MG\", \"OP\"], \"rolesForbidden\": [\"PR\"]},\r\n                    {label: 'Wynagrodzenia', icon: 'fa fa-money', routerLink: ['/payroll'], \"rolesRequired\":[\"PR\"]}\r\n                ]\r\n            },\r\n            {\r\n                label: 'Prime NG 6',\r\n                icon: 'fa fa-rocket',\r\n                items: [\r\n                    {label: 'Tabela', icon: 'fa fa-table', routerLink: ['/turboTable'], \"rolesRequired\":[\"PR\", \"OP\"]},\r\n                   \r\n                ]\r\n            },\r\n            {\r\n                label: 'Ustawienia',\r\n                icon: 'fa fa-cogs',\r\n                items: [\r\n                    {label: 'Parametryzacja zleceń', icon: 'fa fa-cogs', routerLink: ['/workTypes'], \"rolesRequired\":[\"PA\"]}\r\n                ]\r\n            }\r\n        ];\r\n\r\n        for(let groupItem of allItems) {\r\n            if (this.hasSubItems(groupItem)) {\r\n                groupItem.items = groupItem.items.filter(item => this.filterItem(item, user));\r\n            }\r\n        }\r\n\r\n        allItems = allItems.filter(groupItem => this.hasSubItems(groupItem));\r\n\r\n        return allItems;\r\n    }\r\n\r\n    private buildMenu(user:User):any {\r\n\r\n        let allItems = [\r\n            {label: 'Zlecenia', icon: 'fa fa-server', routerLink: ['/workOrders'], \"rolesRequired\":[\"OP\", \"PR\", \"EN\", \"MG\"]},\r\n            {label: 'Zawieszone', icon: 'fa fa-ban',     routerLink: ['/suspendedWorkOrders'], \"rolesRequired\":[\"OP\", \"PR\", \"EN\", \"MG\"]},\r\n            {label: 'Anulowane',  icon: 'fa fa-trash-o', routerLink: ['/cancelledWorkOrders'], \"rolesRequired\":[\"OP\", \"PR\", \"EN\", \"MG\"]},\r\n            {label: 'Moje zlecenia', icon: 'fa fa-calendar', routerLink: ['/myWorkOrders'], \"rolesRequired\":[\"EN\", \"MG\"]},\r\n            {label: 'Wyceny pracochłonności', icon: 'fa fa-life-bouy', routerLink: ['/workOrderComplexity'], \"rolesRequired\":[\"MG\", \"PR\"]},\r\n            {label: 'Czas pracy', icon: 'fa fa-clock-o', routerLink: ['/addTimesheet'], \"rolesRequired\":[\"OP\", \"PR\", \"MG\", \"EN\"]},\r\n            {label: 'Raporty obecności', icon: 'fa fa-calendar', routerLink: ['/timeStats'], \"rolesRequired\":[\"MG\", \"PR\", \"OP\"]},\r\n            {label: 'Wynagrodzenie', icon: 'fa fa-money', routerLink: ['/myPayroll'], \"rolesRequired\":[\"EN\", \"MG\", \"OP\"], \"rolesForbidden\": [\"PR\"]},\r\n            {label: 'Protokół', icon: 'fa fa-envelope-open-o', routerLink: ['/clearing'], \"rolesRequired\":[\"PR\", \"CL\"]},\r\n            /*{label: 'WO do akceptacji', icon: 'fa fa-paperclip', routerLink: ['/unacceptedWork'], \"rolesRequired\":[\"PR\"]}, removed since status Accepted was removed*/\r\n            // {label: 'Wydajność zespołu', icon: 'fa fa-bar-chart', routerLink: ['/workMonitor'], \"rolesRequired\":[\"PR\"]},\r\n            {label: 'Wydajność zespołu', icon: 'fa fa-bar-chart', routerLink: ['/workMonitor'], \"rolesRequired\":[\"AN\"]},\r\n            {label: 'Wynagrodzenia', icon: 'fa fa-money', routerLink: ['/payroll'], \"rolesRequired\":[\"PR\"]},\r\n            {label: 'Pracownicy', icon: 'fa fa-address-card', routerLink: ['/employees'], \"rolesRequired\":[\"PR\", \"OP\"]},\r\n            {label: 'Kontrahenci', icon: 'fa fa-handshake-o', routerLink: ['/contractors'], \"rolesRequired\":[\"PR\", \"OP\"]},\r\n            {label: 'Dodaj osobę', icon: 'fa fa-user-plus', routerLink: ['/addPerson'], \"rolesRequired\":[\"OP\", \"PR\"]},\r\n            {label: 'Zmodyfikuj osobę', icon: 'fa fa-user-o', routerLink: ['/changePerson'], \"rolesRequired\":[\"OP\", \"PR\"]},\r\n            //{label: 'Parametryzacja zleceń', icon: 'fa fa-server', routerLink: ['/workTypes'], \"rolesRequired\":[\"PR\"]},\r\n            {label: 'Parametryzacja zleceń', icon: 'fa fa-cogs', routerLink: ['/workTypes'], \"rolesRequired\":[\"PA\"]},\r\n            {label: 'Turbo Table', icon: 'fa fa-cogs', routerLink: ['/turboTable'], \"rolesRequired\":[\"PR\", \"OP\"]},\r\n            /*{label: 'Wyloguj', icon: 'fa fa-sign-out', routerLink: ['/logme'], \"rolesRequired\":[\"PR\", \"OP\", \"MG\", \"EN\"]}*/\r\n        ];\r\n\r\n        return allItems.filter(item => this.filterItem(item, user));\r\n\r\n    }\r\n\r\n    private filterItem(item:any, user:User):boolean {\r\n        if (item.rolesForbidden) {\r\n            for (let roleCode of user.roleCode) {\r\n                if (item.rolesForbidden.indexOf(roleCode) > -1) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (item.rolesRequired ) {\r\n            for (let roleCode of user.roleCode) {\r\n                if (item.rolesRequired.indexOf(roleCode) > -1) {\r\n                    return true;\r\n                }\r\n            }\r\n        } else {\r\n            console.log(\"roles \"+JSON.stringify(user.roleCode) +\" has no access to \"+item.label);\r\n            return false;\r\n        }\r\n    }\r\n\r\n    private hasSubItems(groupItem:any):boolean {\r\n       return groupItem.items && groupItem.items.length > 0;\r\n    }\r\n}","import { Injectable } from '@angular/core';\r\nimport { Observable, BehaviorSubject } from 'rxjs';\r\nimport { Router } from '@angular/router';\r\nimport { AuthenticationService } from '../_services/authentication.service';\r\n\r\nconst MINUTES_UNITL_AUTO_LOGOUT:number = 15 ; // in mins\r\nconst CHECK_INTERVAL:number = 60000; // in ms\r\nconst STORE_KEY:string = 'lastAction';\r\n\r\n@Injectable()\r\nexport class AutoLogoutService {\r\n\r\n    minutesBeforeLogout = new BehaviorSubject<number>(null);\r\n\r\n    getMinutesBeforeLogout():Observable<number> {\r\n        return this.minutesBeforeLogout.asObservable();\r\n    }\r\n\r\n    get lastAction(): number {\r\n        return parseInt(localStorage.getItem(STORE_KEY));\r\n    }\r\n    set lastAction(value: number) {\r\n        let sValue: string = \"\"+value;\r\n        localStorage.setItem(STORE_KEY, sValue);\r\n    }\r\n\r\n    constructor(private authService: AuthenticationService,\r\n                private router: Router) {\r\n        console.log(\"AutoLogoutService init!\");\r\n        this.check();\r\n        this.initListener();\r\n        this.initInterval();\r\n    }\r\n\r\n    initListener() {\r\n        document.body.addEventListener('click', () => this.reset());\r\n    }\r\n\r\n    reset() {\r\n        this.lastAction = Date.now();\r\n        const now = Date.now();\r\n        const timeleft = this.lastAction + MINUTES_UNITL_AUTO_LOGOUT * 60 * 1000;\r\n        const diff = timeleft - now;\r\n        this.minutesBeforeLogout.next(Math.round(((diff % 86400000.0) % 3600000.0) / 60000.0));\r\n    }\r\n\r\n    initInterval() {\r\n        setInterval(() => {this.check();}, CHECK_INTERVAL);\r\n    }\r\n\r\n\r\n    check() {\r\n        console.log(\"check if should be still logged!\");\r\n        const now = Date.now();\r\n        const timeleft = this.lastAction + MINUTES_UNITL_AUTO_LOGOUT * 60 * 1000;\r\n        const diff = timeleft - now;\r\n        const isTimeout = diff < 0;\r\n\r\n        if (isTimeout && this.authService.isLogged) {\r\n            console.log(\"Logging out due to inactivity!\");\r\n            this.authService.logout();\r\n            this.router.navigate(['/logme']);\r\n        } else {\r\n            this.minutesBeforeLogout.next(Math.round(((diff % 86400000.0) % 3600000.0) / 60000.0));\r\n        }\r\n    }\r\n\r\n\r\n}","import { Injectable, Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Observable }    from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\n\r\n\r\nimport { CodeValue } from '../_models/code';\r\nimport { User } from '../_models/user';\r\nimport { HttpBotWrapper } from '../_services/httpBotWrapper.service';\r\n\r\n@Injectable()\r\nexport class DictService {\r\n\r\n    private workStatuses: CodeValue[];\r\n    private complexities: CodeValue[];\r\n    private roles: CodeValue[];\r\n    private offices: CodeValue[];\r\n    private agreements: CodeValue[];\r\n    private ranks: CodeValue[];\r\n    private initialized: boolean = false;\r\n\r\n    constructor(private http: HttpBotWrapper) {\r\n    }\r\n\r\n    // call after login!\r\n    public init(): void {\r\n        if (this.initialized === false) {\r\n\r\n            console.log(\"Initializing dictService!\");\r\n\r\n            this.workStatuses = [];\r\n            this.complexities = [];\r\n            this.roles = [];\r\n            this.offices = [];\r\n            this.agreements = [];\r\n            this.ranks = [];\r\n\r\n            this.http.get('/api/v1/codes/WORK_STATUS')\r\n                .subscribe((response:Object) => this.setCodes(response, this.workStatuses));\r\n\r\n\r\n            this.http.get('/api/v1/codes/COMPLEXITY')\r\n                .subscribe((response:Object) => this.setCodes(response, this.complexities));\r\n\r\n            this.http.get('/api/v1/codes/ROLE')\r\n                .subscribe((response:Object) => this.setCodes(response, this.roles));\r\n\r\n            this.http.get('/api/v1/codes/OFFICE')\r\n                .subscribe((response:Object) => this.setCodes(response, this.offices))\r\n\r\n            this.http.get('/api/v1/codes/RANK')\r\n                .subscribe((response:Object) => this.setCodes(response, this.ranks));\r\n\r\n            this.http.get('/api/v1/codes/AGREEMENT_TYPE')\r\n                .subscribe((response:Object) => this.setCodes(response, this.agreements))\r\n        }\r\n        this.initialized = true;\r\n\r\n    }\r\n\r\n    public getRolesObs(): Observable<CodeValue[]> {\r\n        return  this.http.get('/api/v1/codes/ROLE').pipe(map((response: Object) => this.mapCodeValue(response)));\r\n    }\r\n\r\n    public getOfficesObs(): Observable<CodeValue[]> {\r\n        return  this.http.get('/api/v1/codes/OFFICE').pipe(map((response: Object) => this.mapCodeValue(response)));\r\n    }\r\n\r\n\r\n    private mapCodeValue(response:any):CodeValue[] {\r\n        let result: CodeValue[] = [];\r\n        if (response.list && response.list.length > 0) {\r\n            for (let code of response.list) {\r\n                result.push(code);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\n    // called just after login\r\n    public getRoleObs(keys: string[]): Observable<string[]> {\r\n        return  this.http.get('/api/v1/codes/ROLE').pipe(map((response: Object) => this.getKeys(response, keys)));\r\n    }\r\n\r\n    private getKeys(response:any, keys:string[]):string[] {\r\n        let result: string[] = [];\r\n        let codeValues: CodeValue[] = [];\r\n        this.setCodes(response, codeValues);\r\n        for (let key of keys) {\r\n            result.push(this.getValue(key, codeValues));\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public getOfficeObs(key: string): Observable<string> {\r\n        return  this.http.get('/api/v1/codes/OFFICE').pipe(map((response: Object) => this.getKey(response, key)));\r\n    }\r\n\r\n    private getKey(response:any, key:string):string {\r\n        let codeValues: CodeValue[] = [];\r\n        this.setCodes(response, codeValues);\r\n        return this.getValue(key, codeValues);\r\n    }\r\n\r\n    public getRoles(): CodeValue[] {\r\n        return this.roles;\r\n    }\r\n\r\n    public getRole(key: string): string {\r\n        return this.getValue(key, this.roles);\r\n    }\r\n\r\n    public getOffices(): CodeValue[] {\r\n        return this.offices;\r\n    }\r\n\r\n    public getOffice(key: string): string {\r\n        return this.getValue(key, this.offices);\r\n    }\r\n\r\n    public getAgreements(): CodeValue[] {\r\n        return this.agreements;\r\n    }\r\n\r\n    public getAgreement(key: string): string {\r\n        return this.getValue(key, this.agreements);\r\n    }\r\n\r\n    public getRanks(): CodeValue[] {\r\n        return this.ranks;\r\n    }\r\n\r\n    public getRank(key: string): string {\r\n        return this.getValue(key, this.ranks);\r\n    }\r\n\r\n    public getWorkStatus(key: string): string {\r\n        return this.getValue(key, this.workStatuses);\r\n    }\r\n\r\n    public getWorkStatuses(): CodeValue[] {\r\n        return this.workStatuses;\r\n    }\r\n\r\n    public getComplexities(): CodeValue[] {\r\n        return this.complexities;\r\n    }\r\n\r\n    public getComplexitiy(key: string): string {\r\n        return this.getValue(key, this.complexities);\r\n    }\r\n\r\n    // private helper methods\r\n\r\n    private getValue(key: string, ref: CodeValue[]): string {\r\n        for(let codeValue of ref) {\r\n            if (codeValue.code === key) {\r\n                return codeValue.paramChar;\r\n                //return key + \"=\" +codeValue.paramChar;\r\n            }\r\n        }\r\n        return key;\r\n    }\r\n\r\n\r\n    private setCodes(response:any, ref: CodeValue[]):void {\r\n\r\n        if (response.list && response.list.length > 0) {\r\n            for (let code of response.list) {\r\n                ref.push(code);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n}","\r\nimport { throwError as observableThrowError,  Observable, AsyncSubject ,  Subject } from 'rxjs';\r\nimport { HttpClient, HttpEvent } from '@angular/common/http';\r\nimport { Injectable } from \"@angular/core\";\r\nimport { AuthenticationService } from '../_services/authentication.service';\r\nimport { AlertService } from '../_services/alert.service';\r\nimport { Router } from '@angular/router';\r\n\r\n// operators\r\nimport { catchError, map, tap } from 'rxjs/operators';\r\n\r\n\r\n@Injectable()\r\nexport class HttpBotWrapper {\r\n\r\n\r\n    constructor(\r\n        public http: HttpClient,\r\n        private alertService: AlertService,\r\n        private authSerivce: AuthenticationService,\r\n        private router: Router\r\n    ) {\r\n    }\r\n\r\n    public get(url: string): Observable<Object> {\r\n        //return this.http.get(url, {headers: this.authSerivce.getHttpHeaders()}).pipe();\r\n        return this.http.get(url).pipe();\r\n\r\n    }\r\n\r\n    public post(url: string, object:any): Observable<Object> {\r\n        //return this.http.post(url, object, {headers: this.authSerivce.getHttpHeaders()}).pipe();\r\n        return this.http.post(url, object).pipe();\r\n    }\r\n\r\n    public put(url: string, object:any): Observable<Object> {\r\n        //return this.http.put(url, object, {headers: this.authSerivce.getHttpHeaders()}).pipe();\r\n        return this.http.put(url, object).pipe();\r\n    }\r\n\r\n    public delete(url: string): Observable<Object> {\r\n        //return this.http.delete(url, {headers: this.authSerivce.getHttpHeaders()}).pipe();\r\n        return this.http.delete(url).pipe();\r\n\r\n    }\r\n\r\n\r\n\r\n}","import {Injectable} from '@angular/core';\r\nimport {HttpEvent, HttpInterceptor, HttpHandler, HttpRequest, HttpResponse} from '@angular/common/http';\r\nimport { Observable, AsyncSubject, Subject } from \"rxjs\";\r\nimport { catchError, map, tap, delay } from 'rxjs/operators';\r\n\r\n@Injectable()\r\nexport class HttpCacheInterceptor implements HttpInterceptor {\r\n\r\n    private cache: { [name: string]: AsyncSubject<HttpEvent<any>> } = {};\r\n\r\n    private cacheUrlInfinixArr: string[] = ['/api/v1/persons', '/api/v1/workTypes', '/api/v1/codes/ROLE', '/api/v1/codes/OFFICE', '/api/v1/codes/RANK', '/api/v1/codes/AGREEMENT_TYPE', '/api/v1/codes/COMPLEXITY'];\r\n\r\n    private put(cacheUrlInfinix: string, subject: AsyncSubject<HttpEvent<any>>) {\r\n        console.log(\"Adding to cache \"+cacheUrlInfinix);\r\n        this.cache[cacheUrlInfinix] = subject;\r\n        setTimeout(() => {\r\n            this.remove(cacheUrlInfinix);\r\n        }, 600000); //10min\r\n    }\r\n\r\n    private removeAll(): void {\r\n        console.log('Cache size '+Object.keys(this.cache).length);\r\n        for(let cacheUrlInfinix of this.cacheUrlInfinixArr) {\r\n            delete this.cache[cacheUrlInfinix];\r\n        }\r\n        console.log('Cache cleaned!');\r\n    }\r\n\r\n    private remove(cacheUrlInfinix): void {\r\n        delete this.cache[cacheUrlInfinix];\r\n        console.log('Removed from cache '+cacheUrlInfinix);\r\n    }\r\n\r\n    private getCacheKey(url: string):string {\r\n        for(let cacheUrlInfinix of this.cacheUrlInfinixArr) {\r\n            //console.log('Cache check if '+url+' is eq '+cacheUrlInfinix);\r\n            if (url === cacheUrlInfinix) {\r\n                return cacheUrlInfinix;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n        let url: string = request.url;\r\n        let cacheKey : string = this.getCacheKey(url);\r\n\r\n        if (url.indexOf('/login') >= 0) {\r\n            this.removeAll();\r\n        }\r\n\r\n        if (request.method !== \"GET\") {\r\n\r\n            if (cacheKey) {\r\n                console.log('Removing '+cacheKey+' from cache due to '+request.method+' on ['+url+']...');\r\n                this.remove(cacheKey);\r\n            }\r\n            return next.handle(request);\r\n\r\n        } else {\r\n\r\n            const subject = new AsyncSubject<HttpEvent<any>>();\r\n\r\n            if (cacheKey) {\r\n                console.log('Checking cache for '+cacheKey);\r\n\r\n                const cachedResponse = this.cache[cacheKey] || null;\r\n                if (cachedResponse) {\r\n                    console.log('Cache hit for '+cacheKey+'!');\r\n                    return cachedResponse.pipe(delay(0));\r\n                } else {\r\n                    this.put(cacheKey, subject);\r\n                }\r\n            }\r\n\r\n            next.handle(request).pipe(tap(event => {\r\n                if (event instanceof HttpResponse) {\r\n                    subject.next(event);\r\n                    subject.complete();\r\n                }\r\n            })).subscribe(); // must subscribe to actually kick off request!\r\n            return subject;\r\n        }\r\n    }\r\n}","import {Injectable} from '@angular/core';\r\nimport {HttpEvent, HttpInterceptor, HttpHandler, HttpRequest, HttpResponse, HttpHeaders} from '@angular/common/http';\r\nimport { Observable, AsyncSubject, Subject } from \"rxjs\";\r\nimport { catchError, map, tap, delay } from 'rxjs/operators';\r\nimport { AlertService } from '../_services/alert.service';\r\nimport { AuthenticationService } from '../_services/authentication.service';\r\nimport { VersionService } from '../_services/version.service';\r\nimport { Router } from '@angular/router';\r\nimport { Md5 } from 'ts-md5/dist/md5';\r\n\r\n@Injectable()\r\nexport class HttpHeadersInterceptor implements HttpInterceptor {\r\n\r\n    constructor(private alertService: AlertService,\r\n                private authSerivce: AuthenticationService,\r\n                private versionService: VersionService) {\r\n    }\r\n\r\n\r\n\r\n    intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n\r\n        let headers: HttpHeaders = this.authSerivce.getHttpHeaders();\r\n\r\n        if (headers) {\r\n            headers = headers.set('Front-Version', this.versionService.version)\r\n        }\r\n\r\n        const authReq = req.clone({\r\n            headers: headers\r\n        });\r\n\r\n        console.log('Auth request with httpHeaders');\r\n\r\n        return next.handle(authReq);\r\n\r\n    }\r\n}","import {Injectable} from '@angular/core';\r\nimport {HttpEvent, HttpInterceptor, HttpHandler, HttpRequest, HttpResponse} from '@angular/common/http';\r\nimport { Observable, AsyncSubject, Subject } from \"rxjs\";\r\nimport { catchError, map, tap, delay } from 'rxjs/operators';\r\nimport { AlertService } from '../_services/alert.service';\r\nimport { ProgressService } from '../_services/progress.service';\r\nimport { Router } from '@angular/router';\r\n\r\n@Injectable()\r\nexport class HttpProgressInterceptor implements HttpInterceptor {\r\n\r\n    constructor(private alertService: AlertService, private router: Router, private progressService: ProgressService) {}\r\n\r\n    private getProgressKey(url: string):string {\r\n        return url;\r\n    }\r\n\r\n\r\n    intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n        let urlKey: string = this.getProgressKey(req.url);\r\n\r\n        if (urlKey.indexOf('/login') >= 0) {\r\n            this.progressService.cleanProgress();\r\n        }\r\n\r\n        this.progressService.incrementProgress(urlKey);\r\n\r\n        return next.handle(req).pipe(tap(\r\n            (event: HttpEvent<any>) => {\r\n                if (event instanceof HttpResponse) {\r\n                    this.progressService.decrementProgress(urlKey);\r\n                }\r\n            },\r\n            (errBody: any) => {\r\n\r\n                this.progressService.decrementProgress(urlKey);\r\n                console.log(\"This is an error: \"+JSON.stringify(errBody));\r\n\r\n                if(errBody.status === 403) { //forbidden\r\n                    if (errBody !== undefined && errBody.message === \"jwt expired\") {\r\n                        this.alertService.error(\"Sesja wygasła\");\r\n                    } else {\r\n                        this.alertService.error(\"Zostałeś wylogowany z powodu próby nieautoryzowanego dostępu do zasobu!\");\r\n                    }\r\n                    this.router.navigate(['logme']); //navigate home\r\n                } else {\r\n                    this.alertService.error(\"Wewnętrzny bląd zasobu: (\"+errBody['statusText']+'), '+ (errBody !== undefined && errBody.url ? errBody.url : \"?\"));\r\n                }\r\n\r\n            }\r\n        ));\r\n\r\n    }\r\n}","﻿export * from './authentication.service';\r\nexport * from './alert.service';\r\nexport * from './progress.service';\r\nexport * from './httpBotWrapper.service';\r\nexport * from './httpCacheInterceptor.service';\r\nexport * from './httpHeadersInterceptor.service';\r\nexport * from './httpProgressInterceptor.service';\r\nexport * from './user.service';\r\nexport * from './payroll.service';\r\nexport * from './wo.service';\r\nexport * from './dict.service';\r\nexport * from './relatedItem.service';\r\nexport * from './workType.service';\r\nexport * from './tools.service';\r\nexport * from './timesheet.service';\r\nexport * from './autoLogout.service';\r\nexport * from './userTimeStats.service';\r\nexport * from './version.service';","import { Injectable } from '@angular/core';\r\nimport { User, Order } from '../_models/index';\r\nimport { UserPayroll } from '../_models/userPayroll';\r\nimport { HttpBotWrapper } from '../_services/httpBotWrapper.service';\r\nimport { DictService } from '../_services/dict.service';\r\nimport { Observable }    from 'rxjs';\r\n\r\nimport { catchError, map, tap, delay, mergeMap } from 'rxjs/operators';\r\n\r\n@Injectable()\r\nexport class PayrollService {\r\n\r\n    constructor(private http: HttpBotWrapper, private dictService: DictService) {\r\n        console.log(\"created PayrollService\");\r\n    }\r\n\r\n    public getCurrent(users: Map<number, User>): Observable<UserPayroll[]> {\r\n        // /payroll?periodDate=yyyy-mm-dd&overTimeFactor=XXX&approved=Y\r\n        return this.http.get('/api/v1/payroll').pipe(\r\n            map((response: Object) => this.getJoined(response, users)));\r\n    }\r\n\r\n    public getHistorical(users: Map<number, User>): Observable<UserPayroll[]> {\r\n        // /payroll?periodDate=yyyy-mm-dd&overTimeFactor=XXX&approved=Y\r\n        return this.http.get('/api/v1/payroll?history=Y').pipe(\r\n            map((response: Object) => this.getJoined(response, users))\r\n        );\r\n    }\r\n\r\n    public approve(users: Map<number, User>, periodDate: string, overTimeFactor: number): Observable<UserPayroll[]> {\r\n        // /payroll?periodDate=yyyy-mm-dd&overTimeFactor=XXX&approved=Y\r\n        return this.http.get('/api/v1/payroll?periodDate='+periodDate+'&overTimeFactor='+overTimeFactor+'&approved=Y').pipe(\r\n            map((response: Object) => this.getJoined(response, users))\r\n        );\r\n    }\r\n\r\n    public getCurrentPersonal(user: User): Observable<UserPayroll[]> {\r\n        let users: Map<number, User> = new Map<number, User>();\r\n        users.set(user.id, user);\r\n\r\n        return this.http.get('/api/v1/payroll/'+user.id).pipe(\r\n            map((response: Object) => this.getJoined(response, users))\r\n        );\r\n    }\r\n\r\n    public getHistoricalPersonal(user: User): Observable<UserPayroll[]>  {\r\n        let users: Map<number, User> = new Map<number, User>();\r\n        users.set(user.id, user);\r\n\r\n        return this.http.get('/api/v1/payroll/'+user.id+'?history=Y').pipe(\r\n            map((response: Object) => this.getJoined(response, users))\r\n        );\r\n    }\r\n\r\n\r\n    private getJoined(response:any, users:Map<number, User>):UserPayroll[] {\r\n\r\n        if (response.list && response.list.length > 0) {\r\n            let payrolls : UserPayroll[] =  response.list;\r\n            for (let payroll of payrolls) {\r\n                payroll.workTime += payroll.trainingTime;\r\n\r\n                payroll.user = users.get(payroll.personId);\r\n                payroll.modifiedByUser = users.get(payroll.modifiedBy);\r\n                payroll.rank = this.dictService.getRank(payroll.rankCode);\r\n                payroll.formattedPoolRate = payroll.poolRate? \"\"+payroll.poolRate.toFixed(2): \"-\";\r\n                payroll.formattedOverTimeFactor = payroll.overTimeFactor * 100 + \"%\";\r\n            }\r\n            return payrolls;\r\n        }\r\n\r\n        return [];\r\n    }\r\n\r\n\r\n\r\n\r\n}","import { Injectable } from '@angular/core';\r\nimport { Observable, AsyncSubject, Subject } from \"rxjs\";\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\n\r\nexport class ProgressService {\r\n\r\n    progress: Map<string, number> = new Map<string, number>();\r\n    subject = new Subject<Map<string, number>>();\r\n\r\n    constructor() { }\r\n\r\n    public getSubject(): Subject<Map<string, number>> {\r\n        return this.subject;\r\n    }\r\n\r\n    public cleanProgress(): void {\r\n        this.progress = new Map<string, number>();\r\n        this.subject.next(this.progress);\r\n    }\r\n\r\n    public incrementProgress(key: string): void {\r\n        let value: number = this.progress.get(key);\r\n        if (value === undefined) {\r\n            this.progress.set(key, 1);\r\n            console.log(\"progress service for \"+key +\"=1 has been added!\");\r\n        } else {\r\n            this.progress.set(key, ++value);\r\n            console.log(\"progress service for \"+key +\" incremented to \"+value);\r\n        }\r\n        this.getSubject().next(this.progress);\r\n    }\r\n\r\n    public decrementProgress(key: string): void {\r\n        let value: number = this.progress.get(key);\r\n        if (value !== undefined) {\r\n            if (value === 1) {\r\n                this.progress.delete(key);\r\n                console.log(\"progress service for \"+key +\" has been removed!\");\r\n            } else {\r\n                this.progress.set(key, --value);\r\n                console.log(\"progress service for \"+key +\" decremented to \"+value);\r\n            }\r\n        } else {\r\n            console.log(\"interceptor key=\"+key +\" not found in \"+JSON.stringify(this.progress));\r\n        }\r\n        this.getSubject().next(this.progress);\r\n    }\r\n\r\n\r\n}","import { Injectable, Component, OnInit, ViewChild } from '@angular/core';\r\n\r\nimport { Observable }    from 'rxjs';\r\nimport { catchError, map, tap, delay, mergeMap } from 'rxjs/operators';\r\n\r\nimport { Order } from '../_models/order';\r\nimport { RelatedItem } from '../_models/relatedItem';\r\nimport { HttpBotWrapper } from '../_services/httpBotWrapper.service';\r\n\r\n\r\n@Injectable()\r\nexport class RelatedItemService {\r\n\r\n    constructor(private http: HttpBotWrapper) {\r\n        console.log(\"RelatedItemService created\");\r\n    }\r\n\r\n    getAllItems() : Observable<RelatedItem[]> {\r\n        return this.http.get('/api/v1/relatedItems').pipe(\r\n            map((response: Object) => response['list'])\r\n        );\r\n    }\r\n\r\n    updateItem(item: RelatedItem) : Observable<RelatedItem> {\r\n        return this.http.put('/api/v1/relatedItems/'+item.id, JSON.stringify(item)).pipe(\r\n            map((response: Object) => response['updated']),\r\n            mergeMap(updatedId => this.getItemById(item.id))\r\n        );\r\n    }\r\n\r\n    addItem(item: RelatedItem) : Observable<RelatedItem> {\r\n        return this.http.post('/api/v1/relatedItems', JSON.stringify(item)).pipe(\r\n            map((response: Object) => response['created']),\r\n            mergeMap(createdId => this.getItemById(createdId))\r\n        );\r\n    }\r\n\r\n    // private helper methods\r\n\r\n    private getItemById(id:number):Observable<RelatedItem> {\r\n        return <Observable<RelatedItem>> this.http.get('/api/v1/relatedItems/'+id);\r\n    }\r\n}","import { Injectable } from '@angular/core';\r\n\r\nimport { User, Order, Timesheet } from '../_models/index';\r\nimport { HttpBotWrapper } from '../_services/httpBotWrapper.service';\r\nimport { DictService } from '../_services/dict.service';\r\nimport { Observable }    from 'rxjs';\r\nimport { catchError, map, tap, delay, mergeMap } from 'rxjs/operators';\r\nimport { EMPTY } from 'rxjs';\r\n\r\n\r\n@Injectable()\r\nexport class TimesheetService {\r\n\r\n    constructor(private http: HttpBotWrapper, private dictService: DictService) {\r\n        console.log('TimesheetService created');\r\n    }\r\n\r\n    getByDates(workDateAfter: string, workDateBefore: string) : Observable<Timesheet[]> {\r\n        return this.http.get('/api/v1/timesheets?workDateAfter='+workDateAfter+'&workDateBefore='+workDateBefore)\r\n            .pipe(map((response: Object) => this.getTimesheets(response)));\r\n    }\r\n\r\n    getByIdAndDates(id: number, workDateAfter: string, workDateBefore: string) : Observable<Timesheet[]> {\r\n        return this.http.get('/api/v1/timesheets?workDateAfter='+workDateAfter+'&workDateBefore='+workDateBefore+'&personId='+id)\r\n            .pipe(map((response: Object) => this.getTimesheets(response)))\r\n    }\r\n\r\n    upsert(timesheet: Timesheet): Observable<Timesheet> {\r\n        console.log('upserting '+JSON.stringify(timesheet));\r\n        return this.http.post('/api/v1/timesheets', timesheet).pipe(map((response: Object) => response['timesheet']));\r\n    }\r\n\r\n    upsertAttendanceFrom(personId: number): Observable<any> {\r\n        let from = {\r\n            personId: personId,\r\n            from: 'now'\r\n        };\r\n        console.log('upserting '+JSON.stringify(from));\r\n        return this.http.post('/api/v1/timesheets', from);\r\n    }\r\n\r\n    upsertAttendanceBreak(personId: number, totalBreakInMinutes: number): Observable<any> {\r\n        let theBreak = {\r\n            personId: personId,\r\n            break: totalBreakInMinutes\r\n        };\r\n        console.log('upserting '+JSON.stringify(theBreak));\r\n        return this.http.post('/api/v1/timesheets', theBreak);\r\n    }\r\n\r\n    upsertAttendanceTo(personId: number): Observable<any> {\r\n        let to = {\r\n            personId: personId,\r\n            to: 'now'\r\n        };\r\n        console.log('upserting '+JSON.stringify(to));\r\n        return this.http.post('/api/v1/timesheets', to);\r\n    }\r\n\r\n    addLeave(personId: number, from: string, to: string): Observable<any> {\r\n        let leave = {\r\n            personId: personId,\r\n            from: from,\r\n            to: to\r\n        };\r\n\r\n        console.log('adding Leave '+JSON.stringify(leave));\r\n        return this.http.post('/api/v1/timesheets/leave', leave);\r\n    }\r\n\r\n\r\n    private getTimesheets(response:any):any {\r\n        let timesheets: Timesheet[] = [];\r\n\r\n        if (response.list && response.list.length > 0) {\r\n            for (let timesheet of response.list) {\r\n                timesheets.push(timesheet);\r\n            }\r\n        }\r\n\r\n        console.log('Got '+JSON.stringify(timesheets));\r\n        return timesheets;\r\n    }\r\n}","import { Injectable, Component, OnInit, ViewChild } from '@angular/core';\r\nimport { DatePipe }         from '@angular/common';\r\nimport { Observable }       from 'rxjs';\r\n\r\n\r\n\r\nimport { AlertService } from '../_services/alert.service';\r\nimport { User, RelatedItem, Order, WorkType, CodeValue } from '../_models/index';\r\nimport { SelectItem } from 'primeng/primeng'\r\n\r\n\r\n@Injectable()\r\nexport class ToolsService {\r\n\r\n    datePipe :DatePipe = new DatePipe('en-US');\r\n\r\n    public NO_WO = 'XXXXX';\r\n    public NO_CAPEX = 'YYYYY';\r\n\r\n    constructor(private alertService: AlertService) {\r\n\r\n    }\r\n\r\n    public getEngineers(emails:string[], engineers: User[]):User[] {\r\n        return engineers.filter(engineer => this.filterEnginner(engineer, emails));\r\n    }\r\n\r\n    private filterEnginner(engineer:User, emails:String[]):boolean {\r\n        if (emails === undefined || emails.length < 1) {\r\n            return false;\r\n        }\r\n        return emails.indexOf(engineer.email) > -1;\r\n    }\r\n\r\n    public getCurrentDateDayOperation(day:number):Date {\r\n        return this.getDateDayOperation(day, new Date());\r\n    }\r\n\r\n    public getDateDayOperation(day:number, date: Date):Date {\r\n        date.setDate(date.getDate() + day);\r\n        return date;\r\n    }\r\n\r\n    public findSelectedOrderIndex(order:Order, orders:Order[]):number {\r\n        let index:number = 0;\r\n        for (let tabOrder of orders) {\r\n            if (order.id === tabOrder.id) {\r\n                return index;\r\n            }\r\n            index++;\r\n        }\r\n        return -1;\r\n    }\r\n\r\n    /*YYYY-MM-DD hh:mm:ss*/\r\n    public parseDate(dateAsString: string): Date {\r\n        let d: Date =  new Date(dateAsString.replace(/-/g, '/'));\r\n        d.setTime( d.getTime() - d.getTimezoneOffset()*60*1000 );\r\n        return d;\r\n    }\r\n\r\n    public formatDate(date: Date, format: string): string {\r\n        return this.datePipe.transform(date, format, 'pl-PL');\r\n    }\r\n\r\n    public parsePrice(price:string, workNo: string):number {\r\n        console.log('parsing price ' + price);\r\n        if (price === undefined || price === '' || price === '\\'\\'' || price === '{}') {\r\n            this.alertService.warn('Nie ustawiono ceny dla zlecenia '+workNo+'...');\r\n            return undefined;\r\n        }\r\n\r\n        try {\r\n            // dot not allowed! let resultPrice = +price.replace(/\\D/g, '');\r\n            let resultPrice: string = price.replace (/[^\\d\\.]/g, '');\r\n            //limit number of dots:\r\n            let dot: string[] = resultPrice.split('.');\r\n            if (dot.length > 2) {\r\n                resultPrice = dot[0]+'.'+dot[1];\r\n            }\r\n            resultPrice = parseFloat(resultPrice).toFixed(2);\r\n            console.log('parsing price: '+price+ ' after '+resultPrice);\r\n            return +resultPrice;\r\n        } catch (e) {\r\n            this.alertService.warn('Nie ustawiono ceny dla zlecenia '+workNo+'...');\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    public getOrderColor(typeCode :string) :string {\r\n\r\n        if (typeCode === undefined || typeCode === null)\r\n            return 'black';\r\n        else if (typeCode === 'OT')\r\n            return 'grey';\r\n        else if (typeCode === 'IN')\r\n            return 'darkgrey';\r\n        else if (typeCode.startsWith('0.'))\r\n            return '#d1e0e0';\r\n        else if (typeCode.startsWith('1.'))\r\n            return '#ffffaa';\r\n        else if (typeCode.startsWith('2.'))\r\n            return 'yellow';\r\n        else if (typeCode.startsWith('3.'))\r\n            return 'orange';\r\n        else if (typeCode.startsWith('4.'))\r\n            return '#b3ffff';\r\n        else if (typeCode.startsWith('5.'))\r\n            return '#66a3ff';\r\n        else if (typeCode.startsWith('6.'))\r\n            return '#00cccc';\r\n        else if (typeCode.startsWith('7.'))\r\n            return '#0066ff';\r\n        else if (typeCode.startsWith('8.'))\r\n            return '#ffccff';\r\n        else if (typeCode.startsWith('9.'))\r\n            return '#d9b3ff';\r\n        else if (typeCode.startsWith('10.'))\r\n            return '#800080';\r\n        else if (typeCode.startsWith('11.'))\r\n            return '#88cc00';\r\n        else if (typeCode.startsWith('12.'))\r\n            return '#cc0088';\r\n        else if (typeCode.startsWith('13.'))\r\n            return 'red';\r\n\r\n        //console.log('Return default color for '+typeCode+'!');\r\n\r\n        return 'black';\r\n\r\n    }\r\n\r\n    /*\r\n     INSERT INTO CODE_REFERENCE (CODE_TABLE, CODE, PARAM_CHARVAL) VALUES ('WORK_STATUS','OP','Otwarte');\r\n     INSERT INTO CODE_REFERENCE (CODE_TABLE, CODE, PARAM_CHARVAL) VALUES ('WORK_STATUS','AS','Przypisane');\r\n     INSERT INTO CODE_REFERENCE (CODE_TABLE, CODE, PARAM_CHARVAL) VALUES ('WORK_STATUS','CO','Zakończone');\r\n     INSERT INTO CODE_REFERENCE (CODE_TABLE, CODE, PARAM_CHARVAL) VALUES ('WORK_STATUS','IS','Wydane');\r\n     -- removed INSERT INTO CODE_REFERENCE (CODE_TABLE, CODE, PARAM_CHARVAL) VALUES ('WORK_STATUS','AC','Zaakceptowane');\r\n     INSERT INTO CODE_REFERENCE (CODE_TABLE, CODE, PARAM_CHARVAL) VALUES ('WORK_STATUS','CL','Zamknięte');\r\n     INSERT INTO CODE_REFERENCE (CODE_TABLE, CODE, PARAM_CHARVAL) VALUES ('WORK_STATUS','SU','Zawieszone');\r\n     -- added INSERT INTO CODE_REFERENCE (CODE_TABLE, CODE, PARAM_CHARVAL) VALUES ('WORK_STATUS','CA','Anulowane');\r\n     */\r\n\r\n    public getStatusIcon(statusCode: string) {\r\n        if (statusCode === 'OP')\r\n            return 'fa fa-keyboard-o';\r\n        else if (statusCode === 'AS')\r\n            return 'fa fa-user';\r\n        else if (statusCode === 'CO')\r\n            return 'fa fa-child';\r\n        else if (statusCode === 'IS')\r\n            return 'fa fa-paperclip';\r\n        else if (statusCode === 'AC')\r\n            return 'fa fa-envelope-open-o';\r\n        /*else if (statusCode === 'CL')\r\n            return 'fa fa-battery-4';*/\r\n        else if (statusCode === 'CL')\r\n            return 'fa fa-envelope-o';\r\n        else if (statusCode === 'SU')\r\n            return 'fa fa-ban';\r\n        else if (statusCode === 'CA')\r\n            return 'fa fa-trash-o';\r\n\r\n        console.log('Return default status icon for '+statusCode+'!');\r\n        return 'fa question';\r\n    }\r\n\r\n    public isStatusAllowed(order: Order, statusCode: string): boolean {\r\n        if (statusCode === 'IS' && this.isReadyForProtocol(order,false)) {\r\n            return true;\r\n        } else if (order.assignee && order.assignee.length > 0) {\r\n            return true;\r\n        } else if (statusCode === 'OP' || statusCode === 'CA' || statusCode === 'SU') {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public isStatusLowerThanProtocol(statusCode: string): boolean{\r\n        return statusCode === 'OP' || statusCode === 'AS' || statusCode === 'CO' || statusCode === 'IS' || statusCode === 'AC';\r\n    }\r\n\r\n\r\n    private logReason(order:Order){\r\n        let reason: string [] = [];\r\n        if(order.officeCode!='KAT'&& order.workNo===this.NO_WO){\r\n            reason.push(' Brak numeru zlecenia ');\r\n        }\r\n        if (order.officeCode==='KAT'&& order.mdCapex===this.NO_CAPEX){\r\n            reason.push(' Brak numeru CAPEX ');\r\n        }\r\n        if (order.officeCode==='KAT'&& order.workNo===this.NO_WO){\r\n            reason.push(' Brak numeru zlecenia ');\r\n        }\r\n        if (!order.assignee){\r\n            reason.push(' Brak przypisanego wykonawcy ');\r\n        }\r\n        if (order.itemId===undefined){\r\n            reason.push(' Brak przypisanego obiektu ');\r\n        }\r\n        if (order.typeCode!='OT'&& order.price===undefined){\r\n            reason.push(' Brak ceny zlecenia ');\r\n        }\r\n        if (order.typeCode!='OT'&& order.price===0){\r\n            reason.push(' Brak ceny zlecenia ');\r\n        }\r\n        \r\n        return reason.toString();\r\n    }\r\n    public isReadyForProtocol(order:Order, isForProtocol:boolean):boolean {\r\n       if (isForProtocol)\r\n       {  \r\n           if  (order.typeCode === 'OT'){\r\n               if (order.officeCode==='KAT'){\r\n                   if(order.workNo != this.NO_WO && order.assignee && order.itemId != undefined && order.mdCapex !== this.NO_CAPEX)\r\n                   return true;\r\n               }\r\n               else if (order.workNo != this.NO_WO && order.assignee && order.itemId != undefined){\r\n                   return true;\r\n               }\r\n               else {\r\n                    order.frontProcessingDesc=this.logReason(order);\r\n                    return false;\r\n               }             \r\n           }\r\n           else if (order.officeCode==='KAT'){\r\n                if (order.workNo != this.NO_WO && order.assignee && order.itemId != undefined && order.mdCapex !== this.NO_CAPEX && order.price!=undefined && order.price!=0){\r\n                    return true;\r\n                 }\r\n                 else {\r\n                     order.frontProcessingDesc=this.logReason(order);\r\n                     return false;\r\n                 }  \r\n                }             \r\n           else {\r\n               if (order.workNo != this.NO_WO && order.assignee && order.itemId != undefined && order.price!=undefined && order.price!=0) {\r\n                   return true;\r\n               }\r\n            else {\r\n                order.frontProcessingDesc=this.logReason(order);\r\n                return false;\r\n            }\r\n           } \r\n        }\r\n        if (order.officeCode === 'KAT') {\r\n            return order.workNo != this.NO_WO && order.assignee && order.itemId != undefined && order.mdCapex !== this.NO_CAPEX;\r\n        }\r\n        return order.workNo != this.NO_WO && order.assignee && order.itemId != undefined;\r\n    }\r\n\r\n\r\n    public downloadXLSFile(fileName: string, contentBase64: string) {\r\n\r\n        console.log('download ' + fileName);\r\n\r\n        var byteCharacters = atob(contentBase64);\r\n        var byteNumbers = new Array(byteCharacters.length);\r\n        for (var i = 0; i < byteCharacters.length; i++) {\r\n            byteNumbers[i] = byteCharacters.charCodeAt(i);\r\n        }\r\n        var byteArray = new Uint8Array(byteNumbers);\r\n\r\n        let blob = new Blob([byteArray], {type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'});\r\n        let e = document.createEvent('MouseEvents');\r\n        let a = document.createElement('a');\r\n\r\n        a.download = fileName;\r\n        a.href = window.URL.createObjectURL(blob);\r\n\r\n\r\n        e.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\r\n        a.dispatchEvent(e);\r\n    }\r\n\r\n    public mapToSelectItem(pairs:CodeValue[], ref:SelectItem[]):boolean {\r\n        for (let pair of pairs) {\r\n            ref.push({label: pair.paramChar, value: pair.code});\r\n        }\r\n        return true;\r\n    }\r\n\r\n    public convertGMMToMinutes(gMM: string): string {\r\n        let hours: number = parseInt(gMM.substr(0,1), 10);\r\n        var minutes: number = parseInt(gMM.substr(2,2), 10);\r\n        return ''+((hours*60) + minutes);\r\n    }\r\n\r\n    public convertHoursDecimalToMinutes(input: string, additive: number): string {\r\n        let inputDecimal : number = parseFloat(input)+additive; //FIXME trick to enable comparing - this is floored somewhere on backend\r\n        return ''+(inputDecimal*60);\r\n    }\r\n\r\n    public convertMinutesToGMM(input: string): string {\r\n        let minNum: number = parseInt(input, 10);\r\n        let hours: number = Math.floor(minNum / 60);\r\n        let minutes: number = minNum - (hours * 60);\r\n        let minutesPadded: string = minutes < 10 ? '0'+minutes : ''+minutes;\r\n        return ''+hours+':'+minutesPadded;\r\n    }\r\n\r\n    public censorUser(key, value) {\r\n        if (key === 'modifiedByUser') {\r\n            return undefined;\r\n        }\r\n        return value;\r\n    }\r\n\r\n\r\n}","import { Injectable } from '@angular/core';\r\n\r\nimport { User, Order, UserReport, MonthlyUserReport } from '../_models/index';\r\nimport { HttpBotWrapper } from '../_services/httpBotWrapper.service';\r\nimport { DictService } from '../_services/dict.service';\r\nimport { ToolsService } from '../_services/tools.service';\r\nimport { Observable }    from 'rxjs';\r\nimport { catchError, map, tap, delay, mergeMap } from 'rxjs/operators';\r\nimport { EMPTY } from 'rxjs';\r\n\r\n\r\n\r\n@Injectable()\r\nexport class UserService {\r\n    constructor(private http: HttpBotWrapper, private dictService: DictService, private toolsService: ToolsService) {\r\n        console.log(\"created UserService\");\r\n    }\r\n\r\n\r\n    getById(id: number) {\r\n        return this.http.get('/api/v1/persons/' + id).pipe(map((response: Object) => response));\r\n    }\r\n\r\n    create(user: User) {\r\n        return this.http.post('/api/v1/persons', user).pipe(map((response: Object) => response));\r\n    }\r\n\r\n    update(user: User) {\r\n        //let strippedUser: User = JSON.parse(JSON.stringify(user, this.toolsService.censorUser));\r\n        let strippedUser: User = JSON.parse(JSON.stringify(user));\r\n        strippedUser.workOrders = undefined;\r\n        return this.http.put('/api/v1/persons/' + strippedUser.id, strippedUser).pipe(map((response: Object) => response));\r\n    }\r\n\r\n    sendResetEmail(email: string): Observable<any> {\r\n        let msg: any = {};\r\n        msg.email = email;\r\n        return this.http.post('/pwdreset', msg).pipe(map((response: Object) => response));\r\n    }\r\n\r\n\r\n    resetPassword(userId:string, hash:string, newPassword:string):any {\r\n        let msg: any = {id: userId, password: newPassword, hash: hash};\r\n        return this.http.put('/pwdreset', msg).pipe(map((response: Object) => response));\r\n    }\r\n\r\n    assignWorkOrder(user: User, order: Order, isNewOrderOwner: boolean):any {\r\n        if (isNewOrderOwner && order.assignee !== undefined && order.assignee.length > 0) {\r\n            return this.addRelation(true, user, order);\r\n        } else {\r\n            return this.addRelation(false, user, order);\r\n        }\r\n    }\r\n\r\n    /* sqlite could not handle\r\n    private deleteAllAssignees(assigneeIds: number[], orderId: number) {\r\n        let observableBatch = [];\r\n\r\n        for(let assigneeId of assigneeIds) {\r\n            observableBatch.push(\r\n                this.http.delete('/api/v1/persons/' + assigneeId + '/order/'+orderId, this.authService.getAuthOptions()).\r\n                map((response:Object) => this.getRelationDeleteResult(response))\r\n            );\r\n        }\r\n\r\n        return Observable.forkJoin(observableBatch);\r\n    }\r\n\r\n\r\n    getRelationDeleteResult(response: any) : number {\r\n        console.log(\"delete result= \"+JSON.stringify(response));\r\n\r\n        if (response.deleted === 1) {\r\n            console.log(\"Old relation (assignment) removed successfully\");\r\n            return 1;\r\n        } else if (response.deleted === 0) {\r\n            console.log(\"there was no relation deleted - we are optimistic\");\r\n            return 1;\r\n        } else {\r\n            console.log(\"there unimplemented: \"+response.deleted);\r\n            return -1;\r\n        }\r\n\r\n    }\r\n     */\r\n\r\n    private handleError(error: any): Observable<any> {\r\n        console.error('An error occurred: ', error); // for demo purposes only\r\n        return EMPTY;\r\n    }\r\n\r\n    private addRelation(detach: boolean, user:User, order:Order):Observable<any> {\r\n        return this.http.post('/api/v1/persons/' + user.id + '/order/' + order.id+(detach?\"?detach=true\":\"\"), order);\r\n    }\r\n\r\n    public deleteRelation(user:User, order:Order):Observable<any> {\r\n        return this.http.delete('/api/v1/persons/' + user.id + '/order/' + order.id).pipe(map((response:Object) => response));\r\n    }\r\n\r\n    public getUtilizationReportData(dateAfter: string, dateBefore: string): Observable<MonthlyUserReport[]> {\r\n        return this.http.get('/api//v1/report/personOrders?dateAfter='+dateAfter+\"&dateBefore=\"+dateBefore).pipe(map((response: Object) =>\r\n        this.getAllUserReport(response))) as Observable<MonthlyUserReport[]>;\r\n        // (response['list'])\r\n        \r\n    }\r\n\r\n    public getEngineers(): Observable<User[]> {\r\n        return this.http.get('/api/v1/persons').pipe(map((response: Object) => this.getAllByRole(response, [\"MG\", \"EN\"])));\r\n    }\r\n\r\n    public getStaff(): Observable<User[]> {\r\n        return this.http.get('/api/v1/persons').pipe(map((response: Object) => this.getAllByRole(response, [\"MG\", \"EN\", \"OP\"])));\r\n    }\r\n\r\n    public getAllStaff(): Observable<User[]> {\r\n        return this.http.get('/api/v1/persons').pipe(map((response: Object) => this.getAllByRole(response, [\"MG\", \"EN\", \"OP\", \"PR\", \"AN\", \"CL\", \"PA\"])));\r\n    }\r\n\r\n    public getEngineersAndVentureRepresentatives(): Observable<User[]> {\r\n        return this.http.get('/api/v1/persons').pipe(map((response: Object) => this.getAllByRole(response, [\"MG\", \"EN\", \"VE\"])));\r\n    }\r\n\r\n    public getAllButPR(): Observable<User[]> {\r\n        return this.http.get('/api/v1/persons').pipe(map((response: Object) => this.getAllByRole(response, [\"MG\", \"EN\", \"OP\", \"VE\",\"CN\"])));\r\n    }\r\n\r\n    getAll() {\r\n        return this.http.get('/api/v1/persons').pipe(map((response: Object) => this.getAllByRole(response, [\"PR\", \"MG\", \"EN\", \"OP\", \"VE\", \"AN\", \"CL\", \"PA\",\"CN\"])));\r\n    }\r\n\r\n    getContractors () {\r\n        return this.http.get('/api/v1/persons').pipe(map((response: Object) => this.getAllByRole(response, [\"CN\", \"VE\"])));\r\n    }\r\n\r\n    getEngineersAndContractors () : Observable<User[]> {\r\n        return this.http.get('/api/v1/persons').pipe(map((response: Object) => this.getAllByRole(response, [\"MG\", \"EN\",\"CN\"])));\r\n    }\r\n\r\n    public getManagedUsers(role: string[], fetchVentures: boolean): Observable<User[]> {\r\n        if (role && role.indexOf('PR') > -1 ) {\r\n            return this.getStaff();\r\n        } else {\r\n            if (fetchVentures) {\r\n                return this.getEngineersAndVentureRepresentatives();\r\n            }\r\n            return this.getEngineers();\r\n        }\r\n    }\r\n\r\n    public getHistoryById(id: number) {\r\n        return this.http.get('/api/v1/persons/history/' + id).pipe(map((response: Object) => this.getAllByRole(response, [\"VE\", \"EN\", \"MG\", \"OP\", \"AN\", \"CL\"])));\r\n    }\r\n\r\n    public getVentureRepresentatives(): Observable<User[]> {\r\n        return this.http.get('/api/v1/persons').pipe(map((response: Object) => this.getAllByRole(response, [\"VE\"])));\r\n    }\r\n\r\n    private hasAnyRole(sourceRoleCodes: string[], user: User): boolean {\r\n        for (let role of user.roleCode) {\r\n            if (sourceRoleCodes.indexOf(role) > -1) {\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n    \r\n    // private helper methods\r\n    private getAllByRole(response:any, roleCodes:string[]):User[] {\r\n        let users : User[] = [];\r\n\r\n        console.log(\"getAllByRole for \"+JSON.stringify(roleCodes));\r\n\r\n        if (response.list && response.list.length > 0) {\r\n            for (let user of response.list) {\r\n\r\n                //console.log(\"getAllByRole processing user \"+JSON.stringify(user, this.toolsService.censorUser));\r\n                console.log(\"getAllByRole processing user \"+JSON.stringify(user));\r\n\r\n                if (user.roleCode && user.roleCode.length && this.hasAnyRole(roleCodes, user)) {\r\n\r\n\r\n                    if (user.officeCode) {\r\n                        console.log(\"trying for \"+user.officeCode +\" from \"+JSON.stringify( this.dictService.getOffices() ) );\r\n                        user.office = this.dictService.getOffice(user.officeCode);\r\n                    }\r\n\r\n                    if (user.agreementCode) {\r\n                        console.log(\"trying for \"+user.agreementCode +\" from \"+JSON.stringify( this.dictService.getAgreements() ) );\r\n                        user.agreement = this.dictService.getAgreement(user.agreementCode);\r\n                    }\r\n\r\n                    if (user.rankCode) {\r\n                        console.log(\"trying for \"+user.rankCode +\" from \"+JSON.stringify( this.dictService.getRanks() ) );\r\n                        user.rank = this.dictService.getRank(user.rankCode);\r\n                    }\r\n\r\n                    user.role = [];\r\n                    for (let roleCode of user.roleCode) {\r\n                        user.role.push(this.dictService.getRole(roleCode));\r\n                    }\r\n\r\n                    //console.log(\"getAllByRole pushing user \"+JSON.stringify(user, this.toolsService.censorUser));\r\n                    console.log(\"getAllByRole pushing user \"+JSON.stringify(user));\r\n                    users.push(user);\r\n\r\n                }\r\n            }\r\n        }\r\n\r\n        return users;\r\n    }\r\n\r\n    private getAllUserReport(response:any):UserReport[] {\r\n        let users : UserReport[] = [];\r\n        if (response.list && response.list.length > 0) {\r\n            for (let user of response.list) {\r\n\r\n                if (user.roleCode!='CN'){\r\n                    for (let order of user.workOrders) {\r\n                        order.statusCode ? order.status = this.dictService.getWorkStatus(order.statusCode): '?'\r\n                    }\r\n                    users.push(user);\r\n                } else {\r\n                    console.log('debug '+JSON.stringify(user));\r\n                }\r\n            }\r\n        }\r\n        return users;\r\n    }\r\n\r\n}","import { Injectable } from '@angular/core';\r\n\r\nimport { User, Order, Timestats } from '../_models/index';\r\nimport { HttpBotWrapper } from '../_services/httpBotWrapper.service';\r\nimport { DictService } from '../_services/dict.service';\r\nimport { Observable }    from 'rxjs';\r\nimport { catchError, map, tap, delay, mergeMap } from 'rxjs/operators';\r\n\r\n\r\n\r\n\r\n@Injectable()\r\nexport class UserTimeStatsService {\r\n\r\n    constructor(private http: HttpBotWrapper, private dictService: DictService) {\r\n        console.log('UserTimeStatsService created');\r\n    }\r\n\r\n    //  /api/v1/report/personTimestats?periodDate=2018-03-03&personId=87,88,89\r\n\r\n    getByDateAndUserIds(users: User[], date: string, ids: number[]) : Observable<Timestats[]> {\r\n        let personIds: string = '';\r\n        for (let id of ids) {\r\n            personIds += ''+id+',';\r\n        }\r\n        personIds = personIds.substr(0, personIds.length-1);\r\n\r\n        return this.http.get('/api/v1/report/personTimestats?periodDate='+date+'&personId='+personIds)\r\n            .pipe(map((response: Object) => this.getTimestats(response, users)));\r\n    }\r\n\r\n    private getTimestats(response:any, users: User[]):any {\r\n        let timestats: Timestats[] = [];\r\n\r\n        if (response.list && response.list.length > 0) {\r\n            for (let timestat of response.list) {\r\n                this.fillUser(timestat, users);\r\n                timestat.workTime += timestat.trainingTime;\r\n                timestats.push(timestat);\r\n            }\r\n        }\r\n\r\n        console.log('Got and filled '+JSON.stringify(timestats));\r\n        return timestats;\r\n    }\r\n\r\n    private fillUser(timestat:Timestats, users:User[]):void {\r\n        for(let user of users) {\r\n            if (user.id === timestat.personId) {\r\n                timestat.user = user;\r\n                return;\r\n            }\r\n        }\r\n\r\n    }\r\n}","import { Injectable } from '@angular/core';\r\nimport { Observable, AsyncSubject, Subject } from 'rxjs';\r\nimport { CodeValue } from '../_models/code';\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\n\r\nexport class VersionService {\r\n\r\n    private _history: CodeValue[];\r\n\r\n    get history() {\r\n        return this._history;\r\n    }\r\n\r\n    get version() {\r\n        return this._history[0]['code'];\r\n    }\r\n\r\n    constructor() {\r\n        this._history = [\r\n            new CodeValue('1.5.24', 'Dodanie zakładki Prime Ng6 z Turbo Table'),\r\n            new CodeValue('1.5.23', 'Wyświetlanie historii zmian, przekazywanie Session-Id oraz Front-Version'),\r\n            new CodeValue('1.5.22', 'Edytowalny zakres dat na zakladce raporty miesięczne'),\r\n            new CodeValue('1.5.21', 'Czas pracy zmiana uprawnienia do zmiany roli MG i OP'),\r\n            new CodeValue('1.5.20', 'Poprawka na zakres dat'),\r\n            new CodeValue('1.5.19', 'Poprawka na zakres dat formularze (toISO)'),\r\n            new CodeValue('1.5.18', 'Progress jako http interceptor'),\r\n            new CodeValue('1.5.17', 'Poprawa przypisania wykonawcy podczas dodawania zlecenia,Średni obrót na osobę, liczenie wydajności usunięto urlop jako skladową w \"Czas zadeklarowany\", spójne sortowanie, poprawiony błąd z brakiem wyświetlania współczynnika na ekranie modyfikacji osoby, poprawiony błąd niepozwalający zakończyć współpracy z osobą, lepsze wykorzystanie miejsca w oknie podglądu szczegółów WO.'),\r\n            new CodeValue('1.5.16', 'Przypisanie wykonawcy podczas dodawania zlecenia'),\r\n            new CodeValue('1.5.15', 'Poprawa dat '),\r\n            new CodeValue('1.5.14', 'Możliwość zwiększenia przerwy, poprawa zaznaczania na \"wydajność zespołu\" '),\r\n            new CodeValue('1.5.13', 'Czas szkolenia dodany do czasu całkowitego, zmiana porządkowania kolumn, filtrowanie statusu w \"Wydajności zespołu\" '),\r\n            new CodeValue('1.5.12', 'Poprawka wyswietlania bledu rejestracji czasu pracy '),\r\n            new CodeValue('1.5.11', 'Logika wycen OP - wycena z workType, inne stany wycena usunieta '),\r\n            new CodeValue('1.5.10', 'Blokowanie zmiany na stan Zawieszone podczas odwieszania '),\r\n            new CodeValue('1.5.9',  'Pracochlonnosc -1 poprawka, zmiana stanu na Wydane '),\r\n            new CodeValue('1.5.8',  'dodawanie WO typ orderu - autocomplete z kolorami '),\r\n            new CodeValue('1.5.7 ', 'Rutowanie do poprawnej strony po modyfikacji użytkownika/kontrahenta'),\r\n            new CodeValue('1.5.6 ', 'Ignorowanie typu 13.0 (brak pracy) na raportach wydajności'),\r\n            new CodeValue('1.5.5 ', 'Pracochlonnosc poprawka dotyczaca 0 na raportach'),\r\n            new CodeValue('1.5.4 ', 'Pracochlonnosc -13 poprawka'),\r\n            new CodeValue('1.5.3 ', 'Lista zleceń na raporcie wydajności'),\r\n            new CodeValue('1.5.2 ', 'Pracochlonnosc -13 poprawka'),\r\n            new CodeValue('1.5.1 ', 'Pozwol na wejscie po zarejestrowanym wyjsciu'),\r\n            new CodeValue('1.5.0 ', 'Angular 6, primeng 6, still deprecated theme omega'),\r\n            new CodeValue('1.4.17', 'Sortowanie listy typów zleceń podczas dodawania zlecenia'),\r\n            new CodeValue('1.4.16', 'Raporty miesieczne'),\r\n            new CodeValue('1.4.15', 'Wynagrodzenia uzupelnienie po zmianie menu'),\r\n            new CodeValue('1.4.14', 'Hierarchiczne menu'),\r\n            new CodeValue('1.4.13', 'Widok czasów miesięcznych, Raport utylizacji - rozszerzenie'),\r\n            new CodeValue('1.4.12', 'Wynagrodzenia naprawiony bug po dodaniu roli CN'),\r\n            new CodeValue('1.4.11', 'Dodanie roli CN - Zleceniobiorca'),\r\n            new CodeValue('1.4.10', 'cancelled tab added '),\r\n            new CodeValue('1.4.9', 'complexity bug on group add orders fixed   '),\r\n            new CodeValue('1.4.8', 'censor user removed   '),\r\n            new CodeValue('1.4.7', 'No person history in cache   '),\r\n            new CodeValue('1.4.6', 'problem z JSON.stringify(user:User) censorUser   '),\r\n            new CodeValue('1.4.5', 'problem z JSON.stringify(user:User)   '),\r\n            new CodeValue('1.4.4', 'dedykowany timesheet na user-attendance-register   '),\r\n            new CodeValue('1.4.3', 'poprawka analiza pracowników - wycena ze zlecenia, usuniecie typów http   '),\r\n            new CodeValue('1.4.2', 'dodanie zakladki pracownicy dla operatorów, poprawka cache - nowe url, lekkie zmiany w wyglądzie ui-fieldset-legend, wo-details   '),\r\n            new CodeValue('1.4.1', 'Wygaszanie cachea  '),\r\n            new CodeValue('1.4.0', 'Nowy klient HTTP, cache\\'ujacy interceptor'),\r\n            new CodeValue('1.3.19', 'Poprawka do grupowej zmiany statusów - zaznaczanie jedynie widocznych zleceń, male zmiany w rejestracji czasu pracy'),\r\n            new CodeValue('1.3.18', 'Poprawka do grupowej zmiany statusów - logika przycisków, logika dla trybu operator, czyszczenie zmiennych '),\r\n            new CodeValue('1.3.17', 'Poprawka zmiana strefy czasowej w komentarzach '),\r\n            new CodeValue('1.3.16', 'Zmiana statusów - implementacja rekurencyjnie, usuwanie relacji przypisania gdy status zmieniany na Otwarte '),\r\n            new CodeValue('1.3.15', 'Zmiana statusów zleceń branch ChangeOrdersGroupStatus '),\r\n            new CodeValue('1.3.14', 'payrolle historyczne i biezacy w trybie lazy'),\r\n            new CodeValue('1.3.13', 'payrolle historyczne w trybie lazy'),\r\n            new CodeValue('1.3.12', 'Dodanie obslugi szkolen, wyswietlanie liczb na zakladce wydajność'),\r\n            new CodeValue('1.3.11', 'Zmiana kalendarza na polski branch UpdateCalendarLocalization '),\r\n            new CodeValue('1.3.10', 'Dodanie w zakładce czas pracy kolumny określającej czas szkolenia w danym dniu '),\r\n            new CodeValue('1.3.9', 'Dodanie możliwośći eksportowania historycznych wypłat dla poszczególnych miesięcy '),\r\n            new CodeValue('1.3.8', 'excelId moze byc 0, dodanie kolumny imie podczas exportu wynagrodzenia '),\r\n            new CodeValue('1.3.7', 'Poprawka edytownia zlecenia, usunięcie linii odpowiedzialnej za zapisywanie domyślnej czasochłonności '),\r\n            new CodeValue('1.3.6', 'filtorwanie bylych pracowników na zakładce pracownicy '),\r\n            new CodeValue('1.3.5', 'usuwanie pracownika mozliwe tylko dla isEmployed, zmiana excelId podczas usuwania'),\r\n            new CodeValue('1.3.4', 'Poprawka edycji użytkownika, zakończ współpracę, usuwanie danych pracownika branch UpdateEditUser'),\r\n            new CodeValue('1.3.3', 'Poprawka dodawania uztkownika branch RegisteredUserUpdate '),\r\n            new CodeValue('1.3.2', 'Logika wspolczynnik puli vs salary/leave rate, logika dodawania isEmployed, excelId, excelId dodane do users-display oraz users-payroll '),\r\n            new CodeValue('1.3.1', 'Poprawka - Komentowanie zawieszonych zleceń'),\r\n            new CodeValue('1.3.0', 'Wyswietlanie historii pracowników, wymaga nowej bazy'),\r\n            new CodeValue('1.2.14', 'Komentowanie zawieszonych zleceń'),\r\n            new CodeValue('1.2.13', 'Poprawki (cena z groszami, opis typu zlecenia sciagany wg biura)'),\r\n            new CodeValue('1.2.12', 'Rola CL - Protokół, na razie rw'),\r\n            new CodeValue('1.2.11', 'Rola PA - Parametryzator, cena worktype moze byc 0'),\r\n            new CodeValue('1.2.10', 'Poprawa do komentarzy (usuwanie starych), ukrywanie niepracujacych na timesheetach'),\r\n            new CodeValue('1.2.9', 'Dodanie nowej roli Analityk'),\r\n            new CodeValue('1.2.8', 'dodawanie parametryzachu typow dla wszystkich regionow w jednym kroku'),\r\n            new CodeValue('1.2.7', 'Filtrowanie zleceń nie gotowych do protokołu'),\r\n            new CodeValue('1.2.6', 'komentowanie inz '),\r\n            new CodeValue('1.2.5', 'pusty komentarz - zawieszone '),\r\n            new CodeValue('1.2.4', 'usuwanie urlopu '),\r\n            new CodeValue('1.2.3', 'modyfikacja VE (region), poprawka do timesheet break empty, poprawka do payroll - currentPaylod[0] could be null '),\r\n            new CodeValue('1.2.2', 'poprawka do payroll - brak widocznosci stawki puli - bez formatowania '),\r\n            new CodeValue('1.2.1', 'poprawka brak opisow my-order, dodanie suspended w '),\r\n            new CodeValue('faza I', 'polirole, rozliczenie, protokol (excel), wprowadzenie wielu WO')\r\n        ];\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n}","import { Injectable, Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Observable }    from 'rxjs';\r\nimport { catchError, map, tap, delay, mergeMap } from 'rxjs/operators';\r\n\r\n\r\nimport { Order, OrderHistory, User, WorkType } from '../_models/index';\r\nimport { Comments, commentToDbContent } from '../_models/comment';\r\nimport { HttpBotWrapper } from '../_services/httpBotWrapper.service';\r\nimport { DictService } from '../_services/dict.service';\r\nimport { WorkTypeService } from '../_services/workType.service';\r\n\r\n\r\n@Injectable()\r\nexport class WOService {\r\n\r\n    constructor(private http: HttpBotWrapper, private dictService: DictService, private workTypeService: WorkTypeService) {\r\n        console.log(\"WOService created\");\r\n        this.dictService.init();\r\n        this.workTypeService.init();\r\n    }\r\n\r\n    /* ambigous since 12.2017\r\n    getOrdersByWorkNo(workNo: string):Observable<Order> {\r\n\r\n        return this.http.get('/api/v1/orders/external/'+workNo)\r\n            .pipe(map(((response: Object) => this.getWorkOrder(<Order> response))\r\n    }\r\n    */\r\n\r\n    getOrdersByStatus(status: string):Observable<Order[]> {\r\n\r\n        return this.http.get('/api/v1/orders?status='+status)\r\n            .pipe(map((response: Object) => this.getWorkOrders(response)))\r\n    }\r\n\r\n    getOrdersByDates(lastModAfter: string, lastModBefore: string) : Observable<Order[]> {\r\n\r\n        return this.http.get('/api/v1/orders?lastModAfter='+lastModAfter+\"&lastModBefore=\"+lastModBefore)\r\n            .pipe(map((response: Object) => this.getWorkOrders(response)))\r\n    }\r\n\r\n    getAssignedOrders(personId: number) : Observable<Order[]> {\r\n\r\n        return this.http.get('/api/v1/orders?personId='+personId+\"&status=AS\")\r\n            .pipe(map((response: Object) => this.getWorkOrders(response)))\r\n    }\r\n\r\n    updateOrder(order: Order) : Observable<Order> {\r\n        return this.http.put('/api/v1/orders/'+order.id, JSON.stringify(this.getStrippedOrder(order)))\r\n            .pipe(map((response: Object) => response['updated']), mergeMap(updatedId => this.getOrderById(order.id)));\r\n    }\r\n\r\n    getOrderById(id:number):Observable<Order> {\r\n        return this.http.get('/api/v1/orders/'+id)\r\n            .pipe(map((response: Order) => this.getWorkOrder(response)));\r\n    }\r\n\r\n    addOrder(order: Order) : Observable<Order> {\r\n        return this.http.post('/api/v1/orders', JSON.stringify(this.getStrippedOrder(order)))\r\n            .pipe(map((response: Object) => response['created']), mergeMap(createdId => this.getOrderById(createdId)));\r\n    }\r\n\r\n    getOrderHistoryById(id:number):Observable<OrderHistory[]> {\r\n        return this.http.get('/api/v1/orders/history/' + id)\r\n            .pipe(map((response:Object) => this.getWorkOrders(response))) as Observable<OrderHistory[]>;\r\n    }\r\n\r\n    getRelatedItem(id: number): Observable<any> {\r\n        return this.http.get('/api/v1/relatedItems/' + id)\r\n            .pipe(map((response:Object) => this.getItem(response)));\r\n    }\r\n\r\n    prepareProtocol(ids: number[]) : Observable<any> {\r\n\r\n        let flatIds: string = \"\";\r\n\r\n        for(let id of ids) {\r\n            flatIds += id+\",\";\r\n        }\r\n        if (flatIds.length > 1) {\r\n            flatIds = flatIds.substr(0, flatIds.length-1);\r\n        }\r\n\r\n        return this.http.get('/api/v1/report/protocol?ids='+flatIds)\r\n            .pipe(map((response: Object) => this.getProtocol(response)))\r\n    }\r\n\r\n    fetchProtocol(protocolNo: string) : Observable<any> {\r\n        return this.http.get('/api/v1/report/protocol?protocolNo='+protocolNo)\r\n            .pipe(map((response: Object) => this.getProtocol(response)))\r\n    }\r\n\r\n\r\n    // private helper methods\r\n\r\n    private getProtocol(json:any):any {\r\n        console.log(\"protocol: \"+JSON.stringify(json));\r\n        return json;\r\n    }\r\n\r\n    private getStrippedOrder(order: Order): Order {\r\n        let strippedOrder:Order = JSON.parse(JSON.stringify(order));\r\n        // this is not from dict but strippedOrder.complexity = undefined;\r\n        strippedOrder.status = undefined;\r\n        strippedOrder.type = undefined;\r\n        strippedOrder.lastModDate = undefined;\r\n        strippedOrder.assignee = undefined;\r\n        strippedOrder.isFromPool = undefined;\r\n\r\n        strippedOrder.relatedItems = undefined;\r\n        strippedOrder.itemNo = undefined;\r\n        strippedOrder.itemDescription = undefined;\r\n        strippedOrder.itemBuildingType = undefined;\r\n        strippedOrder.itemConstructionCategory = undefined;\r\n        strippedOrder.itemAddress = undefined;\r\n        strippedOrder.itemCreationDate = undefined;\r\n\r\n        if (strippedOrder.comments) {\r\n            console.log(\"changing comments\");\r\n            strippedOrder.comment = commentToDbContent(strippedOrder.comments);\r\n            strippedOrder.comments = undefined;\r\n        }\r\n\r\n        return strippedOrder;\r\n    }\r\n\r\n    private getWorkOrders(response:any):Order[] {\r\n        let orders : Order[] = [];\r\n\r\n        if (response.list && response.list.length > 0) {\r\n            for (let order of response.list) {\r\n\r\n                order = this.getWorkOrder(order);\r\n\r\n                orders.push(order);\r\n            }\r\n        }\r\n\r\n        return orders;\r\n    }\r\n\r\n    private getWorkOrder(order:Order):Order {\r\n        if (order.statusCode) {\r\n            console.log(\"trying for \"+order.statusCode +\" from \"+JSON.stringify( this.dictService.getWorkStatus(order.statusCode) ) );\r\n            order.status = this.dictService.getWorkStatus(order.statusCode);\r\n        }\r\n\r\n        if (order.typeCode) {\r\n            order.type = this.workTypeService.getWorkTypeDescription(order);\r\n        }\r\n\r\n        if (order.officeCode) {\r\n            order.office = this.dictService.getOffice(order.officeCode);\r\n        }\r\n\r\n        if (order.complexity != null) {\r\n            console.log('Complexity read from backend: '+order.complexity);\r\n        } else if (order.complexityCode && order.typeCode && order.officeCode) {\r\n            let workType: WorkType = this.workTypeService.getWorkType(order.typeCode, order.officeCode, order.complexityCode);\r\n            if (workType && workType.complexity >= 0) {\r\n                console.log('Complexity read from workType parametrization: '+workType.complexity);\r\n                order.complexity = workType.complexity;\r\n            } else {\r\n                order.complexity = -13;\r\n            }\r\n        }\r\n\r\n        if (order.price === -13) {\r\n            order.price = undefined;\r\n        }\r\n\r\n        if (order.comment) {\r\n            //console.log(\"test order.comment: inside \");\r\n            order.comments = new Comments(order.comment);\r\n            order.sComments = JSON.stringify(order.comments);\r\n        }\r\n\r\n        // flat structure to enable filtering in p-datatable\r\n        if (order.relatedItems && order.relatedItems[0] !== undefined) {\r\n            order.itemNo = order.relatedItems[0].itemNo;\r\n            order.itemDescription = order.relatedItems[0].description;\r\n            order.itemBuildingType = order.relatedItems[0].mdBuildingType;\r\n            order.itemConstructionCategory = order.relatedItems[0].mdConstructionCategory;\r\n            order.itemAddress = order.relatedItems[0].address;\r\n            order.itemCreationDate = order.relatedItems[0].creationDate;\r\n        }\r\n\r\n        return order;\r\n    }\r\n\r\n    private getItem(item:any):any {\r\n        return item;\r\n    }\r\n}","import { Injectable, Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Observable ,  BehaviorSubject }    from 'rxjs';\r\nimport { catchError, map, tap, delay, mergeMap } from 'rxjs/operators';\r\n\r\n\r\nimport { Order } from '../_models/order';\r\nimport { WorkType } from '../_models/index';\r\nimport { DictService } from '../_services/dict.service';\r\nimport { HttpBotWrapper } from '../_services/httpBotWrapper.service';\r\n\r\nimport { CodeValue } from '../_models/code';\r\n\r\n@Injectable()\r\nexport class WorkTypeService {\r\n\r\n    private cache: WorkType[];\r\n    private initialized: boolean;\r\n\r\n    constructor(private http: HttpBotWrapper) {\r\n        console.log(\"RelatedItemService options\");\r\n    }\r\n\r\n    public init(): void {\r\n        if (this.initialized === false) {\r\n\r\n            console.log(\"Initializing workTypeService!\");\r\n            this.http.get('/api/v1/workTypes')\r\n                .subscribe((response:Object) => this.cacheAndGet(response['list']));\r\n\r\n        }\r\n        this.initialized = true;\r\n\r\n    }\r\n\r\n    getAllWorkTypes() : Observable<WorkType[]> {\r\n        return this.getAllWorkTypesInternal(false);\r\n    }\r\n\r\n    refreshCache(): Observable<WorkType[]> {\r\n        console.log(\"Refreshing WorkType cache...\");\r\n        return this.getAllWorkTypesInternal(true);\r\n    }\r\n\r\n    private getAllWorkTypesInternal(refreshCache: boolean) : Observable<WorkType[]> {\r\n       return this.http.get('/api/v1/workTypes')\r\n            .pipe(map((response: Object) => this.cacheAndGet(response['list'])));\r\n    }\r\n\r\n    addWorkType(workType: WorkType): Observable<any> {\r\n        return this.http.post('/api/v1/workTypes', JSON.stringify(workType))\r\n            .pipe(map((response: Object) => response['created']));\r\n    }\r\n\r\n    updateWorkType(workType: WorkType): Observable<any> {\r\n        return this.http.put('/api/v1/workTypes/'+workType.id, JSON.stringify(workType))\r\n            .pipe(map((response: Object) => response['updated']));\r\n    }\r\n\r\n    /*\r\n        requires cache!\r\n     */\r\n    getWorkType(typeCode: string, officeCode: string, complexityCode: string): WorkType {\r\n        if (this.cache) {\r\n            for(let workType of this.cache) {\r\n                if (workType.typeCode === typeCode && workType.officeCode === officeCode && workType.complexityCode === complexityCode) {\r\n                    return workType;\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    private cacheAndGet(workTypes: WorkType[]): WorkType[] {\r\n        console.log(\"Caching workTypes! first: \"+JSON.stringify(workTypes[0]));\r\n\r\n        this.cache = workTypes;\r\n\r\n        return workTypes;\r\n    }\r\n\r\n    public getWorkTypeDescription(order: Order): string {\r\n        let workType:WorkType = this.getWorkType(order.typeCode, order.officeCode? order.officeCode : 'CEN', 'STD');\r\n        if (workType) {\r\n            return workType.description;\r\n        }\r\n        console.log(\"getWorkTypeDescription not inited yet!\");\r\n        return null;\r\n    }\r\n\r\n    public getWorkTypes(): Observable<CodeValue[]> {\r\n        if (this.cache) {\r\n            return new BehaviorSubject<CodeValue[]>(this.processWorkTypes(null)).asObservable();\r\n        }\r\n        return this.http.get('/api/v1/workTypes')\r\n            .pipe(map((response: Object) => this.processWorkTypes(response['list'])));\r\n    }\r\n\r\n    private processWorkTypes(workTypes: WorkType[]): CodeValue[] {\r\n        let cache: WorkType[] = workTypes ? this.cacheAndGet(workTypes): this.cache;\r\n        let map: Map<string, string> = new Map<string, string>();\r\n        let result: CodeValue[] = [];\r\n\r\n        for(let workType of cache) {\r\n            map.set(workType.typeCode, workType.description);\r\n        }\r\n\r\n        map.forEach((value: string, key: string) => {\r\n            result.push(new CodeValue(key, value));\r\n        });\r\n\r\n        return result;\r\n        \r\n\r\n    }\r\n\r\n}","module.exports = \"\"","module.exports = \"<p>WERSJA <a [routerLink]=\\\"\\\" (click)=\\\"showHistoryDialog()\\\">{{versionService.version}} Faza II</a> ( <a href=\\\"https://www.primefaces.org/primeng/#/\\\" target=\\\"_top\\\">Powered by primeng</a> )\\r\\n</p>\\r\\n\\r\\n<p-dialog header=\\\"Historia zmian\\\" [(visible)]=\\\"showHistory\\\" [responsive]=\\\"true\\\" [minWidth]=\\\"1000\\\" [width]=\\\"800\\\">\\r\\n  <div class=\\\"ui-grid ui-grid-responsive ui-fluid\\\">\\r\\n    <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px; margin-bottom: 10px;\\\">\\r\\n\\r\\n      <p-dataTable [value]=\\\"versionService.history\\\" [rows]=\\\"20\\\" [paginator]=\\\"true\\\" [globalFilter]=\\\"gb\\\" #dtChangeLog\\r\\n                   dataKey=\\\"code\\\" resizableColumns=\\\"true\\\">\\r\\n        <p-header>\\r\\n          <div>\\r\\n            <i class=\\\"fa fa-search\\\"></i>\\r\\n            <input #gb type=\\\"text\\\" pInputText size=\\\"50\\\" placeholder=\\\"Filtruj\\\">\\r\\n          </div>\\r\\n        </p-header>\\r\\n        <p-column [sortable]=\\\"false\\\" field=\\\"code\\\" header=\\\"Numer\\\" [style]=\\\"{'text-align':'center', 'width':'70px'}\\\"></p-column>\\r\\n        <p-column [sortable]=\\\"false\\\" field=\\\"paramChar\\\" header=\\\"Opis\\\"  [style]=\\\"{'text-align':'left', 'word-wrap': 'break-word'}\\\">\\r\\n          <ng-template let-col let-version=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n            <textarea style=\\\"width: 100%; border: 0 none white; overflow: hidden; padding: 0; outline: none;\\\"\\r\\n                      [(ngModel)]=\\\"version[col.field]\\\" ></textarea>\\r\\n          </ng-template>\\r\\n        </p-column>\\r\\n      </p-dataTable>\\r\\n\\r\\n    </div>\\r\\n  </div>\\r\\n</p-dialog>\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { VersionService } from '../_services/index';\r\n\r\n@Component({\r\n  selector: 'app-app-version',\r\n  templateUrl: './app-version.component.html',\r\n  styleUrls: ['./app-version.component.css']\r\n})\r\nexport class AppVersionComponent implements OnInit {\r\n\r\n  showHistory: boolean = false;\r\n\r\n  showHistoryDialog(): void {\r\n    this.showHistory = true;\r\n  }\r\n\r\n  constructor(public versionService: VersionService) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n\r\n}\r\n","module.exports = \"<!-- main app container -->\\r\\n\\r\\n<div>\\r\\n    <div style=\\\"float: left;width: 291px;min-height: 150px; margin-left: 0px;\\\">\\r\\n        <img src=\\\"assets/bot.jpg\\\" width=\\\"291\\\" height=\\\"150px\\\">\\r\\n    </div>\\r\\n    <div style=\\\"overflow: hidden; height: 150px;  z-index: 2;\\\">\\r\\n        <img src=\\\"assets/projects-banner-m2.png\\\" style=\\\"position:relative;\\\" width=\\\"100%\\\" height=\\\"184px\\\">\\r\\n        <div *ngIf=\\\"user?.firstName\\\" style=\\\"position: absolute; top:40px; right: 50px; z-index: 3; font-weight: bold; color: #f0f3f5\\\">\\r\\n            <a style=\\\"float: right\\\" href=\\\"logout\\\">Wyloguj</a><br>\\r\\n            {{user?.firstName}} ({{roles | async}}) @ {{office | async}}<br>\\r\\n            <div style=\\\"float: right\\\">Sesja {{getMinutesBeforeLogout() | async}} minut.</div>\\r\\n\\r\\n        </div>\\r\\n    </div>\\r\\n    <div *ngIf=\\\"user?.firstName\\\">\\r\\n        <app-progress></app-progress>\\r\\n        <user-attendance-register [user]=\\\"user\\\"></user-attendance-register>\\r\\n        <hr style=\\\"margin-top: 25px; margin-bottom: 0px;\\\">\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n\\r\\n<!--\\r\\n<div *ngIf=\\\"items\\\">\\r\\n    <p-tabMenu [model]=\\\"items\\\" ></p-tabMenu>\\r\\n</div>-->\\r\\n\\r\\n<div *ngIf=\\\"hierarchyItems\\\">\\r\\n    <p-menubar [model]=\\\"hierarchyItems\\\">\\r\\n    </p-menubar>\\r\\n</div>\\r\\n\\r\\n\\r\\n    <div>\\r\\n        <alert></alert>\\r\\n        <router-outlet></router-outlet>\\r\\n    </div>\\r\\n\\r\\n<!-- credits -->\\r\\n<div class=\\\"text-center\\\">\\r\\n\\r\\n    <app-app-version></app-app-version>\\r\\n\\r\\n</div>\\r\\n\"","import { Component } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { TabMenuModule,MenuItem,MenubarModule }  from 'primeng/primeng';\r\n\r\nimport { AlertService, AuthenticationService, DictService, AutoLogoutService, WorkTypeService } from './_services/index';\r\n\r\nimport { User } from './_models/index';\r\n\r\n\r\n@Component({\r\n    selector: 'app-root',\r\n    templateUrl: 'app.component.html'\r\n})\r\n\r\nexport class AppComponent {\r\n\r\n    user: User;\r\n\r\n    items: MenuItem[];\r\n    hierarchyItems: MenuItem[];\r\n\r\n    roles: Observable<string[]>;\r\n    office: Observable<string>;\r\n\r\n    constructor(private authService:AuthenticationService,\r\n                private dictService: DictService,\r\n                private workTypeService: WorkTypeService,\r\n                private autoLogoutService: AutoLogoutService) {\r\n\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.workTypeService.init();\r\n        this.authService.userAsObs.subscribe((user: User) => setTimeout(() => this.setUser(user)));\r\n        this.authService.menuItemsAsObs.subscribe(menuItems => setTimeout(() => this.items = menuItems));\r\n        this.authService.hierarchyItemsAsObs.subscribe(hierarchyItems => setTimeout(() => this.hierarchyItems = hierarchyItems));\r\n    }\r\n\r\n\r\n    private setUser(user:User):void {\r\n        this.user = user;\r\n        if (user) {\r\n            this.roles = this.dictService.getRoleObs(user.roleCode);\r\n            this.office = this.dictService.getOfficeObs(user.officeCode);\r\n        }\r\n    }\r\n\r\n    public getMinutesBeforeLogout() {\r\n        return this.autoLogoutService.getMinutesBeforeLogout();\r\n    }\r\n}","﻿import { NgModule, LOCALE_ID }      from '@angular/core';\r\n\r\nimport { registerLocaleData } from '@angular/common';\r\nimport localePl from '@angular/common/locales/pl';\r\n\r\nregisterLocaleData(localePl, 'pl');\r\n\r\n\r\nimport { BrowserModule } from '@angular/platform-browser';\r\nimport { FormsModule, ReactiveFormsModule }     from '@angular/forms';\r\nimport { HttpModule } from '@angular/http';\r\nimport { BaseRequestOptions } from '@angular/http';\r\nimport { HTTP_INTERCEPTORS, HttpClientModule } from '@angular/common/http';\r\n\r\nimport { AppComponent }  from './app.component';\r\nimport { routing }        from './app.routing';\r\n\r\nimport { AlertComponent } from './_directives/index';\r\nimport { AuthGuard } from './_guards/index';\r\nimport { AlertService, AuthenticationService, AutoLogoutService, UserService, WOService, DictService, RelatedItemService, WorkTypeService, ToolsService, TimesheetService, PayrollService, HttpBotWrapper, HttpCacheInterceptor, HttpHeadersInterceptor, HttpProgressInterceptor, UserTimeStatsService } from './_services/index';\r\nimport { HomeComponent } from './home/index';\r\nimport { LoginComponent } from './login/index';\r\nimport { UserRegisterComponent } from './user-register/user-register.component';\r\nimport { UserChangeComponent } from './user-change/user-change.component';\r\nimport { WoComponent } from './wo/wo.component';\r\n\r\n\r\nimport {AccordionModule} from 'primeng/accordion'\r\nimport {AutoCompleteModule} from 'primeng/autocomplete'\r\nimport {ButtonModule} from 'primeng/button'\r\nimport {CalendarModule} from 'primeng/calendar'\r\nimport {ChartModule} from 'primeng/chart'\r\nimport {ContextMenuModule} from 'primeng/contextmenu'\r\nimport {DataGridModule} from 'primeng/datagrid'\r\nimport {DataTableModule} from 'primeng/datatable'\r\nimport {DialogModule} from 'primeng/dialog'\r\nimport {DropdownModule} from 'primeng/dropdown'\r\nimport {FieldsetModule} from 'primeng/fieldset'\r\nimport {GrowlModule} from 'primeng/growl'\r\nimport {InplaceModule} from 'primeng/inplace'\r\nimport {InputMaskModule} from 'primeng/inputmask'\r\nimport {InputTextareaModule} from 'primeng/inputtextarea'\r\nimport {InputTextModule} from 'primeng/inputtext'\r\nimport {MenubarModule} from 'primeng/menubar'\r\nimport {MenuItem} from 'primeng/api'\r\nimport {MessagesModule} from 'primeng/messages';\r\nimport {MessageModule} from 'primeng/message';\r\nimport {OverlayPanelModule} from 'primeng/overlaypanel'\r\nimport {PanelModule} from 'primeng/panel'\r\nimport {PasswordModule} from 'primeng/password'\r\nimport {ProgressBarModule} from 'primeng/progressbar'\r\nimport {ProgressSpinnerModule} from 'primeng/progressspinner'\r\nimport {RadioButtonModule} from 'primeng/radiobutton'\r\nimport {ScheduleModule} from 'primeng/schedule'\r\nimport {SelectButtonModule} from 'primeng/selectbutton'\r\nimport {SharedModule} from 'primeng/shared'\r\nimport {TabMenuModule} from 'primeng/tabmenu'\r\nimport {TabViewModule} from 'primeng/tabview'\r\nimport {TooltipModule} from 'primeng/tooltip'\r\nimport {TreeModule} from 'primeng/tree'\r\n\r\nimport {TableModule} from 'primeng/table';\r\n\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\n\r\nimport { MyWoComponent } from './my-wo/my-wo.component';\r\nimport { TimesheetsComponent } from './timesheets/timesheets.component';\r\nimport { ChangeWoComplexityComponent } from './change-wo-complexity/change-wo-complexity.component';\r\nimport { ReportUnacceptedOrdersComponent } from './report-unaccepted-orders/report-unaccepted-orders.component';\r\nimport { ReportMonitorEngineersComponent } from './report-monitor-engineers/report-monitor-engineers.component';\r\nimport { WoClearingComponent } from './wo-clearing/wo-clearing.component';\r\n\r\nimport 'chart.js/dist/Chart.min.js';\r\nimport { ProgressComponent } from './progress/progress.component';\r\nimport { UserResetPasswordComponent } from './user-reset-password/user-reset-password.component';\r\nimport { WoDetailsComponent } from './wo-details/wo-details.component';\r\nimport { StatusDetailsComponent } from './status-details/status-details.component';\r\nimport { UserAttendanceRegisterComponent } from './user-attendance-register/user-attendance-register.component';\r\nimport { UserLeaveComponent } from './user-leave/user-leave.component';\r\nimport { WorkTypesComponent } from './work-types/work-types.component';\r\nimport { WoSuspendedComponent } from './wo-suspended/wo-suspended.component';\r\nimport { UsersDisplayComponent } from './users-display/users-display.component';\r\nimport { UsersPayrollComponent } from './users-payroll/users-payroll.component';\r\nimport { MyPayrollComponent } from './my-payroll/my-payroll.component';\r\nimport { WoListComponent } from './wo-list/wo-list.component';\r\nimport { UserHistoryComponent } from './user-history/user-history.component';\r\nimport { GroupStatusChangeComponent } from './group-status-change/group-status-change.component';\r\nimport { ContractorsComponent } from './contractors/contractors.component';\r\nimport { WoStoppedListComponent } from './wo-stopped-list/wo-stopped-list.component';\r\nimport { WoCancelledComponent } from './wo-cancelled/wo-cancelled.component';\r\nimport { UsersTimeStatsComponent } from './users-time-stats/users-time-stats.component';\r\nimport { ReportMonthlyEngineersComponent } from './report-monthly-engineers/report-monthly-engineers.component';;\r\nimport { AppVersionComponent } from './app-version/app-version.component'\r\nimport { WoTurboTableComponent } from './wo-turbo-table/wo-turbo-table.component';\r\n\r\n\r\n@NgModule({\r\n    imports: [\r\n        HttpClientModule,\r\n        BrowserModule,\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        HttpModule,\r\n        AccordionModule, ProgressSpinnerModule, InplaceModule, ProgressBarModule, OverlayPanelModule, ChartModule, TooltipModule, ScheduleModule, GrowlModule, MessagesModule, MessageModule, InputTextModule, InputTextareaModule, InputMaskModule, PasswordModule, TabViewModule,TabMenuModule,PanelModule,DropdownModule,SelectButtonModule,FieldsetModule,ButtonModule,CalendarModule,RadioButtonModule,DialogModule,ContextMenuModule,AutoCompleteModule,MenubarModule,\r\n        BrowserAnimationsModule,\r\n        TableModule,\r\n        DataTableModule,\r\n        routing\r\n    ],\r\n    declarations: [\r\n        AppComponent,\r\n        AlertComponent,\r\n        HomeComponent,\r\n        LoginComponent,\r\n        UserRegisterComponent,\r\n        UserChangeComponent,\r\n        WoComponent,\r\n        MyWoComponent,\r\n        TimesheetsComponent,\r\n        ChangeWoComplexityComponent,\r\n        ReportUnacceptedOrdersComponent,\r\n        ReportMonitorEngineersComponent,\r\n        WoClearingComponent,\r\n        ProgressComponent,\r\n        UserResetPasswordComponent,\r\n        WoDetailsComponent,\r\n        StatusDetailsComponent,\r\n        UserAttendanceRegisterComponent,\r\n        UserLeaveComponent,\r\n        WorkTypesComponent,\r\n        WoSuspendedComponent,\r\n        UsersDisplayComponent,\r\n        UsersPayrollComponent,\r\n        MyPayrollComponent,\r\n        WoListComponent,\r\n        UserHistoryComponent,\r\n        GroupStatusChangeComponent,\r\n        ContractorsComponent,\r\n        WoStoppedListComponent,\r\n        WoCancelledComponent,\r\n        UsersTimeStatsComponent,\r\n        AppVersionComponent,\r\n        ReportMonthlyEngineersComponent,\r\n\t\tWoTurboTableComponent    ],\r\n    providers: [\r\n        AlertService,\r\n        AuthGuard,\r\n        AuthenticationService,\r\n        AutoLogoutService,\r\n        UserService,\r\n        BaseRequestOptions,\r\n        WOService,\r\n        DictService,\r\n        RelatedItemService,\r\n        WorkTypeService,\r\n        ToolsService,\r\n        TimesheetService,\r\n        PayrollService,\r\n        HttpBotWrapper,\r\n        UserTimeStatsService,\r\n        {provide: LOCALE_ID, useValue: 'pl-PL'},\r\n        {\r\n            provide: HTTP_INTERCEPTORS,\r\n            useClass: HttpHeadersInterceptor,\r\n            multi: true,\r\n        },\r\n        {\r\n            provide: HTTP_INTERCEPTORS,\r\n            useClass: HttpCacheInterceptor,\r\n            multi: true,\r\n        },\r\n        HttpProgressInterceptor,\r\n        {\r\n            provide: HTTP_INTERCEPTORS,\r\n            useClass: HttpProgressInterceptor,\r\n            multi: true,\r\n        }\r\n    ],\r\n    bootstrap: [AppComponent]\r\n})\r\n\r\nexport class AppModule { }","﻿import { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { AppComponent }  from './app.component';\r\nimport { HomeComponent } from './home/index';\r\nimport { WoComponent } from './wo/wo.component';\r\nimport { LoginComponent } from './login/index';\r\nimport { UserResetPasswordComponent } from './user-reset-password/user-reset-password.component';\r\nimport { UserRegisterComponent } from './user-register/user-register.component';\r\nimport { UserChangeComponent } from './user-change/user-change.component';\r\nimport { AuthGuard } from './_guards/index';\r\n\r\nimport { MyWoComponent } from './my-wo/my-wo.component';\r\nimport { TimesheetsComponent } from './timesheets/timesheets.component';\r\nimport { ChangeWoComplexityComponent } from './change-wo-complexity/change-wo-complexity.component';\r\nimport { ReportUnacceptedOrdersComponent } from './report-unaccepted-orders/report-unaccepted-orders.component';\r\nimport { ReportMonitorEngineersComponent } from './report-monitor-engineers/report-monitor-engineers.component';\r\nimport { WoClearingComponent } from './wo-clearing/wo-clearing.component';\r\nimport { WorkTypesComponent } from './work-types/work-types.component';\r\nimport { WoSuspendedComponent } from './wo-suspended/wo-suspended.component';\r\nimport { WoCancelledComponent } from './wo-cancelled/wo-cancelled.component';\r\nimport { UsersDisplayComponent } from './users-display/users-display.component';\r\nimport { UsersPayrollComponent } from './users-payroll/users-payroll.component';\r\nimport { MyPayrollComponent } from './my-payroll/my-payroll.component';\r\nimport { ContractorsComponent } from './contractors/contractors.component';\r\nimport { UsersTimeStatsComponent } from './users-time-stats/users-time-stats.component';\r\nimport { ReportMonthlyEngineersComponent } from './report-monthly-engineers/report-monthly-engineers.component';\r\nimport { WoTurboTableComponent } from './wo-turbo-table/wo-turbo-table.component';\r\n\r\nconst appRoutes: Routes = [\r\n    { path: '',                         component: HomeComponent, canActivate: [AuthGuard] },\r\n    { path: 'logme',                    component: LoginComponent },\r\n    { path: 'resetPassword',            component: UserResetPasswordComponent },\r\n    { path: 'addPerson',                component: UserRegisterComponent, canActivate: [AuthGuard] },\r\n    { path: 'employees',                component: UsersDisplayComponent, canActivate: [AuthGuard] },\r\n    { path: 'changePerson',             component: UserChangeComponent, canActivate: [AuthGuard] },\r\n    { path: 'changePerson/:id',         component: UserChangeComponent, canActivate: [AuthGuard] },\r\n    { path: 'workOrders',               component: WoComponent,       canActivate: [AuthGuard] },\r\n    { path: 'suspendedWorkOrders',      component: WoSuspendedComponent,       canActivate: [AuthGuard] },\r\n    { path: 'cancelledWorkOrders',      component: WoCancelledComponent,       canActivate: [AuthGuard] },\r\n    { path: 'workTypes',                component: WorkTypesComponent,       canActivate: [AuthGuard] },\r\n    { path: 'myWorkOrders',             component: MyWoComponent,     canActivate: [AuthGuard] },\r\n    { path: 'addTimesheet',             component: TimesheetsComponent, canActivate: [AuthGuard] },\r\n    { path: 'timeStats',                component: UsersTimeStatsComponent, canActivate: [AuthGuard] },\r\n    { path: 'workOrderComplexity',      component: ChangeWoComplexityComponent, canActivate: [AuthGuard] },\r\n    { path: 'clearing',                 component: WoClearingComponent, canActivate: [AuthGuard] },\r\n    { path: 'workMonitor',              component: ReportMonitorEngineersComponent, canActivate: [AuthGuard] },\r\n    { path: 'monthlyPerformance',       component: ReportMonthlyEngineersComponent, canActivate: [AuthGuard] },\r\n    { path: 'unacceptedWork',           component: ReportUnacceptedOrdersComponent, canActivate: [AuthGuard] },\r\n    { path: 'myPayroll',                component: MyPayrollComponent,     canActivate: [AuthGuard] },\r\n    { path: 'payroll',                  component: UsersPayrollComponent, canActivate: [AuthGuard] },\r\n    { path: 'contractors',              component: ContractorsComponent, canActivate: [AuthGuard] },\r\n    { path: 'turboTable',              component: WoTurboTableComponent, canActivate: [AuthGuard] },\r\n    { path: '**', redirectTo: '', canActivate: [AuthGuard] }\r\n];\r\n\r\n\r\nexport const routing = RouterModule.forRoot(appRoutes);\r\n","module.exports = \"\"","module.exports = \"\\r\\n\\r\\n<p-panel header=\\\"Zlecenia - WO\\\">\\r\\n\\r\\n  <div class=\\\"ui-grid-row\\\">\\r\\n    <div class=\\\"ui-grid-col-6\\\">\\r\\n      <p-fieldset legend=\\\"Wyszukiwanie zleceń\\\">\\r\\n        <form #f=\\\"ngForm\\\" (submit)=\\\"search()\\\">\\r\\n\\r\\n          <div class=\\\"ui-grid ui-grid-responsive ui-fluid ui-grid-pad\\\">\\r\\n            <div class=\\\"ui-grid-row\\\"  style=\\\"margin-top: 20px;\\\">\\r\\n              <div class=\\\"ui-grid-col-1\\\"></div>\\r\\n              <div class=\\\"ui-grid-col-5\\\">\\r\\n                <label for=\\\"lastModAfter\\\">zmodyfikowano od</label>\\r\\n                <p-calendar name=\\\"lastModAfter\\\" [locale]=\\\"pl\\\" [(ngModel)]=\\\"lastModAfter\\\" showIcon=\\\"true\\\" dateFormat=\\\"dd.mm.yy\\\" utc=\\\"true\\\"></p-calendar>\\r\\n              </div>\\r\\n              <!--<div class=\\\"ui-grid-col-1\\\"></div>-->\\r\\n              <div class=\\\"ui-grid-col-5\\\">\\r\\n                <label for=\\\"lastModBefore\\\">zmodyfikowano do</label>\\r\\n                <p-calendar name=\\\"lastModBefore\\\" [locale]=\\\"pl\\\" [(ngModel)]=\\\"lastModBefore\\\"showIcon=\\\"true\\\" dateFormat=\\\"dd.mm.yy\\\" utc=\\\"true\\\"></p-calendar>\\r\\n              </div>\\r\\n              <div class=\\\"ui-grid-col-1\\\"></div>\\r\\n            </div>\\r\\n            <div class=\\\"ui-grid-row\\\"  style=\\\"margin-top: 15px;\\\">\\r\\n              <div class=\\\"ui-grid-col-4\\\"></div>\\r\\n              <div class=\\\"ui-grid-col-4\\\">\\r\\n                <button pButton type=\\\"button\\\" (click)=\\\"search()\\\" icon=\\\"fa fa-search\\\" label=\\\"Szukaj Laros\\\" style=\\\"margin-left: 0px; min-width: 140px;\\\" [disabled]=\\\"!f?.valid\\\"></button>\\r\\n              </div>\\r\\n              <div class=\\\"ui-grid-col-4\\\"></div>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n        </form>\\r\\n      </p-fieldset>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"ui-grid-col-6\\\">\\r\\n      <app-status-details></app-status-details>\\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n\\r\\n  <div style=\\\"margin-top: 5px\\\" *ngIf=\\\"orders\\\" class=\\\"ui-g\\\">\\r\\n    <p-dataTable [value]=\\\"orders\\\" [rows]=\\\"20\\\" [paginator]=\\\"true\\\" [globalFilter]=\\\"gb\\\" #dt selectionMode=\\\"single\\\" [(selection)]=\\\"selectedOrder\\\" (onRowSelect)=\\\"onRowSelect($event)\\\" dataKey=\\\"id\\\" resizableColumns=\\\"true\\\" sortField=\\\"lastModDate\\\" sortOrder=\\\"-1\\\" [loading]=\\\"loading\\\" loadingIcon=\\\"fa fa-spinner\\\" [contextMenu]=\\\"cm\\\">\\r\\n      <p-header>\\r\\n        <div>\\r\\n          <i class=\\\"fa fa-search\\\"></i>\\r\\n          <input #gb type=\\\"text\\\" pInputText size=\\\"50\\\" placeholder=\\\"Filtruj\\\">\\r\\n        </div>\\r\\n      </p-header>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"id\\\" header=\\\"id\\\" hidden=\\\"true\\\" ></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"officeCode\\\" header=\\\"Biuro\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'width':'45px'}\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"workNo\\\" header=\\\"Zlecenie\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"status\\\" header=\\\"Status\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\">\\r\\n        <ng-template let-col let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          <span class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"toolsService.getStatusIcon(order.statusCode)\\\"></i></span>\\r\\n          <span style=\\\"padding: 3px\\\">{{order.status}}</span>\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n\\r\\n\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"type\\\" header=\\\"Typ\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\">\\r\\n        <ng-template let-col let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          <span [style.color]=\\\"toolsService.getOrderColor(order.typeCode)\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-square'\\\"></i></span>\\r\\n          <span style=\\\"padding: 3px\\\">{{order.type}}</span>\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"complexityCode\\\" header=\\\"Złożoność\\\" [style]=\\\"{'text-align':'center'}\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\">\\r\\n        <ng-template let-col let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          <span class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"order[col.field]=='STD' ? 'fa fa-thumbs-o-up': 'fa fa-life-bouy'\\\"></i></span>\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"complexity\\\" header=\\\"Wycena [H]\\\" ></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"mdCapex\\\" header=\\\"CAPEX\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"price\\\" header=\\\"Wartość\\\" styleClass=\\\"text-right\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n\\r\\n      <!--\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"comment\\\" header=\\\"Komentarz\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"description\\\" header=\\\"Opis\\\"></p-column>\\r\\n      -->\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"assignee\\\" header=\\\"Wykonawca\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column><!--this is array -->\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"lastModDate\\\" header=\\\"Modyfikacja\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"creationDate\\\" header=\\\"Utworzenie\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n\\r\\n      <!-- search by invisible colums, display in one row -->\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"itemNo\\\" header=\\\"Numer obiektu\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n      <!-- search by invisible colums flatten into order by wo.service -->\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"itemBuildingType\\\" header=\\\"Typ obiektu\\\"   hidden=\\\"true\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"itemConstructionCategory\\\" header=\\\"Konstukcja\\\"   hidden=\\\"true\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"itemAddress\\\" header=\\\"Adres\\\"  hidden=\\\"true\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"itemDescription\\\" header=\\\"Opis obiektu\\\"  hidden=\\\"true\\\"></p-column>\\r\\n\\r\\n      <p-column [style]=\\\"{'width':'40px','text-align':'center'}\\\">\\r\\n        <ng-template let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          <button type=\\\"button\\\" pButton (click)=\\\"selectedOrder=order; onRowSelect($event); displayDetailsDialog=true\\\" icon=\\\"fa fa-search\\\"></button>\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n\\r\\n      <ng-template pTemplate=\\\"emptymessage\\\">\\r\\n        Brak zleceń w zakresie dat...\\r\\n      </ng-template>\\r\\n\\r\\n      <p-footer>\\r\\n      </p-footer>\\r\\n\\r\\n    </p-dataTable>\\r\\n\\r\\n    <p-contextMenu #cm [model]=\\\"items\\\"></p-contextMenu>\\r\\n  </div>\\r\\n\\r\\n  <p-dialog [(visible)]=\\\"displayDetailsDialog\\\" [header]=\\\"'Zamówienie '+selectedOrder?.workNo\\\" [minWidth]=\\\"600\\\" [responsive]=\\\"true\\\" [blockScroll]=\\\"true\\\" [contentStyle]=\\\"{'height': '800px'}\\\">\\r\\n    <app-wo-details [selectedOrder]=\\\"selectedOrder\\\"></app-wo-details>\\r\\n  </p-dialog>\\r\\n\\r\\n  <p-dialog [header]=\\\"'Poprawa zlecenia '+editedOrder?.workNo\\\" [(visible)]=\\\"displayReassignDialog\\\" [responsive]=\\\"true\\\" [minWidth]=\\\"500\\\">\\r\\n    <div class=\\\"ui-grid ui-grid-responsive ui-fluid\\\" *ngIf=\\\"editedOrder\\\">\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 20px;\\\">\\r\\n        <div class=\\\"ui-grid-col-4\\\"><label for=\\\"workNo\\\">Numer WO</label></div>\\r\\n        <div class=\\\"ui-grid-col-8 ui-fluid\\\"><input pInputText id=\\\"workNo\\\" [(ngModel)]=\\\"editedOrder.workNo\\\" width=\\\"auto\\\" disabled=\\\"true\\\"/></div>\\r\\n      </div>\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 20px;\\\">\\r\\n        <div class=\\\"ui-grid-col-4\\\"><label for=\\\"type\\\">Typ WO</label></div>\\r\\n        <div class=\\\"ui-grid-col-8\\\">\\r\\n          <input pInputText id=\\\"type\\\" [(ngModel)]=\\\"editedOrder.type\\\" disabled=\\\"true\\\"/>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 20px;\\\">\\r\\n        <div class=\\\"ui-grid-col-4\\\"><label for=\\\"status\\\">Status</label></div>\\r\\n        <div class=\\\"ui-grid-col-8\\\">\\r\\n          <input pInputText id=\\\"status\\\" [(ngModel)]=\\\"editedOrder.status\\\" disabled=\\\"true\\\"/>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 20px;\\\">\\r\\n        <div class=\\\"ui-grid-col-4\\\"><label for=\\\"comment\\\">Komentarz</label></div>\\r\\n        <div class=\\\"ui-grid-col-8\\\">\\r\\n          <textarea disabled=\\\"true\\\" pInputTextarea id=\\\"comment\\\" [(ngModel)]=\\\"editedOrder.comment\\\" [rows]=\\\"8\\\" [cols]=\\\"30\\\"></textarea>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 20px;\\\">\\r\\n        <div class=\\\"ui-grid-col-4\\\"><label for=\\\"justification\\\">Uzasadnienie*</label></div>\\r\\n        <div class=\\\"ui-grid-col-8\\\">\\r\\n          <textarea pInputTextarea id=\\\"justification\\\" [(ngModel)]=\\\"newComment\\\" [rows]=\\\"2\\\" [cols]=\\\"30\\\" required autoResize=\\\"autoResize\\\"></textarea>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <p-footer>\\r\\n      <div class=\\\"ui-dialog-buttonpane ui-helper-clearfix\\\">\\r\\n        <button width=\\\"200px\\\" type=\\\"button\\\" pButton icon=\\\"fa fa-bell\\\" (click)=\\\"doReassign()\\\" label=\\\"Zapisz\\\"></button>\\r\\n      </div>\\r\\n    </p-footer>\\r\\n\\r\\n  </p-dialog>\\r\\n\\r\\n  <p-dialog [header]=\\\"complexityIncrease? 'Zwiększenie trudności' : 'Zmniejszenie trudności'\\\" [(visible)]=\\\"displayChangeComplexityDialog\\\" [responsive]=\\\"true\\\"  [minWidth]=\\\"700\\\">\\r\\n    <div class=\\\"ui-grid ui-grid-responsive ui-fluid\\\" *ngIf=\\\"editedOrder\\\">\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 20px;\\\">\\r\\n        <div class=\\\"ui-grid-col-4\\\"><label for=\\\"workNo\\\">Numer zlecenia</label></div>\\r\\n        <div class=\\\"ui-grid-col-8 ui-fluid\\\"><input pInputText id=\\\"workNo\\\" [(ngModel)]=\\\"editedOrder.workNo\\\" width=\\\"auto\\\" disabled=\\\"true\\\"/></div>\\r\\n      </div>\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 20px;\\\">\\r\\n        <div class=\\\"ui-grid-col-4\\\"><label for=\\\"type\\\">Typ zlecenia</label></div>\\r\\n        <div class=\\\"ui-grid-col-8\\\">\\r\\n          <input pInputText id=\\\"type\\\" [(ngModel)]=\\\"editedOrder.type\\\" disabled=\\\"true\\\"/>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 20px;\\\">\\r\\n        <div class=\\\"ui-grid-col-4\\\"><label for=\\\"status\\\">Status</label></div>\\r\\n        <div class=\\\"ui-grid-col-8\\\">\\r\\n          <input pInputText id=\\\"status\\\" [(ngModel)]=\\\"editedOrder.status\\\" disabled=\\\"true\\\"/>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 20px;\\\">\\r\\n        <div class=\\\"ui-grid-col-4\\\"><label for=\\\"complexity\\\">{{complexityIncrease? 'Zwiekszona': 'Standardowa'}} trudność [h]*</label></div>\\r\\n        <div class=\\\"ui-grid-col-8\\\">\\r\\n          <input pInputText type=\\\"number\\\" id=\\\"complexity\\\" [(ngModel)]=\\\"editedOrder.complexity\\\" required/>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 20px;\\\">\\r\\n        <div class=\\\"ui-grid-col-4\\\"><label for=\\\"newComment\\\">Uzasadnienie*</label></div>\\r\\n        <div class=\\\"ui-grid-col-8\\\">\\r\\n          <textarea pInputTextarea id=\\\"newComment\\\" name=\\\"newComment\\\" [(ngModel)]=\\\"newComment\\\" [rows]=\\\"8\\\" [cols]=\\\"30\\\" placeholder=\\\"Powód zmiany wyceny...\\\" required autoResize=\\\"autoResize\\\"></textarea>\\r\\n        </div>\\r\\n      </div>\\r\\n      <!--<div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 20px;\\\">\\r\\n        <div class=\\\"ui-grid-col-4\\\"><label for=\\\"justification\\\">Uzasadnienie*</label></div>\\r\\n        <div class=\\\"ui-grid-col-8\\\">\\r\\n          <textarea pInputTextarea name=\\\"justification\\\" [(ngModel)]=\\\"justification\\\" [rows]=\\\"2\\\" [cols]=\\\"30\\\" required autoResize=\\\"autoResize\\\"></textarea>\\r\\n        </div>\\r\\n      </div>-->\\r\\n    </div>\\r\\n    <p-footer>\\r\\n      <div class=\\\"ui-dialog-buttonpane ui-helper-clearfix\\\">\\r\\n        <button width=\\\"200px\\\" type=\\\"button\\\" pButton [icon]=\\\"complexityIncrease? 'fa fa-arrow-circle-up' : 'fa fa-arrow-circle-down'\\\" (click)=\\\"doChangeComplexity()\\\" label=\\\"Zaakceptuj\\\"></button>\\r\\n      </div>\\r\\n    </p-footer>\\r\\n  </p-dialog>\\r\\n\\r\\n\\r\\n</p-panel>\"","import { Component, OnInit } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\n\r\n\r\nimport { User, RelatedItem, Order, WorkType, CodeValue } from '../_models/index';\r\nimport { Comments, commentAsSimpleString, commentAsString, commentAdd } from '../_models/comment';\r\nimport { WOService, RelatedItemService, UserService, DictService, AlertService, WorkTypeService, AuthenticationService, ToolsService } from '../_services/index';\r\nimport { MenuItem } from 'primeng/primeng';\r\nimport { Calendar } from '../_models/calendar';\r\n\r\n\r\n@Component({\r\n    selector: 'app-change-wo-complexity',\r\n    templateUrl: './change-wo-complexity.component.html',\r\n    styleUrls: ['./change-wo-complexity.component.css']\r\n})\r\nexport class ChangeWoComplexityComponent implements OnInit {\r\n    leader:User;\r\n    engineers:User[] = [];\r\n\r\n    /* search and selection */\r\n    lastModAfter:Date;\r\n    lastModBefore:Date;\r\n\r\n    orders:Order[];\r\n    selectedOrder:Order;\r\n    editedOrder:Order;\r\n\r\n    items:MenuItem[] = [];\r\n\r\n    displayDetailsDialog: boolean;\r\n    displayReassignDialog: boolean;\r\n    displayChangeComplexityDialog: boolean;\r\n    complexityIncrease: boolean;\r\n\r\n    /* statuses dict or autocompletion statuses */\r\n    statuses:CodeValue[] = [];\r\n\r\n    newComment: string;\r\n    pl:Calendar;\r\n\r\n    constructor(private woService:WOService,\r\n                private userService:UserService,\r\n                private workTypeService:WorkTypeService,\r\n                private dictService:DictService,\r\n                private toolsService: ToolsService,\r\n                private alertService:AlertService,\r\n                private authSerice:AuthenticationService) {\r\n        this.lastModAfter = toolsService.getCurrentDateDayOperation(-45);\r\n        this.lastModBefore = toolsService.getCurrentDateDayOperation(1);\r\n        this.pl=new Calendar();\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.authSerice.userAsObs.subscribe(user => this.saveAndSearch(user));\r\n        this.userService.getEngineers().subscribe(engineers => this.engineers = engineers);\r\n        this.statuses = this.dictService.getWorkStatuses();\r\n\r\n        this.items = [\r\n            {label: 'Zwiększ trudność', icon: 'fa fa-arrow-circle-up', command: (event) => this.changeComplexity(true)},\r\n            {label: 'Zmniejsz trudność', icon: 'fa fa-arrow-circle-down', command: (event) => this.changeComplexity(false)},\r\n            {label: 'Poprawa', icon: 'fa fa-bell', command: (event) => this.reassign()}\r\n        ];\r\n\r\n    }\r\n\r\n    search() {\r\n        this.woService.getOrdersByDates(\r\n            this.toolsService.formatDate(this.lastModAfter, 'yyyy-MM-dd'),\r\n            this.toolsService.formatDate(this.lastModBefore, 'yyyy-MM-dd')\r\n        ).subscribe(orders => this.processOrders(orders));\r\n    }\r\n\r\n    onRowSelect(event) {\r\n        console.log(\"selected row!\" + JSON.stringify(this.selectedOrder));\r\n        this.selectedOrder.assigneeFull = this.toolsService.getEngineers(this.selectedOrder.assignee, this.engineers);\r\n    }\r\n\r\n    private saveAndSearch(user:User):void {\r\n        if (user === null) {\r\n            console.log(\"Probably logged out\");\r\n            return;\r\n        }\r\n\r\n        console.log(\"Logged as \" + JSON.stringify(user));\r\n        this.leader = user;\r\n        this.search();\r\n    }\r\n\r\n    private reassign(): void {\r\n        this.editedOrder = JSON.parse(JSON.stringify(this.selectedOrder));\r\n\r\n        this.newComment = undefined;\r\n\r\n        this.editedOrder.status = this.dictService.getWorkStatus(\"AS\");\r\n        this.editedOrder.statusCode = \"AS\";\r\n\r\n        this.displayReassignDialog = true;\r\n    }\r\n\r\n    private changeComplexity(increase:boolean):void {\r\n        /*if (increase && this.selectedOrder.complexityCode !== \"STD\") {\r\n            this.alertService.error(\"Zlecenie \" + this.selectedOrder.workNo + \" jest już \" + this.selectedOrder.complexity + \"!\");\r\n            return;\r\n        } else if (!increase && this.selectedOrder.complexityCode === \"STD\") {\r\n            this.alertService.error(\"Zlecenie \" + this.selectedOrder.workNo + \" jest już \" + this.selectedOrder.complexity + \"!\");\r\n            return;\r\n        }*/\r\n\r\n        this.newComment = undefined;\r\n        this.complexityIncrease = increase;\r\n\r\n        this.editedOrder = JSON.parse(JSON.stringify(this.selectedOrder));\r\n        this.editedOrder.status = this.dictService.getWorkStatus(this.editedOrder.statusCode);\r\n        this.editedOrder.type = this.dictService.getWorkStatus(this.editedOrder.typeCode);\r\n\r\n        if (increase) {\r\n            this.editedOrder.complexityCode = \"HRD\";\r\n        } else {\r\n            this.editedOrder.complexityCode = \"STD\";\r\n        }\r\n\r\n        let workType: WorkType = this.workTypeService.getWorkType(this.editedOrder.typeCode, this.editedOrder.officeCode, this.editedOrder.complexityCode);\r\n        console.log(\"Changing complexity for workType: \"+JSON.stringify(workType));\r\n\r\n        if (workType && workType.complexity >= 0) {\r\n            this.editedOrder.complexity = workType.complexity;     //this.dictService.getComplexities(this.editedOrder.complexityCode);\r\n        } else {\r\n            this.alertService.warn(\"Brak danych z parametryzacji...\");\r\n            this.editedOrder.complexity = 4;\r\n        }\r\n\r\n        this.displayChangeComplexityDialog = true;\r\n    }\r\n\r\n    doReassign(): void {\r\n        this.addComment(this.editedOrder, false);\r\n        this.saveOrder();\r\n    }\r\n\r\n    doChangeComplexity(): void {\r\n        this.addComment(this.editedOrder, true);\r\n        this.saveOrder();\r\n    }\r\n\r\n    private saveOrder():void {\r\n\r\n        this.editedOrder.status = this.dictService.getWorkStatus(this.editedOrder.statusCode);\r\n        this.editedOrder.type = this.workTypeService.getWorkTypeDescription(this.editedOrder);\r\n\r\n        this.storeOrder(this.editedOrder);\r\n\r\n        this.displayChangeComplexityDialog = false;\r\n        this.displayReassignDialog = false;\r\n    }\r\n\r\n    private addComment(order: Order, changeComplexity: boolean): void {\r\n        if (!order.comments) {\r\n            order.comments = new Comments(null);\r\n        }\r\n\r\n        let assignees: string = '';\r\n        if (order.assigneeFull && order.assigneeFull.length > 0) {\r\n            for (let user of order.assigneeFull) {\r\n                assignees += user.firstName + ' ' + user.lastName + \", \"\r\n            }\r\n        }\r\n\r\n        let prefix: string = '';\r\n        if (changeComplexity) {\r\n            prefix += \"Zmiana wyceny na \"+order.complexity+\"h\";\r\n        } else {\r\n            prefix += \"Poprawa WO\";\r\n        }\r\n\r\n        if (order.assigneeFull) {\r\n            prefix += \" przypisanego do: \"+assignees;\r\n        } else {\r\n            prefix += \" nieprzypisanego,\";\r\n        }\r\n        prefix +=  \" będącego w stanie: \"+order.status+\", \";\r\n\r\n        let justification: string = this.newComment ? prefix+this.newComment : prefix+\"Brak uzasadnienia\";\r\n        commentAdd(order.comments, changeComplexity? \"Wycena\" : \"Poprawa\", this.leader, justification);\r\n    }\r\n\r\n    private storeOrder(order:Order):void {\r\n        console.log(\"changing order!\" + JSON.stringify(order));\r\n        this.woService.updateOrder(order).subscribe(updatedOrder => this.refreshTable(updatedOrder))\r\n    }\r\n\r\n    private refreshTable(order:Order) {\r\n        console.log(\"Refreshing table with order \" + JSON.stringify(order));\r\n\r\n        if (order !== undefined && order.id > 0) {\r\n            let index:number = this.toolsService.findSelectedOrderIndex(order, this.orders);\r\n            console.log(\"refresh index: \" + index);\r\n            this.orders[index] = order;\r\n            this.orders = JSON.parse(JSON.stringify(this.orders)); //immutable dirty trick\r\n            this.alertService.success(\"Pomyślnie zmieniono trudność zlecenia \" + order.workNo);\r\n            return;\r\n        } else {\r\n            this.alertService.error(\"Nie można bylo odświeżyć tabeli wyników, szukaj jeszcze raz\");\r\n        }\r\n    }\r\n\r\n\r\n    private processOrders(orders:Order[]):void {\r\n        let tmpOrders: Order[] = [];\r\n        for (let order of orders) {\r\n            if (order.statusCode !== 'CA' && order.statusCode !== 'SU') {\r\n                tmpOrders.push(order);\r\n            }\r\n        }\r\n\r\n        this.orders = tmpOrders;\r\n    }\r\n}\r\n","module.exports = \"\"","module.exports = \"\\r\\n\\r\\n<div style=\\\"margin-top: 5px\\\" *ngIf=\\\"users\\\" class=\\\"ui-g\\\">\\r\\n\\r\\n  <p-contextMenu #cm [model]=\\\"items\\\"></p-contextMenu>\\r\\n\\r\\n  <p-dataTable [value]=\\\"users\\\" [rows]=\\\"20\\\" [paginator]=\\\"true\\\" [globalFilter]=\\\"gb\\\" #dt dataKey=\\\"id\\\"\\r\\n               selectionMode=\\\"single\\\"\\r\\n               sortField=\\\"excelId\\\" sortOrder=\\\"1\\\"\\r\\n               [(selection)]=\\\"selectedUser\\\"\\r\\n               (onRowDblclick)=\\\"onRowDblclick($event)\\\"\\r\\n               resizableColumns=\\\"true\\\" [loading]=\\\"loading\\\" loadingIcon=\\\"fa fa-spinner\\\" [contextMenu]=\\\"cm\\\" csvSeparator=\\\";\\\" exportFilename=\\\"pracownicy\\\">\\r\\n\\r\\n    <p-header>\\r\\n      <div>\\r\\n        <i class=\\\"fa fa-search\\\"></i>\\r\\n        <input #gb type=\\\"text\\\" pInputText size=\\\"50\\\" placeholder=\\\"Filtruj\\\">\\r\\n        <button [disabled]=\\\"operator.roleCode.indexOf('PR') == -1\\\" type=\\\"button\\\" pButton icon=\\\"fa fa-plus\\\" style=\\\"float:left\\\" (click)=\\\"add()\\\" label=\\\"Dodaj\\\"></button>\\r\\n      </div>\\r\\n    </p-header>\\r\\n\\r\\n    <p-column *ngIf=\\\"operator.roleCode.indexOf('PR') >= 0\\\" [style]=\\\"{'width':'45px','text-align':'center'}\\\">\\r\\n      <ng-template let-userRow=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          <button type=\\\"button\\\" pButton (click)=\\\"showUserHistory($event, userRow)\\\" icon=\\\"fa fa-search\\\"></button>\\r\\n          <p-dialog [(visible)]=\\\"displayUserHistoryDialog\\\" [header]=\\\"'Historia '+selectedUser?.email\\\" [minWidth]=\\\"900\\\" [responsive]=\\\"true\\\" [blockScroll]=\\\"true\\\" [contentStyle]=\\\"{'height': '900px'}\\\">\\r\\n            <app-user-history [selectedUser]=\\\"selectedUser\\\" [staff]=\\\"users\\\"></app-user-history>\\r\\n          </p-dialog>\\r\\n      </ng-template>\\r\\n    </p-column>\\r\\n\\r\\n    <!--<p-column [sortable]=\\\"true\\\" field=\\\"officeCode\\\" header=\\\"Biuro\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'width':'20px'}\\\">\\r\\n    </p-column>-->\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"office\\\" header=\\\"Biuro\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center'}\\\">\\r\\n    </p-column>\\r\\n    <p-column header=\\\"Osoba\\\" field=\\\"lastName\\\"  [filter]=\\\"true\\\" filterPlaceholder=\\\"Nazwisko\\\" [style]=\\\"{'text-align':'center'}\\\">\\r\\n      <ng-template let-col let-user=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n        <span [style.font-weight]=\\\"'bolder'\\\" class=\\\"ui-inputgroup-addon\\\">{{user.firstName}} {{user.lastName}}</span>\\r\\n      </ng-template>\\r\\n    </p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"isActive\\\" header=\\\"Aktywny\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Y/N\\\" filterMatchMode=\\\"contains\\\" [style]=\\\"{'text-align':'center'}\\\">\\r\\n      <ng-template let-col let-user=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n        <span *ngIf=\\\"user[col.field]=='Y'\\\" [style.color]=\\\"'green'\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-check'\\\"></i></span>\\r\\n        <span *ngIf=\\\"user[col.field]!='Y'\\\" [style.color]=\\\"'grey'\\\"  class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-ban'\\\"></i></span>\\r\\n      </ng-template>\\r\\n    </p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"role\\\" header=\\\"Rola\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center'}\\\">\\r\\n      <ng-template let-col let-user=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n        <span *ngIf=\\\"user.roleCode.indexOf('CN') > -1\\\" [style.color]=\\\"'darkblue'\\\" class=\\\"ui-inputgroup-addon\\\">{{user.role}}<i [class]=\\\"'fa fa-hand-o-down'\\\" [style.margin-left]=\\\"'5px'\\\"></i></span>\\r\\n        <span *ngIf=\\\"user.roleCode.indexOf('CN') == -1\\\" [style.color]=\\\"'darkviolet'\\\" class=\\\"ui-inputgroup-addon\\\">{{user.role}}<i [class]=\\\"'fa fa-hand-o-right'\\\" [style.margin-left]=\\\"'5px'\\\"></i></span>\\r\\n      </ng-template>\\r\\n    </p-column>\\r\\n   \\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"email\\\" header=\\\"Email\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center'}\\\"></p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"phone\\\" header=\\\"Telefon\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center'}\\\"></p-column>\\r\\n    \\r\\n    <p-footer>\\r\\n      <div class=\\\"ui-grid ui-grid-responsive ui-fluid ui-grid-pad\\\">\\r\\n        <div class=\\\"ui-grid-row\\\"  style=\\\"margin-top: 15px;\\\">\\r\\n          <div class=\\\"ui-grid-col-1\\\"></div>\\r\\n          <div class=\\\"ui-grid-col-2\\\">\\r\\n            <button type=\\\"button\\\" pButton icon=\\\"fa fa-plus\\\" style=\\\"float:left\\\" (click)=\\\"add()\\\" label=\\\"Dodaj\\\"></button>\\r\\n          </div>\\r\\n\\r\\n          <div class=\\\"ui-grid-col-6\\\"></div>\\r\\n\\r\\n          <div class=\\\"ui-grid-col-2\\\">\\r\\n            <button type=\\\"button\\\" pButton icon=\\\"fa fa-file-o\\\" iconPos=\\\"left\\\" label=\\\"CSV\\\" (click)=\\\"dt.exportCSV()\\\"></button>\\r\\n          </div>\\r\\n          <div class=\\\"ui-grid-col-1\\\"></div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </p-footer>\\r\\n\\r\\n    <ng-template pTemplate=\\\"emptymessage\\\">\\r\\n      Brak kontrahentów...\\r\\n    </ng-template>\\r\\n\\r\\n  </p-dataTable>\\r\\n</div>\\r\\n\"","import { Component, OnInit, Input, Output, EventEmitter, Inject, forwardRef } from '@angular/core';\r\nimport { ToolsService, WOService, DictService, AlertService, UserService, AuthenticationService } from '../_services';\r\nimport { Order, CodeValue, commentAdd, Comments, User } from '../_models';\r\nimport { WoComponent } from '../wo/wo.component';\r\nimport { Router } from '@angular/router';\r\nimport { MenuItem } from 'primeng/primeng';\r\n\r\n@Component({\r\n  selector: 'app-contractors',\r\n  templateUrl: './contractors.component.html',\r\n  styleUrls: ['./contractors.component.css']\r\n})\r\nexport class ContractorsComponent implements OnInit {\r\n\r\n  items:MenuItem[] = [];\r\n\r\n  operator:User;\r\n  allUsers:User[] = [];\r\n  users:User[] = [];\r\n  selectedUser: User;\r\n\r\n\r\n  displayUserHistoryDialog: boolean;\r\n  filter1: string = 'EMPLOYED_ONLY';\r\n  filter2: string = 'ALL';\r\n\r\n  constructor(private router:Router,\r\n              private userService:UserService,\r\n              private alertService:AlertService,\r\n              private dictService:DictService,\r\n              private authService:AuthenticationService) {\r\n\r\n      this.items = [\r\n          {label: 'Zmień dane kontrahenta', icon: 'fa fa-pencil-square-o', disabled: false, command: (event) => this.change()}\r\n      ];\r\n\r\n  }\r\n\r\n  ngOnInit():void {\r\n      this.dictService.init();\r\n      this.authService.userAsObs.subscribe(user => this.removeRolesAndGetManagedUsers(user));\r\n  }\r\n\r\n  public showUserHistory(event, user: User): void {\r\n      console.log('showUserHistory... '+JSON.stringify(user));\r\n      this.selectedUser = user;\r\n      this.displayUserHistoryDialog=true;\r\n  }\r\n\r\n  public add():void {\r\n      this.router.navigate(['/addPerson']);\r\n  }\r\n\r\n  onRowDblclick(event) {\r\n      this.change();\r\n  }\r\n\r\n  public change():void {\r\n      if (this.selectedUser && this.selectedUser.id) {\r\n          this.router.navigate(['/changePerson', this.selectedUser.id]);\r\n      } else {\r\n          this.router.navigate(['/changePerson']);\r\n      }\r\n  }\r\n\r\n  filter(input): void {\r\n      console.log('radio clicked '+this.filter1+ ' '+JSON.stringify(input));\r\n      //this is shame, onClick is triggerd before model is changed therefore I will rely on input...\r\n      if (input === 'ALL') {\r\n          this.users = this.allUsers;\r\n      } else if (input === 'EMPLOYED_ONLY') {\r\n          this.users = [];\r\n          for(let user of this.allUsers) {\r\n              if (user.isEmployed === 'Y') {\r\n                  this.users.push(user);\r\n              }\r\n          }\r\n      } else {\r\n          this.users = [];\r\n          console.log(input + ' unimplemented!');\r\n      }\r\n  }\r\n\r\n  private removeRolesAndGetManagedUsers(user:User):void {\r\n      if (user) {\r\n          this.operator = user;\r\n          this.userService.getContractors().subscribe(engineers => this.processUsers(engineers));\r\n      }\r\n  }\r\n\r\n  private processUsers(engineers:User[]):void {\r\n      this.allUsers = engineers;\r\n      this.filter(this.filter2);\r\n  }\r\n}\r\n","module.exports = \"\"","module.exports = \"<div *ngIf=\\\"operatorMode\\\" class=\\\"ui-grid-row\\\">\\r\\n  <div class=\\\"ui-grid-col-6\\\">\\r\\n    <p-fieldset legend=\\\"Nowy Status\\\">\\r\\n        <div class=\\\"ui-grid ui-grid-responsive ui-fluid ui-grid-pad\\\">\\r\\n          <div class=\\\"ui-grid-col-2\\\"><label for=\\\"status\\\">Status</label></div>\\r\\n          <div class=\\\"ui-grid-col-6\\\">\\r\\n              <p-autoComplete id=\\\"status\\\" name=\\\"status\\\" [(ngModel)]=\\\"status\\\" [forceSelection]=\\\"true\\\" [suggestions]=\\\"suggestedStatuses\\\" (completeMethod)=\\\"suggestStatus($event)\\\" [dropdown]=\\\"true\\\" field=\\\"paramChar\\\" (onSelect)=\\\"filter($event)\\\"></p-autoComplete>\\r\\n              <!--  -->\\r\\n              <!-- [disabled]=\\\"!assignedVentureRepresentative\\\"  -->\\r\\n            \\r\\n          </div>\\r\\n            \\r\\n          </div>\\r\\n          <div class=\\\"ui-grid-row\\\"  style=\\\"margin-top: 15px; margin-bottom: 65px;\\\">\\r\\n            \\r\\n              <div *ngIf=\\\"(status?.code === 'SU' || status?.code === 'CA')\\\" class=\\\"ui-grid-row\\\" style=\\\"margin-top: 0px;\\\" >\\r\\n                <div class=\\\"ui-grid-row\\\">\\r\\n                  <div class=\\\"ui-grid-col-2\\\"></div>\\r\\n                  <div class=\\\"ui-grid-col-10\\\">\\r\\n                    <p-message severity=\\\"warn\\\" text=\\\"Dodaj powód anulujowania/wstrzymania zlecenia!\\\"></p-message>\\r\\n                  </div>\\r\\n                </div>\\r\\n                <br/>\\r\\n                <div class=\\\"ui-grid-row\\\">\\r\\n                    <div class=\\\"ui-grid-col-2\\\"></div>\\r\\n                    <div class=\\\"ui-grid-col-10\\\">\\r\\n                        <textarea pInputTextarea id=\\\"newComment\\\" name=\\\"newComment\\\" [(ngModel)]=\\\"newComment\\\" [rows]=\\\"2\\\" [cols]=\\\"30\\\"  autoResize=\\\"autoResize\\\" placeholder=\\\"Wewnętrzny komentarz dotyczący zlecenia...\\\"></textarea>\\r\\n                    </div>             \\r\\n                </div>              \\r\\n              </div>\\r\\n                           \\r\\n          </div> \\r\\n          <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n            <div class=\\\"ui-grid-col-4\\\">\\r\\n                <button type=\\\"button\\\" pButton [disabled]=\\\"!status?.code || selectedOrders?.length < 1\\\" icon=\\\"fa fa-file-o\\\" iconPos=\\\"left\\\" label=\\\"Zmień statusy\\\" (click)=\\\"changeOrdersStatus(true)\\\"></button>\\r\\n            </div>           \\r\\n          </div>      \\r\\n    </p-fieldset>\\r\\n  </div>\\r\\n  <div class=\\\"ui-grid-col-6\\\">\\r\\n    <p-fieldset legend=\\\"Instrukcja zmiany statusów\\\">\\r\\n        <div class=\\\"ui-grid ui-grid-responsive ui-fluid ui-grid-pad\\\">       \\r\\n          <p>1. W celu zmiany statusu zleceń należy wybrać status </p>\\r\\n          <p>2. Następnie należy wybrać zlecenia w których chcemy zmienić status, zaznaczając checkBox w pierwszej kolumnie </p>\\r\\n          <p>3. Nstępnie należy klinkąć przycisk \\\"Zmień statusy\\\"</p>\\r\\n        </div>    \\r\\n    </p-fieldset>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div *ngIf=\\\"!operatorMode\\\" class=\\\"ui-grid-row\\\">\\r\\n    <div class=\\\"ui-grid-col-6\\\">\\r\\n        <p-fieldset legend=\\\"Zakończ zlecenia\\\">\\r\\n          <p>W celu zakończenia zleceń należy wybrać zlecenia poprzez zazanczenie checkBox w pierwszej kolumnie </p>\\r\\n          <p>Następnie kliknać przycisk \\\"Zakończ zlecenia\\\"</p>\\r\\n            <div class=\\\"ui-grid-col-4\\\">\\r\\n                <button type=\\\"button\\\" pButton [disabled]=\\\"selectedOrders?.length < 1\\\" icon=\\\"fa fa-file-o\\\" iconPos=\\\"left\\\" label=\\\"Zakończ zlecenia\\\" (click)=\\\"closeOrders()\\\"></button>\\r\\n            </div> \\r\\n        </p-fieldset>\\r\\n    </div>\\r\\n  \\r\\n</div>\\r\\n\\r\\n<div class=\\\"ui-grid-row\\\">\\r\\n  <div style=\\\"margin-top: 5px\\\" class=\\\"ui-g\\\">\\r\\n\\r\\n    <p-dataTable [value]=\\\"ordersToChange\\\" [rows]=\\\"20\\\" [paginator]=\\\"true\\\" [globalFilter]=\\\"gb\\\" #dt dataKey=\\\"id\\\"\\r\\n      selectionMode=\\\"multiple\\\" [(selection)]=\\\"selectedOrders\\\" \\r\\n      resizableColumns=\\\"true\\\" sortOrder=\\\"-1\\\" loadingIcon=\\\"fa fa-spinner\\\"\\r\\n      [headerCheckboxToggleAllPages]=\\\"false\\\"\\r\\n      >\\r\\n      <p-header>\\r\\n        <div>\\r\\n        <i class=\\\"fa fa-search\\\"></i>\\r\\n        <input #gb type=\\\"text\\\" pInputText size=\\\"50\\\" placeholder=\\\"Filtruj\\\">\\r\\n        </div>\\r\\n      </p-header>\\r\\n      <p-column [style]=\\\"{'width':'38px'}\\\" selectionMode=\\\"multiple\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"officeCode\\\" header=\\\"Biuro\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'width':'45px'}\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"id\\\" header=\\\"id\\\" hidden=\\\"true\\\" ></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"workNo\\\" header=\\\"Zlecenie\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"status\\\" header=\\\"Status\\\" [style]=\\\"{'width':'135px'}\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" filterMatchMode=\\\"contains\\\">\\r\\n        <ng-template let-col let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n        <span class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"toolsService.getStatusIcon(order.statusCode)\\\"></i></span>\\r\\n        <span style=\\\"padding: 3px\\\">{{order.status}}</span>\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"type\\\" header=\\\"Typ\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" filterMatchMode=\\\"contains\\\">\\r\\n        <ng-template let-col let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n        <span [style.color]=\\\"toolsService.getOrderColor(order.typeCode)\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-square'\\\"></i></span>\\r\\n        <span style=\\\"padding: 3px\\\">{{order.type}}</span>\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"complexityCode\\\" header=\\\"Zł.\\\" [style]=\\\"{'text-align':'center', 'width':'45px'}\\\">\\r\\n        <ng-template let-col let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n        <span class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"order[col.field]=='STD' ? 'fa fa-thumbs-o-up': 'fa fa-life-bouy'\\\"></i></span>\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"complexity\\\" header=\\\"Wycena\\\" [style]=\\\"{'text-align':'center', 'width':'55px'}\\\"></p-column>\\r\\n\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"mdCapex\\\" header=\\\"CAPEX\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"price\\\" header=\\\"Cena\\\" styleClass=\\\"text-right\\\" [style]=\\\"{'width':'70px'}\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"sComments\\\" header=\\\"Komentarz\\\" hidden=\\\"true\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"description\\\" header=\\\"Opis\\\" hidden=\\\"true\\\"></p-column>\\r\\n\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"assignee\\\" header=\\\"Wykonawca\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column><!--this is array -->\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"isFromPool\\\" header=\\\"Pula\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Y/N\\\" [style]=\\\"{'text-align':'center', 'width':'45px'}\\\">\\r\\n        <ng-template let-col let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n        <span *ngIf=\\\"order[col.field]=='Y'\\\" [style.color]=\\\"'green'\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-users'\\\"></i></span>\\r\\n        <span *ngIf=\\\"order[col.field]!='Y'\\\" [style.color]=\\\"'grey'\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-street-view'\\\"></i></span>\\r\\n      </ng-template>\\r\\n\\r\\n      </p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"protocolNo\\\" header=\\\"Protokół\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n\\r\\n\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"lastModDate\\\" header=\\\"Mod.\\\" [style]=\\\"{'width':'82px'}\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"creationDate\\\" header=\\\"Utw.\\\" [style]=\\\"{'width':'82px'}\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"itemNo\\\" header=\\\"Numer obiektu\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n      <!-- search by invisible colums flatten into order by wo.service -->\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"itemBuildingType\\\" header=\\\"Typ obiektu\\\" hidden=\\\"true\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"itemConstructionCategory\\\" header=\\\"Konstukcja\\\" hidden=\\\"true\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"itemAddress\\\" header=\\\"Adres\\\" hidden=\\\"true\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"itemDescription\\\" header=\\\"Opis obiektu\\\" hidden=\\\"true\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"ventureCompany\\\" header=\\\"Inwestor\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"ventureDisplay\\\" header=\\\"Zleceniodawca\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n\\r\\n      <p-footer>\\r\\n        <div class=\\\"ui-grid ui-grid-responsive ui-fluid ui-grid-pad\\\">\\r\\n        <div class=\\\"ui-grid-row\\\"  style=\\\"margin-top: 15px;\\\">\\r\\n        <div class=\\\"ui-grid-col-1\\\"></div>\\r\\n        <div class=\\\"ui-grid-col-6\\\"></div>\\r\\n\\r\\n        <div class=\\\"ui-grid-col-1\\\"></div>\\r\\n        </div>\\r\\n        </div>\\r\\n      </p-footer>\\r\\n\\r\\n      <ng-template pTemplate=\\\"emptymessage\\\">\\r\\n      Brak zleceń...\\r\\n      </ng-template>\\r\\n\\r\\n    </p-dataTable>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n\"","import { Component, OnInit, Input, Output, EventEmitter, Inject, forwardRef } from '@angular/core';\r\nimport { ToolsService, WOService, DictService, AlertService } from '../_services';\r\nimport { Order, CodeValue, commentAdd, Comments, User } from '../_models';\r\nimport { WoComponent } from '../wo/wo.component';\r\n\r\n@Component({\r\n    selector: 'app-group-status-change',\r\n    templateUrl: './group-status-change.component.html',\r\n    styleUrls: ['./group-status-change.component.css']\r\n})\r\nexport class GroupStatusChangeComponent implements OnInit {\r\n\r\n    ordersToChange:Order [];\r\n    copyOrdersToChange:Order [] = [];\r\n    selectedOrders:Order [];\r\n    ordersNotChange:Order [] = [];\r\n    ordersChanged:Order [] = [];\r\n\r\n    /* autocompletion statuses */\r\n    statuses:CodeValue[] = [];\r\n    suggestedStatuses:CodeValue[];\r\n    status:CodeValue;\r\n\r\n    newComment:string;\r\n\r\n    constructor(private toolsService:ToolsService,\r\n                private woService:WOService,\r\n                private alertService:AlertService,\r\n                private dictService:DictService) {\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.statuses = this.dictService.getWorkStatuses();\r\n    }\r\n\r\n    @Input()\r\n    parent: WoComponent;  //this is null for\r\n\r\n    @Input()\r\n    operator: User;\r\n\r\n    @Input()\r\n    operatorMode: boolean;\r\n\r\n    @Input()\r\n    set listToDisplay(orders:Order[]) {\r\n        this.ordersToChange = orders;\r\n        this.copyOrdersToChange = orders;\r\n    }\r\n\r\n    @Output()\r\n    closeModalEvent = new EventEmitter<boolean>();\r\n\r\n    onCloseModal() {\r\n        console.log('onCloseModal exec');\r\n        this.closeModalEvent.emit(false);\r\n    }\r\n\r\n    filter(event) {\r\n        this.selectedOrders = [];\r\n        this.ordersToChange = [];\r\n        this.copyOrdersToChange.forEach(order => {\r\n            if (this.toolsService.isStatusAllowed(order, this.status.code) && order.statusCode !== this.status.code) {\r\n                this.ordersToChange.push(order);\r\n            }\r\n        });\r\n    }\r\n\r\n    suggestStatus(event) {\r\n        let suggestedStatuses:CodeValue[] = [];\r\n        let queryIgnoreCase:string = event.query ? event.query.toLowerCase() : event.query;\r\n        if (this.statuses && this.statuses.length > 0) {\r\n            for (let status of this.statuses) {\r\n                if (status.paramChar.toLowerCase().indexOf(queryIgnoreCase) > -1)\r\n                    suggestedStatuses.push(status);\r\n            }\r\n        }\r\n        this.suggestedStatuses = suggestedStatuses;\r\n        console.log('suggestedStatuses: ' + JSON.stringify(this.suggestedStatuses));\r\n    }\r\n\r\n    addCommment(order:Order):void {\r\n        if (this.newComment && this.newComment.length > 0) {\r\n            if (!order.comments) {\r\n                order.comments = new Comments(null);\r\n            }\r\n            let reason:string = (this.status.code === 'SU' || this.status.code === 'CA') ? 'Anulowanie' : 'Edycja';\r\n            commentAdd(order.comments, reason, this.operator, this.newComment);\r\n        }\r\n        console.log(order.comments);\r\n    }\r\n\r\n    public closeOrders() {\r\n        this.status = this.getStatus('CO');\r\n        this.changeOrdersStatus(true);\r\n    }\r\n\r\n    public changeOrdersStatus(first: boolean) {\r\n\r\n        if (!this.selectedOrders || this.selectedOrders.length < 1 || !this.status || !this.status.code) {\r\n\r\n            if (first) {\r\n                this.alertService.warn('Nie wybrano statusu lub zleceń do modyfikacji!');\r\n            } else {\r\n                if (this.ordersChanged.length > 0) {\r\n                    this.operatorMode ? this.alertService.success('Pomyślnie zmieniono status zleceń ' + this.toPrintableString(this.ordersChanged)) : this.alertService.success('Pomyślnie zakończono zlecenia ' + this.toPrintableString(this.ordersChanged));\r\n                }\r\n                if (this.ordersNotChange.length > 0) {\r\n                    this.operatorMode ? this.alertService.success('Nie zmieniono statusu zleceń ' + this.toPrintableString(this.ordersNotChange)) : this.alertService.success('Nie zakończono zleceń ' + this.toPrintableString(this.ordersNotChange));\r\n                }\r\n            }\r\n\r\n            this.status = null;\r\n            this.newComment = null;\r\n            this.selectedOrders = [];\r\n            this.ordersToChange = [];\r\n            this.copyOrdersToChange = [];\r\n            this.ordersNotChange = [];\r\n            this.ordersChanged = [];\r\n            this.onCloseModal();\r\n\r\n        } else {\r\n\r\n            let order:Order = this.selectedOrders.shift();\r\n\r\n            console.log('Changing order '+JSON.stringify(order)+ ' to status ' + JSON.stringify(this.status));\r\n\r\n            if (this.toolsService.isStatusAllowed(order, this.status.code)) {\r\n                order.statusCode = this.status.code;\r\n                if (this.newComment != null) {\r\n                    this.addCommment(order);\r\n                }\r\n                if (order.statusCode === 'OP') { //we will never reach this code on non-operator mode but this is risky\r\n                    this.parent.removeAssignment(order, this.parent);\r\n                }\r\n\r\n                this.woService.updateOrder(order).subscribe(\r\n                    succes => {\r\n                        this.ordersChanged.push(order);\r\n                        this.changeOrdersStatus(false);\r\n                    },\r\n                    err => {\r\n                        this.noteOrderNotChange(order, true);\r\n                        this.changeOrdersStatus(false);\r\n                    }\r\n                );\r\n\r\n            } else {\r\n                this.noteOrderNotChange(order, false)\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    private getStatus(statusCode: string): CodeValue {\r\n        for (let status of this.statuses) {\r\n            if (status.code === statusCode)\r\n                return status;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    private toPrintableString(orders: Order[]): string {\r\n        let result: string = '';\r\n        for (let order of orders) {\r\n            result += order.workNo+' T('+order.typeCode+'), ';\r\n        }\r\n        return result;\r\n    }\r\n\r\n    private noteOrderNotChange(order:Order, isBackedError:boolean) {\r\n        this.ordersNotChange.push(order);\r\n        if (isBackedError) {\r\n            console.log('Backend error for '+JSON.stringify(order));\r\n            this.alertService.error('Nie udało zmienić się statusu zlecenia ' + order.workNo + ' Błąd aplikacji')\r\n        } else {\r\n            console.log('unauthorized status change for '+JSON.stringify(order));\r\n            this.alertService.error('nie udalo sie zmienić statusu zlecenia ' + order.workNo + ' ze wzgledu na niedozwolone przejście z ' + order.status + ' do ' + this.status.paramChar);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n","module.exports = \"<div class=\\\"jumbotron\\\">\\r\\n    <div class=\\\"container\\\">\\r\\n        Tekst ostatnie logowanie itd lub odpowiednie przekierowanie!\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n\\r\\n\"","﻿import { Component, OnInit } from '@angular/core';\r\n\r\nimport { TabMenuModule,MenuItem }  from 'primeng/primeng';\r\n\r\nimport { AlertService, AuthenticationService } from '../_services/index';\r\n\r\nimport { User } from '../_models/index';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n    templateUrl: 'home.component.html'\r\n})\r\n\r\nexport class HomeComponent implements OnInit {\r\n\r\n    user: User;\r\n\r\n    constructor(\r\n        private authService:AuthenticationService,\r\n        private alertService: AlertService,\r\n        private router: Router) {\r\n\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.authService.userAsObs.subscribe(user => this.redirect(user));\r\n\r\n    }\r\n\r\n\r\n    private redirect(user:User):void {\r\n        if (user && user.roleCode !== undefined && user.roleCode.length > 0) {\r\n\r\n            console.log(\"roleCode \"+JSON.stringify(user));\r\n\r\n            if (user.roleCode.indexOf(\"PR\") > -1 || user.roleCode.indexOf(\"OP\") > -1) {\r\n                this.router.navigate(['workOrders']);\r\n            } else if (user.roleCode.indexOf(\"EN\") > -1 || user.roleCode.indexOf(\"MG\") > -1) {\r\n                this.router.navigate(['myWorkOrders']);\r\n            } else {\r\n                this.alertService.error(\"Niezaimplementowana rola \"+JSON.stringify(user.roleCode)+\" użytkownika\");\r\n                this.router.navigate(['logme']);\r\n            }\r\n        }\r\n    }\r\n}","﻿export * from './home.component';","﻿export * from './login.component';","module.exports = \"<div class=\\\"jumbotron\\\">\\r\\n    <div class=\\\"container\\\">\\r\\n        <div class=\\\"col-md-6 col-md-offset-3\\\">\\r\\n            <h2>Logowanie</h2>\\r\\n            <form name=\\\"form\\\" (ngSubmit)=\\\"f.form.valid && login()\\\" #f=\\\"ngForm\\\" novalidate>\\r\\n                <div class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !username.valid }\\\">\\r\\n                    <label for=\\\"email\\\">Email</label>\\r\\n                    <input id=\\\"email\\\" type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"email\\\" [(ngModel)]=\\\"model.email\\\" #username=\\\"ngModel\\\" required />\\r\\n                    <div *ngIf=\\\"f.submitted && !username.valid\\\" class=\\\"help-block\\\">Email jest wymagany</div>\\r\\n                </div>\\r\\n                <div class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !password.valid }\\\">\\r\\n                    <label for=\\\"password\\\">Hasło</label>\\r\\n                    <input pPassword id=\\\"password\\\" type=\\\"password\\\" class=\\\"form-control\\\" name=\\\"password\\\" [feedback]=\\\"false\\\" [(ngModel)]=\\\"model.password\\\" #password=\\\"ngModel\\\" required />\\r\\n                    <div *ngIf=\\\"f.submitted && !password.valid\\\" class=\\\"help-block\\\">Hasło jest wymagane</div>\\r\\n                </div>\\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <button [disabled]=\\\"loading\\\" class=\\\"btn btn-primary\\\">Loguj</button>\\r\\n                    <img *ngIf=\\\"loading\\\" src=\\\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\\\" />\\r\\n                    <a [routerLink]=\\\"['/resetPassword']\\\" class=\\\"btn btn-link\\\">Utwórz lub zmień hasło</a>\\r\\n                </div>\\r\\n            </form>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\"","﻿import { Component, OnInit } from '@angular/core';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\n\r\nimport { AlertService, AuthenticationService } from '../_services/index';\r\n\r\n@Component({\r\n    templateUrl: 'login.component.html'\r\n})\r\n\r\nexport class LoginComponent implements OnInit {\r\n    model: any = {};\r\n    loading = false;\r\n    returnUrl: string;\r\n\r\n    constructor(\r\n        private route: ActivatedRoute,\r\n        private router: Router,\r\n        private authenticationService: AuthenticationService,\r\n        private alertService: AlertService) { }\r\n\r\n    ngOnInit() {\r\n        // reset login status\r\n        //this.router.navigate(['/logme']);\r\n\r\n        this.authenticationService.logout();\r\n\r\n\r\n        // get return url from route parameters or default to '/'\r\n        //this.returnUrl = this.route.snapshot.queryParams['returnUrl'] || '/';\r\n    }\r\n\r\n    login() {\r\n        this.loading = true;\r\n        this.authenticationService.login(this.model.email, this.model.password)\r\n            .subscribe(\r\n                data => {\r\n                    //this.router.navigate([this.returnUrl]);\r\n                    this.router.navigate(['/']);\r\n                },\r\n                error => {\r\n                    if (error.status === 403) {\r\n                        this.alertService.error(\"Brak dostępu - sprawdź użykownika i hasło!\");\r\n                    } else {\r\n                        this.alertService.error(error);\r\n                    }\r\n                    console.log(JSON.stringify(error));\r\n                    this.loading = false;\r\n                });\r\n    }\r\n\r\n}\r\n","module.exports = \"\"","module.exports = \"\\r\\n<p-accordion>\\r\\n  <p-accordionTab header=\\\"Bieżace\\\" [selected]=\\\"currentPayroll\\\" *ngIf=\\\"currentPayroll\\\">\\r\\n\\r\\n    <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n      <div class=\\\"ui-grid-col-12\\\">\\r\\n        <div style=\\\"margin-top: 0px; margin-bottom: 10px;\\\">\\r\\n                    <span style=\\\"margin-right: 2px;\\\">\\r\\n                        Poniżej zaprezentowano dane z bieżącego okresu. Nie można ich zatwierdzić dopóki okres rozliczeniowy się nie zakończy. Dane te przejdą jako niezatwierdzone do rekordów historycznych, gdzie będzie można sprawdzić czy zostały już zatwierdzone.\\r\\n                    </span>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\" *ngIf=\\\"currentPayroll[0]\\\">\\r\\n      <div class=\\\"ui-grid-col-11\\\">\\r\\n\\r\\n        <span style=\\\"margin-right: 2px;\\\" [style.color]=\\\"'black'\\\">Za okres:</span><span [style.color]=\\\"'#286090'\\\">{{currentPayroll[0].periodDate}}</span>\\r\\n        <span style=\\\"margin-left: 10px; margin-right: 2px;\\\" [style.color]=\\\"'black'\\\">Współczynnik nadgodzin:</span><span [style.color]=\\\"'#286090'\\\">{{currentPayroll[0].overTimeFactor}}</span>\\r\\n        <span style=\\\"margin-left: 10px; margin-right: 2px;\\\" [style.color]=\\\"'black'\\\">Zaakceptowany:</span><span [style.color]=\\\"currentPayroll[0].approved=='Y'?'black':'orange'\\\">{{currentPayroll[0].approved=='Y'?'TAK':'NIE'}}</span>\\r\\n        <span style=\\\"margin-left: 10px; margin-right: 2px;\\\" [style.color]=\\\"'black'\\\">Wygenerowany:</span><span [style.color]=\\\"'#286090'\\\">{{currentPayroll[0].lastMod}}</span>\\r\\n        <div *ngIf=\\\"currentPayroll[0]?.rankCode !== 'YOU'\\\">\\r\\n          <span style=\\\"margin-left: 10px; margin-right: 2px;\\\" [style.color]=\\\"'black'\\\">Koszt 1h z puli:</span><span [style.color]=\\\"'#286090'\\\">{{currentPayroll[0].formattedPoolRate}}</span>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n\\r\\n    </div>\\r\\n    <p-dataTable *ngIf=\\\"currentPayroll[0]\\\"\\r\\n                 [value]=\\\"currentPayroll\\\" sortField=\\\"periodDate\\\"\\r\\n                 rowGroupMode=\\\"rowspan\\\"\\r\\n                 #currentDt\\r\\n                 [style]=\\\"{'margin-top':'0px'}\\\" scrollable=\\\"true\\\" scrollHeight=\\\"600px\\\" csvSeparator=\\\";\\\" [exportFilename]=\\\"'wynagrodzenie_'+currentPayroll[0].periodDate\\\">\\r\\n\\r\\n\\r\\n      <p-column header=\\\"Osoba\\\" field=\\\"user.lastName\\\"  filterPlaceholder=\\\"Filtruj\\\">\\r\\n        <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          <span [style.color]=\\\"'green'\\\" class=\\\"ui-inputgroup-addon\\\">{{userPayroll.user['firstName']}}</span>\\r\\n          <span [style.color]=\\\"'green'\\\" class=\\\"ui-inputgroup-addon\\\">{{userPayroll.user['lastName']}}</span>\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n      <p-column header=\\\"Stopień\\\" field=\\\"rank\\\"  filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center'}\\\"></p-column>\\r\\n      <p-column header=\\\"Współ.\\\" field=\\\"projectFactor\\\"  filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'width':'70px'}\\\"></p-column>\\r\\n\\r\\n      <p-column header=\\\"Pula\\\" [sortable]=\\\"true\\\" field=\\\"isFromPool\\\" filterPlaceholder=\\\"Y/N\\\" [style]=\\\"{'text-align':'center', 'width':'60px'}\\\">\\r\\n        <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          <span *ngIf=\\\"userPayroll[col.field]=='Y'\\\" [style.color]=\\\"'green'\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-users'\\\"></i></span>\\r\\n          <span *ngIf=\\\"userPayroll[col.field]!='Y'\\\" [style.color]=\\\"'grey'\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-street-view'\\\"></i></span>\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n\\r\\n      <p-column header=\\\"Czas pracy\\\" field=\\\"workTime\\\"  filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'color':'#286090'}\\\"></p-column>\\r\\n      <p-column header=\\\"Czas dla puli\\\" field=\\\"poolWorkTime\\\"  filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'color':'#286090'}\\\"></p-column>\\r\\n      <p-column header=\\\"Czas poza pulą\\\" field=\\\"nonpoolWorkTime\\\"  filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'color':'#286090'}\\\">\\r\\n        <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n            <span *ngIf=\\\"userPayroll.isFromPool=='Y'\\\" [style.color]=\\\"'green'\\\" class=\\\"ui-inputgroup-addon\\\">{{userPayroll[col.field]}}</span>\\r\\n            <span *ngIf=\\\"userPayroll.isFromPool!='Y'\\\" [style.color]=\\\"'grey'\\\" class=\\\"ui-inputgroup-addon\\\">brak</span>\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n\\r\\n      <p-column header=\\\"Szkolenia\\\" field=\\\"trainingTime\\\"  filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'color':'#286090'}\\\"></p-column>\\r\\n      <p-column header=\\\"Nadgodziny\\\" field=\\\"overTime\\\"  filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'color':'#286090'}\\\"></p-column>\\r\\n      <p-column header=\\\"Urlop\\\" field=\\\"leaveTime\\\"  filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'color':'#286090'}\\\"></p-column>\\r\\n\\r\\n      <p-column header=\\\"Obecnosc PLN\\\" field=\\\"workDue\\\"  filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'right'}\\\">\\r\\n        <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          {{userPayroll[col.field] | currency:'PLN'}}\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n      <p-column header=\\\"Szkolenia PLN\\\" field=\\\"trainingDue\\\"  filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'right'}\\\">\\r\\n          <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n               {{userPayroll[col.field] | currency:'PLN'}}\\r\\n          </ng-template>\\r\\n      </p-column>\\r\\n      <p-column header=\\\"Nadgodziny PLN\\\" field=\\\"overDue\\\"  filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'right'}\\\">\\r\\n        <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          {{userPayroll[col.field] | currency:'PLN'}}\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n      <p-column header=\\\"Urlop PLN\\\" field=\\\"leaveDue\\\"  filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'right'}\\\">\\r\\n        <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          {{userPayroll[col.field] | currency:'PLN'}}\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n      <p-column header=\\\"Suma PLN\\\" field=\\\"totalDue\\\"  filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'right'}\\\">\\r\\n        <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          {{userPayroll[col.field] | currency:'PLN'}}\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n\\r\\n\\r\\n      <ng-template pTemplate=\\\"emptymessage\\\">\\r\\n        Brak danych...\\r\\n      </ng-template>\\r\\n\\r\\n    </p-dataTable>\\r\\n\\r\\n  </p-accordionTab>\\r\\n\\r\\n  <p-accordionTab header=\\\"Historyczne\\\" [selected]=\\\"false\\\" *ngIf=\\\"historicalPayrolls\\\">\\r\\n\\r\\n    <p-dataTable [value]=\\\"historicalPayrolls\\\" sortField=\\\"periodDate\\\" sortOrder=\\\"-1\\\"\\r\\n                 rowGroupMode=\\\"subheader\\\" groupField=\\\"periodDate\\\" expandableRowGroups=\\\"true\\\" [sortableRowGroup]=\\\"false\\\"\\r\\n                 [style]=\\\"{'margin-top':'20px'}\\\" scrollable=\\\"true\\\" scrollHeight=\\\"600px\\\">\\r\\n\\r\\n\\r\\n      <ng-template pTemplate=\\\"rowgroupheader\\\" let-rowData>\\r\\n\\r\\n        <div>\\r\\n          <span style=\\\"margin-left: 10px; margin-right: 2px;\\\" [style.color]=\\\"'black'\\\">Za okres:</span><span [style.color]=\\\"'#286090'\\\">{{rowData.periodDate}}</span>\\r\\n          <span [style.color]=\\\"rowData.approved=='Y'?'black':'orange'\\\">{{rowData.approved=='Y'?'Zaakceptowany':'Niezaakceptowany'}}</span>\\r\\n          <span style=\\\"margin-left: 10px; margin-right: 2px;\\\" [style.color]=\\\"'black'\\\">Współczynnik nadgodzin:</span><span [style.color]=\\\"'#286090'\\\">{{rowData.formattedOverTimeFactor}}</span>\\r\\n          <span style=\\\"margin-left: 10px; margin-right: 2px;\\\" [style.color]=\\\"'black'\\\">Wygenerowany:</span><span [style.color]=\\\"'#286090'\\\">{{rowData.lastMod}}</span>\\r\\n<!--          <span style=\\\"margin-left: 10px; margin-right: 2px;\\\" [style.color]=\\\"'black'\\\">przez:</span><span [style.color]=\\\"'#286090'\\\">{{rowData?.modifiedByUser?.firstName}} {{rowData?.modifiedByUser?.lastName}}</span>-->\\r\\n\\r\\n            <div *ngIf=\\\"rowData && rowData.rankCode !== 'YOU'\\\">\\r\\n                <span style=\\\"margin-left: 10px; margin-right: 2px;\\\" [style.color]=\\\"'black'\\\">Koszt 1h z puli:</span><span [style.color]=\\\"'#286090'\\\">{{rowData.formattedPoolRate}}</span>\\r\\n            </div>\\r\\n        </div>\\r\\n\\r\\n\\r\\n      </ng-template>\\r\\n      <!--<p-column header=\\\"Okres rozliczeniowy\\\" field=\\\"periodDate\\\" sortable=\\\"true\\\" [style.color]=\\\"'green'\\\" [style]=\\\"{'text-align':'center', 'width':'120px'}\\\"></p-column>-->\\r\\n      <p-column header=\\\"Osoba\\\" field=\\\"user.lastName\\\"  filterPlaceholder=\\\"Nazwisko\\\">\\r\\n        <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          <span [style.color]=\\\"'green'\\\" class=\\\"ui-inputgroup-addon\\\">{{userPayroll.user['firstName']}}</span>\\r\\n          <span [style.color]=\\\"'green'\\\" class=\\\"ui-inputgroup-addon\\\">{{userPayroll.user['lastName']}}</span>\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n      <p-column header=\\\"Stopień\\\" field=\\\"rank\\\"  filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center'}\\\"></p-column>\\r\\n      <p-column header=\\\"Współ.\\\" field=\\\"projectFactor\\\"  filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'width':'70px'}\\\"></p-column>\\r\\n\\r\\n      <p-column header=\\\"Pula\\\" [sortable]=\\\"true\\\" field=\\\"isFromPool\\\" filterPlaceholder=\\\"Y/N\\\" [style]=\\\"{'text-align':'center', 'width':'60px'}\\\">\\r\\n        <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          <span *ngIf=\\\"userPayroll[col.field]=='Y'\\\" [style.color]=\\\"'green'\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-users'\\\"></i></span>\\r\\n          <span *ngIf=\\\"userPayroll[col.field]!='Y'\\\" [style.color]=\\\"'grey'\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-street-view'\\\"></i></span>\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n\\r\\n        <p-column header=\\\"Czas razem\\\" field=\\\"workTime\\\"  filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'color':'#286090'}\\\"></p-column>\\r\\n        <p-column header=\\\"Czas dla puli\\\" field=\\\"poolWorkTime\\\"  filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'color':'green'}\\\"></p-column>\\r\\n        <p-column header=\\\"Czas poza pula\\\" field=\\\"nonpoolWorkTime\\\"  filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'color':'green'}\\\">\\r\\n            <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n                <span *ngIf=\\\"userPayroll.isFromPool=='Y'\\\" [style.color]=\\\"'green'\\\" class=\\\"ui-inputgroup-addon\\\">{{userPayroll[col.field]}}</span>\\r\\n                <span *ngIf=\\\"userPayroll.isFromPool!='Y'\\\" [style.color]=\\\"'grey'\\\" class=\\\"ui-inputgroup-addon\\\">brak</span>\\r\\n            </ng-template>\\r\\n        </p-column>\\r\\n        <p-column header=\\\"Szkolenia\\\" field=\\\"trainingTime\\\"  filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'color':'#286090'}\\\"></p-column>\\r\\n        <p-column header=\\\"Urlop\\\" field=\\\"leaveTime\\\"  filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'color':'#286090'}\\\"></p-column>\\r\\n        <p-column header=\\\"Nadgodziny\\\" field=\\\"overTime\\\"  filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'color':'#286090'}\\\"></p-column>\\r\\n\\r\\n      <p-column header=\\\"Obecnosc PLN\\\" field=\\\"workDue\\\"  filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'right'}\\\">\\r\\n        <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          {{userPayroll[col.field] | currency:'PLN'}}\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n      <p-column header=\\\"Szkolenia PLN\\\" field=\\\"trainingDue\\\"  filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'right'}\\\">\\r\\n        <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n            {{userPayroll[col.field] | currency:'PLN'}}\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n      <p-column header=\\\"Nadgodziny PLN\\\" field=\\\"overDue\\\"  filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'right'}\\\">\\r\\n        <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          {{userPayroll[col.field] | currency:'PLN'}}\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n      <p-column header=\\\"Urlop PLN\\\" field=\\\"leaveDue\\\"  filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'right'}\\\">\\r\\n        <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          {{userPayroll[col.field] | currency:'PLN'}}\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n      <p-column header=\\\"Suma PLN\\\" field=\\\"totalDue\\\"  filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'right'}\\\">\\r\\n        <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          {{userPayroll[col.field] | currency:'PLN'}}\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n\\r\\n\\r\\n      <ng-template pTemplate=\\\"emptymessage\\\">\\r\\n        Brak danych...\\r\\n      </ng-template>\\r\\n\\r\\n    </p-dataTable>\\r\\n\\r\\n  </p-accordionTab>\\r\\n\\r\\n</p-accordion>\\r\\n\"","import { Component, OnInit } from '@angular/core';\r\n\r\nimport { Observable }    from 'rxjs';\r\nimport { catchError, map, tap, delay, mergeMap } from 'rxjs/operators';\r\n\r\nimport { User, CodeValue, UserPayroll } from '../_models/index';\r\nimport { UserService, DictService, AlertService, AuthenticationService, ToolsService, PayrollService } from '../_services/index';\r\n\r\n\r\n@Component({\r\n    selector: 'app-my-payroll',\r\n    templateUrl: './my-payroll.component.html',\r\n    styleUrls: ['./my-payroll.component.css']\r\n})\r\nexport class MyPayrollComponent implements OnInit {\r\n\r\n    user: User;\r\n\r\n    currentPayroll: UserPayroll[];\r\n    historicalPayrolls: UserPayroll[];\r\n\r\n    constructor(private payrollService:PayrollService,\r\n                private authSerice:AuthenticationService) {\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.authSerice.userAsObs.subscribe(user => this.processUser(user));\r\n    }\r\n\r\n    search() {\r\n        this.payrollService.getCurrentPersonal(this.user).subscribe(payroll => this.currentPayroll = payroll);\r\n        this.payrollService.getHistoricalPersonal(this.user).subscribe(payroll => this.historicalPayrolls = payroll);\r\n    }\r\n\r\n    private processUser(user:User):void {\r\n        this.user = user;\r\n        this.search();\r\n    }\r\n}\r\n","module.exports = \"\"","module.exports = \"<p-panel header=\\\"Moje oczekujące zlecenia\\\">\\r\\n\\r\\n\\r\\n  <div style=\\\"margin-top: 5px\\\" *ngIf=\\\"orders\\\" class=\\\"ui-g\\\">\\r\\n    <!--(onRowSelect)=\\\"onRowSelect($event)\\\"-->\\r\\n    <p-dataTable [value]=\\\"orders\\\" [rows]=\\\"20\\\" [paginator]=\\\"true\\\" [globalFilter]=\\\"gb\\\" #dt selectionMode=\\\"single\\\" [(selection)]=\\\"selectedOrder\\\" dataKey=\\\"id\\\" resizableColumns=\\\"true\\\" sortField=\\\"lastModDate\\\" sortOrder=\\\"-1\\\" [loading]=\\\"loading\\\" loadingIcon=\\\"fa fa-spinner\\\" [contextMenu]=\\\"cm\\\">\\r\\n      <p-header>\\r\\n        <div>\\r\\n          <i class=\\\"fa fa-search\\\"></i>\\r\\n          <input #gb type=\\\"text\\\" pInputText size=\\\"50\\\" placeholder=\\\"Filtruj\\\">\\r\\n          <button type=\\\"button\\\" pButton icon=\\\"fa fa-refresh\\\" style=\\\"float:left\\\" (click)=\\\"search()\\\" label=\\\"Odśwież\\\"></button>\\r\\n          <button type=\\\"button\\\" pButton [disabled]=\\\"orders?.length < 1\\\" (click)=\\\"showChangeStatusDialog()\\\" label=\\\"Zakończ zlecenia\\\" icon=\\\"fa fa-list\\\" iconPos=\\\"left\\\" style=\\\"float: right;\\\"></button>\\r\\n        </div>\\r\\n      </p-header>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"workNo\\\" header=\\\"Zlecenie\\\" ></p-column>\\r\\n\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"status\\\" header=\\\"statusSearch\\\"  [style]=\\\"{'width':'0px'}\\\"></p-column><!-- search -->\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"statusCode\\\" header=\\\"Status\\\" >\\r\\n        <ng-template let-col let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          <span class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"toolsService.getStatusIcon(order.statusCode)\\\"></i></span>\\r\\n          <span style=\\\"padding: 3px\\\">{{order.status}}</span>\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"type\\\" header=\\\"typeSearch\\\"  [style]=\\\"{'width':'0px'}\\\"></p-column><!-- search -->\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"typeCode\\\" header=\\\"Typ\\\">\\r\\n        <ng-template let-col let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          <span [style.color]=\\\"toolsService.getOrderColor(order.typeCode)\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-square'\\\"></i></span>\\r\\n          <span style=\\\"padding: 3px\\\">{{order.type}}</span>\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"complexityCode\\\" header=\\\"Złożoność\\\" [style]=\\\"{'text-align':'center'}\\\">\\r\\n        <ng-template let-col let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          <span class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"order[col.field]=='STD' ? 'fa fa-thumbs-o-up': 'fa fa-life-bouy'\\\"></i></span>\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"mdCapex\\\" header=\\\"CAPEX\\\" ></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"price\\\" header=\\\"Wartość\\\" styleClass=\\\"text-right\\\"></p-column>\\r\\n\\r\\n      <p-column field=\\\"sComments\\\" header=\\\"Komentarz\\\" hiddem=\\\"true\\\">\\r\\n        <ng-template let-col let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n            <span>{{getCancelOrHoldComment(order)}}</span>\\r\\n        </ng-template>\\r\\n    </p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"description\\\" header=\\\"Opis\\\" hiddem=\\\"true\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"lastModDate\\\" header=\\\"Modyfikacja\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"creationDate\\\" header=\\\"Dodano\\\"></p-column>\\r\\n\\r\\n      <!-- search by invisible colums, display in one row -->\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"itemNo\\\" header=\\\"Numer obiektu\\\" ></p-column>\\r\\n      <!-- search by invisible colums flatten into order by wo.service -->\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"itemBuildingType\\\" header=\\\"Typ obiektu\\\"   hidden=\\\"true\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"itemConstructionCategory\\\" header=\\\"Konstukcja\\\"   hidden=\\\"true\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"itemAddress\\\" header=\\\"Adres\\\"  hidden=\\\"true\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"itemDescription\\\" header=\\\"Opis obiektu\\\"  hidden=\\\"true\\\"></p-column>\\r\\n\\r\\n        <p-column [style]=\\\"{'width':'40px','text-align':'center'}\\\">\\r\\n            <ng-template let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n                <button type=\\\"button\\\" pButton (click)=\\\"selectedOrder=order; onRowSelect($event); displayDetailsDialog=true\\\" icon=\\\"fa fa-search\\\"></button>\\r\\n            </ng-template>\\r\\n        </p-column>\\r\\n\\r\\n      <ng-template pTemplate=\\\"emptymessage\\\">\\r\\n        Brak zleceń do bieżącej obsługi, poproś o więcej lub idź do domu...\\r\\n      </ng-template>\\r\\n\\r\\n      <p-footer></p-footer>\\r\\n\\r\\n    </p-dataTable>\\r\\n\\r\\n    <p-contextMenu #cm [model]=\\\"items\\\"></p-contextMenu>\\r\\n  </div>\\r\\n\\r\\n    <p-dialog [(visible)]=\\\"displayDetailsDialog\\\" [header]=\\\"'Zamówienie '+selectedOrder?.workNo\\\" [minWidth]=\\\"600\\\" [responsive]=\\\"true\\\" [blockScroll]=\\\"true\\\" [contentStyle]=\\\"{'height': '800px'}\\\">\\r\\n        <app-wo-details [selectedOrder]=\\\"selectedOrder\\\"></app-wo-details>\\r\\n    </p-dialog>\\r\\n\\r\\n  <p-dialog header=\\\"Potwierdzenie wykonania zlecenia\\\" [(visible)]=\\\"displayFinishDialog\\\" [responsive]=\\\"true\\\" [minWidth]=\\\"500\\\">\\r\\n    <div class=\\\"ui-grid ui-grid-responsive ui-fluid\\\" *ngIf=\\\"editedOrder\\\">\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n        <div class=\\\"ui-grid-col-4\\\"><label for=\\\"workNo\\\">Numer Zl.</label></div>\\r\\n        <div class=\\\"ui-grid-col-8 ui-fluid\\\"><input pInputText id=\\\"workNo\\\" [(ngModel)]=\\\"editedOrder.workNo\\\" width=\\\"auto\\\" disabled=\\\"true\\\"/></div>\\r\\n      </div>\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n        <div class=\\\"ui-grid-col-4\\\"><label for=\\\"type\\\">Typ Zl.</label></div>\\r\\n        <div class=\\\"ui-grid-col-8\\\">\\r\\n          <input pInputText id=\\\"type\\\" [(ngModel)]=\\\"editedOrder.type\\\" disabled=\\\"true\\\"/>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\"><!-- editing status is not allowed -->\\r\\n        <div class=\\\"ui-grid-col-4\\\"><label for=\\\"status\\\">Status</label></div>\\r\\n        <div class=\\\"ui-grid-col-8\\\">\\r\\n          <input pInputText id=\\\"status\\\" [(ngModel)]=\\\"editedOrder.status\\\" disabled=\\\"true\\\"/>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <p-footer>\\r\\n      <div class=\\\"ui-dialog-buttonpane ui-helper-clearfix\\\">\\r\\n        <button width=\\\"200px\\\" type=\\\"button\\\" pButton icon=\\\"fa fa-check\\\" (click)=\\\"saveOrder()\\\" label=\\\"Zakończ\\\"></button>\\r\\n        <!-- <button width=\\\"200px\\\" type=\\\"button\\\" pButton icon=\\\"fa fa-check\\\" (click)=\\\"\\\" label=\\\"Dodaj komentarz\\\"></button> -->\\r\\n      </div>     \\r\\n    </p-footer>\\r\\n  </p-dialog>\\r\\n  <!-- add comment -->\\r\\n  <p-dialog  [header]=\\\"'Dodawanie komentarza do zlecenia nr '+selectedOrder?.workNo\\\" [(visible)]=\\\"displayAddComment\\\" [responsive]=\\\"true\\\" [minWidth]=\\\"900\\\">\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"max-width: 900px;\\\">  \\r\\n      <div class=\\\"ui-grid-col-6\\\" style=\\\"margin-top: 10px;\\\">\\r\\n          <p-fieldset legend=\\\"Detale zlecenia\\\" *ngIf=\\\"selectedOrder?.creationDate || selectedOrder?.lastModDate || selectedOrder?.assigneeFull?.length > 0 || selectedOrder?.comment\\\"> \\r\\n              <div class=\\\"ui-grid-row\\\" *ngIf=\\\"selectedOrder?.creationDate\\\">\\r\\n                  <div class=\\\"ui-grid-col-4\\\">Dodano:</div>\\r\\n                  <div class=\\\"ui-grid-col-8\\\"><span style=\\\"font-style: italic;\\\">{{selectedOrder?.creationDate}}</span>\\r\\n                  </div>\\r\\n              </div>\\r\\n              <div class=\\\"ui-grid-row\\\" *ngIf=\\\"selectedOrder?.lastModDate\\\">\\r\\n                  <div class=\\\"ui-grid-col-4\\\">Modyfikacja:</div>\\r\\n                  <div class=\\\"ui-grid-col-8\\\"><span style=\\\"font-style: italic;\\\">{{selectedOrder?.lastModDate}}</span></div>\\r\\n              </div>\\r\\n              <hr *ngIf=\\\"selectedOrder?.creationDate || selectedOrder?.lastModDate\\\">\\r\\n              <div style=\\\"margin-bottom: 5px\\\" class=\\\"ui-grid-row\\\" *ngIf=\\\"selectedOrder?.type\\\">\\r\\n                  <div class=\\\"ui-grid-col-4\\\">Typ:</div>\\r\\n                  <div class=\\\"ui-grid-col-8\\\">\\r\\n                      <span [style.color]=\\\"toolsService.getOrderColor(order?.typeCode)\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-square'\\\"></i></span>\\r\\n                      <span style=\\\"padding: 3px; font-style: italic;\\\">{{selectedOrder?.type}}</span>\\r\\n                  </div>\\r\\n              </div>\\r\\n              <div style=\\\"margin-bottom: 5px\\\" class=\\\"ui-grid-row\\\" *ngIf=\\\"selectedOrder?.complexity\\\">\\r\\n                  <div class=\\\"ui-grid-col-4\\\">Złożoność:</div>\\r\\n                  <div class=\\\"ui-grid-col-8\\\">\\r\\n                      <span class=\\\"ui-inputgroup-addon\\\"><i\\r\\n                              [class]=\\\"selectedOrder.complexity=='STD' ? 'fa fa-thumbs-o-up': 'fa fa-life-bouy'\\\"></i></span>\\r\\n                      <span style=\\\"padding: 3px; font-style: italic;\\\">Wycena {{selectedOrder?.complexity}} godzin</span>\\r\\n                  </div>\\r\\n              </div>\\r\\n              <div style=\\\"margin-bottom: 5px\\\" class=\\\"ui-grid-row\\\" *ngIf=\\\"selectedOrder?.status\\\">\\r\\n                  <div class=\\\"ui-grid-col-4\\\">Status:</div>\\r\\n                  <div class=\\\"ui-grid-col-8\\\">\\r\\n                      <span class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"\\\"></i></span>\\r\\n                      <span style=\\\"padding: 3px; font-style: italic;\\\">{{selectedOrder?.status}}</span>\\r\\n                  </div>\\r\\n              </div>\\r\\n              <div style=\\\"margin-bottom: 5px\\\" class=\\\"ui-grid-row\\\" *ngIf=\\\"selectedOrder?.status\\\">\\r\\n                  <div class=\\\"ui-grid-col-4\\\">Wartość zamówienia:</div>\\r\\n                  <div class=\\\"ui-grid-col-8\\\">\\r\\n                      <span style=\\\"font-style: italic;\\\">{{selectedOrder?.price}} PLN</span>\\r\\n                  </div>\\r\\n              </div>\\r\\n              <div class=\\\"ui-grid-row\\\" *ngIf=\\\"selectedOrder?.status\\\">\\r\\n                  <div class=\\\"ui-grid-col-4\\\">Numer protokołu:</div>\\r\\n                  <div class=\\\"ui-grid-col-8\\\">\\r\\n                      <span style=\\\"font-style: italic;\\\">{{selectedOrder?.protocolNo}}</span>\\r\\n                  </div>\\r\\n              </div>\\r\\n              <div style=\\\"margin-bottom: 5px; margin-top: 5px;\\\" class=\\\"ui-grid-row\\\" *ngIf=\\\"selectedOrder?.isFromPool\\\">\\r\\n                  <div class=\\\"ui-grid-col-4\\\">W ramach puli:</div>\\r\\n                  <div class=\\\"ui-grid-col-8\\\">\\r\\n                      <span class=\\\"ui-inputgroup-addon\\\"><i\\r\\n                              [class]=\\\"selectedOrder.isFromPool=='Y' ? 'fa fa-users': 'fa fa-street-view'\\\"></i></span>\\r\\n                      <span style=\\\"padding: 3px; font-style: italic;\\\">{{selectedOrder?.isFromPool == 'Y' ? 'TAK' : 'NIE'}}</span>\\r\\n                  </div>\\r\\n              </div>\\r\\n              <hr *ngIf=\\\"selectedOrder?.type || selectedOrder?.complexity || selectedOrder?.status \\\">\\r\\n              <div *ngIf=\\\"selectedOrder?.assigneeFull && selectedOrder?.assigneeFull?.length > 0\\\" class=\\\"ui-grid-row\\\">\\r\\n                  <strong>Wykonawcy</strong>\\r\\n                </div>\\r\\n              <div class=\\\"ui-grid-row\\\" *ngFor=\\\"let a of selectedOrder.assigneeFull\\\">\\r\\n                  <div class=\\\"ui-grid-col-12\\\"><u>{{a.email}}</u></div>\\r\\n                  <div class=\\\"ui-grid-col-12\\\">{{a.firstName}} {{a.lastName}}</div>\\r\\n                  <div class=\\\"ui-grid-col-12\\\">{{a.role}} @ {{a.office}}</div>\\r\\n              </div>\\r\\n          </p-fieldset>\\r\\n      </div>\\r\\n      <div class=\\\"ui-grid-col-6\\\">\\r\\n          <div *ngIf=\\\"selectedOrder?.ventureDisplay || selectedOrder?.ventureCompany\\\" class=\\\"ui-grid-row\\\"\\r\\n               style=\\\"margin-top: 10px;\\\">\\r\\n              <p-fieldset legend=\\\"Inwestor\\\">\\r\\n                  {{selectedOrder?.ventureDisplay}} @ {{selectedOrder?.ventureCompany}}\\r\\n              </p-fieldset>\\r\\n          </div>\\r\\n          <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n              <p-fieldset legend=\\\"Obiekt inwestycji\\\">\\r\\n                  <div *ngIf=\\\"selectedOrder?.relatedItems[0]?.itemNo || selectedOrder?.relatedItems[0]?.address || selectedOrder?.relatedItems[0]?.mdBuildingType || selectedOrder?.relatedItems[0]?.description || selectedOrder?.relatedItems[0]?.mdConstructionCategory;else noRelatedItem\\\">\\r\\n                      <div *ngIf=\\\"selectedOrder?.relatedItems[0]?.itemNo\\\" class=\\\"ui-grid-row\\\">\\r\\n                          <div class=\\\"ui-grid-col-4\\\">Numer:</div>\\r\\n                          <div class=\\\"ui-grid-col-8\\\">{{selectedOrder?.relatedItems[0]?.itemNo}}</div>\\r\\n                      </div>\\r\\n                      <div *ngIf=\\\"selectedOrder?.relatedItems[0]?.address\\\" class=\\\"ui-grid-row\\\">\\r\\n                          <div class=\\\"ui-grid-col-4\\\">Adres:</div>\\r\\n                          <div class=\\\"ui-grid-col-8\\\">{{selectedOrder?.relatedItems[0]?.address}}</div>\\r\\n                      </div>\\r\\n                      <div *ngIf=\\\"selectedOrder?.relatedItems[0]?.mdBuildingType\\\" class=\\\"ui-grid-row\\\">\\r\\n                          <div class=\\\"ui-grid-col-4\\\">Typ budynku:</div>\\r\\n                          <div class=\\\"ui-grid-col-8\\\">{{selectedOrder?.relatedItems[0]?.mdBuildingType}}</div>\\r\\n                      </div>\\r\\n                      <div *ngIf=\\\"selectedOrder?.relatedItems[0]?.mdConstructionCategory\\\" class=\\\"ui-grid-row\\\">\\r\\n                          <div class=\\\"ui-grid-col-4\\\">Konstrukcja:</div>\\r\\n                          <div class=\\\"ui-grid-col-8\\\">{{selectedOrder?.relatedItems[0]?.mdConstructionCategory}}</div>\\r\\n                      </div>\\r\\n                      <div *ngIf=\\\"selectedOrder?.relatedItems[0]?.description\\\" class=\\\"ui-grid-row\\\">\\r\\n                          <div class=\\\"ui-grid-col-4\\\">Opis:</div>\\r\\n                          <div class=\\\"ui-grid-col-8\\\">{{selectedOrder?.relatedItems[0]?.description}}</div>\\r\\n                      </div>\\r\\n                      <div *ngIf=\\\"selectedOrder?.relatedItems[0]?.creationDate\\\" class=\\\"ui-grid-row\\\">\\r\\n                          <div class=\\\"ui-grid-col-4\\\">Dodano:</div>\\r\\n                          <div class=\\\"ui-grid-col-8\\\">{{selectedOrder?.relatedItems[0]?.creationDate}}</div>\\r\\n                      </div>\\r\\n                  </div>\\r\\n                  <ng-template #noRelatedItem><strong style=\\\"color: darkorange;\\\">Nie przypisano...</strong></ng-template>\\r\\n              </p-fieldset>\\r\\n          </div>\\r\\n      </div>\\r\\n      <br>   \\r\\n  </div> \\r\\n <br>   \\r\\n<p-fieldset legend=\\\"Dodaj komentarz do zlecenia\\\">\\r\\n  <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n    <div class=\\\"ui-grid-col-2\\\"><label for=\\\"newComment\\\">Dodaj komentarz</label></div>\\r\\n    <div class=\\\"ui-grid-col-10\\\">\\r\\n        <textarea [disabled]=\\\"false\\\" pInputTextarea id=\\\"newComment\\\" name=\\\"newComment\\\" [(ngModel)]=\\\"newComment\\\" [rows]=\\\"3\\\" [cols]=\\\"80\\\"  autoResize=\\\"autoResize\\\" placeholder=\\\"Wewnętrzny komentarz dotyczący zlecenia...\\\"></textarea>\\r\\n    </div>\\r\\n  </div>\\r\\n</p-fieldset>\\r\\n    <p-footer>\\r\\n      <div class=\\\"ui-dialog-buttonpane ui-helper-clearfix\\\">\\r\\n        <button width=\\\"200px\\\" type=\\\"button\\\" pButton icon=\\\"fa fa-check\\\" (click)=\\\"saveComment()\\\" label=\\\"Zakończ\\\"></button>\\r\\n      </div>     \\r\\n    </p-footer>\\r\\n  </p-dialog>\\r\\n  <!--end add comment-->\\r\\n</p-panel>\\r\\n\\r\\n<p-dialog [(visible)]=\\\"displayChangeStatusDialog\\\" header=\\\"Zlecenia do zakończenia\\\" [minWidth]=\\\"800\\\" [responsive]=\\\"true\\\" [blockScroll]=\\\"true\\\">\\r\\n    <app-group-status-change [listToDisplay]=\\\"orders\\\" [operator]=\\\"engineer\\\" [operatorMode]=\\\"false\\\" (closeModalEvent)=\\\"onClose($event)\\\"></app-group-status-change>\\r\\n</p-dialog>\"","import { Component, OnInit } from '@angular/core';\r\nimport { Observable, Subscriber } from 'rxjs';\r\n\r\n\r\nimport { User, RelatedItem, Order, WorkType, CodeValue } from '../_models/index';\r\nimport { WOService, RelatedItemService, UserService, DictService, AlertService, WorkTypeService, AuthenticationService, ToolsService } from '../_services/index';\r\nimport { MenuItem } from 'primeng/primeng';\r\n//add comment\r\nimport { Comments, commentAsSimpleString, commentAsString, commentAdd,DisplayTextCommentAsString } from '../_models/comment';\r\n//end add comment\r\n\r\n@Component({\r\n    selector: 'app-my-wo',\r\n    templateUrl: './my-wo.component.html',\r\n    styleUrls: ['./my-wo.component.css']\r\n})\r\nexport class MyWoComponent implements OnInit {\r\n\r\n    engineer: User;\r\n    engineers:User[] = [];\r\n\r\n    orders:Order[];\r\n    selectedOrder:Order;\r\n    editedOrder:Order;\r\n\r\n    items:MenuItem[] = [];\r\n\r\n    displayFinishDialog: boolean;\r\n    displayDetailsDialog: boolean;\r\n    \r\n    //add comment\r\n    newComment: string;\r\n    displayAddComment: boolean;\r\n    commentOrder:Order;\r\n    displayChangeStatusDialog:boolean;\r\n\r\n    constructor(private woService:WOService,\r\n                private userService:UserService,\r\n                private workTypeService:WorkTypeService,\r\n                private dictService:DictService,\r\n                private alertService:AlertService,\r\n                private authSerice:AuthenticationService,\r\n                private toolsService: ToolsService\r\n    ) {\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.authSerice.userAsObs.subscribe(user => console.log(user));\r\n        this.workTypeService.getWorkTypes().subscribe(workTypes => console.log(\"NOW:\"+JSON.stringify(workTypes)));\r\n        this.authSerice.userAsObs.subscribe(user => this.saveAndSearch(user));\r\n        this.userService.getEngineers().subscribe(engineers => this.engineers = engineers);\r\n        this.items = [\r\n            {label: 'Zakończ zlecenie', icon: 'fa fa-check', command: (event) => this.finishWork()},\r\n            {label: 'Dodaj komentarz', icon: 'fa fa-pencil-square-o',  command: (event) => this.addComment()},\r\n        ];\r\n    }\r\n    \r\n\r\n    showChangeStatusDialog() {\r\n        this.displayChangeStatusDialog=true;\r\n    }\r\n\r\n    onClose(isVisible: boolean){\r\n        this.displayChangeStatusDialog = isVisible;\r\n        this.search();\r\n       }\r\n\r\n   private addComment():void{\r\n       this.displayAddComment=true;    \r\n    }\r\n    saveComment (): void{\r\n        if (this.newComment && this.newComment.length > 0) {\r\n            this.addCommentToOrder(this.selectedOrder,this.newComment);            \r\n        }\r\n        this.displayAddComment=false;\r\n        this.newComment=null;  \r\n    }\r\n   private addCommentToOrder (order: Order, newComment: string) :void {\r\n        let reason: string = \"Komentarz\";\r\n        if (!order.comments) {\r\n            order.comments = new Comments(null);\r\n        }\r\n        commentAdd(order.comments, reason, this.engineer, newComment);\r\n        this.woService.updateOrder(order).subscribe(order=>this.search());\r\n        this.alertService.info('Pomyślnie dodano komentarz do zlecenia: ' + order.workNo);\r\n        newComment=null; \r\n   }\r\n\r\npublic getCancelOrHoldComment(order: Order): string {\r\n    if (order && order.comments) {\r\n        return DisplayTextCommentAsString(order.comments);\r\n    } else {\r\n        return '';\r\n    }    \r\n}\r\n//end add comment\r\n\r\n    search() {\r\n        if (this.engineer.id) {\r\n            this.woService.getAssignedOrders(this.engineer.id).subscribe(orders => this.orders = orders);\r\n        } else {\r\n            this.alertService.error(\"Nie można wyszukać, błąd wewnętrzny\");\r\n        }\r\n    }\r\n\r\n    onRowSelect(event) {\r\n        console.log(\"selected row!\" + JSON.stringify(this.selectedOrder));\r\n        this.selectedOrder.assigneeFull = this.toolsService.getEngineers(this.selectedOrder.assignee, this.engineers);\r\n    }\r\n\r\n    private saveAndSearch(user:User):void {\r\n        if (user === null) {\r\n            console.log(\"Probably logged out\");\r\n            return;\r\n        }\r\n\r\n        console.log(\"Logged as \"+JSON.stringify(user));\r\n        this.engineer = user;\r\n        this.search();\r\n    }\r\n\r\n    private finishWork():void {\r\n        this.editedOrder = JSON.parse(JSON.stringify(this.selectedOrder));\r\n        this.editedOrder.statusCode = \"CO\";\r\n        this.editedOrder.status = this.dictService.getWorkStatus(this.editedOrder.statusCode);\r\n        this.editedOrder.type = this.dictService.getWorkStatus(this.editedOrder.typeCode);\r\n\r\n        this.displayFinishDialog = true;\r\n    }\r\n\r\n    saveOrder() {\r\n\r\n        this.editedOrder.status = this.dictService.getWorkStatus(this.editedOrder.statusCode);\r\n        this.editedOrder.type = this.workTypeService.getWorkTypeDescription(this.editedOrder);\r\n\r\n        this.storeOrder(this.editedOrder);\r\n\r\n        this.displayFinishDialog = false;\r\n    }\r\n\r\n    private storeOrder(order:Order):void {\r\n        console.log(\"changing order!\" + JSON.stringify(order));\r\n        this.woService.updateOrder(order).subscribe(updatedOrder => this.refreshTable(updatedOrder))\r\n    }\r\n\r\n    private refreshTable(order:Order) {\r\n        console.log(\"Refreshing table removing order \" + JSON.stringify(order));\r\n\r\n        if (order && order.id > 0) {\r\n            let index: number = 0;\r\n            for(let anOrder of this.orders) {\r\n                if (anOrder.id === order.id) {\r\n                    this.orders.splice(index, 1);\r\n                    this.orders = JSON.parse(JSON.stringify(this.orders));\r\n                }\r\n                index++;\r\n            }\r\n            this.alertService.success(\"Pomyślnie zakończono zlecenie \" + order.workNo);\r\n        } else {\r\n            this.alertService.error(\"Nie można bylo odświeżyć tabeli wyników, szukaj jeszcze raz\");\r\n        }\r\n    }\r\n\r\n}\r\n","module.exports = \"\"","module.exports = \"<div class=\\\"ui-grid-row\\\">\\r\\n    <div class=\\\"ui-grid-col-12\\\" style=\\\"height: 10px; overflow: hidden}\\\">\\r\\n        <p-progressBar [style]=\\\"{'height': '5px'}\\\" *ngIf=\\\"isInProgress\\\" mode=\\\"indeterminate\\\"></p-progressBar>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\n\r\nimport { AuthenticationService, ProgressService }    from '../_services/index';\r\nimport { User } from '../_models/user';\r\n\r\n@Component({\r\n    selector: 'app-progress',\r\n    templateUrl: './progress.component.html',\r\n    styleUrls: ['./progress.component.css']\r\n})\r\nexport class ProgressComponent implements OnInit {\r\n\r\n    private subscription:Subscription;\r\n    private subLogin: Subscription;\r\n\r\n    isInProgress: boolean;\r\n\r\n    constructor(private progressService:ProgressService, private authService: AuthenticationService) {\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.subscription = this.progressService.getSubject().subscribe(progress => setTimeout(() => this.handleProgress(progress)));\r\n        this.subLogin = this.authService.userAsObs.subscribe(user => this.clean(user));\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        // unsubscribe on destroy to prevent memory leaks\r\n        this.subscription.unsubscribe();\r\n        this.subLogin.unsubscribe();\r\n        this.clean(null);\r\n    }\r\n\r\n    public clean(user: User):void {\r\n        console.log(\"Cleaning progress cause user has changed!\" + JSON.stringify(user));\r\n        this.isInProgress = false;\r\n        this.progressService.cleanProgress();\r\n    }\r\n\r\n\r\n    private handleProgress(progress:Map<string, number>):void {\r\n        this.isInProgress = progress.size > 0;\r\n\r\n        if (this.isInProgress) {\r\n            console.log(\"in progress \"+JSON.stringify(progress));\r\n        }\r\n\r\n    }\r\n}\r\n","module.exports = \"\"","module.exports = \"\\r\\n<p-panel header=\\\"Wyniki zespołu\\\">\\r\\n\\r\\n    <div class=\\\"ui-grid-row\\\">\\r\\n        <div class=\\\"ui-grid-col-12\\\">\\r\\n\\r\\n                <form #f=\\\"ngForm\\\" (submit)=\\\"search()\\\">\\r\\n\\r\\n                    <div class=\\\"ui-grid ui-grid-responsive ui-fluid ui-grid-pad\\\">\\r\\n                        <div class=\\\"ui-grid-row\\\"  style=\\\"margin-top: 20px;\\\">\\r\\n                            <div class=\\\"ui-grid-col-1\\\"></div>\\r\\n                            <div class=\\\"ui-grid-col-5\\\">\\r\\n                                <label for=\\\"afterDate\\\">od</label>\\r\\n                                <p-calendar name=\\\"afterDate\\\" [locale]=\\\"pl\\\" [(ngModel)]=\\\"afterDate\\\" showIcon=\\\"true\\\" dateFormat=\\\"dd.mm.yy\\\" utc=\\\"true\\\"></p-calendar>\\r\\n                            </div>\\r\\n                            <!--<div class=\\\"ui-grid-col-1\\\"></div>-->\\r\\n                            <div class=\\\"ui-grid-col-5\\\">\\r\\n                                <label for=\\\"beforeDate\\\">do</label>\\r\\n                                <p-calendar name=\\\"beforeDate\\\" [locale]=\\\"pl\\\" [(ngModel)]=\\\"beforeDate\\\" showIcon=\\\"true\\\" dateFormat=\\\"dd.mm.yy\\\" utc=\\\"true\\\"></p-calendar>\\r\\n                            </div>\\r\\n                            <div class=\\\"ui-grid-col-1\\\"></div>\\r\\n                        </div>\\r\\n                        <div class=\\\"ui-grid-row\\\"  style=\\\"margin-top: 15px;\\\">\\r\\n                            <div class=\\\"ui-grid-col-5\\\"></div>\\r\\n                            <div class=\\\"ui-grid-col-2\\\">\\r\\n                                <button pButton type=\\\"button\\\" (click)=\\\"search()\\\" icon=\\\"fa fa-search\\\" label=\\\"Szukaj Laros\\\" style=\\\"margin-left: 0px; min-width: 140px; max-width: 200px;\\\" [disabled]=\\\"!f?.valid\\\"></button>\\r\\n                            </div>\\r\\n                            <div class=\\\"ui-grid-col-5\\\"></div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n\\r\\n                </form>\\r\\n        </div>\\r\\n    </div>\\r\\n</p-panel>\\r\\n\\r\\n\\r\\n\\r\\n<div style=\\\"margin-top: 5px\\\" *ngIf=\\\"reports\\\" class=\\\"ui-g\\\">\\r\\n    <p-dataTable [value]=\\\"reports\\\" [rows]=\\\"20\\\" [paginator]=\\\"true\\\" [globalFilter]=\\\"gb\\\" #dt\\r\\n                 selectionMode=\\\"multiple\\\" [(selection)]=\\\"selectedReports\\\" (onRowDblclick)=\\\"onRowDblclick($event)\\\" (onRowSelect)=\\\"filterReports($event)\\\" (onHeaderCheckboxToggle)=\\\"filterReports($event)\\\"\\r\\n                 dataKey=\\\"id\\\" resizableColumns=\\\"true\\\" sortField=\\\"timeUtilizationPercentage\\\" sortOrder=\\\"-1\\\" [loading]=\\\"loading\\\" loadingIcon=\\\"fa fa-spinner\\\">\\r\\n        <p-header>\\r\\n            <div>\\r\\n                <i class=\\\"fa fa-search\\\"></i>\\r\\n                <input #gb type=\\\"text\\\" pInputText size=\\\"50\\\" placeholder=\\\"Filtruj\\\">\\r\\n            </div>\\r\\n        </p-header>\\r\\n        <p-column [sortable]=\\\"true\\\" field=\\\"id\\\" header=\\\"id\\\" hidden=\\\"true\\\" ></p-column>\\r\\n\\r\\n        <p-column [style]=\\\"{'text-align':'center', 'width':'38px'}\\\" selectionMode=\\\"multiple\\\"></p-column>\\r\\n        <p-column [sortable]=\\\"true\\\" field=\\\"icon\\\" header=\\\"Ocena\\\" [style]=\\\"{'text-align':'center', 'width':'70px'}\\\">\\r\\n            <ng-template let-col let-report=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n                <span class=\\\"ui-inputgroup-addon\\\" [style.color]=\\\"report.iconColor\\\"><i [class]=\\\"report.icon\\\"></i></span>\\r\\n            </ng-template>\\r\\n        </p-column>\\r\\n        <p-column [sortable]=\\\"true\\\" field=\\\"timeUtilizationPercentage\\\" header=\\\"Wydajność\\\" [style]=\\\"{'text-align':'right'}\\\">\\r\\n            <ng-template let-col let-userData=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n                <span *ngIf=\\\"userData?.timeUtilizationPercentage >= 0\\\" style=\\\"padding: 3px\\\">{{userData.timeUtilizationPercentage}}%</span>\\r\\n                <span *ngIf=\\\"userData?.timeUtilizationPercentage === noTimesheets\\\" style=\\\"padding: 3px\\\">Brak deklaracji czasu pracy</span>\\r\\n                <span *ngIf=\\\"userData?.timeUtilizationPercentage === holidays\\\" style=\\\"padding: 3px\\\">Urlop</span>\\r\\n            </ng-template>\\r\\n        </p-column>\\r\\n\\r\\n\\r\\n        <p-column [sortable]=\\\"true\\\" [filter]=\\\"true\\\" field=\\\"firstName\\\" header=\\\"Imie\\\" ></p-column>\\r\\n        <p-column [sortable]=\\\"true\\\" [filter]=\\\"true\\\" field=\\\"lastName\\\" header=\\\"Nazwisko\\\" ></p-column>\\r\\n        <p-column [sortable]=\\\"true\\\" [filter]=\\\"true\\\" field=\\\"role\\\" header=\\\"Rola\\\" [style]=\\\"{'text-align':'center'}\\\"></p-column>\\r\\n        <p-column [sortable]=\\\"true\\\" [filter]=\\\"true\\\" field=\\\"office\\\" header=\\\"Biuro\\\" [style]=\\\"{'text-align':'center'}\\\"></p-column>\\r\\n        <p-column [sortable]=\\\"true\\\" field=\\\"isFromPool\\\" header=\\\"Pula\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Y/N\\\" [style]=\\\"{'text-align':'center', 'width':'55px'}\\\">\\r\\n            <ng-template let-col let-user=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n                <span *ngIf=\\\"user[col.field]=='Y'\\\" [style.color]=\\\"'green'\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-users'\\\"></i></span>\\r\\n                <span *ngIf=\\\"user[col.field]!='Y'\\\" [style.color]=\\\"'grey'\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-street-view'\\\"></i></span>\\r\\n            </ng-template>\\r\\n        </p-column>\\r\\n\\r\\n        <p-column [sortable]=\\\"true\\\" field=\\\"declaredTime\\\" header=\\\"Czas zadeklarowany\\\"  [style]=\\\"{'text-align':'right'}\\\">\\r\\n            <ng-template let-col let-report=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n                <span>{{report[col.field] | number: '1.2-2'}} godz.</span>\\r\\n            </ng-template>\\r\\n        </p-column>\\r\\n        <p-column [sortable]=\\\"true\\\" field=\\\"expectedTime\\\" header=\\\"Czas zakładany\\\" [style]=\\\"{'text-align':'right'}\\\">\\r\\n            <ng-template let-col let-report=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n                <span>{{report[col.field] | number: '1.2-2'}} godz.</span>\\r\\n            </ng-template>\\r\\n        </p-column>\\r\\n        <p-column [sortable]=\\\"true\\\" field=\\\"noOrdersDone\\\" header=\\\"Ukończonych WO\\\" [style]=\\\"{'text-align':'right'}\\\"></p-column>\\r\\n        <p-column [sortable]=\\\"true\\\" field=\\\"earnedMoney\\\" header=\\\"Wypracowany obrót\\\" [style]=\\\"{'text-align':'right'}\\\">\\r\\n            <ng-template let-col let-report=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n                <span>{{report[col.field] | currency: 'PLN'}}</span>\\r\\n            </ng-template>\\r\\n        </p-column>\\r\\n        <p-column header=\\\"Zlecenia\\\" [style]=\\\"{'text-align':'center'}\\\">\\r\\n            <ng-template let-report=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n                <p-button type=\\\"button\\\" styleClass=\\\"btn btn-info btn-lg\\\" style=\\\"width:25px; margin-right: 10px;\\\" (click)=\\\"showDoneOrders($event, report)\\\" icon=\\\"fa fa-server\\\"></p-button>\\r\\n                <p-button type=\\\"button\\\" styleClass=\\\"btn btn-info btn-lg\\\" style=\\\"width:25px\\\" (click)=\\\"prepareAndShowCalendar(report)\\\" icon=\\\"fa fa-calendar\\\"></p-button>\\r\\n            </ng-template>\\r\\n        </p-column>\\r\\n\\r\\n\\r\\n        <ng-template pTemplate=\\\"emptymessage\\\">\\r\\n            Brak raportów w zakresie dat...\\r\\n        </ng-template>\\r\\n\\r\\n        <p-footer>\\r\\n        </p-footer>\\r\\n\\r\\n    </p-dataTable>\\r\\n\\r\\n</div>\\r\\n\\r\\n<div *ngIf=\\\"chartsReady\\\">\\r\\n\\r\\n    <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px; margin-bottom: 10px;\\\">\\r\\n        <p-panel [header]=\\\"'Podsumowanie od '+toolsService.formatDate(afterDate, 'yyyy-MM-dd')+' do '+toolsService.formatDate(beforeDate, 'yyyy-MM-dd')\\\">\\r\\n            <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 20px;\\\">\\r\\n                <div class=\\\"ui-grid-col-1\\\"></div>\\r\\n                <div class=\\\"ui-grid-col-5\\\">\\r\\n                    <p>Średnio wypracowano <span style=\\\"font-weight: bolder\\\">{{getAvgMoney() | currency: 'PLN'}}</span></p>\\r\\n                </div>\\r\\n                <div class=\\\"ui-grid-col-1\\\"></div>\\r\\n                <div class=\\\"ui-grid-col-5\\\">\\r\\n                    <p>Średnia wydajność <span style=\\\"font-weight: bolder\\\">{{getAvgUtilization() | number: '1.2-2'}}%</span></p>\\r\\n                </div>\\r\\n\\r\\n            </div>\\r\\n        </p-panel>\\r\\n    </div>\\r\\n\\r\\n\\r\\n\\r\\n    <div class=\\\"ui-grid-row\\\">\\r\\n        <div class=\\\"ui-grid-col-12\\\">\\r\\n            <p-panel header=\\\"Wydajność\\\">\\r\\n                <p-chart type=\\\"bar\\\" [data]=\\\"chartUtilizationData\\\" ></p-chart>\\r\\n            </p-panel>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"ui-grid-row\\\">\\r\\n        <div class=\\\"ui-grid-col-6\\\">\\r\\n            <p-panel header=\\\"Zakładany czas w godzinach obliczony na podstawie pracochłonności wykonanych WO\\\">\\r\\n                <p-chart type=\\\"polarArea\\\" [data]=\\\"chartShareData\\\"></p-chart>\\r\\n            </p-panel>\\r\\n        </div>\\r\\n        <div class=\\\"ui-grid-col-6\\\">\\r\\n            <p-panel header=\\\"Wypracowany obrót w PLN\\\">\\r\\n                <p-chart type=\\\"bar\\\" [data]=\\\"chartEarnedData\\\"></p-chart>\\r\\n            </p-panel>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<!-- defaultDate=\\\"2017-11-01\\\" -->\\r\\n\\r\\n<p-dialog *ngIf=\\\"selectedReport\\\" [header]=\\\"selectedReport?.firstName +' '+selectedReport?.lastName +' ('+selectedReport?.timeUtilizationPercentage+'%)'\\\" [(visible)]=\\\"schedulerDisplay\\\" [responsive]=\\\"true\\\" [minWidth]=\\\"800\\\" [width]=\\\"800\\\">\\r\\n    <div class=\\\"ui-grid ui-grid-responsive ui-fluid\\\">\\r\\n        <p-schedule [events]=\\\"schedulerEvents\\\" [header]=\\\"schedulerHeader\\\" [eventLimit]=\\\"8\\\" [editable]=\\\"false\\\" (onEventClick)=\\\"handleOrderClick($event)\\\" [locale]=\\\"'pl'\\\"></p-schedule>\\r\\n    </div>\\r\\n</p-dialog>\\r\\n\\r\\n<p-dialog [header]=\\\"selectedOrder?.workNo + (selectedOrder?.doneDate? ' wykonano': ' w realizacji...' )\\\" [(visible)]=\\\"orderDialogDisplay\\\" [responsive]=\\\"true\\\" [minWidth]=\\\"800\\\" [width]=\\\"900\\\" [blockScroll]=\\\"true\\\" [contentStyle]=\\\"{'height': '800px'}\\\">\\r\\n\\r\\n    <div *ngIf=\\\"selectedOrder?.workNo\\\">\\r\\n        <div class=\\\"ui-grid-row\\\">\\r\\n            <div class=\\\"ui-grid-col-12\\\">\\r\\n                <p-fieldset legend=\\\"Realizacja\\\" *ngIf=\\\"selectedOrder\\\">\\r\\n                    <div class=\\\"ui-grid ui-grid-responsive ui-fluid\\\" *ngIf=\\\"selectedOrder\\\">\\r\\n\\r\\n                        <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n                            <div class=\\\"ui-grid-col-4\\\">Przypisano</div>\\r\\n                            <div class=\\\"ui-grid-col-8\\\">{{selectedOrder.assignedDate}}</div>\\r\\n                        </div>\\r\\n\\r\\n                        <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\" *ngIf=\\\"selectedOrder?.doneDate\\\">\\r\\n                            <div class=\\\"ui-grid-col-4\\\">Wykonano</div>\\r\\n                            <div class=\\\"ui-grid-col-8\\\">{{selectedOrder.doneDate}}</div>\\r\\n                        </div>\\r\\n\\r\\n                    </div>\\r\\n\\r\\n                </p-fieldset>\\r\\n            </div>\\r\\n        </div>\\r\\n\\r\\n        <div class=\\\"ui-grid-row\\\">\\r\\n            <div class=\\\"ui-grid-col-12\\\">\\r\\n                <app-wo-details [selectedOrder]=\\\"selectedOrder\\\"></app-wo-details>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n\\r\\n\\r\\n</p-dialog>\\r\\n\\r\\n<p-dialog [header]=\\\"selectedReport?.firstName +' '+ selectedReport?.lastName+' zlecenia od '+toolsService.formatDate(this.afterDate, 'yyyy-MM-dd')+' do '+toolsService.formatDate(this.beforeDate, 'yyyy-MM-dd')\\\" [(visible)]=\\\"doneOrdersDialogDisplay\\\" [responsive]=\\\"true\\\" [minWidth]=\\\"800\\\" [width]=\\\"900\\\" [blockScroll]=\\\"true\\\" [contentStyle]=\\\"{'height': '800px'}\\\">\\r\\n\\r\\n    <div *ngIf=\\\"selectedReport?.workOrders\\\">\\r\\n        <div class=\\\"ui-grid-row\\\">\\r\\n            <p-dataTable [value]=\\\"selectedReport.workOrders\\\" [rows]=\\\"20\\\" [paginator]=\\\"true\\\" [globalFilter]=\\\"gb\\\" #dtOrders\\r\\n                         dataKey=\\\"id\\\" resizableColumns=\\\"true\\\" sortField=\\\"workNo\\\" sortOrder=\\\"-1\\\" [loading]=\\\"loading\\\" loadingIcon=\\\"fa fa-spinner\\\"\\r\\n                         csvSeparator=\\\";\\\" [exportFilename]=\\\"selectedReport?.lastName+'_zl_wykonywane_'+toolsService.formatDate(this.afterDate, 'yyyy-MM-dd')+'_'+toolsService.formatDate(this.beforeDate, 'yyyy-MM-dd')\\\">\\r\\n                <p-header>\\r\\n                    <div>\\r\\n                        <i class=\\\"fa fa-search\\\"></i>\\r\\n                        <input #gb type=\\\"text\\\" pInputText size=\\\"50\\\" placeholder=\\\"Filtruj\\\">\\r\\n                    </div>\\r\\n                </p-header>\\r\\n                <p-column [sortable]=\\\"true\\\" field=\\\"id\\\" header=\\\"id\\\" hidden=\\\"true\\\" ></p-column>\\r\\n\\r\\n\\r\\n                <p-column [sortable]=\\\"true\\\" [filter]=\\\"true\\\" field=\\\"workNo\\\" header=\\\"Zlecenie\\\" ></p-column>\\r\\n                <p-column [sortable]=\\\"true\\\" field=\\\"typeCode\\\" header=\\\"Typ\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" filterMatchMode=\\\"contains\\\">\\r\\n                    <ng-template let-col let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n                        <span [style.color]=\\\"toolsService.getOrderColor(order.typeCode)\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-square'\\\"></i></span>\\r\\n                        <span style=\\\"padding: 3px\\\">{{workTypeService.getWorkTypeDescription(order)}}</span>\\r\\n                    </ng-template>\\r\\n                </p-column>\\r\\n                <p-column [sortable]=\\\"true\\\" field=\\\"status\\\" header=\\\"Status\\\" [style]=\\\"{'width':'135px'}\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" filterMatchMode=\\\"contains\\\">\\r\\n                    <ng-template let-col let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n                        <span class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"toolsService.getStatusIcon(order.statusCode)\\\"></i></span>\\r\\n                        <span style=\\\"padding: 3px\\\">{{order.status}}</span>\\r\\n                    </ng-template>\\r\\n                </p-column>\\r\\n\\r\\n                <p-column [sortable]=\\\"true\\\" field=\\\"complexityCode\\\" header=\\\"Zł.\\\" [style]=\\\"{'text-align':'center', 'width':'45px'}\\\">\\r\\n                    <ng-template let-col let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n                        <span class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"order[col.field]=='STD' ? 'fa fa-thumbs-o-up': 'fa fa-life-bouy'\\\"></i></span>\\r\\n                    </ng-template>\\r\\n                </p-column>\\r\\n                <p-column [sortable]=\\\"true\\\" field=\\\"complexity\\\" header=\\\"Wycena [H]\\\" [style]=\\\"{'text-align':'center', 'width':'55px'}\\\"></p-column>\\r\\n                <p-column [sortable]=\\\"true\\\" field=\\\"price\\\" header=\\\"Cena\\\" styleClass=\\\"text-right\\\" [style]=\\\"{'width':'70px'}\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n                <p-column [sortable]=\\\"true\\\" field=\\\"assignedDate\\\" header=\\\"Przypisano\\\" styleClass=\\\"text-right\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n                <p-column [sortable]=\\\"true\\\" field=\\\"doneDate\\\" header=\\\"Zrealizowano\\\" styleClass=\\\"text-right\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n\\r\\n                <p-column [style]=\\\"{'text-align':'center'}\\\">\\r\\n                    <ng-template let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n                        <p-button type=\\\"button\\\" styleClass=\\\"btn btn-info btn-lg\\\" style=\\\"width:25px\\\" (click)=\\\"getAndShowOrderDetails(order.id)\\\" icon=\\\"fa fa-search\\\"></p-button>\\r\\n                    </ng-template>\\r\\n                </p-column>\\r\\n\\r\\n                <ng-template pTemplate=\\\"emptymessage\\\">\\r\\n                    Brak realizowanych zadań w tym zakresie dat...\\r\\n                </ng-template>\\r\\n\\r\\n                <p-footer>\\r\\n                    <div class=\\\"ui-grid ui-grid-responsive ui-fluid ui-grid-pad\\\">\\r\\n                        <div class=\\\"ui-grid-row\\\"  style=\\\"margin-top: 15px;\\\">\\r\\n                            <div class=\\\"ui-grid-col-5\\\"></div>\\r\\n                            <div class=\\\"ui-grid-col-2\\\">\\r\\n                                <button type=\\\"button\\\" pButton icon=\\\"fa fa-file-o\\\" iconPos=\\\"left\\\" label=\\\"CSV\\\" (click)=\\\"dtOrders.exportCSV()\\\"></button>\\r\\n                            </div>\\r\\n                            <div class=\\\"ui-grid-col-5\\\"></div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </p-footer>\\r\\n\\r\\n            </p-dataTable>\\r\\n        </div>\\r\\n\\r\\n\\r\\n    </div>\\r\\n\\r\\n\\r\\n</p-dialog>\\r\\n\\r\\n\\r\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { DecimalPipe } from '@angular/common';\r\n\r\nimport { Observable }    from 'rxjs';\r\nimport { catchError, map, tap, delay, mergeMap } from 'rxjs/operators';\r\n\r\n\r\n\r\nimport { User, UserReport, RelatedItem, Order, WorkType, CodeValue, Timesheet } from '../_models/index';\r\nimport { WOService, RelatedItemService, UserService, DictService, AlertService, WorkTypeService, AuthenticationService, ToolsService, TimesheetService } from '../_services/index';\r\nimport { Calendar } from '../_models/calendar';\r\n\r\ndeclare var jquery:any;\r\ndeclare var $ :any;\r\n\r\n@Component({\r\n    selector: 'app-report-monitor-engineers',\r\n    templateUrl: './report-monitor-engineers.component.html',\r\n    styleUrls: ['./report-monitor-engineers.component.css']\r\n})\r\nexport class ReportMonitorEngineersComponent implements OnInit {\r\n\r\n    /* search and selection */\r\n    afterDate:Date;\r\n    beforeDate:Date;\r\n    future: string;\r\n\r\n    reports: UserReport[];\r\n    selectedReport: UserReport;\r\n    selectedReports: UserReport[];\r\n    doneOrdersDialogDisplay: boolean;\r\n\r\n    //scheduler\r\n    schedulerDisplay:boolean;\r\n    schedulerEvents: any[];\r\n    schedulerHeader: any;\r\n\r\n    selectedOrder: Order;\r\n    orderDialogDisplay:boolean;\r\n\r\n    workTypes: WorkType[];\r\n\r\n    chartUtilizationData: any;\r\n    chartShareData: any;\r\n    chartEarnedData: any;\r\n    chartsReady: boolean;\r\n    pl:Calendar;\r\n\r\n    constructor(private woService:WOService,\r\n                private userService:UserService,\r\n                private workTypeService:WorkTypeService,\r\n                private dictService:DictService,\r\n                private alertService:AlertService,\r\n                public toolsService:ToolsService,\r\n                private timesheetService: TimesheetService) {\r\n\r\n        this.dictService.init();\r\n        this.workTypeService.init();\r\n\r\n        let d = new Date();\r\n        d.setMonth(d.getMonth() - 1);\r\n        this.afterDate = d;\r\n        this.beforeDate = toolsService.getCurrentDateDayOperation(0);\r\n        this.future = toolsService.formatDate(toolsService.getCurrentDateDayOperation(+10), 'yyyy-MM-dd');\r\n        this.pl=new Calendar();\r\n\r\n    }\r\n\r\n    ngOnInit() {\r\n\r\n        this.workTypeService.getAllWorkTypes().subscribe(workTypes => this.workTypes = workTypes);\r\n\r\n        this.schedulerHeader = {\r\n            left: 'prev,next today',\r\n            center: 'title',\r\n            right: 'month,agendaWeek,agendaDay'\r\n        };\r\n\r\n\r\n        this.search();\r\n    }\r\n\r\n\r\n\r\n    onRowDblclick(event) {\r\n        console.log(\"double clicked \"+JSON.stringify(event));\r\n        this.prepareAndShowCalendar(event.data);\r\n    }\r\n\r\n    prepareAndShowCalendar(report: UserReport) {\r\n        this.selectedReport = report;\r\n\r\n        this.schedulerEvents = [];\r\n        if (this.selectedReport.workOrders && this.selectedReport.workOrders.length > 0) {\r\n            for(let order of this.selectedReport.workOrders) {\r\n                let event: any = {};\r\n\r\n                event.start = order.assignedDate;\r\n                event.orderId = order.id;\r\n                event.color = this.toolsService.getOrderColor(order.typeCode);\r\n\r\n                if (order.doneDate) {\r\n                    event.title = order.workNo;\r\n                    event.end = order.doneDate;\r\n                    event.borderColor = \"green\";\r\n                    event.textColor = \"black\";\r\n                } else {\r\n                    event.title = order.workNo+\"...\";\r\n                    event.end = this.future;\r\n                    event.borderColor = \"orange\";\r\n                    event.textColor = \"#29293d\";\r\n                }\r\n\r\n                console.log(event.title + \"doneDate = \"+order.doneDate + \" => event.end = \"+event.end +\", event.start=\"+event.start);\r\n\r\n                this.schedulerEvents.push(event);\r\n            }\r\n\r\n            this.schedulerDisplay = true;\r\n        } else {\r\n            this.alertService.info(\"Nie ma żadnych prac do pokazania dla \"+this.selectedReport.firstName+ \" \"+this.selectedReport.lastName);\r\n        }\r\n    }\r\n\r\n    handleOrderClick(e: any) {\r\n        console.log(\"order clicked title:\"+e.calEvent.title);\r\n        console.log(\"order clicked orderId:\"+e.calEvent.orderId);\r\n\r\n        /*\r\n        var cache = [];\r\n        console.log(\"order event :\"+JSON.stringify(e.calEvent.event, function(key, value) {\r\n            if (typeof value === 'object' && value !== null) {\r\n                if (cache.indexOf(value) !== -1) {\r\n                    // Duplicate reference found\r\n                    try {\r\n                        // If this value does not reference a parent it can be deduped\r\n                        return JSON.parse(JSON.stringify(value));\r\n                    } catch (error) {\r\n                        // discard key if value cannot be deduped\r\n                        return;\r\n                    }\r\n                }\r\n                // Store value in our collection\r\n                cache.push(value);\r\n            }\r\n            return value;\r\n        }));\r\n        cache = null;\r\n        */\r\n\r\n\r\n        this.getAndShowOrderDetails(e.calEvent.orderId);\r\n    }\r\n\r\n    private getAndShowOrderDetails(orderId: number) {\r\n        loop: for(let order of this.selectedReport.workOrders) {\r\n            if (order.id === orderId) {\r\n                //ambigous since 12.2017 this.woService.getOrdersByWorkNo(order.workNo).subscribe(order => this.showOrder(order));\r\n                this.woService.getOrderById(order.id).subscribe(order => this.showOrder(order));\r\n                break loop;\r\n            }\r\n        }\r\n    }\r\n\r\n    private showOrder(order:Order):void {\r\n        console.log(JSON.stringify(order));\r\n        this.selectedOrder = order;\r\n\r\n        for (let o of this.selectedReport.workOrders) {\r\n            if (o.id === this.selectedOrder.id) {\r\n                this.selectedOrder.assignedDate = o.assignedDate;\r\n                this.selectedOrder.doneDate = o.doneDate;\r\n            }\r\n        }\r\n\r\n        console.log(\"show \"+JSON.stringify(this.selectedOrder));\r\n        this.orderDialogDisplay = true;\r\n    }\r\n\r\n    search(): void {\r\n        let sAfterDate: string = this.toolsService.formatDate(this.afterDate, 'yyyy-MM-dd');\r\n        let sBeforeDate: string = this.toolsService.formatDate(this.beforeDate, 'yyyy-MM-dd');\r\n        console.log(\"Searching for \"+this.afterDate+\"=\"+sAfterDate+\", \"+this.beforeDate+\"=\"+sBeforeDate);\r\n\r\n        this.chartsReady = false;\r\n        this.chartUtilizationData = {labels: ['Wydajność %'], datasets: []};\r\n        this.chartEarnedData = {labels: ['Wypracowany obrót'], datasets: []};\r\n        this.chartShareData = {labels: [], datasets: [{data: [], backgroundColor: []}]};\r\n        this.reports = [];\r\n\r\n        this.userService.getUtilizationReportData(sAfterDate, sBeforeDate)\r\n            .pipe(mergeMap(reportData => this.mapEngineersCallTimesheets(reportData, sAfterDate, sBeforeDate)))\r\n            .subscribe(timesheets => this.fillTimesheets(timesheets));\r\n    }\r\n\r\n    private calculateLineCharts(): void {\r\n        this.chartsReady = false;\r\n        this.chartUtilizationData = {labels: ['Wydajność %'], datasets: []};\r\n        this.chartEarnedData = {labels: ['Wypracowany obrót'], datasets: []};\r\n        this.chartShareData = {labels: [], datasets: [{data: [], backgroundColor: []}]};\r\n\r\n        this.calculateUtilizationForAll(this.reports);\r\n    }\r\n\r\n    public showDoneOrders(event, report: UserReport) {\r\n        this.selectedReport = report;\r\n        this.doneOrdersDialogDisplay=true;\r\n    }\r\n\r\n    private mapEngineersCallTimesheets(reportData: UserReport[], after:string, before:string):Observable<Timesheet[]> {\r\n        console.log(\"Got \" + reportData.length + \" reports!\");\r\n\r\n        if (reportData && reportData.length > 0) {\r\n            for (let report of reportData) {            \r\n                    report.office = this.dictService.getOffice(report.officeCode);\r\n                    report.role = [];\r\n                    for (let roleCode of report.roleCode) {\r\n                        report.role.push(this.dictService.getRole(roleCode));\r\n                    }\r\n                    report.declaredTime = 0;     \r\n            }\r\n            this.reports = reportData;\r\n        } else {\r\n            this.alertService.warn(\"Nie znaleziono inżynierów!\");\r\n        }\r\n\r\n\r\n        return this.timesheetService.getByDates(after, before);\r\n    }\r\n\r\n    private fillTimesheets(timesheets:Timesheet[]):void {\r\n        if (timesheets && timesheets.length > 0) {\r\n            for (let t of timesheets) {\r\n                inner: for (let report of this.reports) {\r\n                    if (report.id === t.personId && t.isLeave !== 'Y') {\r\n                        report.declaredTime += t.usedTime;\r\n                        break inner;\r\n                    }\r\n                }\r\n            }\r\n\r\n            this.calculateUtilizationForAll(this.reports);\r\n        } else {\r\n            this.alertService.warn(\"Nie znaleziono timesheetów w tym zakresie dat!\");\r\n        }\r\n    }\r\n\r\n    private calculateUtilizationForAll(reports: UserReport[]) {\r\n        for (let report of reports) {\r\n            this.calculateUtilization(report);\r\n        }\r\n        //console.log(\"all done: \"+JSON.stringify(reports));\r\n        //console.log(\"all done: \"+JSON.stringify(this.chartUtilizationData));\r\n        //console.log(\"all done: \"+JSON.stringify(this.chartShareData));\r\n\r\n        this.chartsReady = true;\r\n    }\r\n\r\n    \r\n    private calculateUtilization(userData: UserReport): void {\r\n        if (userData.workOrders && userData.workOrders.length > 0) {\r\n            userData.expectedTime = 0;\r\n            userData.noOrdersDone = 0;\r\n\r\n            for (let order of userData.workOrders) {\r\n                order.status = this.dictService.getWorkStatus(order.statusCode);\r\n\r\n                if (order.doneDate) {\r\n                    userData.expectedTime += this.getEffort(userData.officeCode, order);\r\n                    userData.noOrdersDone++;\r\n                } else {\r\n                    console.log(\"Order \"+order.workNo +\" has not been completed yet, thus is not taken into account!\");\r\n                }\r\n            }\r\n\r\n\r\n            if (userData.declaredTime === 0) {\r\n                this.alertService.warn(\"Nie wypełnione deklaracje czasu pracy dla \" + userData.firstName + \" \" + userData.lastName);\r\n                this.setMark(userData, this.noTimesheets);\r\n                userData.timeUtilizationPercentage = this.noTimesheets;\r\n            } else {\r\n                let utilization: number = Math.round(((100 * userData.expectedTime) / userData.declaredTime));\r\n                userData.timeUtilizationPercentage = utilization;\r\n                this.setMark(userData, utilization);\r\n            }\r\n\r\n\r\n        } else if (!userData.declaredTime || userData.declaredTime === 0) {\r\n            userData.timeUtilizationPercentage = this.holidays; //holidays\r\n            userData.expectedTime = 0;\r\n            this.setMark(userData, this.holidays);\r\n            userData.noOrdersDone = 0;\r\n        } else {\r\n            userData.timeUtilizationPercentage = 0; //nothing done\r\n            this.setMark(userData, 0);\r\n            userData.expectedTime = 0;\r\n            userData.noOrdersDone = 0;\r\n        }\r\n\r\n    }\r\n\r\n    private getEffort(officeCode: string, order: Order): number {\r\n        if (order.typeCode === '13.0') {\r\n            console.log('Ignore complexity of order '+order.workNo);\r\n            return 0;\r\n        }\r\n\r\n        if (order.complexity != null) {\r\n            return order.complexity;\r\n        } else {\r\n\r\n            for(let workType of this.workTypes) {\r\n                if (workType.complexityCode === order.complexityCode && workType.typeCode === order.typeCode && workType.officeCode === officeCode) {\r\n                    this.alertService.warn('Brak wyceny dla '+order.workNo+ ' zastosowano wycenę z parametryzacji '+workType.complexity);\r\n                    return workType.complexity;\r\n                }\r\n            }\r\n            this.alertService.error(\"Nie można wyliczyć raportu - nie znaleziono w bazie wyceny dla zadania o parametrach \"+officeCode+\",\"+order.typeCode+\",\"+order.complexityCode);\r\n            return 0;\r\n        }\r\n    }\r\n\r\n\r\n    private setMark(userData: UserReport, utilization: number): void {\r\n        if (utilization > 100) {\r\n            this.setIcon(userData, \"fa fa-trophy\", \"green\");\r\n        } else if (utilization >= 80) {\r\n            this.setIcon(userData, \"fa fa-thumbs-up\", \"green\");\r\n        } else if (utilization > 40 && utilization < 80) {\r\n            this.setIcon(userData, \"fa fa-bell\", \"orange\");\r\n        } else if (utilization > 0) {\r\n            this.setIcon(userData, \"fa fa-thumbs-down\", \"red\");\r\n        } else if (utilization == 0) {\r\n            this.setIcon(userData, \"fa fa-exclamation\", \"#902828\");\r\n        } else if (utilization == this.holidays) {\r\n            this.setIcon(userData, \"fa fa-hotel\", \"grey\");\r\n        } else if (utilization == this.noTimesheets) {\r\n            this.setIcon(userData, \"fa fa-question-circle\", \"darkgrey\");\r\n        }\r\n\r\n        if (!this.selectedReports || this.selectedReports.length < 1 || this.isReportSelected(userData.id, this.selectedReports)) {\r\n            if (utilization != this.holidays && utilization != this.noTimesheets) {\r\n                this.chartUtilizationData.datasets.push({label: userData.lastName, backgroundColor: userData.iconColor, borderColor:userData.iconColor, data: [utilization] });\r\n            }\r\n\r\n            if (userData.expectedTime > 0) {\r\n                this.chartShareData.datasets[0].data.push(userData.expectedTime);\r\n                this.chartShareData.datasets[0].backgroundColor.push(userData.iconColor);\r\n                this.chartShareData.labels.push(userData.firstName + \" \" + userData.lastName);\r\n            }\r\n\r\n            {\r\n                userData.earnedMoney = 0;\r\n                for(let order of userData.workOrders) {\r\n                    if (order.doneDate) {\r\n                        let doneDate: Date = this.toolsService.parseDate(order.doneDate);\r\n                        doneDate.setHours(0,0,0,0);\r\n                        if (this.afterDate.getTime() <= doneDate.getTime() && doneDate.getTime() <= this.beforeDate.getTime()) {\r\n                            userData.earnedMoney += order.price;\r\n                        } else {\r\n                            console.log(\"earnedMoney without : \"+doneDate +\" as it is not after \"+this.afterDate+ \" or before \"+this.beforeDate);\r\n                        }\r\n                    }\r\n                }\r\n                this.chartEarnedData.datasets.push({label: userData.lastName, backgroundColor: userData.iconColor, borderColor:userData.iconColor, data: [userData.earnedMoney] });\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    holidays: number = -1;\r\n    noTimesheets: number = -2;\r\n\r\n    private setIcon(userData: UserReport, icon: string, iconColor: string): void {\r\n        userData.icon = icon;\r\n        userData.iconColor = iconColor;\r\n    }\r\n\r\n    private isReportSelected(id:number, selectedReports:UserReport[]):boolean {\r\n        for(let selectedReport of selectedReports) {\r\n            if (selectedReport.id === id) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n\r\n    public getAvgMoney():number {\r\n        if (this.chartsReady && this.chartEarnedData.datasets && this.chartEarnedData.datasets.length > 0) {\r\n            let result: number = 0;\r\n            for(let dataset of this.chartEarnedData.datasets) {\r\n                result += +dataset.data[0];\r\n            }\r\n            return result/this.chartEarnedData.datasets.length;\r\n        }\r\n        return -1;\r\n    }\r\n\r\n    public getAvgUtilization(): number {\r\n        if (this.chartsReady && this.chartUtilizationData.datasets && this.chartUtilizationData.datasets.length > 0) {\r\n            let result: number = 0;\r\n            for(let dataset of this.chartUtilizationData.datasets) {\r\n                result += +dataset.data[0];\r\n            }\r\n            return result/this.chartUtilizationData.datasets.length;\r\n        }\r\n        return -1;\r\n    }\r\n\r\n    public filterReports(event): void {\r\n        console.log('onSelect event fired!'+JSON.stringify(event));\r\n        if (!event.type || event.type === 'checkbox') {\r\n            this.calculateLineCharts();\r\n        } else {\r\n            console.log('onSelect event fired and consumed!'+JSON.stringify(event));\r\n        }\r\n    }\r\n}\r\n\r\n\r\n","module.exports = \"\"","module.exports = \"<div class=\\\"ui-grid-row\\\">\\r\\n  <div class=\\\"ui-grid-col-12\\\">\\r\\n\\r\\n    <form #f=\\\"ngForm\\\" (submit)=\\\"search()\\\">\\r\\n\\r\\n      <div class=\\\"ui-grid ui-grid-responsive ui-fluid ui-grid-pad\\\">\\r\\n        <div class=\\\"ui-grid-row\\\"  style=\\\"margin-top: 20px;\\\">\\r\\n          <div class=\\\"ui-grid-col-1\\\"></div>\\r\\n          <div class=\\\"ui-grid-col-5\\\">\\r\\n            <p-dropdown placeholder=\\\"Ilość miesięcy...\\\" [style]=\\\"{'width': '100%'}\\\" id=\\\"NO_MONTHS\\\" name=\\\"NO_MONTHS\\\" [options]=\\\"possibleNoMonths\\\" [(ngModel)]=\\\"NO_MONTHS\\\" required autoWidth=\\\"false\\\" ></p-dropdown>\\r\\n          </div>\\r\\n          <div class=\\\"ui-grid-col-2\\\">\\r\\n            <button pButton type=\\\"button\\\" (click)=\\\"search()\\\" icon=\\\"fa fa-search\\\" label=\\\"Szukaj\\\" style=\\\"margin-left: 0px; min-width: 140px; max-width: 200px;\\\" [disabled]=\\\"!f?.valid\\\"></button>\\r\\n          </div>\\r\\n          <div class=\\\"ui-grid-col-5\\\"></div>\\r\\n\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n    </form>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n\\r\\n<div style=\\\"margin-top: 5px\\\" *ngIf=\\\"reports\\\" class=\\\"ui-g\\\">\\r\\n  <p-dataTable [value]=\\\"reports\\\" [rows]=\\\"20\\\" [paginator]=\\\"true\\\" [globalFilter]=\\\"gb\\\" #dt\\r\\n               selectionMode=\\\"multiple\\\" [(selection)]=\\\"selectedReports\\\"  (onRowSelect)=\\\"filterReports($event)\\\" (onRowUnselect)=\\\"filterReports($event)\\\" (onHeaderCheckboxToggle)=\\\"filterReports($event)\\\"\\r\\n               resizableColumns=\\\"true\\\" sortField=\\\"timeUtilizationPercentage\\\" sortOrder=\\\"-1\\\" [loading]=\\\"loading\\\" loadingIcon=\\\"fa fa-spinner\\\"\\r\\n               csvSeparator=\\\";\\\" exportFilename=\\\"Raport_Miesieczny\\\" [headerCheckboxToggleAllPages]=\\\"false\\\"\\r\\n          >\\r\\n    <p-header>\\r\\n      <div>\\r\\n        <i class=\\\"fa fa-search\\\"></i>\\r\\n        <input #gb type=\\\"text\\\" pInputText size=\\\"50\\\" placeholder=\\\"Filtruj\\\">\\r\\n      </div>\\r\\n    </p-header>\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"id\\\" header=\\\"id\\\" hidden=\\\"true\\\" ></p-column>\\r\\n\\r\\n    <p-column [style]=\\\"{'text-align':'center', 'width':'38px'}\\\" selectionMode=\\\"multiple\\\"></p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"iconColor\\\" header=\\\"Ocena\\\" [style]=\\\"{'text-align':'center', 'width':'70px'}\\\">\\r\\n      <ng-template let-col let-report=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n        <span class=\\\"ui-inputgroup-addon\\\" [style.color]=\\\"report.iconColor\\\"><i [class]=\\\"report.icon\\\"></i></span>\\r\\n      </ng-template>\\r\\n    </p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"timeUtilizationPercentage\\\" header=\\\"Wydajność\\\" [style]=\\\"{'text-align':'right'}\\\">\\r\\n      <ng-template let-col let-report=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n        <span *ngIf=\\\"report?.timeUtilizationPercentage >= 0\\\" style=\\\"padding: 3px\\\">{{report.timeUtilizationPercentage}}%</span>\\r\\n        <span *ngIf=\\\"report?.timeUtilizationPercentage === noTimesheets\\\" style=\\\"padding: 3px\\\">Brak deklaracji czasu pracy</span>\\r\\n        <span *ngIf=\\\"report?.timeUtilizationPercentage === holidays\\\" style=\\\"padding: 3px\\\">Urlop</span>\\r\\n      </ng-template>\\r\\n    </p-column>\\r\\n\\r\\n    <p-column [sortable]=\\\"true\\\" [filter]=\\\"true\\\" field=\\\"dateRange.beginDate\\\" header=\\\"Od\\\" >\\r\\n      <ng-template let-col let-userData=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n        <span>{{userData.dateRange.beginDate | date: 'yyyy-MM' }}</span>\\r\\n      </ng-template>\\r\\n    </p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" [filter]=\\\"true\\\" field=\\\"firstName\\\" header=\\\"Imie\\\" ></p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" [filter]=\\\"true\\\" field=\\\"lastName\\\" header=\\\"Nazwisko\\\" ></p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" [filter]=\\\"true\\\" field=\\\"role\\\" header=\\\"Rola\\\" [style]=\\\"{'text-align':'center'}\\\"></p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" [filter]=\\\"true\\\" field=\\\"office\\\" header=\\\"Biuro\\\" [style]=\\\"{'text-align':'center'}\\\"></p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"isFromPool\\\" header=\\\"Pula\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Y/N\\\" [style]=\\\"{'text-align':'center', 'width':'55px'}\\\">\\r\\n      <ng-template let-col let-user=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n        <span *ngIf=\\\"user[col.field]=='Y'\\\" [style.color]=\\\"'green'\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-users'\\\"></i></span>\\r\\n        <span *ngIf=\\\"user[col.field]!='Y'\\\" [style.color]=\\\"'grey'\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-street-view'\\\"></i></span>\\r\\n      </ng-template>\\r\\n    </p-column>\\r\\n\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"declaredTime\\\" header=\\\"Czas zadeklarowany\\\"  [style]=\\\"{'text-align':'right'}\\\">\\r\\n      <ng-template let-col let-report=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n        <span>{{report[col.field] | number: '1.2-2'}} godz.</span>\\r\\n      </ng-template>\\r\\n    </p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"expectedTime\\\" header=\\\"Czas zakładany\\\" [style]=\\\"{'text-align':'right'}\\\">\\r\\n      <ng-template let-col let-report=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n        <span>{{report[col.field] | number: '1.2-2'}} godz.</span>\\r\\n      </ng-template>\\r\\n    </p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"noOrdersDone\\\" header=\\\"Ukończonych WO\\\" [style]=\\\"{'text-align':'right'}\\\"></p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"earnedMoney\\\" header=\\\"Wypracowany obrót\\\" [style]=\\\"{'text-align':'right'}\\\">\\r\\n      <ng-template let-col let-report=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n        <span>{{report[col.field] | currency: 'PLN'}}</span>\\r\\n      </ng-template>\\r\\n    </p-column>\\r\\n\\r\\n\\r\\n\\r\\n    <ng-template pTemplate=\\\"emptymessage\\\">\\r\\n      Brak raportów w zakresie dat...\\r\\n    </ng-template>\\r\\n\\r\\n    <p-footer>\\r\\n      <div class=\\\"ui-grid ui-grid-responsive ui-fluid ui-grid-pad\\\">\\r\\n        <div class=\\\"ui-grid-row\\\"  style=\\\"margin-top: 15px;\\\">\\r\\n          <div class=\\\"ui-grid-col-5\\\"></div>\\r\\n          <div class=\\\"ui-grid-col-2\\\">\\r\\n            <button type=\\\"button\\\" pButton icon=\\\"fa fa-file-o\\\" iconPos=\\\"left\\\" label=\\\"CSV\\\" (click)=\\\"dt.exportCSV()\\\"></button>\\r\\n          </div>\\r\\n          <div class=\\\"ui-grid-col-5\\\"></div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </p-footer>\\r\\n\\r\\n  </p-dataTable>\\r\\n\\r\\n</div>\\r\\n\\r\\n<div *ngIf=\\\"chartsReady\\\">\\r\\n\\r\\n\\r\\n  <div class=\\\"ui-grid-row\\\" style=\\\"margin-left: 50px; margin-right: 50px; margin-top: 10px; margin-bottom: 10px;\\\">\\r\\n    <div class=\\\"ui-grid-col-6\\\">\\r\\n      <p-chart type=\\\"line\\\" [data]=\\\"lineUtilizationData\\\" [height]=\\\"'400'\\\" [options]=\\\"lineUtilizationOptions\\\"></p-chart>\\r\\n    </div>\\r\\n    <div class=\\\"ui-grid-col-6\\\">\\r\\n      <p-chart type=\\\"line\\\" [data]=\\\"lineEarnedData\\\" [height]=\\\"'400'\\\" [options]=\\\"personalEarnedOptions\\\"></p-chart>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"ui-grid-row\\\" style=\\\"margin-left: 50px; margin-right: 50px; margin-top: 10px; margin-bottom: 10px;\\\">\\r\\n    <div class=\\\"ui-grid-col-6\\\">\\r\\n      <p-chart type=\\\"line\\\" [data]=\\\"avgUtilizationData\\\" [height]=\\\"'300'\\\" [options]=\\\"lineUtilizationOptions\\\"></p-chart>\\r\\n    </div>\\r\\n    <div class=\\\"ui-grid-col-6\\\">\\r\\n      <p-chart type=\\\"line\\\" [data]=\\\"totalEarnedData\\\" [height]=\\\"'300'\\\" [options]=\\\"totalEarnedOptions\\\"></p-chart>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"ui-grid-row\\\" style=\\\"margin-left: 50px; margin-right: 50px; margin-top: 40px; margin-bottom: 10px;\\\">\\r\\n    <div class=\\\"ui-grid-col-6\\\">\\r\\n      <p>Instrukcja porównania regionów (ludzie z puli): Otwórz dwa okna przeglądarki, dla każdego z okien:</p>\\r\\n      <p>1. Filtruj region - kolumna \\\"Biuro\\\"</p>\\r\\n      <p>2. Filtruj tylko jeden miesiąc - kolumna \\\"Od\\\"</p>\\r\\n      <p>3. Filtruj tylko ludzi z puli</p>\\r\\n      <p>4. Zaznacz wszyskich, ew. przejdz po stronach doklikaj ręcznie</p>\\r\\n      <p>5. Sprawdź wykresy</p>\\r\\n    </div>\\r\\n    <div class=\\\"ui-grid-col-6\\\">\\r\\n      <p-chart type=\\\"line\\\" [data]=\\\"perCapitaEarnedData\\\" [height]=\\\"'300'\\\" [options]=\\\"perCapitaEarnedOptions\\\"></p-chart>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n\\r\\n</div>\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { DecimalPipe } from '@angular/common';\r\n\r\nimport { Observable }    from 'rxjs';\r\nimport { catchError, map, tap, delay, mergeMap } from 'rxjs/operators';\r\n\r\n\r\nimport { User, MonthlyUserReport, RelatedItem, Order, WorkType, CodeValue, Timesheet, DateRange } from '../_models/index';\r\nimport { WOService, RelatedItemService, UserService, DictService, AlertService, WorkTypeService, AuthenticationService, ToolsService, TimesheetService } from '../_services/index';\r\nimport { Calendar } from '../_models/calendar';\r\nimport { SelectItem } from 'primeng/primeng';\r\n\r\ndeclare var jquery:any;\r\ndeclare var $ :any;\r\n\r\n\r\n@Component({\r\n  selector: 'app-report-monthly-engineers',\r\n  templateUrl: './report-monthly-engineers.component.html',\r\n  styleUrls: ['./report-monthly-engineers.component.css']\r\n})\r\nexport class ReportMonthlyEngineersComponent implements OnInit {\r\n\r\n  NO_MONTHS: number = 6;\r\n  possibleNoMonths: SelectItem[];\r\n\r\n  holidays: number = -1;\r\n  noTimesheets: number = -2;\r\n\r\n  emptyData: number[] = [];\r\n\r\n  reports: MonthlyUserReport[];\r\n  selectedReports: MonthlyUserReport[];\r\n\r\n\r\n  workTypes: WorkType[];\r\n\r\n  chartsReady: boolean;\r\n  lineUtilizationData: any;\r\n  avgUtilizationData: any;\r\n  lineUtilizationOptions: any;\r\n  lineEarnedData: any;\r\n  personalEarnedOptions: any;\r\n  totalEarnedData: any;\r\n  totalEarnedOptions: any;\r\n  perCapitaEarnedData: any;\r\n  perCapitaEarnedOptions: any;\r\n\r\n  colors: string[] = ['#b52aaf','#b52aaf','#6a1341','#6a1341','#c5cb6b','#c5cb6b','#68870d','#68870d','#47781d','#47781d','#fa980c','#fa980c','#12999c','#12999c','#a16e65','#a16e65','#d445c8','#d445c8','#b652fa','#b652fa','#542148','#542148','#f225ba','#ec38b1','#ec38b1','#6c4b76','#6c4b76','#b8a541','#b8a541','#c30f52','#c30f52','#c2e58c','#c2e58c','#911215','#911215','#45cbed','#45cbed','#f8bbde','#f8bbde','#1501f6','#1501f6','#bc2533','#bc2533','#42c438','#42c438','#4ea38a','#4ea38a','#a7774d','#a7774d','#5d9311','#5d9311','#26a864','#26a864','#92427a','#92427a','#339a5a','#339a5a','#a2ab53','#a2ab53','#c35e87','#c35e87','#c20c91','#c20c91','#a69e52','#a69e52','#85a6fc','#85a6fc','#f591de','#f591de','#be7dea','#be7dea','#546305','#546305','#769c11','#769c11','#4c6e55','#4c6e55','#bf3e19','#bf3e19','#132776','#132776','#30750d','#30750d','#44d240','#44d240','#3c00ca','#3c00ca','#5e72c7','#5e72c7','#3f16cd','#3f16cd','#3af2ad','#3af2ad','#ee79fd','#ee79fd','#e515d1','#e515d1','#c8ae00','#c8ae00','#9aba2f','#9aba2f','#d79179','#d79179','#a5cc12','#a5cc12','#fce3a0','#fce3a0','#a73775','#a73775','#77171f','#77171f','#f4d5a6','#f4d5a6','#e115e7','#e115e7','#661889','#661889','#83f557','#83f557','#d9d96f','#d9d96f','#9dd18c','#9dd18c','#eddc80','#eddc80','#fb3dc4','#fb3dc4','#961066','#961066','#4035f0','#4035f0','#46061b','#46061b','#b547d4','#b547d4','#99ba47','#99ba47','#3bb9a8','#3bb9a8','#3cb96c','#3cb96c','#c98b7c','#c98b7c','#45cc62','#45cc62','#bc7a3b','#bc7a3b','#68ed99','#68ed99','#24c7b4','#24c7b4','#0bab07','#0bab07','#5fc181','#5fc181','#bef91a','#bef91a','#69f98a','#69f98a','#75378f','#75378f','#30cd4a','#30cd4a','#2d2cda','#2d2cda','#d7e491','#d7e491','#e3b221','#e3b221','#c0fbe5','#c0fbe5','#ea0bfa','#ea0bfa','#4ab834','#4ab834','#d1fc8e','#d1fc8e','#22b543','#22b543','#e44dae','#e44dae','#3d5634','#3d5634','#1a170b','#1a170b','#edce07','#edce07','#89f020','#89f020','#58c5e4','#58c5e4','#030c83','#030c83','#422819','#422819','#ce5be9','#ce5be9','#f225ba'];\r\n\r\n\r\n  constructor(private woService:WOService,\r\n              private userService:UserService,\r\n              private workTypeService:WorkTypeService,\r\n              private dictService:DictService,\r\n              private alertService:AlertService,\r\n              private toolsService:ToolsService,\r\n              private timesheetService: TimesheetService) {\r\n\r\n    this.dictService.init();\r\n    this.workTypeService.init();\r\n    this.initMounths();\r\n\r\n    this.lineUtilizationOptions = {\r\n      title: {\r\n        display: true,\r\n        text: 'Wydajność [%]',\r\n        fontSize: 16\r\n      },\r\n      legend: {\r\n        position: 'top'\r\n      }\r\n    };\r\n\r\n    this.personalEarnedOptions = {\r\n      title: {\r\n        display: true,\r\n        text: 'Indywidualny obrót [PLN]',\r\n        fontSize: 16\r\n      },\r\n      legend: {\r\n        position: 'top'\r\n      }\r\n    };\r\n\r\n    this.totalEarnedOptions = {\r\n      title: {\r\n        display: true,\r\n        text: 'Sumaryczny obrót [PLN]',\r\n        fontSize: 16\r\n      },\r\n      legend: {\r\n        position: 'top'\r\n      }\r\n    };\r\n\r\n    this.perCapitaEarnedOptions = {\r\n      title: {\r\n        display: true,\r\n        text: 'Obrót per capita w [PLN]',\r\n        fontSize: 16\r\n      },\r\n      legend: {\r\n        position: 'top'\r\n      }\r\n    };\r\n\r\n  }\r\n\r\n  private initMounths() {\r\n    this.possibleNoMonths = [];\r\n    for (let i = 6; i < 12; i++) {\r\n      let d = new Date();\r\n      d.setMonth(d.getMonth() - i);\r\n      let l:string = this.toolsService.formatDate(d, 'yyyy-MM');\r\n      this.possibleNoMonths.push({label: l, value: i});\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n    this.workTypeService.getAllWorkTypes().subscribe(workTypes => this.workTypes = workTypes);\r\n\r\n    this.search();\r\n  }\r\n\r\n  public filterReports(event): void {\r\n    console.log('onSelect event fired!'+JSON.stringify(event));\r\n    if (!event.type || event.type === 'checkbox') {\r\n      this.calculateLineCharts(this.reports);\r\n      console.log('DONE line for '+this.selectedReports.length);\r\n    } else {\r\n      console.log('onSelect event fired and consumed!'+JSON.stringify(event));\r\n    }\r\n  }\r\n\r\n  private initMonths(): DateRange[] {\r\n    console.log('NO_MONTHS '+this.NO_MONTHS);\r\n\r\n    let result : DateRange[] = [];\r\n\r\n    for (let i = this.NO_MONTHS; i >= 1; i--) {\r\n      let date = new Date();\r\n      date.setMonth(date.getMonth() - i);\r\n      let firstDay: Date = new Date(date.getFullYear(), date.getMonth(), 1);\r\n      let lastDay: Date = new Date(date.getFullYear(), date.getMonth() + 1, 0);\r\n      console.log('next period from '+this.toolsService.formatDate(firstDay, 'yyyy-MM-dd')+' to '+this.toolsService.formatDate(lastDay, 'yyyy-MM-dd'))\r\n      result.push(new DateRange(firstDay, lastDay));\r\n      this.lineUtilizationData.labels.push(this.toolsService.formatDate(firstDay, 'yyyy-MM'));\r\n      this.avgUtilizationData.labels.push(this.toolsService.formatDate(firstDay, 'yyyy-MM'));\r\n      this.lineEarnedData.labels.push(this.toolsService.formatDate(firstDay, 'yyyy-MM'));\r\n      this.totalEarnedData.labels.push(this.toolsService.formatDate(firstDay, 'yyyy-MM'));\r\n      this.perCapitaEarnedData.labels.push(this.toolsService.formatDate(firstDay, 'yyyy-MM'));\r\n      this.emptyData.push(0);\r\n    }\r\n    console.log('periods '+JSON.stringify(result));\r\n    return result;\r\n  }\r\n\r\n  public search() {\r\n\r\n    this.lineUtilizationData = {labels: [], datasets: []}\r\n    this.avgUtilizationData = {labels: [], datasets: []}\r\n    this.lineEarnedData = {labels: [], datasets: []}\r\n    this.totalEarnedData = {labels: [], datasets: []}\r\n    this.perCapitaEarnedData = {labels: [], datasets: []}\r\n    this.reports = [];\r\n\r\n    let monthsRange: DateRange[] = this.initMonths();\r\n    this.searchRecursive(monthsRange);\r\n\r\n  }\r\n\r\n  public searchRecursive(monthsRange: any[]) {\r\n\r\n    let monthRange: DateRange = monthsRange.shift();\r\n\r\n    let sAfterDate: string = this.toolsService.formatDate(monthRange.beginDate, 'yyyy-MM-dd');\r\n    let sBeforeDate: string = this.toolsService.formatDate(monthRange.endDate, 'yyyy-MM-dd');\r\n    console.log(\"Searching for \"+monthRange.beginDate+\"=\"+sAfterDate+\", \"+monthRange.endDate+\"=\"+sBeforeDate);\r\n\r\n\r\n    this.userService.getUtilizationReportData(sAfterDate, sBeforeDate)\r\n        .pipe(map(reportData => this.mapEngineers(reportData, monthRange)))\r\n        .subscribe(reportDataEnhanced => this.callAndFillTimesheets(reportDataEnhanced, monthsRange, monthRange));\r\n  }\r\n\r\n  private callAndFillTimesheets(reportData:MonthlyUserReport[], monthsRange:DateRange[], monthRange: DateRange):void {\r\n    console.log('callAndFillTimesheets '+reportData.length);\r\n\r\n    let sAfterDate: string = this.toolsService.formatDate(monthRange.beginDate, 'yyyy-MM-dd');\r\n    let sBeforeDate: string = this.toolsService.formatDate(monthRange.endDate, 'yyyy-MM-dd');\r\n\r\n    this.timesheetService.getByDates(sAfterDate, sBeforeDate)\r\n      .subscribe( timesheets => this.fillTimesheets(timesheets, reportData, monthsRange) );\r\n  }\r\n\r\n  private mapEngineers(reportData: MonthlyUserReport[], monthRange: DateRange): MonthlyUserReport[] {\r\n    console.log(\"Got \" + reportData.length + \" reports!\");\r\n\r\n    if (reportData && reportData.length > 0) {\r\n      for (let report of reportData) {\r\n        report.dateRange = monthRange;\r\n        report.office = this.dictService.getOffice(report.officeCode);\r\n        report.role = [];\r\n        for(let roleCode of report.roleCode) {\r\n          console.log('debug role '+roleCode+'  '+JSON.stringify(report.roleCode)+ ' d:'+this.dictService.getRole(roleCode));\r\n          report.role.push(this.dictService.getRole(roleCode));\r\n        }\r\n        report.declaredTime = 0;\r\n      }\r\n    } else {\r\n      this.alertService.warn(\"Nie znaleziono inżynierów!\");\r\n    }\r\n\r\n    console.log(\"example \" + JSON.stringify(reportData[0]) + \" reports!\");\r\n    return reportData;\r\n  }\r\n\r\n  private fillTimesheets(timesheets:Timesheet[], reportData: MonthlyUserReport[], monthsRange: any[]):void {\r\n    if (timesheets && timesheets.length > 0) {\r\n      for (let t of timesheets) {\r\n        inner: for (let report of reportData) {\r\n          if (report.id === t.personId && t.isLeave !== 'Y') {\r\n            report.declaredTime += t.usedTime;\r\n            break inner;\r\n          }\r\n        }\r\n      }\r\n\r\n      for (let report of reportData) {\r\n        this.calculateUtilization(report);\r\n      }\r\n    } else {\r\n      this.alertService.warn(\"Nie znaleziono timesheetów w tym zakresie dat!\");\r\n    }\r\n\r\n    console.log('Adding completed '+reportData.length+' reports for '+this.toolsService.formatDate(reportData[0].dateRange.beginDate, 'yyyy-MM'));\r\n    for (let report of reportData) {\r\n      this.reports.push(report);\r\n    }\r\n\r\n    if (monthsRange.length > 0) {\r\n      this.searchRecursive(monthsRange);\r\n    } else {\r\n      this.calculateLineCharts(this.reports);\r\n      this.reports = JSON.parse(JSON.stringify(this.reports));\r\n    }\r\n  }\r\n\r\n  private calculateLineCharts(reports:MonthlyUserReport[]):void {\r\n\r\n    this.chartsReady = false;\r\n\r\n    this.lineUtilizationData.datasets = [];\r\n    this.lineEarnedData.datasets = [];\r\n    this.avgUtilizationData.datasets = [];\r\n    this.totalEarnedData.datasets = [];\r\n    this.perCapitaEarnedData.datasets = [];\r\n\r\n\r\n    let users: string[] = this.getUsers(reports);\r\n    console.log('all users '+users.length);\r\n    users = users.filter(user => this.filterDeselected(user));\r\n    console.log('got '+users.length+' users');\r\n\r\n    for(let user of users) {\r\n      this.lineUtilizationData.datasets.push({label: user, data: JSON.parse(JSON.stringify(this.emptyData)), fill: false});\r\n      this.lineEarnedData.datasets.push({label: user, data: JSON.parse(JSON.stringify(this.emptyData)), fill: false});\r\n    }\r\n\r\n    for (let report of reports) {\r\n      let xLabel: string = this.toolsService.formatDate(report.dateRange.beginDate, 'yyyy-MM');\r\n      let index: number = this.getLabelIndex(this.lineUtilizationData, xLabel);\r\n      if (index >= 0) {\r\n        for (let dataset of this.lineUtilizationData.datasets) {\r\n          if (dataset.label === this.getUserLabel(report)) {\r\n            dataset.data[index] = report.timeUtilizationPercentage;\r\n            report.id < this.colors.length ? dataset.borderColor = this.colors[report.id] : dataset.borderColor = '#0000FF';\r\n          }\r\n        }\r\n        for (let dataset of this.lineEarnedData.datasets) {\r\n          if (dataset.label === this.getUserLabel(report)) {\r\n            dataset.data[index] = report.earnedMoney;\r\n            report.id < this.colors.length ? dataset.borderColor = this.colors[report.id] : dataset.borderColor = '#0000FF';\r\n          }\r\n        }\r\n      } else {\r\n        console.error('Not found label '+xLabel+'!');\r\n      }\r\n    }\r\n\r\n    let utilizationAvg: number[] = JSON.parse(JSON.stringify(this.emptyData));\r\n    for (let dataset of this.lineUtilizationData.datasets) {\r\n      for (let i=0; i< dataset.data.length; i++) {\r\n        utilizationAvg[i] += (dataset.data[i] / this.lineUtilizationData.datasets.length) ;\r\n      }\r\n    }\r\n    this.avgUtilizationData.datasets.push({label: 'ŚREDNIA', data: utilizationAvg, fill: false, borderColor: '#0000FF'});\r\n\r\n    let totalEarned: number[] = JSON.parse(JSON.stringify(this.emptyData));\r\n    let perCapitaEarned: number[] = JSON.parse(JSON.stringify(this.emptyData));\r\n    for (let dataset of this.lineEarnedData.datasets) {\r\n      for (let i=0; i< dataset.data.length; i++) {\r\n        totalEarned[i] += dataset.data[i];\r\n      }\r\n    }\r\n    this.totalEarnedData.datasets.push({label: 'RAZEM', data: totalEarned, fill: false, borderColor: '#00FF00'});\r\n\r\n    for (let i=0; i< totalEarned.length; i++) {\r\n      perCapitaEarned[i] += (totalEarned[i] / this.lineEarnedData.datasets.length);\r\n    }\r\n    this.perCapitaEarnedData.datasets.push({label: 'ŚREDNIA PER CAPITA ('+this.lineEarnedData.datasets.length+')', data: perCapitaEarned, fill: false, borderColor: '#00FF00'});\r\n\r\n\r\n    this.lineUtilizationData = JSON.parse(JSON.stringify(this.lineUtilizationData));\r\n    this.avgUtilizationData = JSON.parse(JSON.stringify(this.avgUtilizationData));\r\n    this.lineEarnedData = JSON.parse(JSON.stringify(this.lineEarnedData));\r\n    this.totalEarnedData = JSON.parse(JSON.stringify(this.totalEarnedData));\r\n    this.perCapitaEarnedData = JSON.parse(JSON.stringify(this.perCapitaEarnedData));\r\n    this.chartsReady = true;\r\n  }\r\n\r\n  private filterDeselected(user:string):boolean {\r\n    if (!this.selectedReports || this.selectedReports.length < 1) {\r\n      return true;\r\n    }\r\n\r\n    for(let report of this.selectedReports) {\r\n      if(user === this.getUserLabel(report)) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  private getUserLabel(report:MonthlyUserReport): string {\r\n      return report.firstName+' '+report.lastName;\r\n  }\r\n\r\n  private getUsers(reports:MonthlyUserReport[]) {\r\n    let users: string[] = [];\r\n    for (let report of reports) {\r\n      let username: string = this.getUserLabel(report);\r\n      if (users.indexOf(username) === -1) {\r\n        users.push(username);\r\n      }\r\n    }\r\n    return users;\r\n  }\r\n\r\n  private calculateUtilization(userData: MonthlyUserReport): void {\r\n    if (userData.workOrders && userData.workOrders.length > 0) {\r\n      userData.expectedTime = 0;\r\n      userData.noOrdersDone = 0;\r\n\r\n      for (let order of userData.workOrders) {\r\n        order.status = this.dictService.getWorkStatus(order.statusCode);\r\n\r\n        if (order.doneDate) {\r\n          userData.expectedTime += this.getEffort(userData.officeCode, order);\r\n          userData.noOrdersDone++;\r\n        } else {\r\n          console.log(\"Order \"+order.workNo +\" has not been completed yet, thus is not taken into account!\");\r\n        }\r\n      }\r\n\r\n\r\n      if (userData.declaredTime === 0) {\r\n        this.alertService.warn(\"Nie wypełnione deklaracje czasu pracy dla \" + userData.firstName + \" \" + userData.lastName);\r\n        userData.timeUtilizationPercentage = this.noTimesheets;\r\n        this.setMark(userData);\r\n      } else {\r\n        let utilization: number = Math.round(((100 * userData.expectedTime) / userData.declaredTime));\r\n        userData.timeUtilizationPercentage = utilization;\r\n        this.setMark(userData);\r\n      }\r\n\r\n\r\n    } else if (!userData.declaredTime || userData.declaredTime === 0) {\r\n      userData.timeUtilizationPercentage = this.holidays; //holidays\r\n      this.setMark(userData);\r\n      userData.expectedTime = 0;\r\n      userData.noOrdersDone = 0;\r\n    } else {\r\n      userData.timeUtilizationPercentage = 0; //nothing done\r\n      this.setMark(userData);\r\n      userData.expectedTime = 0;\r\n      userData.noOrdersDone = 0;\r\n    }\r\n\r\n  }\r\n\r\n  private getEffort(officeCode: string, order: Order): number {\r\n    if (order.typeCode === '13.0') {\r\n      console.log('Ignore complexity of order '+order.workNo);\r\n      return 0;\r\n    }\r\n\r\n    if (order.complexity != null) {\r\n      return order.complexity;\r\n    } else {\r\n\r\n      for(let workType of this.workTypes) {\r\n        if (workType.complexityCode === order.complexityCode && workType.typeCode === order.typeCode && workType.officeCode === officeCode) {\r\n          this.alertService.warn('Brak wyceny dla '+order.workNo+ ' zastosowano wycenę z parametryzacji '+workType.complexity);\r\n          return workType.complexity;\r\n        }\r\n      }\r\n      this.alertService.error(\"Nie można wyliczyć raportu - nie znaleziono w bazie wyceny dla zadania o parametrach \"+officeCode+\",\"+order.typeCode+\",\"+order.complexityCode);\r\n      return 0;\r\n    }\r\n  }\r\n\r\n\r\n  private setMark(userData: MonthlyUserReport): void {\r\n    let utilization: number = userData.timeUtilizationPercentage;\r\n    if (utilization > 100) {\r\n      this.setIcon(userData, \"fa fa-trophy\", \"green\");\r\n    } else if (utilization >= 80) {\r\n      this.setIcon(userData, \"fa fa-thumbs-up\", \"green\");\r\n    } else if (utilization > 40 && utilization < 80) {\r\n      this.setIcon(userData, \"fa fa-bell\", \"orange\");\r\n    } else if (utilization > 0) {\r\n      this.setIcon(userData, \"fa fa-thumbs-down\", \"red\");\r\n    } else if (utilization == 0) {\r\n      this.setIcon(userData, \"fa fa-exclamation\", \"#902828\");\r\n    } else if (utilization == this.holidays) {\r\n      this.setIcon(userData, \"fa fa-hotel\", \"grey\");\r\n    } else if (utilization == this.noTimesheets) {\r\n      this.setIcon(userData, \"fa fa-question-circle\", \"darkgrey\");\r\n    }\r\n\r\n    let pLabel: string = userData.lastName+'_'+this.toolsService.formatDate(userData.dateRange.beginDate, 'yyyy-MM');\r\n    console.log('Processing report pLabel='+pLabel);\r\n\r\n    userData.earnedMoney = 0;\r\n    for(let order of userData.workOrders) {\r\n      if (order.doneDate) {\r\n        let doneDate: Date = this.toolsService.parseDate(order.doneDate);\r\n        doneDate.setHours(0,0,0,0);\r\n\r\n        if (userData.dateRange && userData.dateRange.beginDate && userData.dateRange.endDate && userData.dateRange.beginDate.getTime() <= doneDate.getTime() && doneDate.getTime() <= userData.dateRange.endDate.getTime()) {\r\n          userData.earnedMoney += order.price;\r\n         } else {\r\n          console.log(\"earnedMoney without : \"+doneDate +\" between \"+JSON.stringify(userData.dateRange));\r\n        }\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  private setIcon(userData: MonthlyUserReport, icon: string, iconColor: string): void {\r\n    userData.icon = icon;\r\n    userData.iconColor = iconColor;\r\n  }\r\n\r\n  private isReportSelected(id:number, selectedReports:MonthlyUserReport[]):boolean {\r\n    for(let selectedReport of selectedReports) {\r\n      if (selectedReport.id === id) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private getLabelIndex(lineData: any, xLabel: string): number {\r\n    for(let i=0; i < lineData.labels.length; i++) {\r\n      if (lineData.labels[i] === xLabel) {\r\n        return i;\r\n      }\r\n    }\r\n    return -1;\r\n  }\r\n}\r\n\r\n\r\n\r\n","module.exports = \"\"","module.exports = \"<p-panel header=\\\"Zlecenia oczekujące akceptacji\\\">\\r\\n\\r\\n  <div class=\\\"ui-grid-row\\\">\\r\\n\\r\\n    <div class=\\\"ui-grid-col-5\\\">\\r\\n      <p-fieldset legend=\\\"Obiekt\\\" *ngIf=\\\"selectedOrder?.relatedItems[0]?.itemNo || selectedOrder?.relatedItems[0]?.address || selectedOrder?.relatedItems[0]?.mdBuildingType || selectedOrder?.relatedItems[0]?.description || selectedOrder?.relatedItems[0]?.mdConstructionCategory\\\">\\r\\n        <div class=\\\"ui-grid-row\\\"><div *ngIf=\\\"selectedOrder?.relatedItems[0]?.itemNo\\\" class=\\\"ui-grid-col-4\\\">Numer:</div><div class=\\\"ui-grid-col-8\\\">{{selectedOrder?.relatedItems[0]?.itemNo}}</div></div>\\r\\n        <div class=\\\"ui-grid-row\\\"><div *ngIf=\\\"selectedOrder?.relatedItems[0]?.address\\\" class=\\\"ui-grid-col-4\\\">Adres:</div><div class=\\\"ui-grid-col-8\\\">{{selectedOrder?.relatedItems[0]?.address}}</div></div>\\r\\n        <div class=\\\"ui-grid-row\\\"><div *ngIf=\\\"selectedOrder?.relatedItems[0]?.mdBuildingType\\\" class=\\\"ui-grid-col-4\\\">Typ budynku:</div><div class=\\\"ui-grid-col-8\\\">{{selectedOrder?.relatedItems[0]?.mdBuildingType}}</div></div>\\r\\n        <div class=\\\"ui-grid-row\\\"><div *ngIf=\\\"selectedOrder?.relatedItems[0]?.mdConstructionCategory\\\" class=\\\"ui-grid-col-4\\\">Konstrukcja:</div><div class=\\\"ui-grid-col-8\\\">{{selectedOrder?.relatedItems[0]?.mdConstructionCategory}}</div></div>\\r\\n        <div class=\\\"ui-grid-row\\\"><div *ngIf=\\\"selectedOrder?.relatedItems[0]?.description\\\" class=\\\"ui-grid-col-4\\\">Opis:</div><div class=\\\"ui-grid-col-8\\\">{{selectedOrder?.relatedItems[0]?.description}}</div></div>\\r\\n        <div class=\\\"ui-grid-row\\\"><div *ngIf=\\\"selectedOrder?.relatedItems[0]?.creationDate\\\" class=\\\"ui-grid-col-4\\\">Dodano:</div><div class=\\\"ui-grid-col-8\\\">{{selectedOrder?.relatedItems[0]?.creationDate}}</div></div>\\r\\n      </p-fieldset>\\r\\n    </div>\\r\\n    <div class=\\\"ui-grid-col-7\\\">\\r\\n      <p-fieldset legend=\\\"Detale zlecenia\\\" *ngIf=\\\"selectedOrder?.assigneeFull?.length > 0 || selectedOrder?.comment\\\">\\r\\n        <div class=\\\"ui-grid-row\\\" *ngIf=\\\"selectedOrder?.creationDate\\\">\\r\\n          <div class=\\\"ui-grid-col-12\\\">Dodano: <u>{{selectedOrder?.creationDate}}</u></div>\\r\\n        </div>\\r\\n        <div class=\\\"ui-grid-row\\\" *ngIf=\\\"selectedOrder?.lastModDate\\\">\\r\\n          <div class=\\\"ui-grid-col-12\\\">Modyfikacja: <u>{{selectedOrder?.lastModDate}}</u></div>\\r\\n        </div>\\r\\n\\r\\n        <hr *ngIf=\\\"selectedOrder?.creationDate || selectedOrder?.lastModDate\\\">\\r\\n        <div *ngIf=\\\"selectedOrder?.assigneeFull && selectedOrder?.assigneeFull?.length > 0\\\" class=\\\"ui-grid-row\\\"><strong>Wykonawcy</strong></div>\\r\\n        <div class=\\\"ui-grid-row\\\" *ngFor=\\\"let a of selectedOrder.assigneeFull\\\">\\r\\n          <div class=\\\"ui-grid-col-12\\\"><u>{{a.email}}</u></div>\\r\\n          <div class=\\\"ui-grid-col-12\\\">{{a.firstName}} {{a.lastName}}</div>\\r\\n          <div class=\\\"ui-grid-col-12\\\">{{a.role}} @ {{a.office}}</div>\\r\\n        </div>\\r\\n        <hr *ngIf=\\\"selectedOrder?.assigneeFull && selectedOrder?.assigneeFull?.length > 0\\\">\\r\\n\\r\\n        <div class=\\\"ui-grid-row\\\" *ngIf=\\\"selectedOrder?.comment\\\">\\r\\n          <div class=\\\"ui-grid-col-12\\\">\\r\\n            <textarea pInputTextarea disabled [(ngModel)]=\\\"selectedOrder.comment\\\" [rows]=\\\"3\\\" [cols]=\\\"30\\\"></textarea>\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=\\\"ui-grid-row\\\" *ngIf=\\\"selectedOrder?.description\\\">\\r\\n          <div class=\\\"ui-grid-col-12\\\">\\r\\n            <textarea pInputTextarea disabled [(ngModel)]=\\\"selectedOrder.description\\\" [rows]=\\\"3\\\" [cols]=\\\"30\\\"></textarea></div>\\r\\n        </div>\\r\\n      </p-fieldset>\\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n\\r\\n  <div style=\\\"margin-top: 5px\\\" *ngIf=\\\"orders\\\" class=\\\"ui-g\\\">\\r\\n    <p-dataTable [value]=\\\"orders\\\" [rows]=\\\"20\\\" [paginator]=\\\"true\\\"  [globalFilter]=\\\"gb\\\" #dt dataKey=\\\"id\\\"\\r\\n                 csvSeparator=\\\";\\\" exportFilename=\\\"niezaakceptowane.csv\\\"\\r\\n                 selectionMode=\\\"single\\\" [(selection)]=\\\"selectedOrder\\\" (onRowSelect)=\\\"onRowSelect($event)\\\"\\r\\n                 resizableColumns=\\\"true\\\" sortField=\\\"lastModDate\\\" sortOrder=\\\"-1\\\" [loading]=\\\"loading\\\" loadingIcon=\\\"fa fa-spinner\\\" [contextMenu]=\\\"cm\\\">\\r\\n      <p-header>\\r\\n        <div>\\r\\n          <i class=\\\"fa fa-search\\\"></i>\\r\\n          <input #gb type=\\\"text\\\" pInputText size=\\\"50\\\" placeholder=\\\"Filtruj\\\">\\r\\n        </div>\\r\\n      </p-header>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"workNo\\\" header=\\\"Zlecenie\\\" ></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"status\\\" header=\\\"Status\\\" ></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"type\\\" header=\\\"Typ\\\" ></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"complexityCode\\\" header=\\\"Złożoność\\\" [style]=\\\"{'text-align':'center'}\\\">\\r\\n        <ng-template let-col let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          <span class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"order[col.field]=='STD' ? 'fa fa-thumbs-o-up': 'fa fa-life-bouy'\\\"></i></span>\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"mdCapex\\\" header=\\\"CAPEX\\\" ></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"price\\\" header=\\\"Wartość\\\" styleClass=\\\"text-right\\\"></p-column>\\r\\n\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"comment\\\" header=\\\"Komentarz\\\" hiddem=\\\"true\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"description\\\" header=\\\"Opis\\\" hiddem=\\\"true\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"lastModDate\\\" header=\\\"Modyfikacja\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"creationDate\\\" header=\\\"Dodano\\\"></p-column>\\r\\n\\r\\n      <!-- search by invisible colums, display in one row -->\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"itemNo\\\" header=\\\"Numer obiektu\\\" ></p-column>\\r\\n      <!-- search by invisible colums flatten into order by wo.service -->\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"itemBuildingType\\\" header=\\\"Typ obiektu\\\"   hidden=\\\"true\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"itemConstructionCategory\\\" header=\\\"Konstukcja\\\"   hidden=\\\"true\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"itemAddress\\\" header=\\\"Adres\\\"  hidden=\\\"true\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"itemDescription\\\" header=\\\"Opis obiektu\\\"  hidden=\\\"true\\\"></p-column>\\r\\n\\r\\n      <ng-template pTemplate=\\\"emptymessage\\\">\\r\\n        Brak zleceń w stanie wydane...\\r\\n      </ng-template>\\r\\n\\r\\n      <p-footer>\\r\\n        <div class=\\\"ui-grid ui-grid-responsive ui-fluid ui-grid-pad\\\">\\r\\n          <div class=\\\"ui-grid-row\\\"  style=\\\"margin-top: 15px;\\\">\\r\\n            <div class=\\\"ui-grid-col-5\\\"></div>\\r\\n\\r\\n            <div class=\\\"ui-grid-col-2\\\">\\r\\n              <button type=\\\"button\\\" pButton icon=\\\"fa fa-file-o\\\" iconPos=\\\"left\\\" label=\\\"raport\\\" (click)=\\\"dt.exportCSV()\\\"></button>\\r\\n            </div>\\r\\n            <div class=\\\"ui-grid-col-5\\\"></div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </p-footer>\\r\\n\\r\\n    </p-dataTable>\\r\\n\\r\\n    <p-contextMenu #cm [model]=\\\"items\\\"></p-contextMenu>\\r\\n  </div>\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n</p-panel>\"","import { Component, OnInit } from '@angular/core';\r\n\r\nimport { Observable } from 'rxjs';\r\n\r\n\r\nimport { User, RelatedItem, Order, WorkType, CodeValue } from '../_models/index';\r\nimport { WOService, RelatedItemService, UserService, DictService, AlertService, WorkTypeService, AuthenticationService, ToolsService } from '../_services/index';\r\nimport { MenuItem } from 'primeng/primeng';\r\n\r\n@Component({\r\n    selector: 'app-report-unaccepted-orders',\r\n    templateUrl: './report-unaccepted-orders.component.html',\r\n    styleUrls: ['./report-unaccepted-orders.component.css']\r\n})\r\nexport class ReportUnacceptedOrdersComponent implements OnInit {\r\n\r\n    engineers:User[] = [];\r\n\r\n    items:MenuItem[] = [];\r\n\r\n    orders:Order[];\r\n    selectedOrder:Order;\r\n\r\n    constructor(private woService:WOService,\r\n                private userService:UserService,\r\n                private dictService:DictService,\r\n                private workTypeService: WorkTypeService,\r\n                private toolsService:ToolsService) {\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.dictService.init();\r\n        this.workTypeService.init();\r\n        this.userService.getEngineers().subscribe(engineers => this.engineers = engineers);\r\n\r\n        this.items = [\r\n            {label: 'Usuń z raportu', icon: 'fa fa-minus-circle', command: (event) => this.remove()}\r\n        ];\r\n\r\n        this.search();\r\n    }\r\n\r\n    search() {\r\n        this.woService.getOrdersByStatus(\"IS\"\r\n        ).subscribe(orders => this.orders = orders);\r\n    }\r\n\r\n    onRowSelect(event) {\r\n        console.log(\"selected row!\" + JSON.stringify(this.selectedOrder));\r\n        this.selectedOrder.assigneeFull = this.toolsService.getEngineers(this.selectedOrder.assignee, this.engineers);\r\n    }\r\n\r\n    private remove():void {\r\n        let newOrders: Order[] = [];\r\n        console.log(\"Removing\");\r\n        for (let order of this.orders) {\r\n            if (order.id != this.selectedOrder.id) {\r\n                newOrders.push(order);\r\n            }\r\n        }\r\n        this.orders = newOrders;\r\n    }\r\n}\r\n","module.exports = \"\"","module.exports = \"<p-fieldset legend=\\\"Statusy\\\">\\r\\n  <div class=\\\"ui-grid ui-grid-responsive ui-fluid ui-grid-pad\\\">\\r\\n    <div class=\\\"ui-grid-row\\\"><div class=\\\"ui-grid-col-4\\\"><span class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"getStatusIcon('OP')\\\"></i> {{dictService.getWorkStatus('OP')}}</span></div><div class=\\\"ui-grid-col-8\\\">Wpisane do systemu, czeka na przypisanie</div></div>\\r\\n    <div class=\\\"ui-grid-row\\\"><div class=\\\"ui-grid-col-4\\\"><span class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"getStatusIcon('AS')\\\"></i> {{dictService.getWorkStatus('AS')}}</span></div><div class=\\\"ui-grid-col-8\\\">Przypisane do projektanta, czeka na zrealizowanie</div></div>\\r\\n    <div class=\\\"ui-grid-row\\\"><div class=\\\"ui-grid-col-4\\\"><span class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"getStatusIcon('CO')\\\"></i> {{dictService.getWorkStatus('CO')}}</span></div><div class=\\\"ui-grid-col-8\\\">Wykonane przez projektanta, czeka na przekazanie dokumentacji</div></div>\\r\\n    <div class=\\\"ui-grid-row\\\"><div class=\\\"ui-grid-col-4\\\"><span class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"getStatusIcon('IS')\\\"></i> {{dictService.getWorkStatus('IS')}}</span></div><div class=\\\"ui-grid-col-8\\\">Formalności zakończone, w poczekalni do protokołu</div></div>\\r\\n    <div class=\\\"ui-grid-row\\\"><div class=\\\"ui-grid-col-4\\\"><span class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"getStatusIcon('CL')\\\"></i> {{dictService.getWorkStatus('CL')}}</span></div><div class=\\\"ui-grid-col-8\\\">Zawarte w protokole</div></div>\\r\\n    <div class=\\\"ui-grid-row\\\"><div class=\\\"ui-grid-col-4\\\"><span class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"getStatusIcon('SU')\\\"></i> {{dictService.getWorkStatus('SU')}}</span></div><div class=\\\"ui-grid-col-8\\\">Zawieszone - przyczynę podać w polu komentarz</div></div>\\r\\n    <div class=\\\"ui-grid-row\\\"><div class=\\\"ui-grid-col-4\\\"><span class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"getStatusIcon('CA')\\\"></i> {{dictService.getWorkStatus('CA')}}</span></div><div class=\\\"ui-grid-col-8\\\">Anulowane, usunięte</div></div>\\r\\n\\r\\n  </div>\\r\\n</p-fieldset>\"","import { Component, OnInit } from '@angular/core';\r\n\r\nimport { User, RelatedItem, Order, WorkType, CodeValue } from '../_models/index';\r\nimport { WOService, RelatedItemService, UserService, DictService, AlertService, WorkTypeService, AuthenticationService, ToolsService } from '../_services/index';\r\n\r\n\r\n@Component({\r\n  selector: 'app-status-details',\r\n  templateUrl: './status-details.component.html',\r\n  styleUrls: ['./status-details.component.css']\r\n})\r\nexport class StatusDetailsComponent implements OnInit {\r\n\r\n  constructor(private toolsService: ToolsService, public dictService: DictService) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  public getStatusIcon(statusCode: string): string {\r\n    return this.toolsService.getStatusIcon(statusCode);\r\n  }\r\n\r\n}\r\n","module.exports = \"\"","module.exports = \"\\r\\n\\r\\n<p-panel header=\\\"Deklaracje czasu pracy\\\">\\r\\n\\r\\n  <div class=\\\"ui-grid-row\\\">\\r\\n    <div class=\\\"ui-grid-col-7\\\">\\r\\n      <p-fieldset legend=\\\"Listy obecności\\\">\\r\\n        <form #f=\\\"ngForm\\\" (submit)=\\\"search()\\\">\\r\\n\\r\\n          <div class=\\\"ui-grid ui-grid-responsive ui-fluid ui-grid-pad\\\">\\r\\n            <div class=\\\"ui-grid-row\\\"  style=\\\"margin-top: 20px;\\\">\\r\\n              <div class=\\\"ui-grid-col-1\\\"><label style=\\\"float: right\\\" for=\\\"afterDate\\\">Od</label></div>\\r\\n              <div class=\\\"ui-grid-col-3\\\">\\r\\n                <!--<p-calendar id=\\\"date\\\" name=\\\"reportDate\\\" (onSelect)=\\\"search()\\\" [(ngModel)]=\\\"reportDate\\\" showIcon=\\\"true\\\" dateFormat=\\\"dd.mm.yy\\\" utc=\\\"true\\\"></p-calendar>-->\\r\\n                <p-calendar id=\\\"afterDate\\\" name=\\\"afterDate\\\" [locale]=\\\"pl\\\" [(ngModel)]=\\\"afterDate\\\" showIcon=\\\"true\\\" dateFormat=\\\"dd.mm.yy\\\" utc=\\\"true\\\"></p-calendar>\\r\\n              </div>\\r\\n              <div class=\\\"ui-grid-col-1\\\"><label style=\\\"float: right\\\" for=\\\"beforeDate\\\">Do</label></div>\\r\\n              <div class=\\\"ui-grid-col-3\\\">\\r\\n                <!--<p-calendar id=\\\"date\\\" name=\\\"reportDate\\\" (onSelect)=\\\"search()\\\" [(ngModel)]=\\\"reportDate\\\" showIcon=\\\"true\\\" dateFormat=\\\"dd.mm.yy\\\" utc=\\\"true\\\"></p-calendar>-->\\r\\n                <p-calendar id=\\\"beforeDate\\\" name=\\\"beforeDate\\\" [locale]=\\\"pl\\\" [(ngModel)]=\\\"beforeDate\\\" showIcon=\\\"true\\\" dateFormat=\\\"dd.mm.yy\\\" utc=\\\"true\\\"></p-calendar>\\r\\n              </div>\\r\\n              <div class=\\\"ui-grid-col-4\\\">\\r\\n                <button pButton type=\\\"button\\\" (click)=\\\"search()\\\" icon=\\\"fa fa-search\\\" label=\\\"Szukaj\\\" style=\\\"margin-left: 0px; min-width: 140px; max-width: 200px;\\\" [disabled]=\\\"!f?.valid\\\"></button>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n        </form>\\r\\n      </p-fieldset>\\r\\n    </div>\\r\\n    <div *ngIf=\\\"user.roleCode.indexOf('OP') != -1\\\" class=\\\"ui-grid-col-3\\\">\\r\\n      <p-fieldset legend=\\\"Urlopy\\\">\\r\\n        <user-leave *ngIf=\\\"users?.length > 0\\\" [users]=\\\"users\\\"></user-leave>\\r\\n      </p-fieldset>\\r\\n    </div>\\r\\n    <div *ngIf=\\\"user.roleCode.indexOf('OP') != -1 || user.roleCode.indexOf('MG') != -1\\\" class=\\\"ui-grid-col-2\\\">\\r\\n      <p-fieldset legend=\\\"Raporty miesięczne\\\">\\r\\n        <button pButton type=\\\"button\\\" (click)=\\\"router.navigate(['/timeStats'])\\\" icon=\\\"fa fa-search\\\" label=\\\"Podsumowanie\\\" style=\\\"margin-top: 30px; margin-left: 0px; min-width: 140px; max-width: 200px;\\\"></button>\\r\\n      </p-fieldset>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"ui-g\\\" *ngIf=\\\"usersWithSheets\\\" style=\\\"margin-top: 5px; margin-right: 10px;\\\">\\r\\n    <p-dataTable [editable]=\\\"true\\\" (onEditInit)=\\\"onEditInit($event)\\\" (onEdit)=\\\"onEdit($event)\\\" (onEditCancel)=\\\"onEditCancel($event)\\\" (onEditComplete)=\\\"onEditComplete($event)\\\" [value]=\\\"usersWithSheets\\\" [rows]=\\\"20\\\" [paginator]=\\\"true\\\" [globalFilter]=\\\"gb\\\" #dt dataKey=\\\"tabid\\\" resizableColumns=\\\"true\\\" sortField=\\\"lastName\\\" sortOrder=\\\"1\\\" [loading]=\\\"loading\\\" loadingIcon=\\\"fa fa-spinner\\\"\\r\\n                 csvSeparator=\\\";\\\" exportFilename=\\\"czas_pracy\\\"\\r\\n                 expandableRows=\\\"true\\\">\\r\\n      <p-header>\\r\\n        <div>\\r\\n          <i class=\\\"fa fa-search\\\"></i>\\r\\n          <input #gb type=\\\"text\\\" pInputText size=\\\"50\\\" placeholder=\\\"Filtruj\\\">\\r\\n        </div>\\r\\n      </p-header>\\r\\n\\r\\n      <p-column expander=\\\"true\\\" styleClass=\\\"col-icon\\\" [style]=\\\"{'width': '30px'}\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"rowid\\\" header=\\\"tabid\\\" hidden=\\\"true\\\" [exportable]=\\\"false\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"office\\\" header=\\\"Biuro\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"firstName\\\" header=\\\"Imie\\\"  [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"lastName\\\" header=\\\"Nazwisko\\\"  [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n      <p-column [hidden]=\\\"true\\\" [sortable]=\\\"true\\\" field=\\\"isManagerOrOperator\\\" header=\\\"\\\"  [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n\\r\\n\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"timesheetWorkDate\\\" header=\\\"Dnia\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\">\\r\\n        <ng-template let-col let-timesheet=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          <div [style.color]=\\\"timesheet.color\\\" class=\\\"text-center\\\">{{timesheet.timesheetWorkDate}}</div>\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n\\r\\n      <p-column [editable]=\\\"user?.roleCode?.indexOf('OP') > -1\\\" [sortable]=\\\"true\\\" header=\\\"Urlop\\\" field=\\\"isLeave\\\" [style]=\\\"{'width': '70px'}\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\">\\r\\n        <ng-template let-col let-timesheet=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          <div [style.color]=\\\"timesheet.color\\\" class=\\\"text-center\\\">{{timesheet.isLeave}}</div>\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n\\r\\n      <p-column [editable]=\\\"user?.roleCode?.indexOf('OP') > -1\\\" [sortable]=\\\"true\\\" header=\\\"Obecny od\\\" field=\\\"timesheetFrom\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\">\\r\\n        <ng-template let-col let-timesheet=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          <div [style.color]=\\\"timesheet.color\\\" class=\\\"text-center\\\">{{timesheet.timesheetFrom}}</div>\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n\\r\\n      <p-column [editable]=\\\"user?.roleCode?.indexOf('OP') > -1\\\" [sortable]=\\\"true\\\" header=\\\"Obecny do\\\" field=\\\"timesheetTo\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\">\\r\\n        <ng-template let-col let-timesheet=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          <div [style.color]=\\\"timesheet.color\\\" class=\\\"text-center\\\">{{timesheet.timesheetTo}}</div>\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n\\r\\n      <p-column [editable]=\\\"user?.roleCode?.indexOf('OP') > -1\\\" [sortable]=\\\"true\\\" header=\\\"Przerwa [min]\\\" field=\\\"timesheetBreakInMinutes\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\">\\r\\n        <ng-template let-col let-timesheet=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          <div [style.color]=\\\"timesheet.color\\\" class=\\\"text-center\\\">{{timesheet.timesheetBreakInMinutes}}</div>\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n\\r\\n      <p-column [editable]=\\\"user?.roleCode?.indexOf('OP') > -1\\\" [sortable]=\\\"true\\\" header=\\\"Szkolenie [g:mm]\\\" field=\\\"timesheetTrainingInGMM\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\">\\r\\n        <ng-template let-col let-timesheet=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          <div [style.color]=\\\"timesheet.color\\\" class=\\\"text-center\\\">{{timesheet.timesheetTrainingInGMM}}</div>\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"timesheetUsedTime\\\" header=\\\"Obecność\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\">\\r\\n        <ng-template let-col let-timesheet=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          <div [style.color]=\\\"timesheet.color\\\" class=\\\"text-center\\\">{{timesheet.timesheetUsedTime}}</div>\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n\\r\\n      <p-column *ngIf=\\\"user?.roleCode?.indexOf('OP') > -1\\\" [sortable]=\\\"true\\\" field=\\\"status\\\" header=\\\"Zapisano\\\" [style]=\\\"{'width': '60px'}\\\">\\r\\n        <ng-template let-col let-timesheet=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          <div *ngIf=\\\"timesheet.status == 'PROGRESS'\\\"  class=\\\"text-center\\\"><p-progressSpinner [style]=\\\"{width: '30px', height: '30px'}\\\" strokeWidth=\\\"2\\\"></p-progressSpinner></div>\\r\\n          <div *ngIf=\\\"timesheet.status == 'OK'\\\"  class=\\\"text-center\\\" [style.color]=\\\"'green'\\\"><i class=\\\"fa fa-check\\\" aria-hidden=\\\"true\\\"></i></div>\\r\\n          <div *ngIf=\\\"timesheet.status == 'EDITED'\\\" class=\\\"text-center\\\" [style.color]=\\\"'#2399e5'\\\"><i class=\\\"fa fa-pencil-square-o\\\" aria-hidden=\\\"true\\\"></i></div>\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n\\r\\n      <ng-template let-timesheet pTemplate=\\\"rowexpansion\\\">\\r\\n        <div class=\\\"ui-grid ui-grid-responsive ui-fluid\\\" style=\\\"font-size:16px;padding:20px\\\">\\r\\n          <div class=\\\"ui-grid-row\\\">\\r\\n            <div *ngIf=\\\"timesheet?.email\\\" class=\\\"ui-grid-col-12\\\" style=\\\"text-align:left; font-size: smaller;\\\">\\r\\n              Utworzony dla: {{timesheet.role}}, {{timesheet.email}}, {{timesheet.phone}},\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"ui-grid-row\\\">\\r\\n            <div *ngIf=\\\"timesheet?.copy?.createdBy\\\" class=\\\"ui-grid-col-12\\\" style=\\\"text-align:left; font-size: smaller;\\\">\\r\\n                Utworzony przez: <span style=\\\"font-weight: bold\\\">{{timesheet.copy.createdBy}}</span>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"ui-grid-row\\\">\\r\\n            <div *ngIf=\\\"timesheet?.copy?.modifiedBy\\\" class=\\\"ui-grid-col-12\\\" style=\\\"text-align:left; font-size: smaller;\\\">\\r\\n                Zmodyfikowany przez: <span style=\\\"font-weight: bold\\\">{{timesheet.copy.modifiedBy}}</span>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </ng-template>\\r\\n\\r\\n      <ng-template pTemplate=\\\"emptymessage\\\">\\r\\n        Brak danych...\\r\\n      </ng-template>\\r\\n\\r\\n      <p-footer>\\r\\n        <div class=\\\"ui-grid ui-grid-responsive ui-fluid ui-grid-pad\\\">\\r\\n          <div  *ngIf=\\\"user?.roleCode?.indexOf('OP') > -1\\\" class=\\\"ui-grid-row\\\"  style=\\\"margin-top: 15px;\\\">\\r\\n            <div class=\\\"ui-grid-col-5\\\"></div>\\r\\n            <div class=\\\"ui-grid-col-2\\\">\\r\\n              <!--<button type=\\\"button\\\" pButton icon=\\\"fa fa-file-o\\\" iconPos=\\\"left\\\" label=\\\"CSV\\\" (click)=\\\"dt.exportCSV()\\\"></button>-->\\r\\n              <button type=\\\"button\\\" pButton icon=\\\"fa fa-file-o\\\" iconPos=\\\"left\\\" label=\\\"CSV\\\" (click)=\\\"dt.exportCSV()\\\"></button>\\r\\n            </div>\\r\\n            <div class=\\\"ui-grid-col-5\\\"></div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </p-footer>\\r\\n\\r\\n    </p-dataTable>\\r\\n  </div>\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n</p-panel>\\r\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\n\r\nimport { Observable }    from 'rxjs';\r\nimport { catchError, map, tap, delay, mergeMap } from 'rxjs/operators';\r\n\r\n\r\n\r\nimport { User, RelatedItem, Order, WorkType, CodeValue, Timesheet } from '../_models/index';\r\nimport { WOService, RelatedItemService, UserService, DictService, AlertService, WorkTypeService, AuthenticationService, ToolsService, TimesheetService } from '../_services/index';\r\nimport { Calendar } from '../_models/calendar';\r\n\r\n@Component({\r\n    selector: 'app-timesheets',\r\n    templateUrl: './timesheets.component.html',\r\n    styleUrls: ['./timesheets.component.css']\r\n})\r\nexport class TimesheetsComponent implements OnInit {\r\n\r\n    users:User[];\r\n    usersWithSheets:UserWithSheet[] = <UserWithSheet[]> [];\r\n\r\n    sEmptySheet: string = 'BRAK';\r\n    sWeekendSheet: string = 'Weekend';\r\n    sLeave: string = 'Urlop';\r\n    warns: string[];\r\n    timeRegexp: RegExp =  new RegExp('^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$');\r\n    hourRegexp: RegExp =  new RegExp('^([0-9]|0[0-9]|1[0-9]|2[0-3])$');\r\n    leaveRegexp: RegExp =  new RegExp('^([NY])$');\r\n\r\n    afterDate:Date;\r\n    beforeDate:Date;\r\n\r\n\r\n    user: User;\r\n    pl:Calendar;\r\n\r\n    constructor(private router:Router,\r\n                private userService:UserService,\r\n                private timesheetService:TimesheetService,\r\n                private dictService:DictService,\r\n                private workTypeService: WorkTypeService,\r\n                private alertService:AlertService,\r\n                private toolsService:ToolsService,\r\n                private authSerice:AuthenticationService) {\r\n\r\n        this.afterDate = toolsService.getCurrentDateDayOperation(0);\r\n        this.beforeDate = toolsService.getCurrentDateDayOperation(0);\r\n        this.dictService.init();\r\n        this.workTypeService.init();\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.authSerice.userAsObs.subscribe(user => this.user = user);\r\n        this.search();\r\n        this.pl=new Calendar();\r\n    }\r\n\r\n\r\n    onEditInit(event) {\r\n        console.log('about edit !' + JSON.stringify(event.data));\r\n\r\n        if (event.data.timesheetFrom === this.sEmptySheet && event.data.timesheetTo === this.sEmptySheet ||\r\n            event.data.timesheetFrom === this.sWeekendSheet && event.data.timesheetTo === this.sWeekendSheet) {\r\n            //cleaning BRAK values\r\n            event.data.timesheetFrom = '';\r\n            event.data.timesheetTo = '';\r\n            event.data.timesheetBreakInMinutes = 15;\r\n            event.data.timesheetTrainingInGMM = '';\r\n            event.data.color = '#2399e5';\r\n        }\r\n    }\r\n\r\n    onEditCancel(event) {\r\n        this.onEditComplete(event);\r\n    }\r\n\r\n    onEdit(event) {\r\n        console.log('edit !' + JSON.stringify(event.data));\r\n\r\n        if (event.data.roleCode.indexOf('OP') > -1 || event.data.roleCode.indexOf('MG') > -1) {\r\n            if (this.user.roleCode.indexOf('PR') < 0) {\r\n                this.alertService.warn(\"Brak uprawnień\");\r\n                this.restore(event.data);\r\n            }\r\n        }\r\n\r\n        if (event.data.timesheetFrom.length === 2) {\r\n            if (this.hourRegexp.test(event.data.timesheetFrom)) {\r\n                event.data.timesheetFrom+=':';\r\n            } else {\r\n                event.data.timesheetFrom='';\r\n            }\r\n        } else if (event.data.timesheetFrom.length > 5) {\r\n            this.alertService.warn('Zbyt długie pole od '+event.data.timesheetFrom);\r\n            event.data.timesheetFrom = event.data.timesheetFrom.substr(0, 5);\r\n        }\r\n\r\n        if (event.data.timesheetTo.length === 2) {\r\n            if (this.hourRegexp.test(event.data.timesheetTo)) {\r\n                event.data.timesheetTo+=':';\r\n            } else {\r\n                event.data.timesheetTo='';\r\n            }\r\n        } else if (event.data.timesheetTo.length > 5) {\r\n            this.alertService.warn('Zbyt długie pole do '+event.data.timesheetFrom);\r\n            event.data.timesheetTo = event.data.timesheetTo.substr(0, 5);\r\n        }\r\n\r\n        if (event.data.timesheetTrainingInGMM.length === 1) {\r\n            if (this.hourRegexp.test(event.data.timesheetTrainingInGMM)) {\r\n                event.data.timesheetTrainingInGMM+=':';\r\n            }\r\n            else {\r\n                event.data.timesheetTrainingInGMM='';\r\n            }\r\n        } else if (event.data.timesheetTrainingInGMM.length > 4) {\r\n            this.alertService.warn('Zbyt długie pole szkolenie '+event.data.timesheetTrainingInGMM);\r\n            if (event.data.timesheetTrainingInGMM.indexOf(':') === 1) {\r\n                event.data.timesheetTrainingInGMM = event.data.timesheetTrainingInGMM.substr(0, 4);\r\n            } else {\r\n                event.data.timesheetTrainingInGMM = '0';\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    private restore(userWithSheet: UserWithSheet) {\r\n        if (userWithSheet.copy.usedTime == 0 && '00:00' == userWithSheet.copy.from.substr(11, 5) && '00:00' == userWithSheet.copy.to.substr(11, 5)) {\r\n            userWithSheet.timesheetBreakInMinutes = this.sEmptySheet;\r\n            userWithSheet.timesheetTrainingInGMM = this.sEmptySheet;\r\n            userWithSheet.timesheetWorkDate = userWithSheet.copy.from.substr(0, 10);\r\n            userWithSheet.timesheetFrom = this.sEmptySheet;\r\n            userWithSheet.timesheetTo = this.sEmptySheet;\r\n            userWithSheet.timesheetUsedTime = userWithSheet.copy.usedTime;\r\n            userWithSheet.color = '#902828';\r\n\r\n            if (this.isWeekend(userWithSheet.copy.from)) {\r\n                userWithSheet.timesheetBreakInMinutes = this.sWeekendSheet;\r\n                userWithSheet.timesheetTrainingInGMM = this.sWeekendSheet;\r\n                userWithSheet.timesheetFrom = this.sWeekendSheet;\r\n                userWithSheet.timesheetTo = this.sWeekendSheet;\r\n                userWithSheet.color = 'grey';\r\n            }\r\n\r\n            if (userWithSheet.isManagerOrOperator === 'VIP' && this.user.roleCode.indexOf('PR') === -1) {\r\n                userWithSheet.color = 'darkgrey';\r\n            }\r\n\r\n\r\n        } else {\r\n            userWithSheet.timesheetBreakInMinutes = userWithSheet.copy.break;\r\n            userWithSheet.timesheetTrainingInGMM = this.toolsService.convertMinutesToGMM(userWithSheet.copy.training);\r\n            userWithSheet.timesheetWorkDate = userWithSheet.copy.from.substr(0, 10);\r\n            userWithSheet.timesheetFrom = userWithSheet.copy.from.substr(11, 5);\r\n            userWithSheet.timesheetTo = userWithSheet.copy.to.substr(11, 5);\r\n            userWithSheet.timesheetUsedTime = userWithSheet.copy.usedTime;\r\n\r\n            if (userWithSheet.copy.createdBy && userWithSheet.copy.modifiedBy &&\r\n                userWithSheet.copy.createdBy === userWithSheet.copy.modifiedBy &&\r\n                userWithSheet.copy.createdBy === userWithSheet.firstName+' '+userWithSheet.lastName) {\r\n\r\n                userWithSheet.color = '#28902f';\r\n            } else {\r\n                userWithSheet.color = '#286090';\r\n            }\r\n        }\r\n\r\n        userWithSheet.isLeave = userWithSheet.copy.isLeave;\r\n        if (userWithSheet.isLeave === 'Y') {\r\n            userWithSheet.timesheetBreakInMinutes = this.sLeave;\r\n            userWithSheet.timesheetTrainingInGMM = this.sLeave;\r\n            userWithSheet.timesheetFrom = this.sLeave;\r\n            userWithSheet.timesheetTo = this.sLeave;\r\n            userWithSheet.color = '#444433';\r\n        }\r\n\r\n\r\n\r\n        userWithSheet.status = 'OK';\r\n    }\r\n\r\n\r\n    private getTimesheet(userWithSheet: UserWithSheet, trainingInMinutes: number): Timesheet {\r\n        let from: string = userWithSheet.timesheetWorkDate+' '+userWithSheet.timesheetFrom+':00';\r\n        let to: string = userWithSheet.timesheetWorkDate+' '+userWithSheet.timesheetTo+':00';\r\n        let timesheet: Timesheet = new Timesheet(userWithSheet.id, from, to);\r\n        timesheet.break = userWithSheet.timesheetBreakInMinutes;\r\n        timesheet.training = ''+trainingInMinutes;\r\n        return timesheet;\r\n    }\r\n\r\n\r\n    private getLeaveCancelledTimesheet(userWithSheet: UserWithSheet): Timesheet {\r\n        let timesheet: Timesheet = new Timesheet(userWithSheet.id, userWithSheet.timesheetWorkDate+' 08:00', userWithSheet.timesheetWorkDate+' 08:00');\r\n        timesheet.break = '0';\r\n        timesheet.training = '0';\r\n        timesheet.isLeave = 'N';\r\n        return timesheet;\r\n    }\r\n\r\n    onEditComplete(event) {\r\n\r\n        let trainingInMinutes: number = event.data.timesheetTrainingInGMM.indexOf(':') == 1 ? parseInt(this.toolsService.convertGMMToMinutes(event.data.timesheetTrainingInGMM), 10) : 0;\r\n\r\n        console.log('edited !' + JSON.stringify(event.data));\r\n        if (this.leaveRegexp.test(event.data.isLeave) && event.data.isLeave==='N' && event.data.copy.isLeave!=='N') {\r\n            this.alertService.info('Usuwam urlop '+event.data.timesheetWorkDate+' dla '+event.data.firstName+' '+event.data.lastName+' ...');\r\n            event.data.status = 'PROGRESS';\r\n            let newTimesheet: Timesheet = this.getLeaveCancelledTimesheet(event.data);\r\n            this.timesheetService.upsert(newTimesheet).subscribe(timesheet => this.updateTable(timesheet, event.data.rowid));\r\n        }\r\n\r\n        else if (event.data.timesheetFrom && event.data.timesheetFrom!== this.sEmptySheet && event.data.timesheetFrom!== this.sWeekendSheet && !this.timeRegexp.test(event.data.timesheetFrom) && !this.leaveRegexp.test(event.data.isLeave)) {\r\n            this.alertService.warn('Nie zmieniono deklaracji ze względu na nieprawidlową wartość: '+event.data.timesheetFrom);\r\n            this.restore(event.data);\r\n        }\r\n\r\n        else if (event.data.timesheetTo && event.data.timesheetTo!== this.sEmptySheet && event.data.timesheetTo!== this.sWeekendSheet && !this.timeRegexp.test(event.data.timesheetTo)) {\r\n            this.alertService.warn('Nie zmieniono deklaracji ze względu na nieprawidlową wartość: '+event.data.timesheetTo);\r\n            this.restore(event.data);\r\n        }\r\n\r\n        else if (trainingInMinutes > 0 && (!event.data.timesheetUsedTime || event.data.timesheetUsedTime === 0) ) {\r\n            this.alertService.warn('Nie zmieniono deklaracji - wprowadzono szkolenie ['+trainingInMinutes+'][min], brak czasu pracy!');\r\n            this.restore(event.data);\r\n        }\r\n\r\n        else if (event.data.timesheetUsedTime && parseInt(this.toolsService.convertHoursDecimalToMinutes(event.data.timesheetUsedTime, 0.01), 10) < trainingInMinutes) {\r\n            this.alertService.warn('Nie zmieniono deklaracji - szkolenie ['+trainingInMinutes+'][min] dłuższe niż czas pracy ['+this.toolsService.convertHoursDecimalToMinutes(event.data.timesheetUsedTime, 0.01)+'][min] !');\r\n            this.restore(event.data);\r\n        }\r\n\r\n        else if (event.data.timesheetFrom && this.timeRegexp.test(event.data.timesheetFrom) && event.data.timesheetTo && this.timeRegexp.test(event.data.timesheetTo)  && this.leaveRegexp.test(event.data.isLeave)) {\r\n            if (event.data.timesheetFrom <= event.data.timesheetTo) {\r\n                let newTimesheet: Timesheet = this.getTimesheet(event.data, trainingInMinutes);\r\n                if (newTimesheet.break != event.data.copy.break || newTimesheet.from != event.data.copy.from || newTimesheet.to != event.data.copy.to || newTimesheet.training != event.data.copy.training) {\r\n                    event.data.status = 'PROGRESS';\r\n                    if (newTimesheet.break === '') {\r\n                        newTimesheet.break = '0';\r\n                    }\r\n                    if (newTimesheet.training === '') {\r\n                        newTimesheet.training = '0';\r\n                    }\r\n                    this.timesheetService.upsert(newTimesheet).subscribe(timesheet => this.updateTable(timesheet, event.data.rowid));\r\n                } else if (this.leaveRegexp.test(event.data.isLeave) && event.data.isLeave==='Y' && event.data.copy.isLeave!=='Y') {\r\n                    this.alertService.warn('Nie można dodawać urlopu w tabeli!');\r\n                    this.restore(event.data);\r\n                } else {\r\n                    console.log('Content is identical, nothing todo');\r\n                }\r\n\r\n            } else {\r\n                this.alertService.warn('Nie zmieniono deklaracji ze względu na czas pracy mniejszy niż zero!');\r\n                this.restore(event.data);\r\n            }\r\n        } else if ((event.data.timesheetFrom && this.timeRegexp.test(event.data.timesheetFrom)) || (event.data.timesheetTo && this.timeRegexp.test(event.data.timesheetTo))) {\r\n            event.data.status = 'EDITED';\r\n        } else {\r\n            console.log('Nie wypelniono poprawnie timesheetu '+JSON.stringify(event.data));\r\n            this.restore(event.data);\r\n        }\r\n    }\r\n\r\n\r\n\r\n    search() {\r\n        let sAfterDate: string = this.toolsService.formatDate(this.afterDate, 'yyyy-MM-dd');\r\n        let sBeforeDate: string = this.toolsService.formatDate(this.beforeDate, 'yyyy-MM-dd');\r\n        console.log('Searching for '+this.afterDate+'='+sAfterDate+', '+this.beforeDate+'='+sBeforeDate);\r\n\r\n        this.userService.getStaff().pipe(\r\n            mergeMap(staff => this.callTimesheets(this.filterNotActive(staff), sAfterDate, sBeforeDate)))\r\n            .subscribe((timesheets:Timesheet[]) => this.combine(timesheets, this.users));\r\n    }\r\n\r\n    private callTimesheets(staff: User[], after:string, before:string):Observable<Timesheet[]> {\r\n        console.log('Got '+staff.length+' staff!');\r\n        this.users = staff;\r\n        return this.timesheetService.getByDates(after, before);\r\n    }\r\n\r\n\r\n    private combine(timesheets:Timesheet[], users:User[]):void {\r\n        console.log('combine '+JSON.stringify(timesheets) +'\\n'+JSON.stringify(users));\r\n\r\n        this.usersWithSheets = [];\r\n        for (let timesheet of timesheets) {\r\n\r\n            let userWithSheet = this.createUserWithSheet(timesheet, users, this.usersWithSheets.length);\r\n\r\n            if (userWithSheet != null) {\r\n                console.log('pushing ' + JSON.stringify(userWithSheet));\r\n                this.usersWithSheets.push(userWithSheet);\r\n            } else {\r\n                console.log('User not found '+timesheet.personId);\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n    private createUserWithSheet(timesheet: Timesheet, users: User[], rowid: number): UserWithSheet {\r\n        let user = this.getUser(timesheet.personId, users);\r\n\r\n        if (user != null) {\r\n            let userWithSheet:UserWithSheet = <UserWithSheet> JSON.parse(JSON.stringify(user));\r\n            userWithSheet.copy = JSON.parse(JSON.stringify(timesheet));\r\n\r\n            userWithSheet.rowid = rowid;\r\n            userWithSheet.isManagerOrOperator = (user.roleCode.indexOf('MG') > -1 || user.roleCode.indexOf('OP') > -1) ? 'VIP': 'Master';\r\n\r\n            this.restore(userWithSheet);\r\n\r\n            return userWithSheet;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    private updateTable(timesheet:Timesheet, rowid:number):void {\r\n        console.log('Updating table after data from server:' +JSON.stringify(timesheet));\r\n\r\n        let userWithSheet = this.createUserWithSheet(timesheet, this.users, rowid);\r\n\r\n        if (userWithSheet == null) {\r\n            this.alertService.error('Nie znaleziono pracownika '+timesheet.personId+' po aktualizacji timesheet!');\r\n            return;\r\n        }\r\n\r\n        this.usersWithSheets[rowid] = userWithSheet;\r\n        this.usersWithSheets = JSON.parse(JSON.stringify(this.usersWithSheets)); //immutable dirty trick\r\n    }\r\n\r\n    private getUser(id: number, users: User[]): User {\r\n        for(let user of users) {\r\n            if (user.id === id) {\r\n                return user;\r\n            }\r\n        }\r\n\r\n        console.log('Nie znaleziono pracownika o id '+id+' na liscie rol');\r\n        return null;\r\n    }\r\n\r\n\r\n    private warn(msg: string): void {\r\n        this.alertService.warn(msg);\r\n        this.warns.push(msg);\r\n    }\r\n\r\n    //YYYY-MM-DD\r\n    private isWeekend(workDate:string):boolean {\r\n        let myDate:Date = this.toolsService.parseDate(workDate);\r\n        console.log('Data dla '+workDate+' to '+ myDate.toISOString());\r\n        return myDate.getDay() == 6 || myDate.getDay() == 0;\r\n    }\r\n\r\n    private filterNotActive(staff:User[]): User[]{\r\n        let workingStaff: User[] = [];\r\n\r\n        for(let user of staff) {\r\n            if (user && user.isActive === 'Y') {\r\n                workingStaff.push(user);\r\n            }\r\n        }\r\n\r\n        return workingStaff;\r\n\r\n    }\r\n}\r\n\r\n\r\nexport class UserWithSheet extends User {\r\n    rowid: number;\r\n\r\n    copy: Timesheet;\r\n\r\n    timesheetUsedTime: number; //flat property for p-dataTable used for sort\r\n    timesheetWorkDate: string;\r\n    timesheetFrom: string;\r\n    timesheetTo: string;\r\n    timesheetBreakInMinutes: string;\r\n    timesheetTrainingInGMM: string;\r\n    isLeave: string;\r\n\r\n    isManagerOrOperator: string; //Y, N\r\n\r\n    color: string;\r\n    status: string;\r\n\r\n}\r\n\r\n","module.exports = \".blink_me {\\r\\n    -webkit-animation: blinker 1s linear infinite;\\r\\n            animation: blinker 1s linear infinite;\\r\\n}\\r\\n\\r\\n@-webkit-keyframes blinker {\\r\\n    50% {\\r\\n        opacity: 0;\\r\\n    }\\r\\n}\\r\\n\\r\\n@keyframes blinker {\\r\\n    50% {\\r\\n        opacity: 0;\\r\\n    }\\r\\n}\"","module.exports = \"\\r\\n<div *ngIf=\\\"timesheet\\\">\\r\\n\\r\\n  <div *ngIf=\\\"unregisteredExits.length > 0\\\" style=\\\"float: left; width: 100%; margin-left: 5px\\\">\\r\\n    <a class=\\\"blink_me\\\" style=\\\"float: left; color: red; font-weight: bold\\\">\\r\\n      <i [class]=\\\"'fa fa-exclamation-triangle'\\\"></i> Niezarejestrowane WYJŚCIA: {{unregisteredExits}}, Zgłoś się do operatora!!!\\r\\n    </a>\\r\\n  </div>\\r\\n\\r\\n  <div *ngIf=\\\"unregisteredExits.length < 1\\\" style=\\\"width: 100%; display: flex; flex-wrap: nowrap; align-items: stretch;\\\">\\r\\n\\r\\n    <div style=\\\"width: 33%; margin-left: 5px;\\\">\\r\\n      <a *ngIf=\\\"!isSetFrom()\\\" (click)=\\\"registerFrom()\\\" style=\\\"cursor: pointer; color: orangered; text-decoration: underline; font-weight: bold\\\" ><i [class]=\\\"'fa fa-sign-in'\\\"></i> Zarejestruj WEJŚCIE</a>\\r\\n      <div *ngIf=\\\"isSetFrom()\\\" style=\\\"font-weight: bold\\\" ><i [class]=\\\"'fa fa-sign-in'\\\"></i> Zarejestrowane WEJŚCIE: {{timesheet?.from?.substr(11, 5)}},</div>\\r\\n    </div>\\r\\n\\r\\n    <div id=\\\"center\\\" style=\\\"width: 34%; text-align: center;\\\">\\r\\n      <a *ngIf=\\\"isSetFrom()\\\" (click)=\\\"addBreak()\\\" style=\\\"cursor: pointer; color: #21405f; text-decoration: underline; font-weight: bold\\\" ><i [class]=\\\"'fa fa-coffee'\\\"></i> Zmień przerwę, aktualnie {{timesheet?.break}} minuty</a>\\r\\n    </div>\\r\\n\\r\\n    <div style=\\\"width: 33%; text-align: right; margin-right: 5px;\\\">\\r\\n      <a *ngIf=\\\"!isSetTo() && isSetFrom()\\\" (click)=\\\"registerTo()\\\" style=\\\"cursor: pointer; color: orangered; text-decoration: underline; font-weight: bold\\\">Zarejestruj WYJŚCIE <i [class]=\\\"'fa fa-sign-out'\\\"></i></a>\\r\\n      <div *ngIf=\\\"isSetTo() && isSetFrom()\\\" style=\\\"float: right; font-weight: bold\\\" >Zarejestrowane WYJŚCIE: {{timesheet?.to?.substr(11, 5)}} <i [class]=\\\"'fa fa-sign-out'\\\"></i></div>\\r\\n    </div>\\r\\n\\r\\n\\r\\n  </div>\\r\\n\\r\\n</div>\\r\\n\\r\\n<p-dialog header=\\\"Zadeklaruj przerwę\\\" [(visible)]=\\\"displayBreakDialog\\\" [responsive]=\\\"true\\\" [minWidth]=\\\"800\\\">\\r\\n\\r\\n  <div class=\\\"ui-grid ui-grid-responsive ui-fluid ui-grid-pad\\\">\\r\\n\\r\\n    <div class=\\\"ui-grid-row\\\"  style=\\\"margin-top: 20px\\\">\\r\\n\\r\\n      <div class=\\\"ui-grid-col-5\\\"><label style=\\\"float: right\\\" for=\\\"totalBreakInMinutes\\\">Przerwa w minutach w dniu {{timesheet?.from | date: 'yyyy-MM-dd'}}</label></div>\\r\\n      <div class=\\\"ui-grid-col-7\\\">\\r\\n        <input id=\\\"totalBreakInMinutes\\\" type=\\\"number\\\" class=\\\"form-control\\\" name=\\\"totalBreakInMinutes\\\" [(ngModel)]=\\\"totalBreakInMinutes\\\" required totalBreakInMinutes minlength=\\\"1\\\" min=\\\"15\\\" />\\r\\n        <div *ngIf=\\\"totalBreakInMinutes < 15\\\" class=\\\"help-block\\\">Przerwa musi być liczbą >= 15</div>\\r\\n      </div>\\r\\n\\r\\n    </div>\\r\\n    <div class=\\\"ui-grid-row\\\"  style=\\\"margin-top: 10px; margin-bottom: 20px;\\\">\\r\\n      <div class=\\\"ui-grid-col-5\\\"></div>\\r\\n\\r\\n      <div class=\\\"ui-grid-col-7\\\">\\r\\n        <button pButton type=\\\"button\\\" (click)=\\\"registerBreak()\\\" icon=\\\"fa fa-check\\\" label=\\\"Zapisz przerwę\\\" style=\\\"margin-left: 0px; min-width: 140px; max-width: 200px;\\\" [disabled]=\\\"totalBreakInMinutes < 15\\\"></button>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n\\r\\n  </div>\\r\\n\\r\\n</p-dialog>\\r\\n\"","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\r\nimport { User, Timesheet } from '../_models/index';\r\nimport { TimesheetService, ToolsService, AlertService } from '../_services/index';\r\n\r\n@Component({\r\n    selector: 'user-attendance-register',\r\n    templateUrl: './user-attendance-register.component.html',\r\n    styleUrls: ['./user-attendance-register.component.css']\r\n})\r\nexport class UserAttendanceRegisterComponent implements OnInit {\r\n\r\n    @Input() user:User;\r\n\r\n    public displayBreakDialog: boolean;\r\n    public totalBreakInMinutes: number = 15;\r\n\r\n    private _timesheet: Timesheet;\r\n    get timesheet(): Timesheet {\r\n        return this._timesheet;\r\n    }\r\n\r\n    private _unregisteredExits: string[];\r\n    get unregisteredExits():string[] {\r\n        return this._unregisteredExits;\r\n    }\r\n\r\n\r\n    constructor(private timesheetService:TimesheetService,\r\n                private toolsService: ToolsService,\r\n                private alertService: AlertService) {\r\n    }\r\n\r\n    ngOnInit() {\r\n        this._unregisteredExits = [];\r\n\r\n        let today:Date = this.toolsService.getCurrentDateDayOperation(0);\r\n\r\n        let sToday: string = this.toolsService.formatDate(today, 'yyyy-MM-dd');\r\n\r\n        let checkFromDate = this.toolsService.getCurrentDateDayOperation(-24) // 3 weeks + 1 weekend\r\n\r\n        let sFrom: string = this.toolsService.formatDate(checkFromDate, 'yyyy-MM-dd');\r\n\r\n        this.timesheetService.getByIdAndDates(this.user.id, sFrom, sToday)\r\n            .subscribe((timesheets:Timesheet[]) => this.checkUser(timesheets, sToday));\r\n    }\r\n\r\n    public isSetFrom():boolean {\r\n        return this._timesheet.from && this._timesheet.from.substr(11,8) != \"00:00:00\";\r\n    }\r\n\r\n    public isSetTo():boolean {\r\n        return this._timesheet.to && this._timesheet.to.substr(11,8) != \"00:00:00\";\r\n    }\r\n\r\n\r\n    public registerFrom():void {\r\n        console.log(\"From!\");\r\n        this.timesheetService.upsertAttendanceFrom(this.user.id)\r\n            .subscribe(result => this.updateTimesheet(result));\r\n    }\r\n\r\n    public registerTo():void {\r\n        console.log(\"To!\");\r\n        this.timesheetService.upsertAttendanceTo(this.user.id)\r\n            .subscribe(result => this.updateTimesheet(result));\r\n    }\r\n\r\n    public registerBreak(): void {\r\n        console.log(\"register break!\");\r\n        this.timesheetService.upsertAttendanceBreak(this.user.id, this.totalBreakInMinutes)\r\n            .subscribe(result => this.updateTimesheet(result));\r\n    }\r\n\r\n    public addBreak():void {\r\n        this.displayBreakDialog = true;\r\n    }\r\n\r\n    private checkUser(timesheets:Timesheet[], sToday:string):void {\r\n        for (let timesheet of timesheets) {\r\n            if (timesheet.personId === this.user.id) {\r\n                if (timesheet.from && timesheet.from.startsWith(sToday)) {\r\n                    this._timesheet = timesheet;\r\n                    this.totalBreakInMinutes = timesheet.break? +timesheet.break: 15;\r\n                } else if (this.checkExitNotRegistered(timesheet)) {\r\n                    this._unregisteredExits.push(timesheet.from.substring(0, 10));\r\n                }\r\n                console.log(\"Find user timesheet \"+JSON.stringify(timesheet));\r\n            } else {\r\n                this.alertService.error('Zly raport czasu pracy, szukano dla '+this.user.id+', znaleziono dla '+timesheet.personId+'!')\r\n                return\r\n            }\r\n        }\r\n\r\n        if (!this._timesheet) {\r\n            console.log('Brak czasu pracy dla '+this.user.id)\r\n        }\r\n    }\r\n\r\n    private checkExitNotRegistered(timesheet: Timesheet): boolean {\r\n        return timesheet.isLeave === 'N' && timesheet.usedTime === 0 && !timesheet.from.endsWith('00:00:00');\r\n    }\r\n\r\n    private updateTimesheet(result:any):void {\r\n        if ((result.updated === 1 || result.created === 1) && result.timesheet) {\r\n            this._timesheet = result.timesheet;\r\n        } else {\r\n            console.log(\"Something went wrong when from or to \"+JSON.stringify(result));\r\n            this.alertService.error(\"Nie udalo sie zaktualizować danych!\");\r\n        }\r\n        this.displayBreakDialog = false;\r\n    }\r\n}\r\n","module.exports = \".ui-button.orange-button {\\r\\n    background-color: orange;\\r\\n}\"","module.exports = \"<div class=\\\"jumbotron\\\">\\r\\n  <div class=\\\"container\\\">\\r\\n    <h2>Wybierz użytkownika do modyfikacji</h2>\\r\\n    <div class=\\\"ui-fluid\\\">\\r\\n      <p-autoComplete\\r\\n              id=\\\"person\\\" [(ngModel)]=\\\"selectedUser\\\" [suggestions]=\\\"suggestedUsers\\\"\\r\\n              (completeMethod)=\\\"suggestUser($event)\\\"\\r\\n              (onSelect)=\\\"onSelectUser($event)\\\"\\r\\n              [forceSelection]=\\\"true\\\"\\r\\n              [dropdown]=\\\"true\\\" field=\\\"displayName\\\" [delay]=\\\"200\\\" [minLength]=\\\"2\\\" [required]=\\\"true\\\"></p-autoComplete>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div *ngIf=\\\"selectedUser?.user\\\" class=\\\"container\\\">\\r\\n\\r\\n    <hr>\\r\\n    <h2>Modyfikacja {{selectedUser?.user?.firstName}} {{selectedUser?.user?.lastName}}</h2>\\r\\n\\r\\n    <div *ngIf=\\\"operator?.roleCode?.indexOf('PR') != -1\\\">\\r\\n      <button type=\\\"button\\\" pButton (click)=\\\"displayUserHistoryDialog=true\\\" icon=\\\"fa fa-search\\\" label=\\\"Historia\\\"></button>\\r\\n      <p-dialog [(visible)]=\\\"displayUserHistoryDialog\\\" [header]=\\\"'Historia '+selectedUser?.user?.email\\\" [minWidth]=\\\"900\\\" [responsive]=\\\"true\\\" [blockScroll]=\\\"true\\\" [contentStyle]=\\\"{'height': '900px'}\\\">\\r\\n        <app-user-history [selectedUser]=\\\"selectedUser?.user\\\" [staff]=\\\"users\\\"></app-user-history>\\r\\n      </p-dialog>\\r\\n      <button *ngIf=\\\"selectedUser?.user?.roleCode?.indexOf('VE') == -1 && selectedUser?.user?.isEmployed == 'Y'\\\" type=\\\"button\\\" pButton (click)=\\\"showDismissDialog()\\\" icon=\\\"fa fa-window-close\\\" label=\\\"Zakończ współprace\\\" class=\\\"ui-button-warning\\\"></button>\\r\\n      <!-- <p *ngIf=\\\"selectedUser?.user?.roleCode?.indexOf('VE') == -1 && selectedUser?.user?.isEmployed == 'N'\\\" style=\\\"color: #761c19\\\">Zakończono współpracę {{selectedUser?.user?.lastModDate}}!!! Zastanów się jaki jest cel modyfikacji byłego pracownika?</p> -->\\r\\n      <p *ngIf=\\\"show && selectedUser?.user?.isEmployed == 'N'\\\" style=\\\"color: #761c19\\\">Zakończono współpracę {{selectedUser?.user?.lastModDate}}!!! Zastanów się jaki jest cel modyfikacji byłego pracownika?</p>\\r\\n    </div>\\r\\n<!-- Modal dismiss-->\\r\\n    <p-dialog  [header]=\\\"'Zakończenie współpracy z ' +selectedUser.user.firstName + ' '+selectedUser.user.lastName\\\" [(visible)]=\\\"displayDismissDialog\\\" [responsive]=\\\"true\\\" [minWidth]=\\\"500\\\">\\r\\n        <p-fieldset legend=\\\"Dane pracownika\\\" > \\r\\n            <div class=\\\"ui-grid-row\\\">\\r\\n                <div class=\\\"ui-grid-col-4\\\">Imię:</div>\\r\\n                <div class=\\\"ui-grid-col-8\\\">{{selectedUser.user.firstName}}</div>\\r\\n            </div>\\r\\n            <div class=\\\"ui-grid-row\\\">\\r\\n                <div class=\\\"ui-grid-col-4\\\">Nazwisko:</div>\\r\\n                <div class=\\\"ui-grid-col-8\\\">{{selectedUser.user.lastName}}</div>\\r\\n            </div>\\r\\n            <div class=\\\"ui-grid-row\\\">\\r\\n                <div class=\\\"ui-grid-col-4\\\">Adres e-mail:</div>\\r\\n                <div class=\\\"ui-grid-col-8\\\">{{selectedUser.user.email}}</div>\\r\\n            </div>\\r\\n            <div class=\\\"ui-grid-row\\\">\\r\\n                <div class=\\\"ui-grid-col-4\\\">Identyfikator Exced ID:</div>\\r\\n                <div class=\\\"ui-grid-col-8\\\">{{selectedUser.user.excelId}}</div>\\r\\n            </div>\\r\\n            <div class=\\\"ui-grid-row\\\">\\r\\n                <div class=\\\"ui-grid-col-4\\\">Funkcja w systemie:</div>\\r\\n                <div class=\\\"ui-grid-col-8\\\">{{selectedUser.user.role}}</div>\\r\\n            </div>\\r\\n            <div class=\\\"ui-grid-row\\\">\\r\\n                <div class=\\\"ui-grid-col-4\\\">Biuro macierzyste:</div>\\r\\n                <div class=\\\"ui-grid-col-8\\\">{{selectedUser.user.office}}</div>\\r\\n            </div>\\r\\n            <br/>            \\r\\n        </p-fieldset>\\r\\n        <br/>\\r\\n        <p-fieldset legend=\\\"Zakończyć współpracę ?\\\">         \\r\\n          <div class=\\\"ui-grid-row\\\" align=\\\"center\\\">\\r\\n              <div class=\\\"ui-grid-col-12\\\" align=\\\"center\\\">\\r\\n                <p >Zakończenie współpracy spowoduje usunięcie wszystkich danych pracownika czy jesteś pewien że chcesz zakończyć współpracę? </p>\\r\\n              </div>             \\r\\n          </div>\\r\\n          <br/>\\r\\n          <div class=\\\"ui-grid-row\\\">\\r\\n            <div class=\\\"ui-grid-col-4\\\" align=\\\"center\\\">\\r\\n              <button type=\\\"button\\\" pButton (click)=\\\"dissmisWorker()\\\" icon=\\\"fa fa-user-times\\\" label=\\\"Zakończ współprace\\\" class=\\\"ui-button-danger\\\"></button>\\r\\n            </div>\\r\\n            <div class=\\\"ui-grid-col-8\\\" align=\\\"center\\\">\\r\\n              <button type=\\\"button\\\" pButton (click)=\\\"displayDismissDialog=false\\\" icon=\\\"fa fa-window-close\\\" label=\\\"Anuluj\\\" class=\\\"ui-button-info\\\"></button>\\r\\n            </div>\\r\\n        </div>\\r\\n        <br/>\\r\\n      </p-fieldset>\\r\\n  <br/>\\r\\n      </p-dialog> \\r\\n        \\r\\n<!-- Modal dismiss-->\\r\\n    <form name=\\\"f\\\" novalidate (ngSubmit)=\\\"f.form?.valid && changeUser()\\\" #f=\\\"ngForm\\\">\\r\\n      <div class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !firstName?.valid }\\\">\\r\\n        <label for=\\\"firstName\\\">Imie</label>\\r\\n        <input id=\\\"firstName\\\" type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"firstName\\\" [(ngModel)]=\\\"selectedUser.user.firstName\\\" #firstName=\\\"ngModel\\\" required minlength=\\\"3\\\" />\\r\\n        <div *ngIf=\\\"f.submitted && !firstName?.valid\\\" class=\\\"help-block\\\">Imie jest wymagane</div>\\r\\n      </div>\\r\\n      <div class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !lastName?.valid }\\\">\\r\\n        <label for=\\\"lastName\\\">Nazwisko</label>\\r\\n        <input id=\\\"lastName\\\" type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"lastName\\\" [(ngModel)]=\\\"selectedUser.user.lastName\\\" #lastName=\\\"ngModel\\\" required minlength=\\\"3\\\"/>\\r\\n        <div *ngIf=\\\"f.submitted && !lastName?.valid\\\" class=\\\"help-block\\\">Nazwisko jest wymagane</div>\\r\\n      </div>\\r\\n      <div class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !newemail?.valid }\\\">\\r\\n        <label for=\\\"newemail\\\">Email</label>\\r\\n        <input id=\\\"newemail\\\" type=\\\"email\\\" class=\\\"form-control\\\" name=\\\"newemail\\\" [(ngModel)]=\\\"selectedUser.user.email\\\" #newemail=\\\"ngModel\\\" required email />\\r\\n        <div *ngIf=\\\"f.submitted && !newemail?.valid\\\" class=\\\"help-block\\\">wymagany jest poprawny adres email</div>\\r\\n      </div>\\r\\n\\r\\n\\r\\n      <div *ngIf=\\\"show\\\"  class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !excelId?.valid }\\\">\\r\\n        <label for=\\\"excelId\\\">Identyfikator excel</label>\\r\\n        <input id=\\\"excelId\\\" type=\\\"number\\\" class=\\\"form-control\\\" name=\\\"excelId\\\" [(ngModel)]=\\\"selectedUser.user.excelId\\\" #excelId=\\\"ngModel\\\" required min=\\\"0\\\"/>\\r\\n        <div *ngIf=\\\"f.submitted && !excelId?.valid\\\" class=\\\"help-block\\\">Identyfikator w excel jest wymagany</div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"form-group\\\">\\r\\n        <p-radioButton name=\\\"activegroup\\\" value=\\\"Y\\\" [(ngModel)]=\\\"selectedUser.user.isActive\\\" label=\\\"Aktywny (Konto)\\\"></p-radioButton>\\r\\n          <p-radioButton name=\\\"activegroup\\\" value=\\\"N\\\" [(ngModel)]=\\\"selectedUser.user.isActive\\\" label=\\\"Nie aktywny (Brak konta)\\\"></p-radioButton>\\r\\n      </div>\\r\\n      \\r\\n      <div class=\\\"form-group\\\" *ngIf=\\\"showRoles\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !(selectedUser?.user?.roleCode?.length > 0) }\\\">\\r\\n        <label for=\\\"roleCode\\\">Funkcja w systemie</label>\\r\\n        <p-selectButton [disabled]=\\\"operator.roleCode.indexOf('PR') == -1\\\" name=\\\"roleCode\\\" multiple=\\\"multiple\\\" [options]=\\\"roles\\\" [(ngModel)]=\\\"selectedUser.user.roleCode\\\" (onChange)=\\\"checkSelect()\\\" required roles></p-selectButton>\\r\\n        <div *ngIf=\\\"f.submitted && !(selectedUser?.user?.roleCode?.length > 0)\\\" class=\\\"help-block\\\">Rola jest wymagana</div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"form-group\\\" *ngIf=\\\"showOffices\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !officeCode?.valid }\\\">\\r\\n        <label for=\\\"officeCode\\\">Biuro macierzyste</label>\\r\\n        <p-selectButton id=\\\"officeCode\\\" name=\\\"officeCode\\\" [options]=\\\"offices\\\" [(ngModel)]=\\\"selectedUser.user.officeCode\\\" required #officeCode=\\\"ngModel\\\"></p-selectButton>\\r\\n        <!--<p-dropdown name=\\\"officeCode\\\" [options]=\\\"offices | async\\\" [(ngModel)]=\\\"user.officeCode\\\" required autoWidth=\\\"false\\\" ></p-dropdown>-->\\r\\n        <div *ngIf=\\\"f.submitted && !officeCode?.valid\\\" class=\\\"help-block\\\">Biuro jest wymagane</div>\\r\\n      </div>\\r\\n\\r\\n      <div *ngIf=\\\"selectedUser.user.roleCode.indexOf('VE') > -1\\\">\\r\\n        <div style=\\\"margin-bottom: 10px; width: 100%; \\\">\\r\\n          <label for=\\\"company\\\">Firma zleceniodawcy</label>\\r\\n          <div class=\\\"ui-fluid form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !company?.valid }\\\">\\r\\n            <p-autoComplete\\r\\n                    id=\\\"company\\\"\\r\\n                    name=\\\"company\\\"\\r\\n                    [(ngModel)]=\\\"company\\\"\\r\\n                    [suggestions]=\\\"suggestedCompanies\\\"\\r\\n                    (completeMethod)=\\\"suggestCompany($event)\\\"\\r\\n                    [dropdown]=\\\"true\\\"\\r\\n                    [forceSelection]=\\\"false\\\"\\r\\n                    placeholder=\\\"Wybierz/wpisz nazwę firmy zleceniodawcy\\\"\\r\\n                    required\\r\\n                    ></p-autoComplete>\\r\\n            <div *ngIf=\\\"f.submitted && !company?.valid\\\" class=\\\"help-block\\\">Firma jest wymagana</div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div *ngIf=\\\"selectedUser.user.roleCode.indexOf('VE') == -1\\\">\\r\\n        <!--<div style=\\\"margin-bottom: 10px; width: 100%; \\\">\\r\\n          <label for=\\\"company\\\">Podmiot zatrudniający</label>\\r\\n          <div class=\\\"ui-fluid form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !company?.valid }\\\">\\r\\n            <p-autoComplete\\r\\n                    id=\\\"company\\\"\\r\\n                    name=\\\"company\\\"\\r\\n                    [(ngModel)]=\\\"company\\\"\\r\\n                    [suggestions]=\\\"suggestedCompanies\\\"\\r\\n                    (completeMethod)=\\\"suggestCompany($event)\\\"\\r\\n                    [dropdown]=\\\"true\\\"\\r\\n                    [forceSelection]=\\\"false\\\"\\r\\n                    placeholder=\\\"Wybierz/wpisz nazwę firmy zatrudniajacej BOT/DRU etc...\\\"\\r\\n                    required\\r\\n                    ></p-autoComplete>\\r\\n            <div *ngIf=\\\"f.submitted && !company?.valid\\\" class=\\\"help-block\\\">Firma jest wymagana</div>\\r\\n          </div>\\r\\n        </div>-->\\r\\n\\r\\n        <div *ngIf=\\\"!show\\\">\\r\\n          <div style=\\\"margin-bottom: 10px;\\\">\\r\\n              <div class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !account?.valid }\\\">\\r\\n                  <label for=\\\"account\\\">Nr konta</label>\\r\\n                  <input id=\\\"account\\\" type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"account\\\" [(ngModel)]=\\\"selectedUser.user.account\\\" #account=\\\"ngModel\\\" account minlength=\\\"26\\\"/>\\r\\n                  <div *ngIf=\\\"f.submitted && !account?.valid\\\" class=\\\"help-block\\\">numer rachunku jest niepoprawny</div>\\r\\n              </div>\\r\\n\\r\\n              <div class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !phone?.valid }\\\">\\r\\n                  <label for=\\\"phone\\\">Telefon</label>\\r\\n                  <input id=\\\"phone\\\" type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"phone\\\" [(ngModel)]=\\\"selectedUser.user.phone\\\" #phone=\\\"ngModel\\\" phone minlength=\\\"9\\\" />\\r\\n                  <div *ngIf=\\\"f.submitted && !phone?.valid\\\" class=\\\"help-block\\\">numer telefonu jest niepoprawny</div>\\r\\n              </div>\\r\\n\\r\\n              <div class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !addressStreet?.valid }\\\">\\r\\n                  <label for=\\\"addressStreet\\\">Ulica nr domu/lokal</label>\\r\\n                  <input id=\\\"addressStreet\\\" type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"addressStreet\\\" [(ngModel)]=\\\"selectedUser.user.addressStreet\\\" #addressStreet=\\\"ngModel\\\" addressStreet minlength=\\\"5\\\"/>\\r\\n                  <div *ngIf=\\\"f.submitted && !addressStreet?.valid\\\" class=\\\"help-block\\\">adres Ulica nr domu(/numer lokalu) jest niepoprawny</div>\\r\\n              </div>\\r\\n\\r\\n              <div class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !addressPost?.valid }\\\">\\r\\n                  <label for=\\\"addressPost\\\">Kod, miejscowość</label>\\r\\n                  <input id=\\\"addressPost\\\" type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"addressPost\\\" [(ngModel)]=\\\"selectedUser.user.addressPost\\\" #addressPost=\\\"ngModel\\\"  addressPost minlength=\\\"7\\\"/>\\r\\n                  <div *ngIf=\\\"f.submitted && !addressPost?.valid\\\" class=\\\"help-block\\\">kod pocztowy oraz miejscowość są niepoprawne</div>\\r\\n              </div>\\r\\n          </div>\\r\\n      </div>\\r\\n<div *ngIf=\\\"show\\\">\\r\\n        <div style=\\\"margin-bottom: 10px;\\\">\\r\\n          <div class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !account?.valid }\\\">\\r\\n            <label for=\\\"account\\\">Nr konta</label>\\r\\n            <input id=\\\"account\\\" type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"account\\\" [(ngModel)]=\\\"selectedUser.user.account\\\" #account=\\\"ngModel\\\" required account minlength=\\\"26\\\"/>\\r\\n            <div *ngIf=\\\"f.submitted && !account?.valid\\\" class=\\\"help-block\\\">wymagany jest poprawny numer rachunku</div>\\r\\n          </div>\\r\\n\\r\\n          <div class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !phone?.valid }\\\">\\r\\n            <label for=\\\"phone\\\">Telefon</label>\\r\\n            <input id=\\\"phone\\\" type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"phone\\\" [(ngModel)]=\\\"selectedUser.user.phone\\\" #phone=\\\"ngModel\\\" required phone minlength=\\\"9\\\" />\\r\\n            <div *ngIf=\\\"f.submitted && !phone?.valid\\\" class=\\\"help-block\\\">wymagany jest numer telefonu</div>\\r\\n          </div>\\r\\n\\r\\n          <div class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !addressStreet?.valid }\\\">\\r\\n            <label for=\\\"addressStreet\\\">Ulica nr domu/lokal</label>\\r\\n            <input id=\\\"addressStreet\\\" type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"addressStreet\\\" [(ngModel)]=\\\"selectedUser.user.addressStreet\\\" #addressStreet=\\\"ngModel\\\" required addressStreet minlength=\\\"5\\\"/>\\r\\n            <div *ngIf=\\\"f.submitted && !addressStreet?.valid\\\" class=\\\"help-block\\\">wymagany jest poprawny adres Ulica nr domu(/numer lokalu)</div>\\r\\n          </div>\\r\\n\\r\\n          <div class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !addressPost?.valid }\\\">\\r\\n            <label for=\\\"addressPost\\\">Kod, miejscowość</label>\\r\\n            <input id=\\\"addressPost\\\" type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"addressPost\\\" [(ngModel)]=\\\"selectedUser.user.addressPost\\\" #addressPost=\\\"ngModel\\\" required addressPost minlength=\\\"7\\\"/>\\r\\n            <div *ngIf=\\\"f.submitted && !addressPost?.valid\\\" class=\\\"help-block\\\">wymagany jest poprawny kod pocztowy oraz miejscowość</div>\\r\\n          </div>\\r\\n\\r\\n          <div class=\\\"form-group\\\" *ngIf=\\\"showRanks\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !rankCode?.valid }\\\">\\r\\n            <label for=\\\"rankCode\\\">Stopień (powiązane ze sposobem wynagradzania)</label>\\r\\n            <p-selectButton id=\\\"rankCode\\\" name=\\\"rankCode\\\" [options]=\\\"ranks\\\" [(ngModel)]=\\\"selectedUser.user.rankCode\\\" required #rankCode=\\\"ngModel\\\"></p-selectButton>\\r\\n            <!--<p-dropdown name=\\\"rankCode\\\" [options]=\\\"ranks | async\\\" [(ngModel)]=\\\"selectedUser.user.rankCode\\\" required autoWidth=\\\"false\\\" ></p-dropdown>-->\\r\\n            <div *ngIf=\\\"f.submitted && !rankCode?.valid\\\" class=\\\"help-block\\\">Stopień jest wymagany</div>\\r\\n          </div>\\r\\n\\r\\n\\r\\n          <div *ngIf=\\\"operator.roleCode.indexOf('PR') !== -1 && selectedUser?.user?.rankCode === 'SEN'\\\" class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !salary?.valid }\\\">\\r\\n            <label for=\\\"salary\\\">Stałe wynagrodzenie w PLN</label>\\r\\n            <input id=\\\"salary\\\" type=\\\"number\\\" class=\\\"form-control\\\" name=\\\"salary\\\" [(ngModel)]=\\\"selectedUser.user.salary\\\" #salary=\\\"ngModel\\\" required salary pattern=\\\"^[0-9]\\\\d*(\\\\.\\\\d+)?$\\\">\\r\\n            <div *ngIf=\\\"f.submitted && !salary?.valid\\\" class=\\\"help-block\\\">wymagane jest poprawne wynagrodznie (liczba > 0)</div>\\r\\n          </div>\\r\\n          <div *ngIf=\\\"operator.roleCode.indexOf('PR') !== -1 && selectedUser?.user?.rankCode !== 'SEN'\\\" class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !salaryRate?.valid }\\\">\\r\\n            <label for=\\\"salaryRate\\\">Stawka gwarantowana w PLN</label>\\r\\n            <input id=\\\"salaryRate\\\" type=\\\"number\\\" class=\\\"form-control\\\" name=\\\"salaryRate\\\" [(ngModel)]=\\\"selectedUser.user.salaryRate\\\" #salaryRate=\\\"ngModel\\\" required salaryRate pattern=\\\"^[0-9]\\\\d*(\\\\.\\\\d+)?$\\\"/>\\r\\n            <div *ngIf=\\\"f.submitted && !salaryRate?.valid\\\" class=\\\"help-block\\\">wymagana jest stawka gwarantowana (liczba > 0)</div>\\r\\n          </div>\\r\\n          <div *ngIf=\\\"operator.roleCode.indexOf('PR') !== -1 && selectedUser?.user?.rankCode !== 'SEN'\\\" class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !leaveRate?.valid }\\\">\\r\\n            <label for=\\\"leaveRate\\\">Stała stawka za urlop PLN</label>\\r\\n            <input id=\\\"leaveRate\\\" type=\\\"number\\\" class=\\\"form-control\\\" name=\\\"leaveRate\\\" [(ngModel)]=\\\"selectedUser.user.leaveRate\\\" #leaveRate=\\\"ngModel\\\" required leaveRate pattern=\\\"^[0-9]\\\\d*(\\\\.\\\\d+)?$\\\"/>\\r\\n            <div *ngIf=\\\"f.submitted && !leaveRate?.valid\\\" class=\\\"help-block\\\">wymagana jest stawka za urlop (liczba > 0)</div>\\r\\n          </div>\\r\\n\\r\\n\\r\\n          <!--<div class=\\\"form-group\\\" *ngIf=\\\"showAgreements\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !agreementCode?.valid }\\\">\\r\\n            <label for=\\\"agreementCode\\\">Główna umowa</label>\\r\\n            <p-selectButton id=\\\"agreementCode\\\" name=\\\"agreementCode\\\" [options]=\\\"agreements\\\" [(ngModel)]=\\\"selectedUser.user.agreementCode\\\" required #agreementCode=\\\"ngModel\\\"></p-selectButton>\\r\\n            &lt;!&ndash;<p-dropdown name=\\\"agreementCode\\\" [options]=\\\"agreements | async\\\" [(ngModel)]=\\\"selectedUser.user.agreementCode\\\" required autoWidth=\\\"false\\\" ></p-dropdown>&ndash;&gt;\\r\\n            <div *ngIf=\\\"f.submitted && !agreementCode?.valid\\\" class=\\\"help-block\\\">Umowa jest wymagane</div>\\r\\n          </div>-->\\r\\n\\r\\n          <div class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && selectedUser?.user?.isFromPool!='Y' && selectedUser?.user?.isFromPool!='N' }\\\">\\r\\n            <p-radioButton name=\\\"poolgroup\\\" value=\\\"Y\\\" [(ngModel)]=\\\"selectedUser.user.isFromPool\\\" label=\\\"Pula (TAK)\\\"></p-radioButton>\\r\\n            <p-radioButton name=\\\"poolgroup\\\" value=\\\"N\\\" [(ngModel)]=\\\"selectedUser.user.isFromPool\\\" label=\\\"Pula (NIE)\\\"></p-radioButton>\\r\\n            <div *ngIf=\\\"f.submitted && selectedUser?.user?.isFromPool!='Y' && selectedUser?.user?.isFromPool!='N'\\\" class=\\\"help-block\\\">Określenie przynależności do puli jest obowiązkowe</div>\\r\\n          </div>\\r\\n\\r\\n          <div *ngIf=\\\"showProjectFactor()\\\" class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !projectFactor?.valid }\\\">\\r\\n            <label for=\\\"projectFactor\\\">Współczynnik puli (np. 1.2)</label>\\r\\n            <input id=\\\"projectFactor\\\" type=\\\"number\\\" class=\\\"form-control\\\" name=\\\"projectFactor\\\" [(ngModel)]=\\\"selectedUser.user.projectFactor\\\" (ngModelChange)=\\\"changeSalaryAndLeaveRate($event)\\\" #projectFactor=\\\"ngModel\\\" required projectFactor min=\\\"0\\\"/>\\r\\n            <div *ngIf=\\\"f.submitted && !projectFactor?.valid\\\" class=\\\"help-block\\\">wymagany jest poprawny współczynnik</div>\\r\\n          </div>\\r\\n\\r\\n        </div>\\r\\n      </div>\\r\\n</div>\\r\\n      <div class=\\\"form-group\\\">\\r\\n        <button [disabled]=\\\"loading\\\" class=\\\"btn btn-primary\\\">Modyfikuj</button>\\r\\n        <img *ngIf=\\\"loading\\\" src=\\\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\\\" />\\r\\n        <a [routerLink]=\\\"['']\\\" class=\\\"btn btn-link\\\">Anuluj</a>\\r\\n      </div>\\r\\n    </form>\\r\\n  </div>\\r\\n</div>\\r\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\n\r\nimport { AlertService, UserService, DictService, WorkTypeService, AuthenticationService, ToolsService } from '../_services/index';\r\nimport { User, CodeValue, SearchUser } from '../_models/index';\r\nimport {SelectItem} from 'primeng/primeng'\r\n\r\nimport { catchError, map, tap, delay, mergeMap } from 'rxjs/operators';\r\nimport { Observable }    from 'rxjs';\r\nimport { FormsModule, FormBuilder, FormGroup, FormControl, EmailValidator, Validators, NG_VALIDATORS, Validator }     from '@angular/forms';\r\n\r\n@Component({\r\n    selector: 'app-user-change',\r\n    templateUrl: './user-change.component.html',\r\n    styleUrls: ['./user-change.component.css']\r\n})\r\n\r\n\r\nexport class UserChangeComponent implements OnInit {\r\n\r\n    loading:boolean = false;\r\n\r\n    roles:SelectItem[] = [];\r\n    offices:SelectItem[] = [];\r\n    ranks:SelectItem[] = [];\r\n    agreements:SelectItem[] = [];\r\n\r\n    showRoles:boolean = false;\r\n    showOffices:boolean = false;\r\n    showRanks:boolean = false;\r\n    showAgreements:boolean = false;\r\n\r\n    operator:User;\r\n\r\n    /* autocompletion changed user */\r\n    users:User[] = [];\r\n    suggestedUsers:SearchUser[];\r\n    selectedUser:SearchUser;\r\n\r\n    /* autocompletion company */\r\n    suggestedCompanies: string[];\r\n    company: string;\r\n    displayUserHistoryDialog: boolean;\r\n\r\n    // Dismiss worker\r\n    displayDismissDialog:boolean;\r\n    //\r\n    show:boolean=true;\r\n\r\n    rateControl = new FormControl(\"\", [Validators.min(0)]);\r\n\r\n    constructor(private router:Router,\r\n                private route: ActivatedRoute,\r\n                private userService:UserService,\r\n                private alertService:AlertService,\r\n                private dictService:DictService,\r\n                private workTypeService: WorkTypeService,\r\n                private authService:AuthenticationService,\r\n                private toolsService: ToolsService) {\r\n\r\n    }\r\n\r\n    ngOnInit():void {\r\n\r\n        let id: string = this.route.snapshot.paramMap.get('id'); //can be null\r\n\r\n        this.dictService.init();\r\n        this.workTypeService.init();\r\n        this.authService.userAsObs.subscribe(user => this.removeRolesAndGetManagedUsers(user, id));\r\n\r\n        this.dictService.getOfficesObs().subscribe((offices:CodeValue[]) => this.mapToOffices(offices));\r\n\r\n        this.mapToRanks(this.dictService.getRanks());\r\n        this.mapToAgreements(this.dictService.getAgreements());\r\n\r\n    }\r\n\r\n    checkSelect() {\r\n        if (this.selectedUser.user.roleCode.indexOf('CN') > -1) {\r\n            if (this.selectedUser.user.roleCode.length>1) {\r\n                this.removeRole(\"CN\");\r\n            }\r\n            this.show=false;\r\n            this.selectedUser.user.isActive = 'N';\r\n            this.selectedUser.user.isEmployed= 'N';\r\n            this.selectedUser.user.isFromPool= 'N';                  \r\n        }\r\n        else if (this.selectedUser.user.roleCode.indexOf('VE') > -1) {\r\n            if (this.selectedUser.user.roleCode.length > 1){\r\n                this.removeRole(\"VE\");\r\n            }\r\n            this.show=false;\r\n            this.selectedUser.user.isEmployed= 'N';\r\n            this.selectedUser.user.isFromPool= 'N';\r\n            this.selectedUser.user.isActive = 'N';\r\n        }\r\n        else {\r\n            this.show=true;\r\n            this.selectedUser.user.isActive = 'Y';\r\n            this.selectedUser.user.isEmployed= 'Y';\r\n        }\r\n    }\r\n\r\n    removeRole (role:string) {\r\n        this.selectedUser.user.roleCode=[];\r\n        this.selectedUser.user.roleCode.push(role);\r\n        this.alertService.warn('Uzytkownik z rolą '+(role ===\"CN\" ? \"Zleceniobiorca\" : \"Zleceniodawca\")+\" może posiadać tylko jedną rolę, aby wybrać inne role należy ją odznaczyć!\");\r\n    }\r\n\r\n    public showDismissDialog ()\r\n    {\r\n        this.displayDismissDialog=true;        \r\n    }\r\n    public dissmisWorker ()\r\n    {\r\n        this.selectedUser.user.isEmployed='N';\r\n        this.selectedUser.user.isActive='N';\r\n        this.selectedUser.user.account=\"0000000000 0000000000 000000\";\r\n        this.selectedUser.user.phone=\"000 000 000\";\r\n        this.selectedUser.user.addressPost=\"usunięto\";;\r\n        this.selectedUser.user.addressStreet=\"usunięto\";\r\n        this.selectedUser.user.excelId=+((new Date()).getFullYear()+'000'+this.selectedUser.user.excelId);\r\n        this.userService.update(this.selectedUser.user)\r\n            .subscribe(\r\n                data => {\r\n                this.alertService.success('Pomyślnie zakończono współpracę z ' + this.selectedUser.user.firstName+\" \"+this.selectedUser.user.lastName, true);\r\n                this.router.navigate(['employees']);\r\n            },\r\n                error => {\r\n                this.alertService.error('Nie udalo się zakończyć współpracy' + error);\r\n                this.loading = false;\r\n            });\r\n    }\r\n\r\n    public onSelectUser(value : SearchUser): void {\r\n        //console.log(\"changing company \"+JSON.stringify(value, this.toolsService.censorUser));\r\n        console.log(\"changing company \"+JSON.stringify(value));\r\n        if (value && value.user && value.user.company) {\r\n            this.company = value.user.company;\r\n        }\r\n        this.checkSelect();\r\n    }\r\n\r\n    suggestUser(event) {\r\n        let suggestedUsers: SearchUser[] = [];\r\n        let queryIgnoreCase: string = event.query ? event.query.toLowerCase(): event.query;\r\n        if (this.users && this.users.length > 0) {\r\n            for (let user of this.users) {\r\n                //let suggestion:string = JSON.stringify(user, this.toolsService.censorUser);\r\n                let suggestion:string = JSON.stringify(user);\r\n                console.log(\"suggestUser \" + suggestion + \" for \" + JSON.stringify(event));\r\n                if (suggestion.toLowerCase().indexOf(queryIgnoreCase) > -1) {\r\n                    let displayName:string = user.firstName + \" \" + user.lastName + \" (\" + user.role + \")\";\r\n                    suggestedUsers.push(new SearchUser(displayName, user));\r\n                    //console.log(\"added suggestUser \" + suggestion + \" for \" + JSON.stringify(user, this.toolsService.censorUser));\r\n                    console.log(\"added suggestUser \" + suggestion + \" for \" + JSON.stringify(user));\r\n                }\r\n            }\r\n        }\r\n        this.suggestedUsers = suggestedUsers;\r\n        //this.selectedUser = undefined;\r\n        console.log(\"suggestedUsers new \" + this.suggestedUsers.length);\r\n    }\r\n\r\n    public showProjectFactor() {\r\n        return this.selectedUser && this.operator && this.selectedUser.user.isFromPool === 'Y' && this.operator.roleCode.indexOf('PR') > -1;\r\n    }\r\n\r\n    suggestCompany(event) {\r\n        let suggestedCompanies: string[] = [];\r\n        let queryIgnoreCase: string = event.query ? event.query.toLowerCase(): event.query;\r\n\r\n        if (this.users && this.users.length > 0) {\r\n            console.log('all ' + this.users.length);\r\n            for (let u of this.users) {\r\n                if (this.selectedUser.user.roleCode.indexOf('VE') == -1 && u.roleCode.indexOf('VE') == -1) {\r\n                    if (u.company && u.company.toLowerCase().indexOf(queryIgnoreCase) > -1 && suggestedCompanies.indexOf(u.company) == -1) {\r\n                        suggestedCompanies.push(u.company);\r\n                    }\r\n                } else if (this.selectedUser.user.roleCode.indexOf('VE') > -1 && u.roleCode.indexOf('VE') > -1) {\r\n                    if (u.company && u.company.toLowerCase().indexOf(queryIgnoreCase) > -1 && suggestedCompanies.indexOf(u.company) == -1) {\r\n                        suggestedCompanies.push(u.company);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.suggestedCompanies = suggestedCompanies;\r\n        console.log('suggestedCompanies: ' + JSON.stringify(this.suggestedCompanies));\r\n    }\r\n\r\n    changeSalaryAndLeaveRate(newPoolFactor: number) {\r\n        console.log('Pool factor changed: '+JSON.stringify(newPoolFactor));\r\n        this.selectedUser.user.salaryRate = +parseFloat(''+(22.5*newPoolFactor)).toFixed(3);\r\n        this.selectedUser.user.leaveRate  = +parseFloat(''+(22.5*newPoolFactor)).toFixed(3);\r\n    }\r\n\r\n    changeUser() {\r\n        this.loading = true;\r\n\r\n        if (this.company) {\r\n            this.selectedUser.user.company = this.company;\r\n        }\r\n\r\n        this.userService.update(this.selectedUser.user)\r\n            .subscribe(\r\n                data => {\r\n                this.alertService.success('Pomyślnie zmieniono użytkownika ' + this.selectedUser.user.email, true);\r\n                this.selectedUser.user.roleCode.indexOf('VE') === -1 ? this.router.navigate(['employees']) : this.router.navigate(['contractors']);\r\n                //this.router.navigate(['']); //navigate home\r\n            },\r\n                error => {\r\n                this.alertService.error('Nie udalo się zmienić użytkownika' + error);\r\n                this.loading = false;\r\n            });\r\n    }\r\n\r\n    private mapToRoles(pairs:CodeValue[]):void {\r\n        this.showRoles = this.toolsService.mapToSelectItem(pairs, this.roles);\r\n    }\r\n\r\n    private mapToOffices(pairs:CodeValue[]):void {\r\n        this.showOffices = this.toolsService.mapToSelectItem(pairs, this.offices);\r\n    }\r\n\r\n    private mapToRanks(pairs:CodeValue[]):void {\r\n        this.showRanks = this.toolsService.mapToSelectItem(pairs, this.ranks);\r\n    }\r\n\r\n    private mapToAgreements(pairs:CodeValue[]):void {\r\n        this.showAgreements = this.toolsService.mapToSelectItem(pairs, this.agreements);\r\n    }\r\n\r\n\r\n\r\n    private removeRolesAndGetManagedUsers(user:User, id: string):void {\r\n        if (user) {\r\n            this.operator = user;\r\n            console.log(\"Operator \" + JSON.stringify(this.operator));\r\n            //console.log(\"Operator \" + JSON.stringify(this.operator, this.toolsService.censorUser));\r\n            if (this.operator.roleCode.indexOf('PR') == -1) {\r\n                let roles:CodeValue[] = this.dictService.getRoles();\r\n                let allowedRoles:CodeValue[] = [];\r\n                for (let role of roles) {\r\n                    if (role.code !== 'PR') {\r\n                        allowedRoles.push(role);\r\n                    }\r\n                }\r\n                this.mapToRoles(allowedRoles);\r\n                this.userService.getAllButPR().subscribe(users => this.setUsersAndSelectedUser(users, id));\r\n            } else {\r\n                this.mapToRoles(this.dictService.getRoles());\r\n                this.userService.getAll().subscribe(users => this.setUsersAndSelectedUser(users, id));\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    private setUsersAndSelectedUser(users:User[], sId:String):any {\r\n        this.users = users;\r\n        if (sId) {\r\n            let id: number = +sId;\r\n            for(let user of users) {\r\n                if (user.id === id) {\r\n                    //console.log(\"found \"+JSON.stringify(user, this.toolsService.censorUser));\r\n                    console.log(\"found \"+JSON.stringify(user));\r\n                    let displayName:string = user.firstName + \" \" + user.lastName + \" (\" + user.role + \")\";\r\n                    this.selectedUser = new SearchUser(displayName, user);\r\n                    this.onSelectUser(this.selectedUser);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n","module.exports = \"\"","module.exports = \"<div class=\\\"ui-grid-row\\\" style=\\\"max-width: 900px;\\\">\\r\\n\\r\\n    <div style=\\\"margin-top: 5px\\\" *ngIf=\\\"userHistory\\\" class=\\\"ui-g\\\">\\r\\n      <!--(onRowSelect)=\\\"onRowSelect($event)\\\"-->\\r\\n      <p-dataTable [value]=\\\"userHistory\\\" [rows]=\\\"20\\\" [paginator]=\\\"true\\\" [globalFilter]=\\\"gb\\\" #dt dataKey=\\\"id\\\" resizableColumns=\\\"true\\\" sortField=\\\"histCreationDate\\\" sortOrder=\\\"-1\\\" [loading]=\\\"loading\\\" loadingIcon=\\\"fa fa-spinner\\\" expandableRows=\\\"true\\\">\\r\\n        <p-header>\\r\\n          <div>\\r\\n            <i class=\\\"fa fa-search\\\"></i>\\r\\n            <input #gb type=\\\"text\\\" pInputText size=\\\"50\\\" placeholder=\\\"Filtruj\\\">\\r\\n          </div>\\r\\n        </p-header>\\r\\n        \\r\\n        <p-column expander=\\\"true\\\" styleClass=\\\"col-icon\\\" [style]=\\\"{'width': '30px'}\\\"></p-column>\\r\\n        \\r\\n        <p-column [sortable]=\\\"true\\\" field=\\\"id\\\" header=\\\"Id bazy\\\" [hidden]=\\\"true\\\"></p-column>\\r\\n        <p-column [sortable]=\\\"true\\\" field=\\\"excelId\\\" header=\\\"Id excel\\\" [hidden]=\\\"true\\\"></p-column>\\r\\n\\r\\n        <p-column header=\\\"Osoba\\\" field=\\\"lastName\\\"  [filter]=\\\"true\\\" filterPlaceholder=\\\"Nazwisko\\\" [style]=\\\"{'text-align':'center', 'width':'60px'}\\\">\\r\\n          <ng-template let-col let-user=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n            <span [style.color]=\\\"'green'\\\" class=\\\"ui-inputgroup-addon\\\">{{user.firstName}} {{user.lastName}}</span>\\r\\n          </ng-template>\\r\\n        </p-column>\\r\\n\\r\\n        <p-column [sortable]=\\\"true\\\" field=\\\"office\\\" header=\\\"Biuro\\\" ></p-column>\\r\\n\\r\\n        <p-column [sortable]=\\\"true\\\" field=\\\"role\\\" header=\\\"Role\\\" ></p-column>\\r\\n        <p-column [sortable]=\\\"true\\\" field=\\\"rank\\\" header=\\\"Stopień\\\" ></p-column>\\r\\n\\r\\n        <p-column [sortable]=\\\"true\\\" field=\\\"isFromPool\\\" header=\\\"Pula\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Y/N\\\" [style]=\\\"{'text-align':'center', 'width':'45px'}\\\">\\r\\n          <ng-template let-col let-user=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n            <span *ngIf=\\\"user[col.field]=='Y'\\\" [style.color]=\\\"'green'\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-users'\\\"></i></span>\\r\\n            <span *ngIf=\\\"user[col.field]!='Y'\\\" [style.color]=\\\"'grey'\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-street-view'\\\"></i></span>\\r\\n          </ng-template>\\r\\n\\r\\n        </p-column>\\r\\n        <p-column [sortable]=\\\"true\\\" field=\\\"projectFactor\\\" header=\\\"Współczynnik\\\" ></p-column>\\r\\n\\r\\n\\r\\n        <p-column [sortable]=\\\"true\\\" field=\\\"salary\\\" header=\\\"Wynagrodzenie\\\" ></p-column>\\r\\n        <p-column [sortable]=\\\"true\\\" field=\\\"salaryRate\\\" header=\\\"St. gwarantowana\\\" ></p-column>\\r\\n        <p-column [sortable]=\\\"true\\\" field=\\\"leaveRate\\\" header=\\\"St. za urlop\\\" ></p-column>\\r\\n\\r\\n<!--\\r\\n        <p-column [sortable]=\\\"true\\\" field=\\\"isActive\\\" header=\\\"Aktywny\\\" ></p-column>\\r\\n        <p-column [sortable]=\\\"true\\\" field=\\\"isEmployed\\\" header=\\\"Pracuje\\\" ></p-column>-->\\r\\n\\r\\n        <!--<p-column [sortable]=\\\"true\\\" field=\\\"company\\\" header=\\\"Firma\\\" ></p-column>\\r\\n        <p-column [sortable]=\\\"true\\\" field=\\\"agreement\\\" header=\\\"Umowa\\\" ></p-column>-->\\r\\n\\r\\n\\r\\n\\r\\n        <!--\\r\\n        <p-column [sortable]=\\\"true\\\" field=\\\"lastModDate\\\" header=\\\"Od\\\" ></p-column>\\r\\n        <p-column [sortable]=\\\"true\\\" field=\\\"histCreationDate\\\" header=\\\"Do\\\" ></p-column>\\r\\n        <p-column [sortable]=\\\"true\\\" field=\\\"modifiedBy\\\" header=\\\"Modyfikował\\\" ></p-column>\\r\\n        -->\\r\\n\\r\\n        <p-column [sortable]=\\\"true\\\" field=\\\"histCreationDate\\\" header=\\\"Do\\\" [style]=\\\"{'text-align':'center', 'width':'120px'}\\\">\\r\\n          <ng-template let-col let-user=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n            <span *ngIf=\\\"user[col.field]==CURRENT_EOF\\\" [style.color]=\\\"'green'\\\" class=\\\"ui-inputgroup-addon\\\">Bieżący</span>\\r\\n            <span *ngIf=\\\"user[col.field]!=CURRENT_EOF\\\" >{{user[col.field]}}</span>\\r\\n          </ng-template>\\r\\n\\r\\n        </p-column>\\r\\n\\r\\n        <ng-template let-user pTemplate=\\\"rowexpansion\\\">\\r\\n          <div class=\\\"ui-grid ui-grid-responsive ui-fluid\\\" style=\\\"font-size:16px;padding:20px\\\">\\r\\n\\r\\n            <div *ngIf=\\\"user?.histCreationDate == CURRENT_EOF\\\" class=\\\"ui-grid-row\\\" style=\\\"text-align:left; font-size: smaller;\\\">\\r\\n              Rekord bieżący\\r\\n            </div>\\r\\n            <div *ngIf=\\\"user?.modifiedBy\\\" class=\\\"ui-grid-row\\\" style=\\\"text-align:left; font-size: smaller;\\\">\\r\\n              Rekord modyfikowany przez: <span style=\\\"font-weight: bold\\\">{{user?.modifiedByUser?.email}}</span>\\r\\n            </div>\\r\\n            <div *ngIf=\\\"user?.lastModDate\\\" class=\\\"ui-grid-row\\\" style=\\\"text-align:left; font-size: smaller;\\\">\\r\\n              Rekord aktywny od: <span style=\\\"font-weight: bold\\\">{{user?.lastModDate}}</span>\\r\\n            </div>\\r\\n            <div *ngIf=\\\"user?.histCreationDate\\\" class=\\\"ui-grid-row\\\" style=\\\"text-align:left; font-size: smaller;\\\">\\r\\n              Rekord aktywny do: <span style=\\\"font-weight: bold\\\">{{user?.histCreationDate}}</span>\\r\\n            </div>\\r\\n            <hr>\\r\\n\\r\\n\\r\\n            <div class=\\\"ui-grid-row\\\">\\r\\n              <div *ngIf=\\\"user?.email\\\" class=\\\"ui-grid-col-12\\\" style=\\\"text-align:left; font-size: smaller;\\\">\\r\\n                Dane kontaktowe: tel. <span style=\\\"font-weight: bold\\\">{{user?.phone}}</span>, email: <span style=\\\"font-weight: bold\\\">{{user?.email}}</span>, adres: <span style=\\\"font-weight: bold\\\">{{user?.addressStreet}}, {{user?.addressPost}}</span>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\\\"ui-grid-row\\\">\\r\\n              <div *ngIf=\\\"user?.account\\\" class=\\\"ui-grid-col-12\\\" style=\\\"text-align:left; font-size: smaller;\\\">\\r\\n                Rachunek: <span style=\\\"font-weight: bold\\\">{{user.account}}</span>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\\\"ui-grid-row\\\">\\r\\n              <div *ngIf=\\\"user?.company\\\" class=\\\"ui-grid-col-12\\\" style=\\\"text-align:left; font-size: smaller;\\\">\\r\\n                <span style=\\\"font-weight: bold\\\">{{user?.company}}</span>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div *ngIf=\\\"user?.excelId\\\" class=\\\"ui-grid-row\\\" style=\\\"text-align:left; font-size: smaller;\\\">\\r\\n              Numer Excel: <span style=\\\"font-weight: bold\\\">{{user?.excelId}}</span>\\r\\n            </div>\\r\\n            <div *ngIf=\\\"user\\\" class=\\\"ui-grid-row\\\" style=\\\"text-align:left; font-size: smaller;\\\">\\r\\n                Aktywny: <span style=\\\"font-weight: bold; padding-right: 5px;\\\">{{user?.isActive}}</span>\\r\\n                Zatrudniony: <span style=\\\"font-weight: bold\\\">{{user?.isEmployed}}</span>\\r\\n            </div>\\r\\n          </div>\\r\\n        </ng-template>\\r\\n\\r\\n\\r\\n        <!--<p-column [sortable]=\\\"true\\\" field=\\\"status\\\" header=\\\"statusSearch\\\"  [style]=\\\"{'width':'0px'}\\\"></p-column>&lt;!&ndash; search &ndash;&gt;\\r\\n        <p-column [sortable]=\\\"true\\\" field=\\\"statusCode\\\" header=\\\"Status\\\" >\\r\\n          <ng-template let-col let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n            <span class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"toolsService.getStatusIcon(order.statusCode)\\\"></i></span>\\r\\n            <span style=\\\"padding: 3px\\\">{{order.status}}</span>\\r\\n          </ng-template>\\r\\n        </p-column>\\r\\n-->\\r\\n        <ng-template pTemplate=\\\"emptymessage\\\">\\r\\n          Brak wpisów w historii...\\r\\n        </ng-template>\\r\\n\\r\\n      </p-dataTable>\\r\\n\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n\"","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\n\r\n\r\nimport { User, RelatedItem, Order, OrderHistory, WorkType, CodeValue } from '../_models/index';\r\nimport { WOService, RelatedItemService, UserService, DictService, AlertService, WorkTypeService, AuthenticationService, ToolsService } from '../_services/index';\r\n\r\n@Component({\r\n  selector: 'app-user-history',\r\n  templateUrl: './user-history.component.html',\r\n  styleUrls: ['./user-history.component.css']\r\n})\r\nexport class UserHistoryComponent implements OnInit {\r\n\r\n  public CURRENT_EOF = \"3000-01-01 00:00:00\";\r\n\r\n  _selectedUser:User;\r\n  _staff:User[];\r\n  userHistory:User[];\r\n\r\n  constructor(private toolsService:ToolsService,\r\n              private authenticationService:AuthenticationService,\r\n              private userService:UserService) {\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n  }\r\n\r\n\r\n  @Input()\r\n  set selectedUser(user:User) {\r\n    if (user) {\r\n      console.log('got user: ', user.id);\r\n      this._selectedUser = user;\r\n      this.userService.getHistoryById(user.id).subscribe((history:User[]) => this.processUserHistory(history));\r\n    }\r\n  }\r\n\r\n  @Input()\r\n  set staff(staff:User[]) {\r\n    if (staff) {\r\n      console.log('got staff: ', staff.length);\r\n      this._staff = staff;\r\n    }\r\n  }\r\n\r\n  private processUserHistory(history:User[]):any {\r\n    this.userHistory = history;\r\n\r\n    //let current: User = JSON.parse(JSON.stringify(this._selectedUser, this.toolsService.censorUser));\r\n    let current: User = JSON.parse(JSON.stringify(this._selectedUser));\r\n    current.histCreationDate = this.CURRENT_EOF;\r\n    this.userHistory.push(current); //add current record\r\n\r\n    for(let user of this.userHistory) {\r\n\r\n      for (let modifiedBy of this._staff) {\r\n        if (user.modifiedBy == modifiedBy.id) {\r\n          user.modifiedByUser = modifiedBy;\r\n        }\r\n      }\r\n\r\n    }\r\n  }\r\n}","module.exports = \"\"","module.exports = \"\\r\\n\\r\\n  <div class=\\\"ui-dialog-buttonpane ui-helper-clearfix\\\">\\r\\n    <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 30px;\\\">\\r\\n        <div class=\\\"ui-grid-col-3\\\">Wpisz urlop</div>\\r\\n        <div class=\\\"ui-grid-col-3\\\">\\r\\n            <button width=\\\"300px\\\" type=\\\"button\\\" pButton [icon]=\\\"'fa fa-user'\\\" (click)=\\\"showEdit()\\\" [label]=\\\"'Urlop'\\\"></button>\\r\\n        </div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n\\r\\n\\r\\n<p-dialog header=\\\"Wpisz urlop\\\" [(visible)]=\\\"displayEditDialog\\\" [responsive]=\\\"true\\\" [minWidth]=\\\"800\\\" [minHeight]=\\\"600\\\">\\r\\n\\r\\n    <div class=\\\"ui-grid ui-grid-responsive ui-fluid ui-grid-pad\\\">\\r\\n\\r\\n      <div class=\\\"ui-grid-row\\\"  style=\\\"margin-top: 20px; margin-bottom: 300px;\\\">\\r\\n\\r\\n          <div class=\\\"ui-grid-col-4\\\">\\r\\n            <p-autoComplete\\r\\n                  id=\\\"person\\\" [(ngModel)]=\\\"selectedUser\\\" [suggestions]=\\\"suggestedUsers\\\" (completeMethod)=\\\"suggestUser($event)\\\" [dropdown]=\\\"true\\\" field=\\\"displayName\\\"></p-autoComplete>\\r\\n          </div>\\r\\n\\r\\n          <div class=\\\"ui-grid-col-1\\\"><label style=\\\"float: right\\\" for=\\\"afterDate\\\">Od</label></div>\\r\\n          <div class=\\\"ui-grid-col-2\\\">\\r\\n            <p-calendar [locale]=\\\"pl\\\" [disabled]=\\\"selectedUser==undefined\\\" id=\\\"afterDate\\\" name=\\\"afterDate\\\" [(ngModel)]=\\\"afterDate\\\" showIcon=\\\"true\\\" dateFormat=\\\"dd.mm.yy\\\" utc=\\\"true\\\"></p-calendar>\\r\\n          </div>\\r\\n          <div class=\\\"ui-grid-col-1\\\"><label style=\\\"float: right\\\" for=\\\"beforeDate\\\">Do</label></div>\\r\\n          <div class=\\\"ui-grid-col-2\\\">\\r\\n            <p-calendar [locale]=\\\"pl\\\" [disabled]=\\\"selectedUser==undefined || afterDate==undefined\\\" id=\\\"beforeDate\\\" [minDate]=\\\"afterDate\\\" name=\\\"beforeDate\\\" [(ngModel)]=\\\"beforeDate\\\" showIcon=\\\"true\\\" dateFormat=\\\"dd.mm.yy\\\" utc=\\\"true\\\"></p-calendar>\\r\\n          </div>\\r\\n          <div class=\\\"ui-grid-col-2\\\">\\r\\n            <button pButton type=\\\"button\\\" (click)=\\\"confirmLeave()\\\" icon=\\\"fa fa-user\\\" label=\\\"Zapisz\\\" style=\\\"margin-left: 0px; min-width: 140px; max-width: 200px;\\\" [disabled]=\\\"!isFormValid()\\\"></button>\\r\\n          </div>\\r\\n      </div>\\r\\n\\r\\n\\r\\n    </div>\\r\\n\\r\\n</p-dialog>\\r\\n\"","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\r\nimport { User, Timesheet, SearchUser } from '../_models/index';\r\nimport { TimesheetService, ToolsService, AlertService } from '../_services/index';\r\nimport { Calendar } from '../_models/calendar';\r\n\r\n@Component({\r\n    selector: 'user-leave',\r\n    templateUrl: './user-leave.component.html',\r\n    styleUrls: ['./user-leave.component.css']\r\n})\r\nexport class UserLeaveComponent implements OnInit {\r\n\r\n    @Input() users:User[];\r\n    suggestedUsers:SearchUser[];\r\n    selectedUser:SearchUser;\r\n\r\n    displayEditDialog: boolean = false;\r\n\r\n    afterDate:Date;\r\n    beforeDate:Date;\r\n    pl:Calendar;\r\n\r\n    constructor(private timesheetService:TimesheetService,\r\n                private alertService:AlertService,\r\n                private toolsService: ToolsService) {\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.pl=new Calendar();\r\n    }\r\n\r\n    public showEdit(): void {\r\n        this.displayEditDialog = true;\r\n    }\r\n\r\n    suggestUser(event) {\r\n        let suggestedUsers: SearchUser[] = [];\r\n        let queryIgnoreCase: string = event.query ? event.query.toLowerCase(): event.query;\r\n\r\n        if (this.users && this.users.length > 0) {\r\n            for (let user of this.users) {\r\n                let suggestion:string = JSON.stringify(user).toLowerCase();\r\n                console.log(\"suggestUser \" + suggestion + \" for \" + JSON.stringify(event));\r\n                if (suggestion.indexOf(queryIgnoreCase) > -1) {\r\n                    let displayName:string = user.firstName + \" \" + user.lastName + \" (\" + user.role + \")\";\r\n                    suggestedUsers.push(new SearchUser(displayName, user));\r\n                }\r\n            }\r\n        }\r\n        this.suggestedUsers = suggestedUsers;\r\n        console.log(\"suggestedUsers \" + JSON.stringify(this.suggestedUsers));\r\n    }\r\n\r\n    public isFormValid() :boolean {\r\n        return this.selectedUser && this.selectedUser.user && this.selectedUser.user.id > 0 &&\r\n            this.afterDate && this.beforeDate && this.afterDate.getTime()<=this.beforeDate.getTime();\r\n    }\r\n\r\n    public confirmLeave(): void {\r\n        console.log(\"Confirm leave for: \"+this.selectedUser.user.id+\" test:\"+this.toolsService.formatDate(this.afterDate, 'yyyy-MM-dd HH:mm:ss')+\" \"+this.toolsService.formatDate(this.beforeDate, 'yyyy-MM-dd'));\r\n\r\n        this.timesheetService.addLeave(\r\n            this.selectedUser.user.id,\r\n            this.toolsService.formatDate(this.afterDate, 'yyyy-MM-dd HH:mm:ss'),\r\n            this.toolsService.formatDate(this.beforeDate, 'yyyy-MM-dd HH:mm:ss')\r\n        ).subscribe(result => this.processLeave(result));\r\n\r\n        this.displayEditDialog = false;\r\n    }\r\n\r\n    private processLeave(result:any):void {\r\n        console.log(\"Leave response \"+JSON.stringify(result))\r\n        if (result && result.created && result.created == 1) {\r\n            this.alertService.info(\"Zapisano urlop dla \"+this.selectedUser.displayName+ \" w dniach od \"+this.toolsService.formatDate(this.afterDate, 'yyyy-MM-dd') + \" do \"+this.toolsService.formatDate(this.beforeDate, 'yyyy-MM-dd'));\r\n        } else {\r\n            this.alertService.error(\"Nie udało się zapisać urlopu dla \"+this.selectedUser.displayName);\r\n        }\r\n    }\r\n}\r\n","module.exports = \"<div class=\\\"jumbotron\\\">\\r\\n    <div class=\\\"container\\\">\\r\\n        <h2>Dodaj nowego użytkownika</h2>\\r\\n        <form name=\\\"f\\\" novalidate (ngSubmit)=\\\"f.form?.valid && register()\\\" #f=\\\"ngForm\\\">\\r\\n            <div class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !firstName?.valid }\\\">\\r\\n                <label for=\\\"firstName\\\">Imie</label>\\r\\n                <input id=\\\"firstName\\\" type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"firstName\\\" [(ngModel)]=\\\"user.firstName\\\" #firstName=\\\"ngModel\\\" required minlength=\\\"3\\\" />\\r\\n                <div *ngIf=\\\"f.submitted && !firstName?.valid\\\" class=\\\"help-block\\\">Imie jest wymagane</div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !lastName?.valid }\\\">\\r\\n                <label for=\\\"lastName\\\">Nazwisko</label>\\r\\n                <input id=\\\"lastName\\\" type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"lastName\\\" [(ngModel)]=\\\"user.lastName\\\" #lastName=\\\"ngModel\\\" required minlength=\\\"3\\\"/>\\r\\n                <div *ngIf=\\\"f.submitted && !lastName?.valid\\\" class=\\\"help-block\\\">Nazwisko jest wymagane</div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !newemail?.valid }\\\">\\r\\n                <label for=\\\"newemail\\\">Email</label>\\r\\n                <input id=\\\"newemail\\\" type=\\\"email\\\" class=\\\"form-control\\\" name=\\\"newemail\\\" [(ngModel)]=\\\"user.email\\\" #newemail=\\\"ngModel\\\" required email />\\r\\n                <div *ngIf=\\\"f.submitted && !newemail?.valid\\\" class=\\\"help-block\\\">wymagany jest poprawny adres email</div>\\r\\n            </div>\\r\\n\\r\\n            <div class=\\\"form-group\\\" *ngIf=\\\"showRoles\\\">\\r\\n                <label for=\\\"roleCode\\\">Funkcja w systemie</label>\\r\\n                <p-selectButton id=\\\"roleCode\\\" name=\\\"roleCode\\\" [options]=\\\"roles\\\" multiple=\\\"multiple\\\" [(ngModel)]=\\\"user.roleCode\\\" required #roleCode=\\\"ngModel\\\" (onChange)=\\\"checkSelect()\\\"></p-selectButton>\\r\\n                <div *ngIf=\\\"f.submitted && !roleCode?.valid\\\" class=\\\"help-block\\\">Rola jest wymagana</div>\\r\\n            </div>\\r\\n\\r\\n\\r\\n            <div class=\\\"form-group\\\" *ngIf=\\\"showOffices\\\">\\r\\n                <label for=\\\"officeCode\\\">Biuro macierzyste</label>\\r\\n                <p-selectButton id=\\\"officeCode\\\" name=\\\"officeCode\\\" [options]=\\\"offices\\\" [(ngModel)]=\\\"user.officeCode\\\" required #officeCode=\\\"ngModel\\\"></p-selectButton>\\r\\n                <!--<p-dropdown name=\\\"officeCode\\\" [options]=\\\"offices | async\\\" [(ngModel)]=\\\"user.officeCode\\\" required autoWidth=\\\"false\\\" ></p-dropdown>-->\\r\\n                <div *ngIf=\\\"f.submitted && !officeCode?.valid\\\" class=\\\"help-block\\\">Biuro jest wymagane</div>\\r\\n            </div>\\r\\n\\r\\n            <div *ngIf=\\\"user.roleCode.indexOf('VE') > -1\\\" style=\\\"width: 100%; margin-bottom: 10px;\\\">\\r\\n                <label for=\\\"company\\\">Firma Zlecająca</label>\\r\\n                <div class=\\\"ui-fluid\\\">\\r\\n                    <p-autoComplete\\r\\n                            id=\\\"company\\\"\\r\\n                            name=\\\"company\\\"\\r\\n                            [(ngModel)]=\\\"company\\\"\\r\\n                            [suggestions]=\\\"suggestedCompanies\\\"\\r\\n                            (completeMethod)=\\\"suggestCompany($event)\\\"\\r\\n                            [dropdown]=\\\"true\\\"\\r\\n                            [forceSelection]=\\\"false\\\"\\r\\n                            placeholder=\\\"Wybierz/wpisz nazwę firmy zleceniodawcy...\\\"\\r\\n                            required\\r\\n                            ></p-autoComplete>\\r\\n                    <div *ngIf=\\\"f.submitted && !company?.valid\\\" class=\\\"help-block\\\">Firma jest wymagana</div>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div *ngIf=\\\"user.roleCode.indexOf('VE') == -1\\\">\\r\\n                <!--<div style=\\\"margin-bottom: 10px; width: 100%; \\\">\\r\\n                    <label for=\\\"company\\\">Podmiot zatrudniający</label>\\r\\n                    <div class=\\\"ui-fluid\\\">\\r\\n                        <p-autoComplete\\r\\n                            id=\\\"company\\\"\\r\\n                            name=\\\"company\\\"\\r\\n                            [(ngModel)]=\\\"company\\\"\\r\\n                            [suggestions]=\\\"suggestedCompanies\\\"\\r\\n                            (completeMethod)=\\\"suggestCompany($event)\\\"\\r\\n                            [dropdown]=\\\"true\\\"\\r\\n                            [forceSelection]=\\\"false\\\"\\r\\n                            placeholder=\\\"Wybierz/wpisz nazwę firmy zatrudniajacej BOT/DRU etc...\\\"\\r\\n                            required\\r\\n                                ></p-autoComplete>\\r\\n                        <div *ngIf=\\\"f.submitted && !company?.valid\\\" class=\\\"help-block\\\">Firma jest wymagana</div>\\r\\n                    </div>\\r\\n                </div>-->\\r\\n            <div *ngIf=\\\"!show\\\">\\r\\n                <div style=\\\"margin-bottom: 10px;\\\">\\r\\n                    <div class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !account?.valid }\\\">\\r\\n                        <label for=\\\"account\\\">Nr konta</label>\\r\\n                        <input id=\\\"account\\\" type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"account\\\" [(ngModel)]=\\\"user.account\\\" #account=\\\"ngModel\\\" account minlength=\\\"26\\\"/>\\r\\n                        <div *ngIf=\\\"f.submitted && !account?.valid\\\" class=\\\"help-block\\\">numer rachunku jest niepoprawny</div>\\r\\n                    </div>\\r\\n\\r\\n                    <div class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !phone?.valid }\\\">\\r\\n                        <label for=\\\"phone\\\">Telefon</label>\\r\\n                        <input id=\\\"phone\\\" type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"phone\\\" [(ngModel)]=\\\"user.phone\\\" #phone=\\\"ngModel\\\" phone minlength=\\\"9\\\" />\\r\\n                        <div *ngIf=\\\"f.submitted && !phone?.valid\\\" class=\\\"help-block\\\">numer telefonu jest niepoprawny</div>\\r\\n                    </div>\\r\\n\\r\\n                    <div class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !addressStreet?.valid }\\\">\\r\\n                        <label for=\\\"addressStreet\\\">Ulica nr domu/lokal</label>\\r\\n                        <input id=\\\"addressStreet\\\" type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"addressStreet\\\" [(ngModel)]=\\\"user.addressStreet\\\" #addressStreet=\\\"ngModel\\\" addressStreet minlength=\\\"5\\\"/>\\r\\n                        <div *ngIf=\\\"f.submitted && !addressStreet?.valid\\\" class=\\\"help-block\\\">adres Ulica nr domu(/numer lokalu) jest niepoprawny</div>\\r\\n                    </div>\\r\\n\\r\\n                    <div class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !addressPost?.valid }\\\">\\r\\n                        <label for=\\\"addressPost\\\">Kod, miejscowość</label>\\r\\n                        <input id=\\\"addressPost\\\" type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"addressPost\\\" [(ngModel)]=\\\"user.addressPost\\\" #addressPost=\\\"ngModel\\\"  addressPost minlength=\\\"7\\\"/>\\r\\n                        <div *ngIf=\\\"f.submitted && !addressPost?.valid\\\" class=\\\"help-block\\\">kod pocztowy oraz miejscowość jest nipoprawna</div>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n\\r\\n                <div *ngIf=\\\"show\\\">\\r\\n                <div style=\\\"margin-bottom: 10px;\\\">\\r\\n                    <div class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !account?.valid }\\\">\\r\\n                        <label for=\\\"account\\\">Nr konta</label>\\r\\n                        <input id=\\\"account\\\" type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"account\\\" [(ngModel)]=\\\"user.account\\\" #account=\\\"ngModel\\\" required account minlength=\\\"26\\\"/>\\r\\n                        <div *ngIf=\\\"f.submitted && !account?.valid\\\" class=\\\"help-block\\\">wymagany jest poprawny numer rachunku</div>\\r\\n                    </div>\\r\\n\\r\\n                    <div class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !phone?.valid }\\\">\\r\\n                        <label for=\\\"phone\\\">Telefon</label>\\r\\n                        <input id=\\\"phone\\\" type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"phone\\\" [(ngModel)]=\\\"user.phone\\\" #phone=\\\"ngModel\\\" required phone minlength=\\\"9\\\" />\\r\\n                        <div *ngIf=\\\"f.submitted && !phone?.valid\\\" class=\\\"help-block\\\">wymagany jest numer telefonu</div>\\r\\n                    </div>\\r\\n\\r\\n                    <div class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !addressStreet?.valid }\\\">\\r\\n                        <label for=\\\"addressStreet\\\">Ulica nr domu/lokal</label>\\r\\n                        <input id=\\\"addressStreet\\\" type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"addressStreet\\\" [(ngModel)]=\\\"user.addressStreet\\\" #addressStreet=\\\"ngModel\\\" required addressStreet minlength=\\\"5\\\"/>\\r\\n                        <div *ngIf=\\\"f.submitted && !addressStreet?.valid\\\" class=\\\"help-block\\\">wymagany jest poprawny adres Ulica nr domu(/numer lokalu)</div>\\r\\n                    </div>\\r\\n\\r\\n                    <div class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !addressPost?.valid }\\\">\\r\\n                        <label for=\\\"addressPost\\\">Kod, miejscowość</label>\\r\\n                        <input id=\\\"addressPost\\\" type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"addressPost\\\" [(ngModel)]=\\\"user.addressPost\\\" #addressPost=\\\"ngModel\\\" required addressPost minlength=\\\"7\\\"/>\\r\\n                        <div *ngIf=\\\"f.submitted && !addressPost?.valid\\\" class=\\\"help-block\\\">wymagany jest poprawny kod pocztowy oraz miejscowość</div>\\r\\n                    </div>\\r\\n                </div>\\r\\n                \\r\\n\\r\\n                <!-- <div *ngIf=\\\"user.roleCode.indexOf('CN') == -1\\\"> -->\\r\\n                    <div  class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !excelId?.valid  }\\\">\\r\\n                        <label for=\\\"excelId\\\">Identyfikator excel</label>\\r\\n                        <input id=\\\"excelId\\\" type=\\\"number\\\" class=\\\"form-control\\\" name=\\\"excelId\\\" [(ngModel)]=\\\"user.excelId\\\" #excelId=\\\"ngModel\\\"  required excelId minlength=\\\"1\\\" min=\\\"0\\\" />\\r\\n                        <div *ngIf=\\\"f.submitted && !excelId?.valid \\\" class=\\\"help-block\\\">Identyfikator w excel jest wymagany (liczba >= 0)</div>\\r\\n                    </div>\\r\\n\\r\\n                    <div class=\\\"form-group\\\" *ngIf=\\\"showRanks\\\">\\r\\n                        <label for=\\\"rankCode\\\">Zaszeregowanie (powiązane ze sposobem wynagradzania)</label>\\r\\n                        <p-selectButton id=\\\"rankCode\\\" name=\\\"rankCode\\\" [options]=\\\"ranks\\\" [(ngModel)]=\\\"user.rankCode\\\" required #rankCode=\\\"ngModel\\\"></p-selectButton>\\r\\n                        <!--<p-dropdown name=\\\"rankCode\\\" [options]=\\\"ranks | async\\\" [(ngModel)]=\\\"user.rankCode\\\" required autoWidth=\\\"false\\\" ></p-dropdown>-->\\r\\n                        <div *ngIf=\\\"f.submitted && !rankCode?.valid\\\" class=\\\"help-block\\\">Zaszeregowanie jest wymagane</div>\\r\\n                    </div>\\r\\n\\r\\n                    <div *ngIf=\\\"operator.roleCode.indexOf('PR') !== -1 && user?.rankCode === 'SEN'\\\" class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !salary?.valid }\\\">\\r\\n                        <label for=\\\"salary\\\">Stałe wynagrodzenie w PLN</label>\\r\\n                        <input pInputText id=\\\"salary\\\" type=\\\"number\\\" class=\\\"form-control\\\" name=\\\"salary\\\" [(ngModel)]=\\\"user.salary\\\" #salary=\\\"ngModel\\\" required salary min=\\\"0\\\" pattern=\\\"^[0-9]\\\\d*(\\\\.\\\\d+)?$\\\"/>\\r\\n                        <div *ngIf=\\\"f.submitted && !salary?.valid\\\" class=\\\"help-block\\\">wymagane jest poprawne wynagrodznie (liczba > 0)</div>\\r\\n                    </div>\\r\\n                    <div *ngIf=\\\"operator.roleCode.indexOf('PR') !== -1 && user?.rankCode !== 'SEN'\\\" class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !salaryRate?.valid }\\\">\\r\\n                        <label for=\\\"salaryRate\\\">Stawka gwarantowana w PLN</label>\\r\\n                        <input pInputText id=\\\"salaryRate\\\" type=\\\"number\\\" class=\\\"form-control\\\" name=\\\"salaryRate\\\" [(ngModel)]=\\\"user.salaryRate\\\" #salaryRate=\\\"ngModel\\\" required salaryRate min=\\\"0\\\" pattern=\\\"^[0-9]\\\\d*(\\\\.\\\\d+)?$\\\"/>\\r\\n                        <div *ngIf=\\\"f.submitted && !salaryRate?.valid\\\" class=\\\"help-block\\\">wymagana jest stawka gwarantowana (liczba > 0)</div>\\r\\n                    </div>\\r\\n                    <div *ngIf=\\\"operator.roleCode.indexOf('PR') !== -1 && user?.rankCode !== 'SEN'\\\" class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !leaveRate?.valid }\\\">\\r\\n                        <label for=\\\"leaveRate\\\">Stała stawka za urlop w PLN</label>\\r\\n                        <input pInputText id=\\\"leaveRate\\\" type=\\\"number\\\" class=\\\"form-control\\\" name=\\\"leaveRate\\\" [(ngModel)]=\\\"user.leaveRate\\\" #leaveRate=\\\"ngModel\\\" required leaveRate min=\\\"0\\\" pattern=\\\"^[0-9]\\\\d*(\\\\.\\\\d+)?$\\\"/>\\r\\n                        <div *ngIf=\\\"f.submitted && !leaveRate?.valid\\\" class=\\\"help-block\\\">wymagana jest stawka za urlop (liczba > 0)</div>\\r\\n                    </div>\\r\\n                \\r\\n                    <!--<div class=\\\"form-group\\\" *ngIf=\\\"showAgreements\\\">\\r\\n                        <label for=\\\"agreementCode\\\">Główna umowa</label>\\r\\n                        <p-selectButton id=\\\"agreementCode\\\" name=\\\"agreementCode\\\" [options]=\\\"agreements\\\" [(ngModel)]=\\\"user.agreementCode\\\" required #agreementCode=\\\"ngModel\\\"></p-selectButton>\\r\\n                        &lt;!&ndash;<p-dropdown name=\\\"agreementCode\\\" [options]=\\\"agreements | async\\\" [(ngModel)]=\\\"user.agreementCode\\\" required autoWidth=\\\"false\\\" ></p-dropdown>&ndash;&gt;\\r\\n                        <div *ngIf=\\\"f.submitted && !agreementCode?.valid\\\" class=\\\"help-block\\\">Umowa jest wymagane</div>\\r\\n                    </div>-->\\r\\n\\r\\n                    <div class=\\\"form-group\\\">\\r\\n                        <p-radioButton name=\\\"poolgroup\\\" value=\\\"Y\\\" [(ngModel)]=\\\"user.isFromPool\\\" label=\\\"Pula (TAK)\\\"></p-radioButton>\\r\\n                        <p-radioButton name=\\\"poolgroup\\\" value=\\\"N\\\" [(ngModel)]=\\\"user.isFromPool\\\" label=\\\"Pula (NIE)\\\"></p-radioButton>\\r\\n                    </div>\\r\\n\\r\\n                    <div *ngIf=\\\"showProjectFactor()\\\" class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !projectFactor?.valid }\\\">\\r\\n                        <label for=\\\"projectFactor\\\">Współczynnik (np. 1.2)</label>\\r\\n                        <input id=\\\"projectFactor\\\" type=\\\"number\\\" class=\\\"form-control\\\" name=\\\"projectFactor\\\" [(ngModel)]=\\\"user.projectFactor\\\" #projectFactor=\\\"ngModel\\\" required projectFactor />\\r\\n                        <div *ngIf=\\\"f.submitted && !projectFactor?.valid\\\" class=\\\"help-block\\\">wymagany jest poprawny współczynnik</div>\\r\\n                    </div>\\r\\n                </div>\\r\\n                </div>\\r\\n          \\r\\n\\r\\n            <div *ngIf=\\\"user.roleCode.indexOf('CN') == -1\\\" class=\\\"form-group\\\">\\r\\n                <p-radioButton name=\\\"activegroup\\\" value=\\\"Y\\\" [(ngModel)]=\\\"user.isActive\\\" label=\\\"Aktywny (Konto - może się logować)\\\"></p-radioButton>\\r\\n                <p-radioButton name=\\\"activegroup\\\" value=\\\"N\\\" [(ngModel)]=\\\"user.isActive\\\" label=\\\"Nie aktywny (Brak konta)\\\"></p-radioButton>\\r\\n            </div>\\r\\n            <div *ngIf=\\\"show\\\">                    \\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <p-radioButton name=\\\"employgroup\\\" value=\\\"Y\\\" [(ngModel)]=\\\"user.isEmployed\\\" label=\\\"Jest pracownikiem\\\"></p-radioButton>\\r\\n                    <p-radioButton name=\\\"employgroup\\\" value=\\\"N\\\" [(ngModel)]=\\\"user.isEmployed\\\" label=\\\"Nie jest pracownikiem\\\"></p-radioButton>\\r\\n                </div>\\r\\n            </div>\\r\\n\\r\\n\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <button [disabled]=\\\"loading\\\" class=\\\"btn btn-primary\\\">Dodaj</button>\\r\\n                <img *ngIf=\\\"loading\\\" src=\\\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\\\" />\\r\\n                <a [routerLink]=\\\"['']\\\" class=\\\"btn btn-link\\\">Anuluj</a>\\r\\n            </div>\\r\\n        </form>\\r\\n    </div>\\r\\n</div>\\r\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\n\r\nimport { AlertService, UserService, DictService, AuthenticationService } from '../_services/index';\r\nimport { User, CodeValue } from '../_models/index';\r\nimport {SelectItem} from 'primeng/primeng'\r\n\r\nimport { catchError, map, tap, delay, mergeMap } from 'rxjs/operators';\r\nimport { Observable }    from 'rxjs';\r\nimport { FormsModule, FormBuilder, FormGroup, EmailValidator, NG_VALIDATORS, Validator }     from '@angular/forms';\r\n\r\n@Component({\r\n    templateUrl: 'user-register.component.html'\r\n})\r\n\r\nexport class UserRegisterComponent implements OnInit {\r\n\r\n    user: User = new User;\r\n    loading: boolean = false;\r\n\r\n    roles: SelectItem[] = [];\r\n    offices: SelectItem[] = [];\r\n    ranks: SelectItem[] = [];\r\n    agreements: SelectItem[] = [];\r\n\r\n    showRoles: boolean = false;\r\n    showOffices: boolean = false;\r\n    showRanks: boolean = false;\r\n    showAgreements: boolean = false;\r\n\r\n    staff: User[];\r\n    representatives: User[];\r\n    suggestedCompanies: string[];\r\n    company: string;\r\n    operator: User;\r\n\r\n    show:boolean=true;\r\n\r\n    constructor(\r\n        private router: Router,\r\n        private userService: UserService,\r\n        private alertService: AlertService,\r\n        private dictService: DictService,\r\n        private authService: AuthenticationService) {\r\n\r\n        this.user.roleCode = ['EN'];\r\n        this.user.officeCode = 'WAW';\r\n        this.user.isActive = 'Y';\r\n        this.user.isEmployed= 'Y';\r\n    }\r\n\r\n    ngOnInit():void {\r\n        this.dictService.init();\r\n        this.authService.userAsObs.subscribe(user => this.removeRoles(user));\r\n\r\n        this.dictService.getOfficesObs().subscribe((offices:CodeValue[]) => this.mapToOffices(offices));\r\n        this.userService.getVentureRepresentatives().subscribe(representatives => this.representatives = representatives);\r\n\r\n        this.mapToRanks(this.dictService.getRanks());\r\n        this.mapToAgreements(this.dictService.getAgreements());\r\n\r\n        this.authService.userAsObs.subscribe(user => this.fillStaff(user));\r\n    }\r\n\r\n    private fillStaff(user:User):void {\r\n        this.userService.getManagedUsers(user.roleCode, false).subscribe(staff => this.staff = staff);\r\n    }\r\n\r\n    checkSelect() {\r\n        if (this.user.roleCode.indexOf('CN')> -1) {\r\n            if (this.user.roleCode.length>1) {\r\n                this.removeRole(\"CN\");\r\n            }\r\n            this.show=false;\r\n            this.user.isActive = 'N';\r\n            this.user.isEmployed= 'N'; \r\n            this.user.isFromPool='N';                \r\n        }\r\n        else if (this.user.roleCode.indexOf('VE')> -1) {\r\n            if (this.user.roleCode.length>1 ){\r\n                this.removeRole(\"VE\");\r\n            }\r\n            this.show=false;\r\n            this.user.isEmployed= 'N'; \r\n        }\r\n        else {\r\n            this.show=true;\r\n            this.user.isActive = 'Y';\r\n            this.user.isEmployed= 'Y'; \r\n            this.user.isFromPool='N';\r\n        }\r\n    }\r\n\r\n    removeRole (role:string) {\r\n        this.user.roleCode=[];\r\n        this.user.roleCode.push(role);\r\n        this.alertService.warn('Uzytkownik z rolą '+(role ===\"CN\" ? \"Zleceniobiorca\" : \"Zleceniodawca\")+\" może posiadać tylko jedną rolę, aby wybrać inne role należy ją odznaczyć!\");\r\n    }\r\n\r\n    register() {\r\n        this.loading = true;\r\n\r\n        this.user.company = this.company;\r\n\r\n        if (this.user.isFromPool == 'Y' && this.operator.roleCode.indexOf('PR') == -1) {\r\n            this.user.projectFactor = 0.8;\r\n            this.user.salaryRate = +parseFloat(''+(22.5*this.user.projectFactor)).toFixed(3);\r\n            this.user.leaveRate = +parseFloat(''+(22.5*this.user.projectFactor)).toFixed(3);\r\n        } \r\n\r\n        this.userService.create(this.user)\r\n            .subscribe(\r\n                data => {\r\n                    this.alertService.success('Pomyślnie dodano nowego użytkownika '+this.user.email, true);\r\n                    this.router.navigate(['']); //navigate home\r\n                },\r\n                error => {\r\n                    this.alertService.error('Nie udalo się dodać użytkownika' +error);\r\n                    this.loading = false;\r\n                });\r\n    }\r\n\r\n    private mapToRoles(pairs:CodeValue[]):void {\r\n        this.showRoles = this.mapToSelectItem(pairs, this.roles);\r\n    }\r\n\r\n    private mapToOffices(pairs:CodeValue[]):void {\r\n        this.showOffices = this.mapToSelectItem(pairs, this.offices);\r\n    }\r\n\r\n    private mapToRanks(pairs:CodeValue[]):void {\r\n        this.showRanks = this.mapToSelectItem(pairs, this.ranks);\r\n    }\r\n\r\n    private mapToAgreements(pairs:CodeValue[]):void {\r\n        this.showAgreements = this.mapToSelectItem(pairs, this.agreements);\r\n    }\r\n\r\n    private mapToSelectItem(pairs:CodeValue[], ref: SelectItem[]):boolean {\r\n        for(let pair of pairs) {\r\n            ref.push({label: pair.paramChar, value: pair.code});\r\n        }\r\n        return true;\r\n    }\r\n\r\n    public showProjectFactor() {\r\n        return this.user && this.operator && this.user.isFromPool === 'Y' && this.operator.roleCode.indexOf('PR') > -1;\r\n    }\r\n\r\n    suggestCompany(event) {\r\n        let suggestedCompanies: string[] = [];\r\n        let queryIgnoreCase: string = event.query ? event.query.toLowerCase(): event.query;\r\n\r\n        if (this.user.roleCode.indexOf('VE') > -1 && this.representatives && this.representatives.length > 0) {\r\n            console.log('all ' + JSON.stringify(this.representatives));\r\n            for (let r of this.representatives) {\r\n                if (r.company && r.company.toLowerCase().indexOf(queryIgnoreCase) > -1 && suggestedCompanies.indexOf(r.company) == -1) {\r\n                    suggestedCompanies.push(r.company);\r\n                }\r\n            }\r\n        }\r\n        if (this.user.roleCode.indexOf('VE') == -1 && this.staff && this.staff.length > 0) {\r\n            console.log('all ' + JSON.stringify(this.staff));\r\n            for (let s of this.staff) {\r\n                if (s.company && s.company.toLowerCase().indexOf(queryIgnoreCase) > -1 && suggestedCompanies.indexOf(s.company) == -1) {\r\n                    suggestedCompanies.push(s.company);\r\n                }\r\n            }\r\n        }\r\n        this.suggestedCompanies = suggestedCompanies;\r\n        console.log('suggestedCompanies: ' + JSON.stringify(this.suggestedCompanies));\r\n    }\r\n\r\n    private removeRoles(user:User):void {\r\n        if (user) {\r\n            this.operator = user;\r\n            console.log('Operator '+JSON.stringify(this.operator));\r\n            if (this.operator.roleCode.indexOf('PR') == -1 ) {\r\n                let roles: CodeValue[] = this.dictService.getRoles();\r\n                let allowedRoles: CodeValue[] = [];\r\n                for (let role of roles) {\r\n                    if (role.code !== 'PR') {\r\n                        allowedRoles.push(role);\r\n                    }\r\n                }\r\n                this.mapToRoles(allowedRoles);\r\n\r\n            } else {\r\n                this.mapToRoles(this.dictService.getRoles());\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n","module.exports = \"\"","module.exports = \"\\r\\n<div *ngIf=\\\"hash\\\" class=\\\"container\\\">\\r\\n  <div class=\\\"col-md-6 col-md-offset-3\\\">\\r\\n    <h2>Wprowadź nowe hasło</h2>\\r\\n    <form name=\\\"form\\\" (ngSubmit)=\\\"f.form.valid && resetPassword()\\\" #f=\\\"ngForm\\\" novalidate>\\r\\n\\r\\n      <div class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !password.valid }\\\">\\r\\n        <label for=\\\"password\\\">Nowe hasło</label>\\r\\n        <input pPassword id=\\\"password\\\" type=\\\"password\\\" class=\\\"form-control\\\" name=\\\"password\\\" [(ngModel)]=\\\"newPassword\\\" #password=\\\"ngModel\\\" required />\\r\\n        <div *ngIf=\\\"f.submitted && !password.valid\\\" class=\\\"help-block\\\">Hasło jest wymagane, a jeśli je zmieniasz to tym bardziej...</div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"form-group\\\">\\r\\n        <button [disabled]=\\\"loading\\\" class=\\\"btn btn-primary\\\">Zmień hasło</button>\\r\\n        <img *ngIf=\\\"loading\\\" src=\\\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\\\" />\\r\\n        <a [routerLink]=\\\"['/logme']\\\" class=\\\"btn btn-link\\\">Powrót do logowania</a>\\r\\n      </div>\\r\\n    </form>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n\\r\\n<div *ngIf=\\\"!hash\\\" class=\\\"jumbotron\\\">\\r\\n  <div class=\\\"container\\\">\\r\\n    <div class=\\\"col-md-6 col-md-offset-3\\\">\\r\\n      <h2>Reset hasła</h2>\\r\\n      <form name=\\\"form\\\" (ngSubmit)=\\\"f.form.valid && sendResetMail()\\\" #f=\\\"ngForm\\\" novalidate>\\r\\n        <div class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !email.valid }\\\">\\r\\n          <label for=\\\"email\\\">Email</label>\\r\\n          <input id=\\\"email\\\" type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"email\\\" [(ngModel)]=\\\"sendToEmailAddress\\\" #email=\\\"ngModel\\\" required />\\r\\n          <div *ngIf=\\\"f.submitted && !email.valid\\\" class=\\\"help-block\\\">Email jest wymagany</div>\\r\\n        </div>\\r\\n\\r\\n        <div class=\\\"form-group\\\">\\r\\n          <button [disabled]=\\\"loading\\\" class=\\\"btn btn-primary\\\">Resetuj</button>\\r\\n          <img *ngIf=\\\"loading\\\" src=\\\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\\\" />\\r\\n          <a [routerLink]=\\\"['/logme']\\\" class=\\\"btn btn-link\\\">Powrót do logowania</a>\\r\\n        </div>\\r\\n      </form>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { AlertService, AuthenticationService, UserService } from '../_services/index';\r\n\r\n\r\n@Component({\r\n    selector: 'app-user-reset-password',\r\n    templateUrl: './user-reset-password.component.html',\r\n    styleUrls: ['./user-reset-password.component.css']\r\n})\r\nexport class UserResetPasswordComponent implements OnInit {\r\n\r\n    sendToEmailAddress: string;\r\n\r\n    hash: string;\r\n    userId: string;\r\n    newPassword: string;\r\n\r\n    constructor(private route:ActivatedRoute,\r\n                private router:Router,\r\n                private userService: UserService,\r\n                private authenticationService:AuthenticationService,\r\n                private alertService:AlertService) {\r\n    }\r\n\r\n    ngOnInit() {\r\n\r\n        this.hash = this.route.snapshot.queryParams['hash'];\r\n        this.userId = this.route.snapshot.queryParams['id'];\r\n    }\r\n\r\n    public sendResetMail():void {\r\n        console.log(\"Reseting pass for: \"+this.sendToEmailAddress);\r\n        this.userService.sendResetEmail(this.sendToEmailAddress).subscribe(response => this.sendEmailStatusNotification(response, this.sendToEmailAddress));\r\n    }\r\n\r\n    private sendEmailStatusNotification(response:any, sendToEmailAddress:string):void {\r\n        if (response && response.success && response.success === 1) {\r\n            this.alertService.info(\"Wysłano wiadomość na adres \"+sendToEmailAddress+\" z instrukcją zmiany hasła\");\r\n        } else {\r\n            this.alertService.error(\"Nie udało się wysłać wiadomości na adres \"+sendToEmailAddress);\r\n        }\r\n    }\r\n\r\n    public resetPassword(): void {\r\n        this.userService.resetPassword(this.userId, this.hash, this.newPassword).subscribe(response => this.resetPasswordStatusNotification(response));\r\n    }\r\n\r\n    private resetPasswordStatusNotification(response:any):void {\r\n        if (response && response.success && response.success === 1) {\r\n            this.alertService.success(\"Hasła zostało zmienione.\");\r\n            this.router.navigate(['/logme']);\r\n        } else {\r\n            this.alertService.error(\"Nie udało się zmienić hasła, sprawdz link ze skrzynki email\");\r\n        }\r\n    }\r\n}\r\n","module.exports = \"\"","module.exports = \"\\r\\n\\r\\n<div style=\\\"margin-top: 5px\\\" *ngIf=\\\"users\\\" class=\\\"ui-g\\\">\\r\\n\\r\\n  <div class=\\\"ui-g\\\" style=\\\"width:250px;margin-bottom:10px\\\">\\r\\n    <div class=\\\"ui-g-12\\\"><p-radioButton name=\\\"group2\\\" value=\\\"ALL\\\" label=\\\"Pokaż wszystkich\\\" [(ngModel)]=\\\"employedOnlyFilter\\\" inputId=\\\"preopt1\\\" (onClick)=\\\"filter('ALL')\\\"></p-radioButton></div>\\r\\n    <div class=\\\"ui-g-12\\\"><p-radioButton name=\\\"group2\\\" value=\\\"EMPLOYED_ONLY\\\" label=\\\"Ukryjwaj byłych pracowników\\\" [(ngModel)]=\\\"employedOnlyFilter\\\" inputId=\\\"preopt2\\\" (onClick)=\\\"filter('EMPLOYED_ONLY')\\\"></p-radioButton></div>\\r\\n  </div>\\r\\n\\r\\n  <p-contextMenu #cm [model]=\\\"items\\\"></p-contextMenu>\\r\\n\\r\\n  <!--[(selection)]=\\\"selectedOrder\\\" (onRowSelect)=\\\"onRowSelect($event)\\\" (onRowDblclick)=\\\"onRowDblclick($event)\\\"-->\\r\\n  <p-dataTable [value]=\\\"users\\\" [rows]=\\\"20\\\" [paginator]=\\\"true\\\" [globalFilter]=\\\"gb\\\" #dt dataKey=\\\"id\\\"\\r\\n               selectionMode=\\\"single\\\"\\r\\n               sortField=\\\"excelId\\\" sortOrder=\\\"1\\\"\\r\\n               [(selection)]=\\\"selectedUser\\\"\\r\\n               (onRowDblclick)=\\\"onRowDblclick($event)\\\"\\r\\n               resizableColumns=\\\"true\\\" [loading]=\\\"loading\\\" loadingIcon=\\\"fa fa-spinner\\\" [contextMenu]=\\\"cm\\\" csvSeparator=\\\";\\\" exportFilename=\\\"pracownicy\\\">\\r\\n\\r\\n    <p-header>\\r\\n      <div>\\r\\n        <i class=\\\"fa fa-search\\\"></i>\\r\\n        <input #gb type=\\\"text\\\" pInputText size=\\\"50\\\" placeholder=\\\"Filtruj\\\">\\r\\n        <button [disabled]=\\\"operator.roleCode.indexOf('PR') == -1\\\" type=\\\"button\\\" pButton icon=\\\"fa fa-plus\\\" style=\\\"float:left\\\" (click)=\\\"add()\\\" label=\\\"Dodaj\\\"></button>\\r\\n      </div>\\r\\n    </p-header>\\r\\n\\r\\n    <p-column *ngIf=\\\"operator.roleCode.indexOf('PR') >= 0\\\" [style]=\\\"{'width':'26px','text-align':'center'}\\\">\\r\\n      <ng-template let-userRow=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          <!--<button type=\\\"button\\\" pButton (click)=\\\"showWoDetails($event, order)\\\" icon=\\\"fa fa-search\\\"></button>-->\\r\\n          <button type=\\\"button\\\" pButton (click)=\\\"showUserHistory($event, userRow)\\\" icon=\\\"fa fa-search\\\"></button>\\r\\n          <p-dialog [(visible)]=\\\"displayUserHistoryDialog\\\" [header]=\\\"'Historia '+selectedUser?.email\\\" [minWidth]=\\\"900\\\" [responsive]=\\\"true\\\" [blockScroll]=\\\"true\\\" [contentStyle]=\\\"{'height': '900px'}\\\">\\r\\n            <app-user-history [selectedUser]=\\\"selectedUser\\\" [staff]=\\\"users\\\"></app-user-history>\\r\\n          </p-dialog>\\r\\n      </ng-template>\\r\\n    </p-column>\\r\\n\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"excelId\\\" header=\\\"Id excel\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'width':'25px'}\\\"></p-column>\\r\\n\\r\\n\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"officeCode\\\" header=\\\"Biuro\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'width':'20px'}\\\"></p-column>\\r\\n    <p-column header=\\\"Osoba\\\" field=\\\"lastName\\\"  [filter]=\\\"true\\\" filterPlaceholder=\\\"Nazwisko\\\" [style]=\\\"{'text-align':'center', 'width':'60px'}\\\">\\r\\n      <ng-template let-col let-user=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n        <span [style.font-weight]=\\\"'bolder'\\\" class=\\\"ui-inputgroup-addon\\\">{{user.firstName}} {{user.lastName}}</span>\\r\\n      </ng-template>\\r\\n    </p-column>\\r\\n\\r\\n    <!--<p-column [sortable]=\\\"true\\\" field=\\\"isActive\\\" header=\\\"Aktywny\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'width':'20px'}\\\"></p-column>-->\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"isActive\\\" header=\\\"Aktywny\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Y/N\\\" filterMatchMode=\\\"contains\\\" [style]=\\\"{'text-align':'center', 'width':'20px'}\\\">\\r\\n      <ng-template let-col let-user=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n        <span *ngIf=\\\"user[col.field]=='Y'\\\" [style.color]=\\\"'green'\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-check'\\\"></i></span>\\r\\n        <span *ngIf=\\\"user[col.field]!='Y'\\\" [style.color]=\\\"'grey'\\\"  class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-ban'\\\"></i></span>\\r\\n      </ng-template>\\r\\n    </p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"isEmployed\\\" header=\\\"Pracuje\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Y/N\\\" filterMatchMode=\\\"contains\\\" [style]=\\\"{'text-align':'center', 'width':'20px'}\\\">\\r\\n      <ng-template let-col let-user=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n        <span *ngIf=\\\"user[col.field]=='Y'\\\" [style.color]=\\\"'green'\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-check'\\\"></i></span>\\r\\n        <span *ngIf=\\\"user[col.field]!='Y'\\\" [style.color]=\\\"'grey'\\\"  class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-ban'\\\"></i></span>\\r\\n      </ng-template>\\r\\n    </p-column>\\r\\n\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"role\\\" header=\\\"Rola\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'width':'45px'}\\\"></p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"rank\\\" header=\\\"Stopień\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'width':'35px'}\\\"></p-column>\\r\\n\\r\\n    <!--<p-column [sortable]=\\\"true\\\" field=\\\"isFromPool\\\" header=\\\"Pula\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'width':'25px'}\\\"></p-column>-->\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"isFromPool\\\" header=\\\"Pula\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Y/N\\\" [style]=\\\"{'text-align':'center', 'width':'35px'}\\\">\\r\\n      <ng-template let-col let-user=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n        <span *ngIf=\\\"user[col.field]=='Y'\\\" [style.color]=\\\"'green'\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-users'\\\"></i></span>\\r\\n        <span *ngIf=\\\"user[col.field]!='Y'\\\" [style.color]=\\\"'grey'\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-street-view'\\\"></i></span>\\r\\n      </ng-template>\\r\\n    </p-column>\\r\\n\\r\\n    <p-column *ngIf=\\\"operator.roleCode.indexOf('PR') >= 0\\\" [sortable]=\\\"true\\\" field=\\\"projectFactor\\\" header=\\\"Wspł.\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'width':'30px'}\\\">\\r\\n      <ng-template let-col let-user=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n        <span *ngIf=\\\"user.isFromPool=='Y'\\\" [style.color]=\\\"'green'\\\" class=\\\"ui-inputgroup-addon\\\">{{user[col.field]}}</span>\\r\\n        <span *ngIf=\\\"user.isFromPool!='Y'\\\" [style.color]=\\\"'grey'\\\" class=\\\"ui-inputgroup-addon\\\">{{user[col.field]}}</span>\\r\\n      </ng-template>\\r\\n    </p-column>\\r\\n\\r\\n    <p-column *ngIf=\\\"operator.roleCode.indexOf('PR') >= 0\\\" [sortable]=\\\"true\\\" field=\\\"salary\\\" header=\\\"Wynagrodzenie\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'width':'50px'}\\\">\\r\\n      <ng-template let-col let-user=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n        <span *ngIf=\\\"user.salary!==0\\\" class=\\\"ui-inputgroup-addon\\\">{{user[col.field] | currency:'PLN'}}</span>\\r\\n      </ng-template>\\r\\n    </p-column>\\r\\n    <p-column *ngIf=\\\"operator.roleCode.indexOf('PR') >= 0\\\" [sortable]=\\\"true\\\" field=\\\"salaryRate\\\" header=\\\"Stawka gwarantowana\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'width':'45px'}\\\">\\r\\n      <ng-template let-col let-user=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n        <span *ngIf=\\\"!user.salary || user.salary===0\\\" class=\\\"ui-inputgroup-addon\\\">{{user.salaryRate | currency:'PLN'}}</span>\\r\\n      </ng-template>\\r\\n    </p-column>\\r\\n    <p-column *ngIf=\\\"operator.roleCode.indexOf('PR') >= 0\\\" [sortable]=\\\"true\\\" field=\\\"leaveRate\\\" header=\\\"Urlop\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'width':'45px'}\\\">\\r\\n      <ng-template let-col let-user=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n        <span *ngIf=\\\"!user.salary || user.salary===0\\\" class=\\\"ui-inputgroup-addon\\\">{{user.leaveRate | currency:'PLN'}}</span>\\r\\n      </ng-template>\\r\\n    </p-column>\\r\\n    <!--<p-column [sortable]=\\\"true\\\" field=\\\"company\\\" header=\\\"Firma\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'width':'30px'}\\\"></p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"agreement\\\" header=\\\"Umowa\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'width':'45px'}\\\"></p-column>-->\\r\\n\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"email\\\" header=\\\"Email\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'width':'40px'}\\\"></p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"phone\\\" header=\\\"Telefon\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'width':'50px'}\\\"></p-column>\\r\\n    <!--\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"addressStreet\\\" header=\\\"adres\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'width':'65px'}\\\"></p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"addressPost\\\" header=\\\"miejscowość\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'width':'70px'}\\\"></p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"account\\\" header=\\\"Rachunek\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'width':'100px'}\\\"></p-column>\\r\\n    -->\\r\\n\\r\\n    <!--\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"officeCode\\\" header=\\\"Biuro\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'width':'45px'}\\\"></p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"id\\\" header=\\\"id\\\" hidden=\\\"true\\\" ></p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"workNo\\\" header=\\\"WO\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n\\r\\n\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"status\\\" header=\\\"Status\\\" [style]=\\\"{'width':'135px'}\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" filterMatchMode=\\\"contains\\\">\\r\\n      <ng-template let-col let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n        <span class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"toolsService.getStatusIcon(order.statusCode)\\\"></i></span>\\r\\n        <span style=\\\"padding: 3px\\\">{{order.status}}</span>\\r\\n      </ng-template>\\r\\n    </p-column>\\r\\n\\r\\n\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"type\\\" header=\\\"Typ\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" filterMatchMode=\\\"contains\\\">\\r\\n      <ng-template let-col let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n        <span [style.color]=\\\"toolsService.getOrderColor(order.typeCode)\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-square'\\\"></i></span>\\r\\n        <span style=\\\"padding: 3px\\\">{{order.type}}</span>\\r\\n      </ng-template>\\r\\n    </p-column>\\r\\n\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"complexityCode\\\" header=\\\"Zł.\\\" [style]=\\\"{'text-align':'center', 'width':'45px'}\\\">\\r\\n      <ng-template let-col let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n        <span class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"order[col.field]=='STD' ? 'fa fa-thumbs-o-up': 'fa fa-life-bouy'\\\"></i></span>\\r\\n      </ng-template>\\r\\n    </p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"complexity\\\" header=\\\"Wycena\\\" [style]=\\\"{'text-align':'center', 'width':'55px'}\\\"></p-column>\\r\\n\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"mdCapex\\\" header=\\\"CAPEX\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"price\\\" header=\\\"Cena\\\" styleClass=\\\"text-right\\\" [style]=\\\"{'width':'70px'}\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"comment\\\" header=\\\"Komentarz\\\" hidden=\\\"true\\\"></p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"description\\\" header=\\\"Opis\\\" hidden=\\\"true\\\"></p-column>\\r\\n\\r\\n\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"isFromPool\\\" header=\\\"Pula\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Y/N\\\" [style]=\\\"{'text-align':'center', 'width':'45px'}\\\">\\r\\n      <ng-template let-col let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n        <span class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"order[col.field]=='Y' ? 'fa fa-users': 'fa fa-street-view'\\\"></i></span>\\r\\n      </ng-template>\\r\\n    </p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"protocolNo\\\" header=\\\"Protokół\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n\\r\\n\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"lastModDate\\\" header=\\\"Mod.\\\" [style]=\\\"{'width':'82px'}\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"creationDate\\\" header=\\\"Utw.\\\" [style]=\\\"{'width':'82px'}\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"itemNo\\\" header=\\\"Numer obiektu\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n\\r\\n    -->\\r\\n    <p-footer>\\r\\n      <div class=\\\"ui-grid ui-grid-responsive ui-fluid ui-grid-pad\\\">\\r\\n        <div class=\\\"ui-grid-row\\\"  style=\\\"margin-top: 15px;\\\">\\r\\n          <div class=\\\"ui-grid-col-1\\\"></div>\\r\\n          <div class=\\\"ui-grid-col-2\\\">\\r\\n            <button type=\\\"button\\\" pButton icon=\\\"fa fa-plus\\\" style=\\\"float:left\\\" (click)=\\\"add()\\\" label=\\\"Dodaj\\\"></button>\\r\\n          </div>\\r\\n\\r\\n          <div class=\\\"ui-grid-col-6\\\"></div>\\r\\n\\r\\n          <div class=\\\"ui-grid-col-2\\\">\\r\\n            <button type=\\\"button\\\" pButton icon=\\\"fa fa-file-o\\\" iconPos=\\\"left\\\" label=\\\"CSV\\\" (click)=\\\"dt.exportCSV()\\\"></button>\\r\\n          </div>\\r\\n          <div class=\\\"ui-grid-col-1\\\"></div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </p-footer>\\r\\n\\r\\n    <ng-template pTemplate=\\\"emptymessage\\\">\\r\\n      Brak pracowników...\\r\\n    </ng-template>\\r\\n\\r\\n  </p-dataTable>\\r\\n</div>\\r\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\n\r\nimport { AlertService, UserService, DictService, AuthenticationService } from '../_services/index';\r\nimport { User, CodeValue, SearchUser } from '../_models/index';\r\nimport {SelectItem} from 'primeng/primeng'\r\nimport { catchError, map, tap, delay, mergeMap } from 'rxjs/operators';\r\n\r\nimport { Observable }    from 'rxjs';\r\nimport { FormsModule, FormBuilder, FormGroup, EmailValidator, NG_VALIDATORS, Validator }     from '@angular/forms';\r\nimport { MenuItem } from 'primeng/primeng';\r\n\r\n@Component({\r\n    selector: 'app-users-display',\r\n    templateUrl: './users-display.component.html',\r\n    styleUrls: ['./users-display.component.css']\r\n})\r\nexport class UsersDisplayComponent implements OnInit {\r\n\r\n    items:MenuItem[] = [];\r\n\r\n    operator:User;\r\n    allUsers:User[] = [];\r\n    users:User[] = [];\r\n    selectedUser: User;\r\n\r\n\r\n    displayUserHistoryDialog: boolean;\r\n    employedOnlyFilter: string = 'EMPLOYED_ONLY';\r\n\r\n    constructor(protected router:Router,\r\n                protected userService:UserService,\r\n                protected alertService:AlertService,\r\n                protected dictService:DictService,\r\n                protected authService:AuthenticationService) {\r\n\r\n        this.items = [\r\n            {label: 'Zmień dane pracownika', icon: 'fa fa-pencil-square-o', disabled: false, command: (event) => this.change()}\r\n        ];\r\n\r\n    }\r\n\r\n    ngOnInit():void {\r\n        this.dictService.init();\r\n        this.authService.userAsObs.subscribe(user => this.removeRolesAndGetManagedUsers(user));\r\n    }\r\n\r\n    public showUserHistory(event, user: User): void {\r\n        console.log('showUserHistory... '+JSON.stringify(user));\r\n        this.selectedUser = user;\r\n        this.displayUserHistoryDialog=true;\r\n    }\r\n\r\n    public add():void {\r\n        this.router.navigate(['/addPerson']);\r\n    }\r\n\r\n    onRowDblclick(event) {\r\n        this.change();\r\n    }\r\n\r\n    public change():void {\r\n        if (this.selectedUser && this.selectedUser.id) {\r\n            this.router.navigate(['/changePerson', this.selectedUser.id]);\r\n        } else {\r\n            this.router.navigate(['/changePerson']);\r\n        }\r\n    }\r\n\r\n    filter(input): void {\r\n        console.log('radio clicked '+this.employedOnlyFilter+ ' '+JSON.stringify(input));\r\n        //this is shame, onClick is triggerd before model is changed therefore I will rely on input...\r\n        if (input === 'ALL') {\r\n            this.users = this.allUsers;\r\n        } else if (input === this.employedOnlyFilter) {\r\n            this.users = [];\r\n            for(let user of this.allUsers) {\r\n                if (user.isEmployed === 'Y') {\r\n                    this.users.push(user);\r\n                }\r\n            }\r\n        } else {\r\n            this.users = [];\r\n            console.log(input + ' unimplemented!');\r\n        }\r\n    }\r\n\r\n    private removeRolesAndGetManagedUsers(user:User):void {\r\n        if (user) {\r\n            this.operator = user;\r\n            this.userService.getStaff().subscribe(engineers => this.processUsers(engineers));\r\n        }\r\n    }\r\n\r\n    private processUsers(engineers:User[]):void {\r\n        this.allUsers = engineers;\r\n        this.filter(this.employedOnlyFilter);\r\n    }\r\n}\r\n","module.exports = \"\"","module.exports = \"\\r\\n<p-accordion (onOpen)=\\\"onTabOpen($event)\\\">\\r\\n    <p-accordionTab header=\\\"Bieżace\\\" [selected]=\\\"false\\\">\\r\\n        <div *ngIf=\\\"currentPayroll\\\">\\r\\n\\r\\n        <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n            <div class=\\\"ui-grid-col-12\\\">\\r\\n                <div style=\\\"margin-top: 0px; margin-bottom: 10px;\\\">\\r\\n                    <span style=\\\"margin-right: 2px;\\\">\\r\\n                        Poniżej zaprezentowano dane z bieżącego okresu. Nie można ich zatwierdzić dopóki okres rozliczeniowy się nie zakończy. Dane te przejdą jako niezatwierdzone do rekordów historycznych, gdzie będzie można je zatwiedzić.\\r\\n                    </span>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n\\r\\n        <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n            <div class=\\\"ui-grid-col-11\\\">\\r\\n\\r\\n                <span style=\\\"margin-right: 2px;\\\" [style.color]=\\\"'black'\\\">Za okres:</span><span [style.color]=\\\"'#286090'\\\">{{currentPayroll[0].periodDate}}</span>\\r\\n                <span style=\\\"margin-left: 10px; margin-right: 2px;\\\" [style.color]=\\\"'black'\\\">Wpolczynnik nadgodzin:</span><span [style.color]=\\\"'#286090'\\\">{{currentPayroll[0].overTimeFactor}}</span>\\r\\n                <span style=\\\"margin-left: 10px; margin-right: 2px;\\\" [style.color]=\\\"'black'\\\">Zaakceptowany:</span><span [style.color]=\\\"currentPayroll[0].approved=='Y'?'black':'orange'\\\">{{currentPayroll[0].approved=='Y'?'TAK':'NIE'}}</span>\\r\\n                <span style=\\\"margin-left: 10px; margin-right: 2px;\\\" [style.color]=\\\"'black'\\\">Wygenerowany:</span><span [style.color]=\\\"'#286090'\\\">{{currentPayroll[0].lastMod}}</span>\\r\\n                <span style=\\\"margin-left: 10px; margin-right: 2px;\\\" [style.color]=\\\"'black'\\\">Budżet puli:</span><span [style.color]=\\\"'#286090'\\\">{{currentPayroll[0].budget | currency:'PLN'}}</span>\\r\\n                <span style=\\\"margin-left: 10px; margin-right: 2px;\\\" [style.color]=\\\"'black'\\\">Koszt 1h z puli:</span><span [style.color]=\\\"'#286090'\\\">{{currentPayroll[0].formattedPoolRate}}</span>\\r\\n                <span style=\\\"margin-left: 10px; margin-right: 2px;\\\" [style.color]=\\\"'black'\\\">Koszt wypłat:</span><span [style.color]=\\\"'#286090'\\\">{{calculatePayrollCost(currentPayroll[0].periodDate) | currency:'PLN'}}</span>\\r\\n            </div>\\r\\n\\r\\n\\r\\n            <div class=\\\"ui-grid-col-1\\\">\\r\\n                <div style=\\\"margin-top: 0px; margin-bottom: 10px;\\\">\\r\\n                    <button type=\\\"button\\\" pButton icon=\\\"fa fa-file-o\\\" iconPos=\\\"left\\\" label=\\\"Bieżące CSV\\\" (click)=\\\"currentDt.exportCSV()\\\"></button>\\r\\n                    <span style=\\\"margin-right: 10px;\\\"></span>\\r\\n                </div>\\r\\n            </div>\\r\\n\\r\\n        </div>\\r\\n        <p-dataTable [value]=\\\"currentPayroll\\\"\\r\\n                     sortField=\\\"user.excelId\\\" sortOrder=\\\"1\\\"\\r\\n                     rowGroupMode=\\\"rowspan\\\"\\r\\n                     #currentDt\\r\\n                     [style]=\\\"{'margin-top':'0px'}\\\" scrollable=\\\"true\\\" scrollHeight=\\\"600px\\\" csvSeparator=\\\";\\\" [exportFilename]=\\\"'wynagrodzenie_'+currentPayroll[0].periodDate\\\">\\r\\n\\r\\n            <p-column header=\\\"Id excel\\\" field=\\\"user.excelId\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center'}\\\"></p-column>\\r\\n            <p-column header=\\\"Imię\\\" field=\\\"user.firstName\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [hidden]=\\\"true\\\"></p-column>\\r\\n\\r\\n            <p-column header=\\\"Osoba\\\" field=\\\"user.lastName\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\">\\r\\n                <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n                    <span [style.font-weight]=\\\"'bolder'\\\" class=\\\"ui-inputgroup-addon\\\">{{userPayroll.user['firstName']}} {{userPayroll.user['lastName']}}</span>\\r\\n                </ng-template>\\r\\n            </p-column>\\r\\n            <p-column header=\\\"Biuro\\\" field=\\\"user.officeCode\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center'}\\\"></p-column>\\r\\n            <p-column header=\\\"Stopień\\\" field=\\\"rank\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center'}\\\"></p-column>\\r\\n            <p-column header=\\\"Współ.\\\" field=\\\"projectFactor\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'width':'70px'}\\\"></p-column>\\r\\n\\r\\n            <p-column header=\\\"Pula\\\" [sortable]=\\\"true\\\" field=\\\"isFromPool\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Y/N\\\" [style]=\\\"{'text-align':'center', 'width':'60px'}\\\">\\r\\n                <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n                    <span *ngIf=\\\"userPayroll[col.field]=='Y'\\\" [style.color]=\\\"'green'\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-users'\\\"></i></span>\\r\\n                    <span *ngIf=\\\"userPayroll[col.field]!='Y'\\\" [style.color]=\\\"'grey'\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-street-view'\\\"></i></span>\\r\\n                </ng-template>\\r\\n            </p-column>\\r\\n\\r\\n            <p-column header=\\\"Czas razem\\\" field=\\\"workTime\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'color':'#286090'}\\\"></p-column>\\r\\n            <p-column header=\\\"Czas dla puli\\\" field=\\\"poolWorkTime\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'color':'green', 'font-weight':'bolder'}\\\"></p-column>\\r\\n            <p-column header=\\\"Czas poza pulą\\\" field=\\\"nonpoolWorkTime\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'color':'green', 'font-weight':'bolder'}\\\"></p-column>\\r\\n            <p-column header=\\\"Szkolenia\\\" field=\\\"trainingTime\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'color':'#286090'}\\\"></p-column>\\r\\n            <p-column header=\\\"Urlop\\\" field=\\\"leaveTime\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'color':'#286090'}\\\"></p-column>\\r\\n            <p-column header=\\\"Nadgodziny\\\" field=\\\"overTime\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'color':'#286090'}\\\"></p-column>\\r\\n\\r\\n            <p-column header=\\\"Obecnosc PLN\\\" field=\\\"workDue\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'right'}\\\">\\r\\n                <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n                    {{userPayroll[col.field] | currency:'PLN'}}\\r\\n                </ng-template>\\r\\n            </p-column>\\r\\n            <p-column header=\\\"Szkolenia PLN\\\" field=\\\"trainingDue\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'right'}\\\">\\r\\n                <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n                    {{userPayroll[col.field] | currency:'PLN'}}\\r\\n                </ng-template>\\r\\n            </p-column>\\r\\n            <p-column header=\\\"Nadgodziny PLN\\\" field=\\\"overDue\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'right'}\\\">\\r\\n                <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n                    {{userPayroll[col.field] | currency:'PLN'}}\\r\\n                </ng-template>\\r\\n            </p-column>\\r\\n            <p-column header=\\\"Urlop PLN\\\" field=\\\"leaveDue\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'right'}\\\">\\r\\n                <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n                    {{userPayroll[col.field] | currency:'PLN'}}\\r\\n                </ng-template>\\r\\n            </p-column>\\r\\n            <p-column header=\\\"Suma PLN\\\" field=\\\"totalDue\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'right'}\\\">\\r\\n                <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n                    {{userPayroll[col.field] | currency:'PLN'}}\\r\\n                </ng-template>\\r\\n            </p-column>\\r\\n\\r\\n\\r\\n            <ng-template pTemplate=\\\"emptymessage\\\">\\r\\n                Brak danych...\\r\\n            </ng-template>\\r\\n\\r\\n        </p-dataTable>\\r\\n        </div>\\r\\n    </p-accordionTab>\\r\\n\\r\\n    <p-accordionTab header=\\\"Historyczne\\\" [selected]=\\\"false\\\">\\r\\n        <div *ngIf=\\\"historicalPayrolls\\\">\\r\\n\\r\\n        <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n            <div class=\\\"ui-grid-col-12\\\">\\r\\n                <span>Pobierz całą historię: </span>\\r\\n                <button type=\\\"button\\\" pButton icon=\\\"fa fa-file-o\\\" iconPos=\\\"left\\\" label=\\\"Historia CSV\\\" (click)=\\\"historicalDt.exportCSV()\\\"></button>\\r\\n            </div>\\r\\n        </div>\\r\\n\\r\\n        <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n            <div class=\\\"ui-grid-col-12\\\">\\r\\n                <p-dataTable [value]=\\\"historicalPayrolls\\\" sortField=\\\"periodDate\\\" sortOrder=\\\"-1\\\"\\r\\n                             rowGroupMode=\\\"subheader\\\" groupField=\\\"periodDate\\\" expandableRowGroups=\\\"true\\\" [sortableRowGroup]=\\\"false\\\"\\r\\n                             [style]=\\\"{'margin-top':'20px'}\\\" scrollable=\\\"true\\\" scrollHeight=\\\"600px\\\"\\r\\n                             #historicalDt\\r\\n                             csvSeparator=\\\";\\\" [exportFilename]=\\\"'wynagrodzenia_historyczne'\\\"\\r\\n                             selectionMode=\\\"multiple\\\"\\r\\n                             [selection]=\\\"selectedPeriod\\\"\\r\\n                             selectionOnly=\\\"true\\\"\\r\\n                             >\\r\\n\\r\\n\\r\\n                    <ng-template pTemplate=\\\"rowgroupheader\\\" let-rowData>\\r\\n\\r\\n                        <div style=\\\"float: left; max-width: 90%;\\\">\\r\\n                            <span style=\\\"margin-left: 10px; margin-right: 2px;\\\" [style.color]=\\\"'black'\\\">Za okres:</span><span [style.color]=\\\"'#286090'\\\">{{rowData.periodDate}}</span>\\r\\n                            <span style=\\\"margin-left: 10px;\\\" [style.color]=\\\"rowData.approved=='Y'?'black':'orange'\\\">{{rowData.approved=='Y'?'Zaakceptowany':'Niezaakceptowany'}}</span>\\r\\n                            <span style=\\\"margin-left: 10px; margin-right: 2px;\\\" [style.color]=\\\"'black'\\\">Wspólczynnik nadgodzin:</span><span [style.color]=\\\"'#286090'\\\">{{rowData.formattedOverTimeFactor}}</span>\\r\\n                            <span style=\\\"margin-left: 10px; margin-right: 2px;\\\" [style.color]=\\\"'black'\\\">Wygenerowany:</span><span [style.color]=\\\"'#286090'\\\">{{rowData.lastMod}}</span>\\r\\n                            <span style=\\\"margin-left: 10px; margin-right: 2px;\\\" [style.color]=\\\"'black'\\\">przez:</span><span [style.color]=\\\"'#286090'\\\">{{rowData?.modifiedByUser?.firstName}} {{rowData?.modifiedByUser?.lastName}}</span>\\r\\n                            <span style=\\\"margin-left: 10px; margin-right: 2px;\\\" [style.color]=\\\"'black'\\\">Budżet puli:</span><span [style.color]=\\\"'#286090'\\\">{{rowData.budget  | currency:'PLN'}}</span>\\r\\n                            <span style=\\\"margin-left: 10px; margin-right: 2px;\\\" [style.color]=\\\"'black'\\\">Koszt 1h z puli:</span><span [style.color]=\\\"'#286090'\\\">{{rowData.formattedPoolRate}}</span>\\r\\n                            <span style=\\\"margin-left: 10px; margin-right: 2px;\\\" [style.color]=\\\"'black'\\\">Koszt wypłat:</span><span [style.color]=\\\"'#286090'\\\">{{calculatePayrollCost(rowData.periodDate) | currency:'PLN'}}</span>\\r\\n                        </div>\\r\\n\\r\\n                        <div style=\\\"float: right; max-width: 10%;\\\">\\r\\n                            <button *ngIf=\\\"rowData['approved']=='Y'\\\" type=\\\"button\\\" pButton icon=\\\"fa fa-repeat\\\" iconPos=\\\"left\\\" label=\\\"Przelicz\\\" (click)=\\\"showApproveDialog(rowData.periodDate)\\\"></button>\\r\\n                            <button *ngIf=\\\"rowData['approved']!='Y'\\\" type=\\\"button\\\" pButton icon=\\\"fa fa-check\\\" iconPos=\\\"left\\\" label=\\\"Zaakceptuj\\\" (click)=\\\"showApproveDialog(rowData.periodDate)\\\"></button>\\r\\n                            <button type=\\\"button\\\" pButton icon=\\\"fa fa-file-o\\\" iconPos=\\\"left\\\" label=\\\"CSV\\\" (click)=\\\"exportCSV(rowData.periodDate,historicalDt)\\\" style=\\\"margin-top: 5px\\\"></button>\\r\\n                        </div>\\r\\n\\r\\n                        <!-- <div style=\\\"float: right; max-width: 10%;\\\">\\r\\n                        <button type=\\\"button\\\" pButton icon=\\\"fa fa-file-o\\\" iconPos=\\\"left\\\" label=\\\"Export\\\" (click)=\\\"Export(rowData.periodDate,historicalDt)\\\"></button>\\r\\n                        </div> -->\\r\\n                    </ng-template>\\r\\n                    <p-column header=\\\"Okres rozliczeniowy\\\" [hidden]=\\\"true\\\" [exportable]=\\\"true\\\" field=\\\"periodDate\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" [style.color]=\\\"'green'\\\" [style]=\\\"{'text-align':'center', 'width':'120px'}\\\"></p-column>\\r\\n\\r\\n                    <p-column header=\\\"Imię\\\" field=\\\"user.firstName\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [hidden]=\\\"true\\\"></p-column>\\r\\n                    <p-column header=\\\"Osoba\\\" field=\\\"user.lastName\\\"  [filter]=\\\"true\\\" filterPlaceholder=\\\"Nazwisko\\\">\\r\\n                        <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n                            <span [style.font-weight]=\\\"'bolder'\\\" class=\\\"ui-inputgroup-addon\\\">{{userPayroll.user['firstName']}} {{userPayroll.user['lastName']}}</span>\\r\\n                        </ng-template>\\r\\n                    </p-column>\\r\\n                    <p-column header=\\\"Biuro\\\" field=\\\"user.officeCode\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center'}\\\"></p-column>\\r\\n                    <p-column header=\\\"Stopień\\\" field=\\\"rank\\\"  [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center'}\\\"></p-column>\\r\\n                    <p-column header=\\\"Współ.\\\" field=\\\"projectFactor\\\"  [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'width':'70px'}\\\"></p-column>\\r\\n\\r\\n                    <p-column header=\\\"Pula\\\" [sortable]=\\\"true\\\" field=\\\"isFromPool\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Y/N\\\" [style]=\\\"{'text-align':'center', 'width':'60px'}\\\">\\r\\n                        <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n                            <span *ngIf=\\\"userPayroll[col.field]=='Y'\\\" [style.color]=\\\"'green'\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-users'\\\"></i></span>\\r\\n                            <span *ngIf=\\\"userPayroll[col.field]!='Y'\\\" [style.color]=\\\"'grey'\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-street-view'\\\"></i></span>\\r\\n                        </ng-template>\\r\\n                    </p-column>\\r\\n\\r\\n                    <p-column header=\\\"Czas razem\\\" field=\\\"workTime\\\"  [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'color':'#286090'}\\\"></p-column>\\r\\n                    <p-column header=\\\"Czas dla puli\\\" field=\\\"poolWorkTime\\\"  [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'color':'green', 'font-weight':'bolder'}\\\"></p-column>\\r\\n                    <p-column header=\\\"Czas poza pulą\\\" field=\\\"nonpoolWorkTime\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'color':'green', 'font-weight':'bolder'}\\\"></p-column>\\r\\n                    <p-column header=\\\"Szkolenia\\\" field=\\\"trainingTime\\\"  [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'color':'#286090'}\\\"></p-column>\\r\\n                    <p-column header=\\\"Urlop\\\" field=\\\"leaveTime\\\"  [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'color':'#286090'}\\\"></p-column>\\r\\n                    <p-column header=\\\"Nadgodziny\\\" field=\\\"overTime\\\"  [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'color':'#286090'}\\\"></p-column>\\r\\n\\r\\n                    <p-column header=\\\"Obecnosc PLN\\\" field=\\\"workDue\\\"  [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'right'}\\\">\\r\\n                        <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n                            {{userPayroll[col.field] | currency:'PLN'}}\\r\\n                        </ng-template>\\r\\n                    </p-column>\\r\\n                    <p-column header=\\\"Szkolenia PLN\\\" field=\\\"trainingDue\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'right'}\\\">\\r\\n                        <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n                            {{userPayroll[col.field] | currency:'PLN'}}\\r\\n                        </ng-template>\\r\\n                    </p-column>\\r\\n                    <p-column header=\\\"Nadgodziny PLN\\\" field=\\\"overDue\\\"  [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'right'}\\\">\\r\\n                        <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n                            {{userPayroll[col.field] | currency:'PLN'}}\\r\\n                        </ng-template>\\r\\n                    </p-column>\\r\\n                    <p-column header=\\\"Urlop PLN\\\" field=\\\"leaveDue\\\"  [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'right'}\\\">\\r\\n                        <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n                            {{userPayroll[col.field] | currency:'PLN'}}\\r\\n                        </ng-template>\\r\\n                    </p-column>\\r\\n                    <p-column header=\\\"Suma PLN\\\" field=\\\"totalDue\\\"  [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'right'}\\\">\\r\\n                        <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n                            {{userPayroll[col.field] | currency:'PLN'}}\\r\\n                        </ng-template>\\r\\n                    </p-column>\\r\\n\\r\\n\\r\\n                    <ng-template pTemplate=\\\"emptymessage\\\">\\r\\n                        Brak danych...\\r\\n                    </ng-template>\\r\\n\\r\\n                </p-dataTable>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n    </p-accordionTab>\\r\\n\\r\\n</p-accordion>\\r\\n\\r\\n\\r\\n\\r\\n<p-dialog *ngIf=\\\"aSelectedPayroll?.periodDate\\\" [header]=\\\"'Akceptacja płac za okres '+aSelectedPayroll.periodDate\\\" [(visible)]=\\\"displayApproveDialog\\\" [responsive]=\\\"true\\\" [minWidth]=\\\"500\\\" [width]=\\\"800\\\">\\r\\n    <form name=\\\"f\\\" (ngSubmit)=\\\"f.form?.valid && approve()\\\" #f=\\\"ngForm\\\">\\r\\n        <div class=\\\"ui-grid ui-grid-responsive ui-fluid\\\">\\r\\n\\r\\n            <div class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !overTimeFactor?.valid }\\\">\\r\\n                <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n                  <div class=\\\"ui-grid-col-4\\\"><label for=\\\"overTimeFactor\\\">Współczynnik nadgodzin [%]</label></div>\\r\\n                  <div class=\\\"ui-grid-col-8 ui-fluid\\\">\\r\\n                      <input id=\\\"overTimeFactor\\\" type=\\\"number\\\" class=\\\"form-control\\\" name=\\\"overTimeFactor\\\" [(ngModel)]=\\\"overTimeFactor\\\" required min=\\\"0\\\" max=\\\"500\\\" pattern=\\\"^[0-9]\\\\d*$\\\"/>\\r\\n                      <div *ngIf=\\\"f.submitted && !overTimeFactor?.valid\\\" class=\\\"help-block\\\">wymagany jest współczynni wyrażony w %  (> 0)</div>\\r\\n                  </div>\\r\\n                </div>\\r\\n            </div>\\r\\n\\r\\n            <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n                <div class=\\\"ui-grid-col-4\\\"><label for=\\\"formattedPoolRate\\\">Stawka za 1h pracy puli</label></div>\\r\\n                <div class=\\\"ui-grid-col-8 ui-fluid\\\">\\r\\n                    <span id=\\\"formattedPoolRate\\\">{{aSelectedPayroll.formattedPoolRate}}</span>\\r\\n                </div>\\r\\n            </div>\\r\\n\\r\\n        </div>\\r\\n        <p-footer>\\r\\n            <div class=\\\"form-group\\\">\\r\\n                <div class=\\\"ui-dialog-buttonpane ui-helper-clearfix\\\">\\r\\n                    <!--<button width=\\\"200px\\\" type=\\\"button\\\" pButton icon=\\\"fa fa-check\\\" label=\\\"Zatwierdź\\\"></button>-->\\r\\n                    <button style=\\\"width: 200px; height: 30px;\\\" width=\\\"200px\\\" pButton class=\\\"btn btn-primary\\\"><i [class]=\\\"'fa fa-check'\\\"></i>Zatwierdź</button>\\r\\n                </div>\\r\\n            </div>\\r\\n        </p-footer>\\r\\n\\r\\n    </form>\\r\\n\\r\\n</p-dialog>\\r\\n\\r\\n<p-dialog *ngIf=\\\"approvedPayroll\\\" [(visible)]=\\\"displayApproveResultDialog\\\" [header]=\\\"'Zatwierdzone płace za okres '+approvedPayroll[0].periodDate\\\" [responsive]=\\\"true\\\" [minWidth]=\\\"1400\\\" [width]=\\\"1400\\\">\\r\\n    <p-panel header=\\\"Zatwierdzone\\\" *ngIf=\\\"approvedPayroll\\\">\\r\\n\\r\\n        <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n            <div class=\\\"ui-grid-col-11\\\">\\r\\n\\r\\n                <span style=\\\"margin-left: 10px; margin-right: 2px;\\\" [style.color]=\\\"'black'\\\">Za okres:</span><span [style.color]=\\\"'#286090'\\\">{{approvedPayroll[0].periodDate}}</span>\\r\\n                <span style=\\\"margin-left: 10px; margin-right: 2px;\\\" [style.color]=\\\"'black'\\\">Wpolczynnik nadgodzin:</span><span [style.color]=\\\"'#286090'\\\">{{approvedPayroll[0].overTimeFactor}}</span>\\r\\n                <span style=\\\"margin-left: 10px; margin-right: 2px;\\\" [style.color]=\\\"'black'\\\">Zaakceptowany:</span><span [style.color]=\\\"approvedPayroll[0].approved=='Y'?'black':'orange'\\\">{{approvedPayroll[0].approved=='Y'?'TAK':'NIE'}}</span>\\r\\n                <span style=\\\"margin-left: 10px; margin-right: 2px;\\\" [style.color]=\\\"'black'\\\">Wygenerowany:</span><span [style.color]=\\\"'#286090'\\\">{{approvedPayroll[0].lastMod}}</span>\\r\\n                <span style=\\\"margin-left: 10px; margin-right: 2px;\\\" [style.color]=\\\"'black'\\\">Budżet puli:</span><span [style.color]=\\\"'#286090'\\\">{{approvedPayroll[0].budget | currency:'PLN'}}</span>\\r\\n                <span style=\\\"margin-left: 10px; margin-right: 2px;\\\" [style.color]=\\\"'black'\\\">Koszt 1h z puli:</span><span [style.color]=\\\"'#286090'\\\">{{approvedPayroll[0].formattedPoolRate}}</span>\\r\\n                <span style=\\\"margin-left: 10px; margin-right: 2px;\\\" [style.color]=\\\"'black'\\\">Koszt wypłat:</span><span [style.color]=\\\"'#286090'\\\">{{approvedPayrollCost | currency:'PLN'}}</span>\\r\\n            </div>\\r\\n\\r\\n            <div class=\\\"ui-grid-col-1\\\">\\r\\n                <div style=\\\"margin-top: 0px; margin-bottom: 10px;\\\">\\r\\n                    <button type=\\\"button\\\" pButton icon=\\\"fa fa-file-o\\\" iconPos=\\\"left\\\" label=\\\"CSV\\\" (click)=\\\"approvedDt.exportCSV()\\\"></button>\\r\\n                </div>\\r\\n            </div>\\r\\n\\r\\n        </div>\\r\\n        <p-dataTable [value]=\\\"approvedPayroll\\\"\\r\\n                     rowGroupMode=\\\"rowspan\\\"\\r\\n                     #approvedDt\\r\\n                     sortField=\\\"user.excelId\\\" sortOrder=\\\"1\\\"\\r\\n                     [style]=\\\"{'margin-top':'0px'}\\\" scrollable=\\\"true\\\" scrollHeight=\\\"600px\\\"\\r\\n                     csvSeparator=\\\";\\\" [exportFilename]=\\\"'wynagrodzenie_'+approvedPayroll[0].periodDate\\\">\\r\\n\\r\\n            <p-column header=\\\"Id excel\\\" field=\\\"user.excelId\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center'}\\\"></p-column>\\r\\n\\r\\n            <p-column header=\\\"Osoba\\\" field=\\\"user.lastName\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\">\\r\\n                <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n                    <span [style.font-weight]=\\\"'bolder'\\\" class=\\\"ui-inputgroup-addon\\\">{{userPayroll.user['firstName']}} {{userPayroll.user['lastName']}}</span>\\r\\n                </ng-template>\\r\\n            </p-column>\\r\\n            <p-column header=\\\"Biuro\\\" field=\\\"user.officeCode\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center'}\\\"></p-column>\\r\\n            <p-column header=\\\"Stopień\\\" field=\\\"rank\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center'}\\\"></p-column>\\r\\n            <p-column header=\\\"Współ.\\\" field=\\\"projectFactor\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'width':'70px'}\\\"></p-column>\\r\\n\\r\\n            <p-column header=\\\"Pula\\\" [sortable]=\\\"true\\\" field=\\\"isFromPool\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Y/N\\\" [style]=\\\"{'text-align':'center', 'width':'60px'}\\\">\\r\\n                <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n                    <span *ngIf=\\\"userPayroll[col.field]=='Y'\\\" [style.color]=\\\"'green'\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-users'\\\"></i></span>\\r\\n                    <span *ngIf=\\\"userPayroll[col.field]!='Y'\\\" [style.color]=\\\"'grey'\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-street-view'\\\"></i></span>\\r\\n                </ng-template>\\r\\n            </p-column>\\r\\n\\r\\n            <p-column header=\\\"Czas pracy\\\" field=\\\"workTime\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'color':'#286090'}\\\"></p-column>\\r\\n            <p-column header=\\\"Czas dla puli\\\" field=\\\"poolWorkTime\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'color':'green', 'font-weight':'bolder'}\\\"></p-column>\\r\\n            <p-column header=\\\"Czas poza pulą\\\" field=\\\"nonpoolWorkTime\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'color':'green', 'font-weight':'bolder'}\\\"></p-column>\\r\\n            <p-column header=\\\"Szkolenia\\\" field=\\\"trainingTime\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'color':'#286090'}\\\"></p-column>\\r\\n            <p-column header=\\\"Urlop\\\" field=\\\"leaveTime\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'color':'#286090'}\\\"></p-column>\\r\\n            <p-column header=\\\"Nadgodziny\\\" field=\\\"overTime\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'color':'#286090'}\\\"></p-column>\\r\\n\\r\\n            <p-column header=\\\"Obecnosc PLN\\\" field=\\\"workDue\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'right'}\\\">\\r\\n                <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n                    {{userPayroll[col.field] | currency:'PLN'}}\\r\\n                </ng-template>\\r\\n            </p-column>\\r\\n            <p-column header=\\\"Szkolenia PLN\\\" field=\\\"trainingDue\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'right'}\\\">\\r\\n                <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n                    {{userPayroll[col.field] | currency:'PLN'}}\\r\\n                </ng-template>\\r\\n            </p-column>\\r\\n            <p-column header=\\\"Nadgodziny PLN\\\" field=\\\"overDue\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'right'}\\\">\\r\\n                <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n                    {{userPayroll[col.field] | currency:'PLN'}}\\r\\n                </ng-template>\\r\\n            </p-column>\\r\\n            <p-column header=\\\"Urlop PLN\\\" field=\\\"leaveDue\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'right'}\\\">\\r\\n                <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n                    {{userPayroll[col.field] | currency:'PLN'}}\\r\\n                </ng-template>\\r\\n            </p-column>\\r\\n            <p-column header=\\\"Suma PLN\\\" field=\\\"totalDue\\\" sortable=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'right'}\\\">\\r\\n                <ng-template let-col let-userPayroll=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n                    {{userPayroll[col.field] | currency:'PLN'}}\\r\\n                </ng-template>\\r\\n            </p-column>\\r\\n\\r\\n            <ng-template pTemplate=\\\"emptymessage\\\">\\r\\n                Brak danych...\\r\\n            </ng-template>\\r\\n\\r\\n        </p-dataTable>\\r\\n\\r\\n    </p-panel>\\r\\n</p-dialog>\\r\\n\\r\\n\"","import { Component, OnInit, NgModule, LOCALE_ID } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { CurrencyPipe } from '@angular/common';\r\n\r\nimport { AlertService, UserService, DictService, AuthenticationService, PayrollService } from '../_services/index';\r\nimport { User, CodeValue, SearchUser, UserPayroll } from '../_models/index';\r\nimport {SelectItem, DataTable} from 'primeng/primeng'\r\n\r\n\r\nimport { Observable }    from 'rxjs';\r\nimport { catchError, map, tap, delay, mergeMap } from 'rxjs/operators';\r\nimport { FormsModule, FormBuilder, FormGroup, EmailValidator, NG_VALIDATORS, Validator }     from '@angular/forms';\r\nimport { MenuItem } from 'primeng/primeng';\r\n\r\n\r\n@Component({\r\n    selector: 'app-users-payroll',\r\n    templateUrl: './users-payroll.component.html',\r\n    styleUrls: ['./users-payroll.component.css']\r\n})\r\nexport class UsersPayrollComponent implements OnInit {\r\n\r\n    items:MenuItem[] = [];\r\n\r\n    operator:User;\r\n    users: Map<number, User>;\r\n    overTimeFactor: number = 100;\r\n\r\n    currentPayroll: UserPayroll[];\r\n    historicalPayrolls: UserPayroll[];\r\n    aSelectedPayroll: UserPayroll;\r\n    approvedPayroll: UserPayroll[]; // just to show in dialog what's been confirmed\r\n    approvedPayrollCost: number;\r\n\r\n    periodDates: SelectItem[];\r\n\r\n    displayApproveDialog: boolean;\r\n    displayApproveResultDialog: boolean;\r\n    selectedPayrolls: UserPayroll[];\r\n\r\n    constructor(private router:Router,\r\n                private userService:UserService,\r\n                private payrollService:PayrollService,\r\n                private alertService:AlertService,\r\n                private dictService:DictService,\r\n                private authService:AuthenticationService) {\r\n\r\n\r\n    }\r\n\r\n    ngOnInit():void {\r\n        this.dictService.init();\r\n        this.authService.userAsObs.subscribe(user => this.initAll(user));\r\n    }\r\n\r\n    public exportCSV(text:string, table: DataTable)\r\n    {\r\n        this.selectedPayrolls=[];\r\n                this.historicalPayrolls.forEach(element => {\r\n                    if (element.periodDate==text)\r\n                    this.selectedPayrolls.push(element)\r\n                });\r\n                table.selection=this.selectedPayrolls;\r\n        table.exportCSV({selectionOnly:true});\r\n    }\r\n\r\n    public onTabOpen(event):void {\r\n        console.log('open ' + event.index);\r\n        this.searchPayrolls(false);\r\n    }\r\n\r\n    private saveCurrentAndSearchHist(userPayrolls:UserPayroll[]):void {\r\n        this.currentPayroll = userPayrolls;\r\n        this.payrollService.getHistorical(this.users).subscribe(userPayrolls => this.processHistorical(userPayrolls));\r\n    }\r\n\r\n    private searchPayrolls(refresh: boolean):void {\r\n        if (refresh || this.historicalPayrolls === undefined || this.currentPayroll === undefined) {\r\n            this.payrollService.getCurrent(this.users).subscribe(userPayrolls => this.saveCurrentAndSearchHist(userPayrolls));\r\n        }\r\n    }\r\n\r\n    public routeToWorkMonitor():void {\r\n        this.router.navigate(['/workMonitor']);\r\n    }\r\n\r\n    private isCurrent(periodDate: string): boolean {\r\n        if (this.currentPayroll && this.currentPayroll[0].periodDate === periodDate) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public calculatePayrollCost(periodDate: string): number {\r\n\r\n        let payrolls: UserPayroll[] = this.isCurrent(periodDate)? this.currentPayroll: this.historicalPayrolls;\r\n\r\n        return this.calculatePayrollCostFromPayrolls(payrolls, periodDate);\r\n    }\r\n\r\n    private calculatePayrollCostFromPayrolls(payrolls: UserPayroll[], periodDate: string): number {\r\n        let result: number = 0;\r\n        for (let payroll of payrolls) {\r\n            if (payroll.periodDate && payroll.periodDate === periodDate) {\r\n                result += payroll.totalDue;\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public showApproveDialog(periodDate: string):void {\r\n        let payrolls: UserPayroll[] = this.isCurrent(periodDate)? this.currentPayroll: this.historicalPayrolls;\r\n\r\n        for(let payroll of payrolls) { // for just for historical\r\n            if (payroll.periodDate && payroll.periodDate === periodDate) {\r\n                this.aSelectedPayroll = payroll;\r\n                this.overTimeFactor = this.aSelectedPayroll.overTimeFactor * 100;\r\n                this.displayApproveDialog = true;\r\n                return;\r\n            }\r\n        }\r\n        this.alertService.error(\"Wewnętrzny, nie można znaleźć rekordu dla: \"+periodDate);\r\n    }\r\n\r\n    public approve():void {\r\n        this.displayApproveDialog = false;\r\n        if (this.currentPayroll[0] && this.currentPayroll[0].periodDate) {\r\n            this.payrollService.approve(this.users, this.aSelectedPayroll.periodDate, this.overTimeFactor/100.0)\r\n                .subscribe(approvedPayroll => this.showApproveResult(approvedPayroll));\r\n        }\r\n    }\r\n\r\n    private showApproveResult(approvedPayroll:UserPayroll[]):void {\r\n        this.approvedPayroll = approvedPayroll;\r\n\r\n        this.approvedPayrollCost = this.calculatePayrollCostFromPayrolls(approvedPayroll, approvedPayroll[0].periodDate);\r\n\r\n        this.displayApproveResultDialog = true;\r\n        this.searchPayrolls(true);\r\n    }\r\n\r\n    private initAll(user:User):void {\r\n        if (user) {\r\n            this.operator = user;\r\n            //FIXME - we dont check history if one was EN once and then was changed to CN we are in trouble\r\n            //this.userService.getAllStaff().subscribe(staff => this.usersToMapSearchPayrolls(staff));\r\n            this.userService.getAll().subscribe(staff => this.usersToMapSearchPayrolls(staff));\r\n        } else {\r\n            console.log(\"Cannot init, no data on logged user!\");\r\n        }\r\n    }\r\n\r\n    private usersToMapSearchPayrolls(staff:User[]):void {\r\n        this.users = new Map<number, User>();\r\n        for (let user of staff) {\r\n            this.users.set(user.id, user);\r\n        }\r\n        //this.searchPayrolls();\r\n    }\r\n\r\n    private processHistorical(payrolls:UserPayroll[]):void {\r\n        this.historicalPayrolls = payrolls;\r\n\r\n        let tmpBillingCycles: Map<string, string> = new Map<string, string>();\r\n        for (let payroll of payrolls) {\r\n            tmpBillingCycles.set(payroll.periodDate, payroll.periodDate);\r\n        }\r\n\r\n        this.periodDates = [];\r\n        tmpBillingCycles.forEach((value: string, key: string) => {\r\n            this.periodDates.push({label: value, value: value});\r\n        });\r\n    }\r\n\r\n}\r\n","module.exports = \"\"","module.exports = \"\\r\\n\\r\\n<div style=\\\"margin-top: 5px\\\" *ngIf=\\\"users\\\" class=\\\"ui-g\\\">\\r\\n\\r\\n  <div class=\\\"ui-g\\\" style=\\\"width:250px;margin-bottom:10px\\\">\\r\\n    <div class=\\\"ui-g-12\\\"><p-radioButton name=\\\"group2\\\" value=\\\"ALL\\\" label=\\\"Pokaż wszystkich\\\" [(ngModel)]=\\\"employedOnlyFilter\\\" inputId=\\\"preopt1\\\" (onClick)=\\\"filter('ALL')\\\"></p-radioButton></div>\\r\\n    <div class=\\\"ui-g-12\\\"><p-radioButton name=\\\"group2\\\" value=\\\"EMPLOYED_ONLY\\\" label=\\\"Ukryjwaj byłych pracowników\\\" [(ngModel)]=\\\"employedOnlyFilter\\\" inputId=\\\"preopt2\\\" (onClick)=\\\"filter('EMPLOYED_ONLY')\\\"></p-radioButton></div>\\r\\n  </div>\\r\\n\\r\\n\\r\\n\\r\\n  <!--[(selection)]=\\\"selectedOrder\\\" (onRowSelect)=\\\"onRowSelect($event)\\\" (onRowDblclick)=\\\"onRowDblclick($event)\\\"-->\\r\\n  <p-dataTable [value]=\\\"users\\\" [rows]=\\\"50\\\" [paginator]=\\\"true\\\" [globalFilter]=\\\"gb\\\" #dt dataKey=\\\"id\\\"\\r\\n               selectionMode=\\\"multiple\\\"\\r\\n               sortField=\\\"excelId\\\" sortOrder=\\\"1\\\"\\r\\n               [(selection)]=\\\"selectedUsers\\\"\\r\\n               selectionMode=\\\"multiple\\\"\\r\\n               [headerCheckboxToggleAllPages]=\\\"false\\\"\\r\\n               resizableColumns=\\\"true\\\" loadingIcon=\\\"fa fa-spinner\\\" csvSeparator=\\\";\\\" exportFilename=\\\"pracownicy\\\">\\r\\n\\r\\n    <p-header>\\r\\n      <div>\\r\\n        <button [disabled]=\\\"!selectedUsers || selectedUsers.length < 1\\\" type=\\\"button\\\" pButton icon=\\\"fa fa-search\\\" iconPos=\\\"left\\\" style=\\\"float:left\\\" (click)=\\\"showDateChooser()\\\" label=\\\"Podsumowanie godzin\\\"></button>\\r\\n        <i class=\\\"fa fa-search\\\"></i>\\r\\n        <input #gb type=\\\"text\\\" pInputText size=\\\"50\\\" placeholder=\\\"Filtruj\\\">\\r\\n      </div>\\r\\n    </p-header>\\r\\n\\r\\n    <p-column [style]=\\\"{'text-align':'center', 'width':'38px'}\\\" selectionMode=\\\"multiple\\\"></p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"excelId\\\" header=\\\"Id excel\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"officeCode\\\" header=\\\"Biuro\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n    <p-column header=\\\"Osoba\\\" field=\\\"lastName\\\"  [filter]=\\\"true\\\" filterPlaceholder=\\\"Nazwisko\\\">\\r\\n      <ng-template let-col let-user=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n        <span [style.font-weight]=\\\"'bolder'\\\" class=\\\"ui-inputgroup-addon\\\">{{user.firstName}} {{user.lastName}}</span>\\r\\n      </ng-template>\\r\\n    </p-column>\\r\\n\\r\\n    <!--<p-column [sortable]=\\\"true\\\" field=\\\"isActive\\\" header=\\\"Aktywny\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'width':'20px'}\\\"></p-column>-->\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"isActive\\\" header=\\\"Aktywny\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Y/N\\\" filterMatchMode=\\\"contains\\\" [style]=\\\"{'text-align':'center'}\\\">\\r\\n      <ng-template let-col let-user=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n        <span *ngIf=\\\"user[col.field]=='Y'\\\" [style.color]=\\\"'green'\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-check'\\\"></i></span>\\r\\n        <span *ngIf=\\\"user[col.field]!='Y'\\\" [style.color]=\\\"'grey'\\\"  class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-ban'\\\"></i></span>\\r\\n      </ng-template>\\r\\n    </p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"isEmployed\\\" header=\\\"Pracuje\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Y/N\\\" filterMatchMode=\\\"contains\\\" [style]=\\\"{'text-align':'center'}\\\">\\r\\n      <ng-template let-col let-user=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n        <span *ngIf=\\\"user[col.field]=='Y'\\\" [style.color]=\\\"'green'\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-check'\\\"></i></span>\\r\\n        <span *ngIf=\\\"user[col.field]!='Y'\\\" [style.color]=\\\"'grey'\\\"  class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-ban'\\\"></i></span>\\r\\n      </ng-template>\\r\\n    </p-column>\\r\\n\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"role\\\" header=\\\"Rola\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center'}\\\"></p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"rank\\\" header=\\\"Stopień\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center'}\\\"></p-column>\\r\\n\\r\\n    <!--<p-column [sortable]=\\\"true\\\" field=\\\"isFromPool\\\" header=\\\"Pula\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'width':'25px'}\\\"></p-column>-->\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"isFromPool\\\" header=\\\"Pula\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Y/N\\\" [style]=\\\"{'text-align':'center'}\\\">\\r\\n      <ng-template let-col let-user=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n        <span *ngIf=\\\"user[col.field]=='Y'\\\" [style.color]=\\\"'green'\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-users'\\\"></i></span>\\r\\n        <span *ngIf=\\\"user[col.field]!='Y'\\\" [style.color]=\\\"'grey'\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-street-view'\\\"></i></span>\\r\\n      </ng-template>\\r\\n    </p-column>\\r\\n\\r\\n\\r\\n    <!--<p-column [sortable]=\\\"true\\\" field=\\\"email\\\" header=\\\"Email\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'width':'40px'}\\\"></p-column>-->\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"phone\\\" header=\\\"Telefon\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center'}\\\"></p-column>\\r\\n\\r\\n    <p-footer>\\r\\n      <div class=\\\"ui-grid ui-grid-responsive ui-fluid ui-grid-pad\\\">\\r\\n        <div class=\\\"ui-grid-row\\\"  style=\\\"margin-top: 15px;\\\">\\r\\n          <div class=\\\"ui-grid-col-1\\\"></div>\\r\\n          <div class=\\\"ui-grid-col-2\\\">\\r\\n            <button [disabled]=\\\"!selectedUsers || selectedUsers.length < 1\\\" type=\\\"button\\\" pButton icon=\\\"fa fa-search\\\" iconPos=\\\"left\\\" style=\\\"float:left\\\" (click)=\\\"showDateChooser()\\\" label=\\\"Podsumowanie godzin\\\"></button>\\r\\n          </div>\\r\\n\\r\\n          <div class=\\\"ui-grid-col-6\\\"></div>\\r\\n\\r\\n          <div class=\\\"ui-grid-col-2\\\">\\r\\n            <button type=\\\"button\\\" pButton icon=\\\"fa fa-file-o\\\" iconPos=\\\"left\\\" label=\\\"CSV\\\" (click)=\\\"dt.exportCSV()\\\"></button>\\r\\n          </div>\\r\\n          <div class=\\\"ui-grid-col-1\\\"></div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </p-footer>\\r\\n\\r\\n    <ng-template pTemplate=\\\"emptymessage\\\">\\r\\n      Brak pracowników...\\r\\n    </ng-template>\\r\\n\\r\\n  </p-dataTable>\\r\\n</div>\\r\\n\\r\\n\\r\\n\\r\\n<p-dialog [header]=\\\"'Podsumowanie czasów (wybór okresu)'\\\" [(visible)]=\\\"displayDateChooserDialog\\\" [responsive]=\\\"true\\\" [minWidth]=\\\"800\\\">\\r\\n\\r\\n    <div>\\r\\n        <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px; margin-bottom: 200px;\\\">\\r\\n          <div class=\\\"ui-grid-col-4\\\"><label for=\\\"reportDate\\\">*</label></div>\\r\\n          <div class=\\\"ui-grid-col-8\\\">\\r\\n            <p-dropdown placeholder=\\\"Wybierz miesiąc...\\\" [style]=\\\"{'width': '100%'}\\\" id=\\\"reportDate\\\" name=\\\"reportDate\\\" [options]=\\\"possibleDates\\\" [(ngModel)]=\\\"selectedDate\\\" required autoWidth=\\\"false\\\" ></p-dropdown>\\r\\n          </div>\\r\\n        </div>\\r\\n\\r\\n    </div>\\r\\n    <p-footer>\\r\\n      <div class=\\\"ui-dialog-buttonpane ui-helper-clearfix\\\">\\r\\n        <button [disabled]=\\\"!selectedDate\\\" (click)=\\\"getTimestatReport()\\\" style=\\\"width: 200px; height: 30px;\\\" width=\\\"200px\\\" pButton class=\\\"btn btn-primary\\\"><i [class]=\\\"'fa fa-check'\\\"></i> Raport</button>\\r\\n      </div>\\r\\n    </p-footer>\\r\\n\\r\\n</p-dialog>\\r\\n\\r\\n<p-dialog [header]=\\\"'Podsumowanie czasów dla '+selectedDate\\\" [(visible)]=\\\"displayReportResultDialog\\\" [responsive]=\\\"true\\\" [width]=\\\"1000\\\">\\r\\n\\r\\n  <p-dataTable [value]=\\\"timestats\\\" [rows]=\\\"20\\\" [paginator]=\\\"true\\\" [globalFilter]=\\\"gb\\\" #dtReport dataKey=\\\"personId\\\" resizableColumns=\\\"true\\\" sortField=\\\"user.excelId\\\" sortOrder=\\\"1\\\" loadingIcon=\\\"fa fa-spinner\\\"\\r\\n               csvSeparator=\\\";\\\" [exportFilename]=\\\"'podsumowanie_czasow_'+selectedDate\\\">\\r\\n    <p-header>\\r\\n      <div>\\r\\n        <i class=\\\"fa fa-search\\\"></i>\\r\\n        <input #gb type=\\\"text\\\" pInputText size=\\\"50\\\" placeholder=\\\"Filtruj\\\">\\r\\n      </div>\\r\\n    </p-header>\\r\\n\\r\\n    <!-- WARN data manipulation - trainingTime added to workTime in userTimeStats.service !!!\\r\\n      \\\"leaveTime\\\": 40,\\r\\n      \\\"workTime\\\": 138.58,\\r\\n      \\\"trainingTime\\\": 0,\\r\\n      \\\"poolWorkTime\\\": 138.58,\\r\\n      \\\"nonpoolWorkTime\\\": 0,\\r\\n      \\\"overTime\\\": 0,\\r\\n      \\\"isFromPool\\\": \\\"Y\\\"\\r\\n    -->\\r\\n\\r\\n\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"personId\\\" header=\\\"id\\\" hidden=\\\"true\\\" [exportable]=\\\"false\\\"></p-column>\\r\\n\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"user.excelId\\\" header=\\\"Id excel\\\" [style]=\\\"{'text-align':'center'}\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"user.firstName\\\" header=\\\"Imię\\\" [style]=\\\"{'text-align':'center'}\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"user.lastName\\\" header=\\\"Nazwisko\\\" [style]=\\\"{'text-align':'center'}\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"user.officeCode\\\" header=\\\"Biuro\\\" [style]=\\\"{'text-align':'center'}\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"isFromPool\\\" header=\\\"Pula\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Y/N\\\" [style]=\\\"{'text-align':'center', 'width':'38px'}\\\">\\r\\n      <ng-template let-col let-user=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n        <span *ngIf=\\\"user[col.field]=='Y'\\\" [style.color]=\\\"'green'\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-users'\\\"></i></span>\\r\\n        <span *ngIf=\\\"user[col.field]!='Y'\\\" [style.color]=\\\"'grey'\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-street-view'\\\"></i></span>\\r\\n      </ng-template>\\r\\n    </p-column>\\r\\n\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"periodBeginning\\\" header=\\\"Od\\\" [style]=\\\"{'text-align':'center'}\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"periodEnd\\\" header=\\\"Do\\\" [style]=\\\"{'text-align':'center'}\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n\\r\\n\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"workTime\\\" header=\\\"Czas razem\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" [style]=\\\"{'color':'green'}\\\" field=\\\"poolWorkTime\\\" header=\\\"Czas w puli\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" [style]=\\\"{'color':'green'}\\\" field=\\\"nonpoolWorkTime\\\" header=\\\"Czas poza pulą\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"trainingTime\\\" header=\\\"Szkolenie\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"leaveTime\\\" header=\\\"Urlop\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"overTime\\\" header=\\\"Nadgodziny\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n\\r\\n\\r\\n    <ng-template pTemplate=\\\"emptymessage\\\">\\r\\n      Brak raportu podsumowania czasów...\\r\\n    </ng-template>\\r\\n\\r\\n    <p-footer>\\r\\n      <div class=\\\"ui-grid ui-grid-responsive ui-fluid ui-grid-pad\\\">\\r\\n        <div class=\\\"ui-grid-row\\\"  style=\\\"margin-top: 15px;\\\">\\r\\n          <div class=\\\"ui-grid-col-4\\\"></div>\\r\\n\\r\\n          <div class=\\\"ui-grid-col-4\\\">\\r\\n            <button type=\\\"button\\\" pButton icon=\\\"fa fa-file-o\\\" iconPos=\\\"left\\\" label=\\\"CSV\\\" (click)=\\\"dtReport.exportCSV()\\\"></button>\\r\\n          </div>\\r\\n          <div class=\\\"ui-grid-col-4\\\"></div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </p-footer>\\r\\n\\r\\n  </p-dataTable>\\r\\n\\r\\n</p-dialog>\\r\\n\\r\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { UsersDisplayComponent } from '../users-display/users-display.component';\r\nimport { AlertService, UserService, DictService, AuthenticationService, ToolsService, UserTimeStatsService } from '../_services/index';\r\nimport { User, CodeValue, SearchUser, Timestats } from '../_models/index';\r\nimport { SelectItem } from 'primeng/primeng';\r\n\r\n\r\n@Component({\r\n  selector: 'app-users-time-stats',\r\n  templateUrl: './users-time-stats.component.html',\r\n  styleUrls: ['./users-time-stats.component.css']\r\n})\r\nexport class UsersTimeStatsComponent extends UsersDisplayComponent{\r\n\r\n  selectedUsers: User[];\r\n  displayDateChooserDialog: boolean;\r\n  displayReportResultDialog: boolean;\r\n\r\n  possibleDates: SelectItem[] = [];\r\n  selectedDate: string;\r\n\r\n  timestats: Timestats[];\r\n\r\n  constructor(protected router:Router,\r\n              protected userService:UserService,\r\n              protected alertService:AlertService,\r\n              protected dictService:DictService,\r\n              protected authService:AuthenticationService,\r\n              private toolsService: ToolsService,\r\n              private userTimeStatsService: UserTimeStatsService) {\r\n\r\n    super(router, userService, alertService, dictService, authService);\r\n\r\n    this.initMounths();\r\n\r\n  }\r\n\r\n  private initMounths() {\r\n    for (let i = 0; i < 12; i++) {\r\n      let d = new Date();\r\n      d.setMonth(d.getMonth() - i);\r\n      let l:string = this.toolsService.formatDate(d, 'yyyy-MM');\r\n      let v:string = this.toolsService.formatDate(d, 'yyyy-MM-dd');\r\n      this.possibleDates.push({label: l, value: v});\r\n    }\r\n  }\r\n\r\n  public showDateChooser() {\r\n    this.displayReportResultDialog = false;\r\n    this.displayDateChooserDialog = true;\r\n\r\n  }\r\n\r\n  public getTimestatReport() {\r\n    this.displayDateChooserDialog = false;\r\n    let ids: number[] = [];\r\n    for (let selectedUser of this.selectedUsers) {\r\n      ids.push(selectedUser.id);\r\n    }\r\n    this.userTimeStatsService.getByDateAndUserIds(this.users, this.selectedDate, ids).subscribe(timestats => this.processTimestats(timestats))\r\n  }\r\n\r\n  private processTimestats(timestats:Timestats[]):void {\r\n    this.timestats = timestats;\r\n    this.displayReportResultDialog = true;\r\n  }\r\n}\r\n","module.exports = \"\"","module.exports = \"<app-wo-stopped-list [orderStatus]=\\\"'CA'\\\" [allowRecover]=\\\"false\\\"></app-wo-stopped-list>\\r\\n\"","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-wo-cancelled',\r\n  templateUrl: './wo-cancelled.component.html',\r\n  styleUrls: ['./wo-cancelled.component.css']\r\n})\r\nexport class WoCancelledComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","module.exports = \"\"","module.exports = \"\\r\\n\\r\\n<p-panel header=\\\"Generowanie/Pobieranie protokołu\\\">\\r\\n\\r\\n\\r\\n  <div class=\\\"ui-grid-row\\\">\\r\\n    <div class=\\\"ui-grid-col-6\\\">\\r\\n      <p-fieldset legend=\\\"Instrukcja\\\">\\r\\n        <p>1. Aby utworzyć protokół z wykonanych zleceń (tych w stanie Wydane) należy zaznaczyć w tabeli te zlecenia, które mają zostać dołączone do protokołu i kliknąć przycisk pod tabelą.</p>\\r\\n        <p>2. Aby pobrać jeszcze raz protokół już utworzony, należy wpisać jego numer do pola obok i kliknąć przycisk \\\"Generuj ponownie\\\". Ta funkcja pozwala zmodyfikować protokół (usunąć z niego wybrane zlecenia) jeśli przed powtórną generacją w zakładce \\\"Zlecenia\\\" cofnięto status WO zawartego w protokole na \\\"Wydane\\\"</p>\\r\\n        <p>3. Aby wyświetlić zlecenia nie gotowe do protokołu należy klinkąć przycisk \\\"Zlecenia nie gotowe\\\"</p>\\r\\n        <!--PROTOCOL FILTER --> \\r\\n        <button type=\\\"button\\\" pButton (click)=\\\"showWoDetails()\\\" label=\\\"Zlecenia nie gotowe\\\"></button>\\r\\n        <p-dialog [(visible)]=\\\"displayDetailsDialog\\\" header=\\\"Zlecenia nie gotowe do protokołu\\\" [minWidth]=\\\"600\\\" [responsive]=\\\"true\\\" [blockScroll]=\\\"true\\\" [contentStyle]=\\\"{'height': '800px'}\\\">\\r\\n        <app-wo-list [ListToDisplay]=\\\"ordersNotReady\\\"></app-wo-list>\\r\\n        </p-dialog>\\r\\n<!-- END PROTOCOL FILTER-->\\r\\n      </p-fieldset>\\r\\n    </div>\\r\\n    <div class=\\\"ui-grid-col-6\\\">\\r\\n      <p-fieldset legend=\\\"Pobieranie protokołów\\\">\\r\\n        <form #f=\\\"ngForm\\\" (submit)=\\\"fetchProtocol()\\\">\\r\\n\\r\\n          <div class=\\\"ui-grid ui-grid-responsive ui-fluid ui-grid-pad\\\" style=\\\"margin-bottom: 40px;\\\">\\r\\n            <div class=\\\"ui-grid-row\\\"  style=\\\"margin-top: 20px;\\\">\\r\\n              <div class=\\\"ui-grid-col-2\\\"></div>\\r\\n              <div class=\\\"ui-grid-col-2\\\" style=\\\"text-align: right;\\\">\\r\\n                <label for=\\\"protocolNo\\\">Nr protokołu:</label>\\r\\n              </div>\\r\\n              <div class=\\\"ui-grid-col-3\\\">\\r\\n                <input id=\\\"protocolNo\\\" type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"protocolNo\\\" [(ngModel)]=\\\"protocolNo\\\" #firstName=\\\"ngModel\\\" required minlength=\\\"3\\\" />\\r\\n              </div>\\r\\n              <div class=\\\"ui-grid-col-3\\\">\\r\\n                <button pButton type=\\\"button\\\" (click)=\\\"fetchProtocol()\\\" icon=\\\"fa fa-cog\\\" label=\\\"Generuj ponownie\\\" style=\\\"margin-left: 0px; min-width: 140px;\\\" [disabled]=\\\"!f?.valid\\\"></button>\\r\\n              </div>\\r\\n              <div class=\\\"ui-grid-col-2\\\"></div>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n        </form>\\r\\n      </p-fieldset>\\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n\\r\\n  <div style=\\\"margin-top: 5px\\\" *ngIf=\\\"orders\\\" class=\\\"ui-g\\\">\\r\\n\\r\\n    <p-dataTable [value]=\\\"ordersReadyForProtocol\\\" [headerCheckboxToggleAllPages]=\\\"true\\\" [rows]=\\\"20\\\" [paginator]=\\\"true\\\" [globalFilter]=\\\"gb\\\" #dt selectionMode=\\\"multiple\\\" [(selection)]=\\\"selectedOrders\\\" dataKey=\\\"id\\\" resizableColumns=\\\"true\\\" sortField=\\\"lastModDate\\\" sortOrder=\\\"-1\\\" [loading]=\\\"loading\\\" loadingIcon=\\\"fa fa-spinner\\\">\\r\\n      <p-header>\\r\\n        <div>\\r\\n          <i class=\\\"fa fa-search\\\"></i>\\r\\n          <input #gb type=\\\"text\\\" pInputText size=\\\"50\\\" placeholder=\\\"Filtruj\\\">\\r\\n        </div>\\r\\n      </p-header>\\r\\n      <p-column [style]=\\\"{'width':'38px'}\\\" selectionMode=\\\"multiple\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"id\\\" header=\\\"id\\\" hidden=\\\"true\\\" ></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"workNo\\\" header=\\\"Zlecenie\\\" ></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"status\\\" header=\\\"Status\\\" ></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"type\\\" header=\\\"Typ\\\" ></p-column>\\r\\n      <!--<p-column [sortable]=\\\"true\\\" field=\\\"complexityCode\\\" header=\\\"Złożoność\\\" [style]=\\\"{'text-align':'center'}\\\">\\r\\n        <ng-template let-col let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          <span class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"order[col.field]=='STD' ? 'fa fa-thumbs-o-up': 'fa fa-life-bouy'\\\"></i></span>\\r\\n        </ng-template>\\r\\n      </p-column>-->\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"mdCapex\\\" header=\\\"CAPEX\\\" ></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"price\\\" header=\\\"Wartość\\\" styleClass=\\\"text-right\\\"></p-column>\\r\\n\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"comment\\\" header=\\\"Komentarz\\\" hidden=\\\"true\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"description\\\" header=\\\"Opis\\\" hidden=\\\"true\\\"></p-column>\\r\\n\\r\\n      <!--<p-column [sortable]=\\\"true\\\" field=\\\"assignee\\\" header=\\\"Wykonawca\\\"></p-column>--><!--this is array -->\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"protocolNo\\\" header=\\\"Protokół\\\"></p-column>\\r\\n      <!--<p-column [sortable]=\\\"true\\\" field=\\\"lastModDate\\\" header=\\\"Modyfikacja\\\"></p-column>-->\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"creationDate\\\" header=\\\"Utworzenie\\\"></p-column>\\r\\n\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"itemNo\\\" header=\\\"Numer obiektu\\\" ></p-column>\\r\\n      <!-- search by invisible colums flatten into order by wo.service -->\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"itemBuildingType\\\" header=\\\"Typ obiektu\\\" hidden=\\\"true\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"itemConstructionCategory\\\" header=\\\"Konstukcja\\\" hidden=\\\"true\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"itemAddress\\\" header=\\\"Adres\\\" hidden=\\\"true\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"itemDescription\\\" header=\\\"Opis obiektu\\\" hidden=\\\"true\\\"></p-column>\\r\\n\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"ventureCompany\\\" header=\\\"Inwestor\\\" ></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"ventureDisplay\\\" header=\\\"Zleceniodawca\\\" ></p-column>\\r\\n\\r\\n      <p-footer>\\r\\n        <div class=\\\"ui-grid ui-grid-responsive ui-fluid ui-grid-pad\\\">\\r\\n          <div class=\\\"ui-grid-row\\\"  style=\\\"margin-top: 15px;\\\">\\r\\n            <div class=\\\"ui-grid-col-5\\\"></div>\\r\\n            <div class=\\\"ui-grid-col-2\\\">\\r\\n              <button [disabled]=\\\"!(selectedOrders?.length > 0)\\\" type=\\\"button\\\" pButton icon=\\\"fa fa-check\\\" style=\\\"float:left\\\" (click)=\\\"showDialog()\\\" label=\\\"Protokół\\\"></button>\\r\\n            </div>\\r\\n            <div class=\\\"ui-grid-col-5\\\"></div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </p-footer>\\r\\n\\r\\n    </p-dataTable>\\r\\n  </div>\\r\\n\\r\\n\\r\\n  <p-dialog header=\\\"Modyfikacja zleceń\\\" [(visible)]=\\\"displayClearingDialog\\\" [responsive]=\\\"true\\\" [minWidth]=\\\"500\\\" [width]=\\\"800\\\">\\r\\n    <div class=\\\"ui-grid ui-grid-responsive ui-fluid\\\">\\r\\n\\r\\n\\r\\n      <!--\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n        <div class=\\\"ui-grid-col-4\\\"><label for=\\\"workNo\\\">Numer Protokołu*</label></div>\\r\\n        <div class=\\\"ui-grid-col-8 ui-fluid\\\"><input pInputText id=\\\"protocolNo\\\" [(ngModel)]=\\\"protocolNo\\\" width=\\\"auto\\\" required placeholder=\\\"Wpisz numer protokołu...\\\"/></div>\\r\\n      </div>\\r\\n      -->\\r\\n\\r\\n      <hr>\\r\\n\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n        <div class=\\\"ui-grid-col-12\\\">\\r\\n      <!--<div *ngFor=\\\"let order of selectedOrders\\\" class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n        <span>{{order?.workNo}}, {{order?.type}}, {{order?.price}}, {{order?.ventureDisplay}}, {{order?.ventureCompany}}</span>\\r\\n      </div>-->\\r\\n\\r\\n          <p-dataTable [value]=\\\"selectedOrders\\\" [rows]=\\\"20\\\" [paginator]=\\\"true\\\" [globalFilter]=\\\"gb\\\" #dt dataKey=\\\"id\\\" resizableColumns=\\\"true\\\" sortField=\\\"lastModDate\\\" sortOrder=\\\"-1\\\" loadingIcon=\\\"fa fa-spinner\\\">\\r\\n            <p-header>\\r\\n              <div>\\r\\n                <i class=\\\"fa fa-search\\\"></i>\\r\\n                <input #gb type=\\\"text\\\" pInputText size=\\\"50\\\" placeholder=\\\"Filtruj\\\">\\r\\n              </div>\\r\\n            </p-header>\\r\\n            <p-column [sortable]=\\\"true\\\" field=\\\"id\\\" header=\\\"id\\\" hidden=\\\"true\\\" ></p-column>\\r\\n            <p-column [sortable]=\\\"true\\\" field=\\\"workNo\\\" header=\\\"Zlecenie\\\" ></p-column>\\r\\n            <p-column [sortable]=\\\"true\\\" field=\\\"type\\\" header=\\\"Typ\\\" ></p-column>\\r\\n            <p-column [sortable]=\\\"true\\\" field=\\\"mdCapex\\\" header=\\\"CAPEX\\\" ></p-column>\\r\\n            <p-column [sortable]=\\\"true\\\" field=\\\"price\\\" header=\\\"Wartość\\\" styleClass=\\\"text-right\\\"></p-column>\\r\\n\\r\\n            <p-column [sortable]=\\\"true\\\" field=\\\"itemNo\\\" header=\\\"Numer obiektu\\\" ></p-column>\\r\\n            <!-- search by invisible colums flatten into order by wo.service -->\\r\\n\\r\\n            <p-column [sortable]=\\\"true\\\" field=\\\"ventureCompany\\\" header=\\\"Inwestor\\\" ></p-column>\\r\\n            <p-column [sortable]=\\\"true\\\" field=\\\"ventureDisplay\\\" header=\\\"Zleceniodawca\\\" ></p-column>\\r\\n\\r\\n            <p-footer>\\r\\n\\r\\n            </p-footer>\\r\\n\\r\\n          </p-dataTable>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n    </div>\\r\\n    <p-footer>\\r\\n      <div class=\\\"ui-dialog-buttonpane ui-helper-clearfix\\\">\\r\\n        <button width=\\\"200px\\\" type=\\\"button\\\" pButton icon=\\\"fa fa-check\\\" (click)=\\\"prepareProtocol()\\\" label=\\\"Protokół\\\"></button>\\r\\n      </div>\\r\\n    </p-footer>\\r\\n  </p-dialog>\\r\\n\\r\\n\\r\\n\\r\\n</p-panel>\"","import { Component, OnInit } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { catchError, map, tap, delay, mergeMap } from 'rxjs/operators';\r\n\r\n\r\nimport { User, RelatedItem, Order, WorkType, CodeValue } from '../_models/index';\r\nimport { WOService, RelatedItemService, UserService, DictService, AlertService, WorkTypeService, AuthenticationService, ToolsService } from '../_services/index';\r\n\r\nimport { MenuItem } from 'primeng/primeng';\r\n\r\n@Component({\r\n    selector: 'app-wo-clearing',\r\n    templateUrl: './wo-clearing.component.html',\r\n    styleUrls: ['./wo-clearing.component.css']\r\n})\r\nexport class WoClearingComponent implements OnInit {\r\n\r\n    /* search and selection */\r\n    orders:Order[];\r\n    selectedOrders:Order[];\r\n    protocolNo: string;\r\n\r\n    displayClearingDialog:boolean;\r\n    //protocolNo: string;\r\n\r\n    engineers:User[] = [];\r\n    vrs:User[] = [];\r\n\r\n    //filt for protocol\r\n    public ordersNotReady:Order[];\r\n    public ordersReadyForProtocol:Order[];\r\n    public displayOrderNotReadyDialog:boolean;\r\n    public displayDetailsDialog:boolean;\r\n    public selectedOrder: Order;\r\n    // end filt for protocol\r\n\r\n    constructor(private woService:WOService,\r\n                private userService:UserService,\r\n                private dictService:DictService,\r\n                private toolsService:ToolsService,\r\n                private alertService: AlertService) {\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.dictService.init();\r\n        this.userService.getEngineers().subscribe(engineers => this.engineers = engineers);\r\n        this.userService.getVentureRepresentatives().subscribe(vrs => this.vrs = vrs);\r\n        this.search();\r\n        this.woService.getOrdersByStatus('IS').subscribe(Order=>this.addToTable(Order));\r\n    }\r\n\r\n    // filtr for protocol \r\n    private addToTable (ordersNotReady:Order[]) :void\r\n    {\r\n        this.ordersNotReady=[];\r\n        this.ordersReadyForProtocol=[];\r\n        for (let order of ordersNotReady )\r\n        {      \r\n            if (!this.toolsService.isReadyForProtocol(order,true))\r\n            {\r\n                this.ordersNotReady.push(order)            \r\n            }\r\n            else\r\n            {\r\n                this.ordersReadyForProtocol.push(order);\r\n            }       \r\n        }\r\n        this.mapVentureRepresentative(this.ordersNotReady,this.vrs);\r\n        this.mapVentureRepresentative(this.ordersReadyForProtocol,this.vrs);\r\n    }\r\n    public showWoDetails() {\r\n        this.displayDetailsDialog=true;\r\n    }\r\n    // end filtr for protocol\r\n\r\n    fetchProtocol() {\r\n        if (!this.protocolNo) {\r\n            this.alertService.warn(\"Nie można wygenerować bez numeru!\");\r\n        } else {\r\n            this.woService.fetchProtocol(this.protocolNo).\r\n                subscribe(protocol => this.processProtocol(protocol, false));\r\n        }\r\n\r\n    }\r\n\r\n    search() {\r\n        this.woService.getOrdersByStatus('IS')\r\n            .pipe(mergeMap(orders => this.callVentures(orders)))\r\n            .subscribe(vrs => this.mapVentureRepresentative(this.orders, vrs));\r\n\r\n        this.selectedOrders = [];\r\n    }\r\n\r\n    private callVentures(orders:Order[]):Observable<User[]> {\r\n        this.orders = orders;\r\n        return this.userService.getVentureRepresentatives();\r\n    }\r\n\r\n    private mapVentureRepresentative(orders:Order[], vrs:User[]):void {\r\n        if (orders && orders.length > 0) {\r\n            for (let order of orders) {\r\n                for (let vr of vrs) {\r\n                    if (order.ventureId === vr.id) {\r\n                        order.ventureDisplay = vr.firstName + \" \" + vr.lastName;\r\n                        order.ventureCompany = vr.company;\r\n                        order.ventureFull = vr;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    showDialog() {\r\n        this.displayClearingDialog = true;\r\n    }\r\n\r\n    prepareProtocol() {\r\n\r\n        let ids: number[] = [];\r\n\r\n        for(let order of this.selectedOrders) {\r\n           ids.push(order.id);\r\n        }\r\n\r\n        console.log(\"Prepare protocol for ids=\"+JSON.stringify(ids));\r\n\r\n        this.woService.prepareProtocol(ids).\r\n            subscribe(protocol => this.processProtocol(protocol, true));\r\n\r\n        this.displayClearingDialog = false;\r\n        this.selectedOrders = [];\r\n    }\r\n\r\n    private processProtocol(protocol:any, refresh: boolean):void {\r\n        if (protocol && protocol.file) {\r\n            let protocolName: string = this.getProtocolName(protocol);\r\n            this.toolsService.downloadXLSFile(protocolName, protocol.file);\r\n            this.alertService.success(\"Wygenerowano protokół: '\"+protocolName+\"'\", false);\r\n            if (refresh) this.search();\r\n        } else {\r\n            this.alertService.error(\"Generacja protokołu niepowiodła się\");\r\n        }\r\n    }\r\n\r\n    private getProtocolName(protocol:any): string{\r\n        if (protocol.name && protocol.name.length > 0) {\r\n            return protocol.name;\r\n        }\r\n\r\n        console.log(\"protocol name is not set!\");\r\n        return \"protokol.xslx\";\r\n    }\r\n\r\n    /* mored to backed\r\n    saveOrders() {\r\n        this.displayClearingDialog = false;\r\n        for(let order of this.selectedOrders) {\r\n            order.statusCode = \"CL\";\r\n            order.protocolNo = this.protocolNo;\r\n            console.log(\"clearing order \"+order.workNo+\" with code \"+this.protocolNo);\r\n        }\r\n        this.storeOrders(this.selectedOrders, 0);\r\n    }\r\n\r\n    private storeOrders(orders:Order[], counter: number):void {\r\n        console.log(\"changing orders[\"+orders.length+\"]! for \"+counter );\r\n\r\n        if (counter < orders.length) {\r\n            this.woService.updateOrder(orders[counter]).subscribe(updatedOrder => this.refreshTableAndRecuriveCall(updatedOrder, counter, orders))\r\n        } else {\r\n            this.alertService.success(\"Pomyślnie przypisano protokół \"+this.protocolNo+\" dla \"+orders.length+\" zleceń\");\r\n            this.mapVentureRepresentative(this.orders, this.vrs);\r\n        }\r\n    }\r\n\r\n    private refreshTableAndRecursiveCall(order:Order, counter:number, orders:Order[]) {\r\n        console.log(\"Refreshing table with order \" + JSON.stringify(order));\r\n\r\n\r\n        if (order.id > 0) {\r\n            let index:number = this.toolsService.findSelectedOrderIndex(order, this.orders);\r\n            console.log(\"refresh index: \" + index);\r\n            this.orders[index] = order;\r\n            this.orders = JSON.parse(JSON.stringify(this.orders)); //immutable dirty trick\r\n            this.alertService.success(\"Pomyślnie nadano protokół \"+order.protocolNo+\" dla zlecenia \" + order.workNo);\r\n            this.storeOrders(orders, counter+1);\r\n        } else {\r\n            this.alertService.error(\"Nie można bylo odświeżyć tabeli wyników, szukaj jeszcze raz...\");\r\n        }\r\n\r\n    }\r\n    */\r\n\r\n\r\n}\r\n","module.exports = \"\"","module.exports = \"<div class=\\\"ui-grid-row\\\" style=\\\"max-width: 1000px;\\\">\\r\\n    <div class=\\\"ui-grid-col-6\\\" style=\\\"margin-top: 0px;\\\">\\r\\n        <p-fieldset legend=\\\"Detale zlecenia\\\"\\r\\n                    *ngIf=\\\"selectedOrder?.creationDate || selectedOrder?.lastModDate || selectedOrder?.comment\\\">\\r\\n            <div class=\\\"ui-grid-row\\\" *ngIf=\\\"selectedOrder?.creationDate\\\">\\r\\n                <div class=\\\"ui-grid-col-4\\\">Dodano:</div>\\r\\n                <div class=\\\"ui-grid-col-8\\\"><span style=\\\"font-style: italic;\\\">{{selectedOrder?.creationDate}}</span>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"ui-grid-row\\\" *ngIf=\\\"selectedOrder?.lastModDate\\\">\\r\\n                <div class=\\\"ui-grid-col-4\\\">Modyfikacja:</div>\\r\\n                <div class=\\\"ui-grid-col-8\\\"><span style=\\\"font-style: italic;\\\">{{selectedOrder?.lastModDate}}</span></div>\\r\\n            </div>\\r\\n            <div class=\\\"ui-grid-row\\\" *ngIf=\\\"selectedOrder?.modifiedBy\\\">\\r\\n                <div class=\\\"ui-grid-col-4\\\">Modyfikował(a):</div>\\r\\n                <div class=\\\"ui-grid-col-8\\\"><span style=\\\"font-style: italic;\\\">{{selectedOrder?.modifiedBy}}</span></div>\\r\\n            </div>\\r\\n\\r\\n            <hr *ngIf=\\\"selectedOrder?.creationDate || selectedOrder?.lastModDate\\\">\\r\\n\\r\\n            <div style=\\\"margin-bottom: 5px\\\" class=\\\"ui-grid-row\\\" *ngIf=\\\"selectedOrder?.type\\\">\\r\\n                <div class=\\\"ui-grid-col-4\\\">Typ:</div>\\r\\n                <div class=\\\"ui-grid-col-8\\\">\\r\\n                    <span [style.color]=\\\"getColor()\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-square'\\\"></i></span>\\r\\n                    <span style=\\\"padding: 3px; font-style: italic;\\\">{{selectedOrder?.type}}</span>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div style=\\\"margin-bottom: 5px\\\" class=\\\"ui-grid-row\\\" *ngIf=\\\"selectedOrder?.complexity != null\\\">\\r\\n                <div class=\\\"ui-grid-col-4\\\">Złożoność:</div>\\r\\n                <div class=\\\"ui-grid-col-8\\\">\\r\\n                    <span class=\\\"ui-inputgroup-addon\\\"><i\\r\\n                            [class]=\\\"selectedOrder.complexityCode=='STD' ? 'fa fa-thumbs-o-up': 'fa fa-life-bouy'\\\"></i></span>\\r\\n                    <span style=\\\"padding: 3px; font-style: italic;\\\">Wycena {{selectedOrder?.complexity}} godzin</span>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div style=\\\"margin-bottom: 5px\\\" class=\\\"ui-grid-row\\\" *ngIf=\\\"selectedOrder?.status\\\">\\r\\n                <div class=\\\"ui-grid-col-4\\\">Status:</div>\\r\\n                <div class=\\\"ui-grid-col-8\\\">\\r\\n                    <span class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"getStatusIcon()\\\"></i></span>\\r\\n                    <span style=\\\"padding: 3px; font-style: italic;\\\">{{selectedOrder?.status}}</span>\\r\\n                </div>\\r\\n            </div>\\r\\n\\r\\n            <div style=\\\"margin-bottom: 5px\\\" class=\\\"ui-grid-row\\\" *ngIf=\\\"selectedOrder?.status\\\">\\r\\n                <div class=\\\"ui-grid-col-4\\\">Wartość zamówienia:</div>\\r\\n                <div class=\\\"ui-grid-col-8\\\">\\r\\n                    <span style=\\\"font-style: italic;\\\">{{selectedOrder?.price}} PLN</span>\\r\\n                </div>\\r\\n            </div>\\r\\n\\r\\n            <div class=\\\"ui-grid-row\\\" *ngIf=\\\"selectedOrder?.status\\\">\\r\\n                <div class=\\\"ui-grid-col-4\\\">Numer protokołu:</div>\\r\\n                <div class=\\\"ui-grid-col-8\\\">\\r\\n                    <span style=\\\"font-style: italic;\\\">{{selectedOrder?.protocolNo}}</span>\\r\\n                </div>\\r\\n            </div>\\r\\n\\r\\n            <div style=\\\"margin-bottom: 5px; margin-top: 5px;\\\" class=\\\"ui-grid-row\\\" *ngIf=\\\"selectedOrder?.isFromPool\\\">\\r\\n                <div class=\\\"ui-grid-col-4\\\">W ramach puli:</div>\\r\\n                <div class=\\\"ui-grid-col-8\\\">\\r\\n                    <span class=\\\"ui-inputgroup-addon\\\"><i\\r\\n                            [class]=\\\"selectedOrder.isFromPool=='Y' ? 'fa fa-users': 'fa fa-street-view'\\\"></i></span>\\r\\n                    <span style=\\\"padding: 3px; font-style: italic;\\\">{{selectedOrder?.isFromPool == 'Y' ? 'TAK' : 'NIE'}}</span>\\r\\n                </div>\\r\\n            </div>\\r\\n\\r\\n        </p-fieldset>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"ui-grid-col-6\\\">\\r\\n        <div *ngIf=\\\"selectedOrder?.ventureDisplay || selectedOrder?.ventureCompany\\\" class=\\\"ui-grid-row\\\"\\r\\n             style=\\\"margin-top: 0px;\\\">\\r\\n            <p-fieldset legend=\\\"Inwestor\\\">\\r\\n                {{selectedOrder?.ventureDisplay}} @ {{selectedOrder?.ventureCompany}}\\r\\n            </p-fieldset>\\r\\n        </div>\\r\\n        <div *ngIf=\\\"selectedOrder?.assigneeFull && selectedOrder?.assigneeFull?.length > 0\\\" class=\\\"ui-grid-row\\\"\\r\\n             style=\\\"margin-top: 10px;\\\">\\r\\n            <p-fieldset legend=\\\"Wykonawcy\\\">\\r\\n                <div class=\\\"ui-grid-row\\\" *ngFor=\\\"let a of selectedOrder.assigneeFull\\\">\\r\\n                    <div class=\\\"ui-grid-col-12\\\"><u>{{a.email}}</u></div>\\r\\n                    <div class=\\\"ui-grid-col-12\\\">{{a.firstName}} {{a.lastName}}</div>\\r\\n                    <div class=\\\"ui-grid-col-12\\\">{{a.role}} @ {{a.office}}</div>\\r\\n                </div>\\r\\n            </p-fieldset>\\r\\n        </div>\\r\\n        <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n            <p-fieldset legend=\\\"Obiekt inwestycji\\\">\\r\\n                <div *ngIf=\\\"selectedOrder?.relatedItems[0]?.itemNo || selectedOrder?.relatedItems[0]?.address || selectedOrder?.relatedItems[0]?.mdBuildingType || selectedOrder?.relatedItems[0]?.description || selectedOrder?.relatedItems[0]?.mdConstructionCategory;else noRelatedItem\\\">\\r\\n                    <div *ngIf=\\\"selectedOrder?.relatedItems[0]?.itemNo\\\" class=\\\"ui-grid-row\\\">\\r\\n                        <div class=\\\"ui-grid-col-4\\\">Numer:</div>\\r\\n                        <div class=\\\"ui-grid-col-8\\\">{{selectedOrder?.relatedItems[0]?.itemNo}}</div>\\r\\n                    </div>\\r\\n                    <div *ngIf=\\\"selectedOrder?.relatedItems[0]?.address\\\" class=\\\"ui-grid-row\\\">\\r\\n                        <div class=\\\"ui-grid-col-4\\\">Adres:</div>\\r\\n                        <div class=\\\"ui-grid-col-8\\\">{{selectedOrder?.relatedItems[0]?.address}}</div>\\r\\n                    </div>\\r\\n                    <div *ngIf=\\\"selectedOrder?.relatedItems[0]?.mdBuildingType\\\" class=\\\"ui-grid-row\\\">\\r\\n                        <div class=\\\"ui-grid-col-4\\\">Typ budynku:</div>\\r\\n                        <div class=\\\"ui-grid-col-8\\\">{{selectedOrder?.relatedItems[0]?.mdBuildingType}}</div>\\r\\n                    </div>\\r\\n                    <div *ngIf=\\\"selectedOrder?.relatedItems[0]?.mdConstructionCategory\\\" class=\\\"ui-grid-row\\\">\\r\\n                        <div class=\\\"ui-grid-col-4\\\">Konstrukcja:</div>\\r\\n                        <div class=\\\"ui-grid-col-8\\\">{{selectedOrder?.relatedItems[0]?.mdConstructionCategory}}</div>\\r\\n                    </div>\\r\\n                    <div *ngIf=\\\"selectedOrder?.relatedItems[0]?.description\\\" class=\\\"ui-grid-row\\\">\\r\\n                        <div class=\\\"ui-grid-col-4\\\">Opis:</div>\\r\\n                        <div class=\\\"ui-grid-col-8\\\">{{selectedOrder?.relatedItems[0]?.description}}</div>\\r\\n                    </div>\\r\\n                    <div *ngIf=\\\"selectedOrder?.relatedItems[0]?.creationDate\\\" class=\\\"ui-grid-row\\\">\\r\\n                        <div class=\\\"ui-grid-col-4\\\">Dodano:</div>\\r\\n                        <div class=\\\"ui-grid-col-8\\\">{{selectedOrder?.relatedItems[0]?.creationDate}}</div>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <ng-template #noRelatedItem><strong style=\\\"color: darkorange;\\\">Nie przypisano...</strong></ng-template>\\r\\n            </p-fieldset>\\r\\n        </div>\\r\\n    </div>\\r\\n    <br>\\r\\n\\r\\n\\r\\n    <div *ngIf=\\\"selectedOrder?.comments?.comments || selectedOrder?.description\\\" class=\\\"ui-grid ui-grid-responsive ui-fluid\\\" style=\\\"margin-top: 10px;\\\">\\r\\n\\r\\n        <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n                    <div class=\\\"ui-grid-col-12\\\" *ngIf=\\\"selectedOrder?.comments?.comments\\\">\\r\\n\\r\\n\\r\\n                        <p-dataTable header=\\\"Komentarze\\\" [value]=\\\"selectedOrder.comments.comments\\\" [rows]=\\\"10\\\" [paginator]=\\\"true\\\" #dt resizableColumns=\\\"true\\\"\\r\\n                                     sortField=\\\"date\\\" sortOrder=\\\"-1\\\" [loading]=\\\"loading\\\" loadingIcon=\\\"fa fa-spinner\\\">\\r\\n                            <p-header>Komentarze</p-header>\\r\\n                            <p-column [sortable]=\\\"true\\\" field=\\\"date\\\" header=\\\"Utworzono\\\" [style]=\\\"{'width':'120px'}\\\"></p-column>\\r\\n                            <p-column [sortable]=\\\"true\\\" field=\\\"sCreatedBy\\\" header=\\\"Osoba\\\" [style]=\\\"{'width':'120px'}\\\"></p-column>\\r\\n                            <p-column [sortable]=\\\"true\\\" field=\\\"reason\\\" header=\\\"Powód\\\" [style]=\\\"{'width':'100px'}\\\"></p-column>\\r\\n                            <p-column [sortable]=\\\"true\\\" field=\\\"text\\\" header=\\\"Treść\\\">\\r\\n                                <ng-template let-col let-comment=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n                                    <textarea readonly=\\\"readonly\\\" style=\\\"color: black;\\\" pInputTextarea [rows]=\\\"2\\\" [cols]=\\\"30\\\">{{comment.text}}</textarea>\\r\\n                                </ng-template>\\r\\n                            </p-column>\\r\\n                            <ng-template pTemplate=\\\"emptymessage\\\">\\r\\n                                Brak komentarzy...\\r\\n                            </ng-template>\\r\\n                        </p-dataTable>\\r\\n\\r\\n                    </div>\\r\\n        </div>\\r\\n        <div class=\\\"ui-grid-row\\\">\\r\\n                <div class=\\\"ui-grid-col-12\\\"  *ngIf=\\\"selectedOrder?.description\\\" style=\\\"max-width: 1000px; margin-top: 10px;\\\">\\r\\n                    <p-panel header=\\\"Opis\\\">{{selectedOrder.description}}</p-panel>\\r\\n                </div>\\r\\n        </div>\\r\\n\\r\\n\\r\\n\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"ui-grid-row\\\" style=\\\"max-width: 1000px;\\\">\\r\\n        <div class=\\\"ui-grid-col-12\\\" *ngIf=\\\"selectedOrder?.history && selectedOrder?.history?.length > 0\\\"\\r\\n             style=\\\"margin-top: 10px;\\\">\\r\\n            <p-fieldset legend=\\\"Historia\\\">\\r\\n\\r\\n                <p-dataTable [style]=\\\"{'width':'100%'}\\\" [value]=\\\"selectedOrder.history\\\" [rows]=\\\"10\\\" [paginator]=\\\"true\\\" #dt resizableColumns=\\\"true\\\"\\r\\n                             sortField=\\\"versionDate\\\" sortOrder=\\\"-1\\\" [loading]=\\\"loading\\\" loadingIcon=\\\"fa fa-spinner\\\">\\r\\n                    <p-column [sortable]=\\\"true\\\" field=\\\"modifiedByFull.email\\\" header=\\\"Zmienił\\\" [style]=\\\"{'width':'100px'}\\\"></p-column>\\r\\n                    <p-column [sortable]=\\\"true\\\" field=\\\"lastModDate\\\" header=\\\"Zmieniono\\\" [style]=\\\"{'width':'100px'}\\\"></p-column>\\r\\n                    <p-column [sortable]=\\\"true\\\" field=\\\"versionDate\\\" header=\\\"Nadpisano\\\" [style]=\\\"{'width':'100px'}\\\"></p-column>\\r\\n\\r\\n                    <p-column [sortable]=\\\"true\\\" field=\\\"workNo\\\" header=\\\"Zlecenie\\\" [style]=\\\"{'width':'90px'}\\\"></p-column>\\r\\n                    <p-column [sortable]=\\\"true\\\" field=\\\"itemNo\\\" header=\\\"Numer obiektu\\\" [style]=\\\"{'width':'90px'}\\\"></p-column>\\r\\n                    <p-column [sortable]=\\\"true\\\" field=\\\"status\\\" header=\\\"Status\\\" [style]=\\\"{'width':'70px'}\\\"></p-column>\\r\\n                    <p-column [sortable]=\\\"true\\\" field=\\\"complexity\\\" header=\\\"Pracochłonność\\\" [style]=\\\"{'width':'60px', 'text-align':'right'}\\\"></p-column>\\r\\n                    <p-column [sortable]=\\\"true\\\" field=\\\"price\\\" header=\\\"Cena\\\" [style]=\\\"{'width':'60px', 'text-align':'right'}\\\"></p-column>\\r\\n\\r\\n                    <p-column [sortable]=\\\"true\\\" field=\\\"ventureDisplay\\\" header=\\\"Zleceniodawca\\\" [style]=\\\"{'width':'80px'}\\\"></p-column>\\r\\n\\r\\n                    <ng-template pTemplate=\\\"emptymessage\\\">\\r\\n                        Brak historycznych danych o zleceniach...\\r\\n                    </ng-template>\\r\\n\\r\\n                </p-dataTable>\\r\\n\\r\\n\\r\\n                <!--<div class=\\\"ui-grid-row\\\" *ngFor=\\\"let record of selectedOrder.history\\\">\\r\\n                    <div class=\\\"ui-grid-col-12\\\">\\r\\n                        <p-panel header=\\\"Nadpisano\\\">{{record.versionDate}}</p-panel>\\r\\n\\r\\n\\r\\n                    </div>\\r\\n                </div>-->\\r\\n            </p-fieldset>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n\"","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\n\r\n\r\nimport { User, RelatedItem, Order, OrderHistory, WorkType, CodeValue } from '../_models/index';\r\nimport { WOService, RelatedItemService, UserService, DictService, AlertService, WorkTypeService, AuthenticationService, ToolsService } from '../_services/index';\r\n\r\n@Component({\r\n    selector: 'app-wo-details',\r\n    templateUrl: './wo-details.component.html',\r\n    styleUrls: ['./wo-details.component.css']\r\n})\r\nexport class WoDetailsComponent implements OnInit {\r\n\r\n    _selectedOrder: Order;\r\n    staff: User[];\r\n    ventureRepresentatives: User[];\r\n\r\n    constructor(private toolsService: ToolsService,\r\n                private woService: WOService,\r\n                private userService:UserService) {\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.userService.getAllStaff().subscribe(staff => this.staff = staff);\r\n        this.userService.getVentureRepresentatives().subscribe(vr => this.ventureRepresentatives = vr);\r\n    }\r\n\r\n    @Input()\r\n    set selectedOrder(order: Order) {\r\n        if (order) {\r\n            console.log('got order: ', order.id);\r\n            this._selectedOrder = order;\r\n\r\n            this.woService.getOrderHistoryById(order.id)\r\n                .subscribe(history => this.processHistory(history));\r\n\r\n        }\r\n    }\r\n\r\n    get selectedOrder(): Order {\r\n        return this._selectedOrder;\r\n    }\r\n\r\n    private processHistory(history:OrderHistory[]):void {\r\n\r\n\r\n        for (let record of history) {\r\n            if (record.itemId !== undefined && record.itemId > 0) {\r\n                this.woService.getRelatedItem(record.itemId).subscribe(item => record.itemNo = item.itemNo);\r\n            }\r\n            if (this.staff && this.staff.length > 0) {\r\n                this.fillModifiedBy(record);\r\n            }\r\n            if (this.ventureRepresentatives && this.ventureRepresentatives.length > 0) {\r\n                this.fillVentureRepresentative(record);\r\n            }\r\n        }\r\n\r\n        this._selectedOrder.history = history;\r\n    }\r\n\r\n    private fillModifiedBy(record: OrderHistory): void {\r\n        for(let s of this.staff) {\r\n            if (s.id === record.modifiedBy) {\r\n                record.modifiedByFull = s;\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    private fillVentureRepresentative(record:OrderHistory):void {\r\n        for(let vr of this.ventureRepresentatives) {\r\n            if(vr.id === record.ventureId) {\r\n                record.ventureDisplay = vr.firstName+\" \"+vr.lastName;\r\n                record.ventureCompany = vr.company;\r\n            }\r\n        }\r\n    }\r\n\r\n    public getColor() :string {\r\n        return this.toolsService.getOrderColor(this._selectedOrder.typeCode);\r\n    }\r\n\r\n    public getStatusIcon(): string {\r\n        return this.toolsService.getStatusIcon(this._selectedOrder.statusCode);\r\n    }\r\n\r\n}\r\n","module.exports = \"\"","module.exports = \"<div class=\\\"ui-grid-row\\\">\\r\\n    <div style=\\\"margin-top: 5px\\\" class=\\\"ui-g\\\">\\r\\n        <p-dataTable [value]=\\\"list\\\" [rows]=\\\"20\\\" [paginator]=\\\"true\\\" [globalFilter]=\\\"gb\\\"   dataKey=\\\"id\\\" resizableColumns=\\\"true\\\" sortField=\\\"lastModDate\\\" sortOrder=\\\"-1\\\" loadingIcon=\\\"fa fa-spinner\\\">\\r\\n          <p-header>\\r\\n            <div>\\r\\n              <i class=\\\"fa fa-search\\\"></i>\\r\\n              <input #gb type=\\\"text\\\" pInputText size=\\\"50\\\" placeholder=\\\"Filtruj\\\">\\r\\n            </div>\\r\\n          </p-header>         \\r\\n          <p-column [sortable]=\\\"true\\\" field=\\\"id\\\" header=\\\"id\\\" hidden=\\\"true\\\" ></p-column>\\r\\n          <p-column [sortable]=\\\"true\\\" field=\\\"workNo\\\" header=\\\"Zlecenie\\\" ></p-column>\\r\\n          <p-column [sortable]=\\\"true\\\" field=\\\"status\\\" header=\\\"Status\\\" ></p-column>\\r\\n          <p-column [sortable]=\\\"true\\\" field=\\\"type\\\" header=\\\"Typ\\\" ></p-column>\\r\\n          <p-column [sortable]=\\\"true\\\" field=\\\"mdCapex\\\" header=\\\"CAPEX\\\" ></p-column>\\r\\n          <p-column [sortable]=\\\"true\\\" field=\\\"price\\\" header=\\\"Wartość\\\" styleClass=\\\"text-right\\\"></p-column>\\r\\n          <p-column [sortable]=\\\"true\\\" field=\\\"comment\\\" header=\\\"Komentarz\\\" hidden=\\\"true\\\"></p-column>\\r\\n          <p-column [sortable]=\\\"true\\\" field=\\\"description\\\" header=\\\"Opis\\\" hidden=\\\"true\\\"></p-column>    \\r\\n          <p-column [sortable]=\\\"true\\\" field=\\\"protocolNo\\\" header=\\\"Protokół\\\"></p-column>    \\r\\n          <p-column [sortable]=\\\"true\\\" field=\\\"creationDate\\\" header=\\\"Utworzenie\\\"></p-column>  \\r\\n          <p-column [sortable]=\\\"true\\\" field=\\\"itemNo\\\" header=\\\"Numer obiektu\\\" ></p-column>         \\r\\n          <p-column [sortable]=\\\"true\\\" field=\\\"itemBuildingType\\\" header=\\\"Typ obiektu\\\" hidden=\\\"true\\\"></p-column>\\r\\n          <p-column [sortable]=\\\"true\\\" field=\\\"itemConstructionCategory\\\" header=\\\"Konstukcja\\\" hidden=\\\"true\\\"></p-column>\\r\\n          <p-column [sortable]=\\\"true\\\" field=\\\"itemAddress\\\" header=\\\"Adres\\\" hidden=\\\"true\\\"></p-column>\\r\\n          <p-column [sortable]=\\\"true\\\" field=\\\"itemDescription\\\" header=\\\"Opis obiektu\\\" hidden=\\\"true\\\"></p-column>     \\r\\n          <p-column [sortable]=\\\"true\\\" field=\\\"ventureCompany\\\" header=\\\"Inwestor\\\" ></p-column>\\r\\n          <p-column [sortable]=\\\"true\\\" field=\\\"ventureDisplay\\\" header=\\\"Zleceniodawca\\\" ></p-column>\\r\\n          <p-column [sortable]=\\\"true\\\" field=\\\"frontProcessingDesc\\\" header=\\\"Powód\\\" ></p-column>\\r\\n        </p-dataTable>\\r\\n      </div> \\r\\n</div>\\r\\n\"","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\n\r\n\r\nimport { User, RelatedItem, Order, OrderHistory, WorkType, CodeValue } from '../_models/index';\r\nimport { WOService, RelatedItemService, UserService, DictService, AlertService, WorkTypeService, AuthenticationService, ToolsService } from '../_services/index';\r\n\r\n@Component({\r\n    selector: 'app-wo-list',\r\n    templateUrl: './wo-list.component.html',\r\n    styleUrls: ['./wo-list.component.css']\r\n})\r\nexport class WoListComponent implements OnInit {\r\n\r\n    list:Order[];\r\n    \r\n    constructor(private toolsService: ToolsService,\r\n                private woService: WOService,\r\n                private userService:UserService) {\r\n    }\r\n    ngOnInit() {\r\n        \r\n    }\r\n    @Input()\r\n    set ListToDisplay(orders: Order[]) {\r\n            this.list = orders;        \r\n    }\r\n    get ListToDisplay(): Order[] {\r\n        return this.list;\r\n    }\r\n}\r\n","module.exports = \"\"","module.exports = \"<p-panel [header]=\\\"dictService.getWorkStatus(orderStatus)+' zlecenia'\\\">\\r\\n\\r\\n  <div style=\\\"margin-top: 5px\\\" *ngIf=\\\"orders\\\" class=\\\"ui-g\\\">\\r\\n    <p-dataTable [value]=\\\"orders\\\" [rows]=\\\"20\\\" [paginator]=\\\"true\\\"  [globalFilter]=\\\"gb\\\" #dt dataKey=\\\"id\\\"\\r\\n                 csvSeparator=\\\";\\\" exportFilename=\\\"zawieszone\\\"\\r\\n                 selectionMode=\\\"single\\\" [(selection)]=\\\"selectedOrder\\\" (onRowSelect)=\\\"onRowSelect($event)\\\"\\r\\n                 resizableColumns=\\\"true\\\" sortField=\\\"lastModDate\\\" sortOrder=\\\"-1\\\" [loading]=\\\"loading\\\" loadingIcon=\\\"fa fa-spinner\\\" [contextMenu]=\\\"cm\\\">\\r\\n      <p-header>\\r\\n        <div>\\r\\n          <i class=\\\"fa fa-search\\\"></i>\\r\\n          <input #gb type=\\\"text\\\" pInputText size=\\\"50\\\" placeholder=\\\"Filtruj\\\">\\r\\n        </div>\\r\\n      </p-header>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"officeCode\\\" header=\\\"Biuro\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'width':'45px'}\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"workNo\\\" header=\\\"Zlecenie\\\"  [style]=\\\"{'width':'70px'}\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"status\\\" header=\\\"Status\\\" [style]=\\\"{'text-align':'center', 'width':'60px'}\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" filterMatchMode=\\\"contains\\\">\\r\\n        <ng-template let-col let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          <span class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"toolsService.getStatusIcon(order.statusCode)\\\"></i></span>\\r\\n          <!--<span style=\\\"padding: 3px\\\">{{order.status}}</span>-->\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"type\\\" header=\\\"Typ\\\" [style]=\\\"{'text-align':'center', 'width':'80px'}\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" filterMatchMode=\\\"contains\\\">\\r\\n        <ng-template let-col let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          <span [style.color]=\\\"toolsService.getOrderColor(order.typeCode)\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-square'\\\"></i></span>\\r\\n          <span style=\\\"padding: 3px\\\">{{order.type}}</span>\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"mdCapex\\\" header=\\\"CAPEX\\\"  [style]=\\\"{'width':'70px'}\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"price\\\" header=\\\"Cena\\\" styleClass=\\\"text-right\\\" [style]=\\\"{'width':'60px'}\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n\\r\\n      <p-column field=\\\"sComments\\\" header=\\\"Komentarz\\\" hiddem=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\">\\r\\n        <ng-template let-col let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          <span>{{getCancelOrHoldComment(order)}}</span>\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"description\\\" header=\\\"Opis\\\" hiddem=\\\"true\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"lastModDate\\\" header=\\\"Modyfikacja\\\" [style]=\\\"{'width':'90px'}\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n\\r\\n\\r\\n      <!-- search by invisible colums, display in one row -->\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"itemNo\\\" header=\\\"Numer obiektu\\\" [style]=\\\"{'width':'95px'}\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n      <!-- search by invisible colums flatten into order by wo.service -->\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"itemBuildingType\\\" header=\\\"Typ obiektu\\\"   hidden=\\\"true\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"itemConstructionCategory\\\" header=\\\"Konstukcja\\\"   hidden=\\\"true\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"itemAddress\\\" header=\\\"Adres\\\"  hidden=\\\"true\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"itemDescription\\\" header=\\\"Opis obiektu\\\"  hidden=\\\"true\\\"></p-column>\\r\\n\\r\\n      <p-column [style]=\\\"{'width':'40px','text-align':'center'}\\\">\\r\\n        <ng-template let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          <button type=\\\"button\\\" pButton (click)=\\\"showWoDetails($event, order)\\\" icon=\\\"fa fa-search\\\"></button>\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n\\r\\n      <ng-template pTemplate=\\\"emptymessage\\\">\\r\\n        Brak zleceń...\\r\\n      </ng-template>\\r\\n\\r\\n      <p-footer>\\r\\n        <div class=\\\"ui-grid ui-grid-responsive ui-fluid ui-grid-pad\\\">\\r\\n          <div class=\\\"ui-grid-row\\\"  style=\\\"margin-top: 15px;\\\">\\r\\n            <div class=\\\"ui-grid-col-5\\\"></div>\\r\\n\\r\\n            <div class=\\\"ui-grid-col-2\\\">\\r\\n              <button type=\\\"button\\\" pButton icon=\\\"fa fa-file-o\\\" iconPos=\\\"left\\\" label=\\\"raport\\\" (click)=\\\"dt.exportCSV()\\\"></button>\\r\\n            </div>\\r\\n            <div class=\\\"ui-grid-col-5\\\"></div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </p-footer>\\r\\n\\r\\n    </p-dataTable>\\r\\n\\r\\n    <p-contextMenu #cm [model]=\\\"items\\\"></p-contextMenu>\\r\\n  </div>\\r\\n\\r\\n  <p-dialog [(visible)]=\\\"displayDetailsDialog\\\" [header]=\\\"'Zamówienie '+selectedOrder?.workNo\\\" [minWidth]=\\\"600\\\" [responsive]=\\\"true\\\" [blockScroll]=\\\"true\\\" [contentStyle]=\\\"{'height': '800px'}\\\">\\r\\n    <app-wo-details [selectedOrder]=\\\"selectedOrder\\\"></app-wo-details>\\r\\n  </p-dialog>\\r\\n\\r\\n  <!-- add comment -->\\r\\n  <p-dialog  [header]=\\\"'Dodawanie komentarza do zlecenia nr '+selectedOrder?.workNo\\\" [(visible)]=\\\"displayAddComment\\\" [responsive]=\\\"true\\\" [minWidth]=\\\"900\\\">\\r\\n    <div class=\\\"ui-grid-row\\\" style=\\\"max-width: 900px;\\\">\\r\\n      <div class=\\\"ui-grid-col-6\\\" style=\\\"margin-top: 10px;\\\">\\r\\n        <p-fieldset legend=\\\"Detale zlecenia\\\" *ngIf=\\\"selectedOrder?.creationDate || selectedOrder?.lastModDate || selectedOrder?.assigneeFull?.length > 0 || selectedOrder?.comment\\\">\\r\\n          <div class=\\\"ui-grid-row\\\" *ngIf=\\\"selectedOrder?.creationDate\\\">\\r\\n            <div class=\\\"ui-grid-col-4\\\">Dodano:</div>\\r\\n            <div class=\\\"ui-grid-col-8\\\"><span style=\\\"font-style: italic;\\\">{{selectedOrder?.creationDate}}</span>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"ui-grid-row\\\" *ngIf=\\\"selectedOrder?.lastModDate\\\">\\r\\n            <div class=\\\"ui-grid-col-4\\\">Modyfikacja:</div>\\r\\n            <div class=\\\"ui-grid-col-8\\\"><span style=\\\"font-style: italic;\\\">{{selectedOrder?.lastModDate}}</span></div>\\r\\n          </div>\\r\\n          <hr *ngIf=\\\"selectedOrder?.creationDate || selectedOrder?.lastModDate\\\">\\r\\n          <div style=\\\"margin-bottom: 5px\\\" class=\\\"ui-grid-row\\\" *ngIf=\\\"selectedOrder?.type\\\">\\r\\n            <div class=\\\"ui-grid-col-4\\\">Typ:</div>\\r\\n            <div class=\\\"ui-grid-col-8\\\">\\r\\n              <span [style.color]=\\\"toolsService.getOrderColor(order?.typeCode)\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-square'\\\"></i></span>\\r\\n              <span style=\\\"padding: 3px; font-style: italic;\\\">{{selectedOrder?.type}}</span>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div style=\\\"margin-bottom: 5px\\\" class=\\\"ui-grid-row\\\" *ngIf=\\\"selectedOrder?.complexity\\\">\\r\\n            <div class=\\\"ui-grid-col-4\\\">Złożoność:</div>\\r\\n            <div class=\\\"ui-grid-col-8\\\">\\r\\n                    <span class=\\\"ui-inputgroup-addon\\\"><i\\r\\n                            [class]=\\\"selectedOrder.complexity=='STD' ? 'fa fa-thumbs-o-up': 'fa fa-life-bouy'\\\"></i></span>\\r\\n              <span style=\\\"padding: 3px; font-style: italic;\\\">Wycena {{selectedOrder?.complexity}} godzin</span>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div style=\\\"margin-bottom: 5px\\\" class=\\\"ui-grid-row\\\" *ngIf=\\\"selectedOrder?.status\\\">\\r\\n            <div class=\\\"ui-grid-col-4\\\">Status:</div>\\r\\n            <div class=\\\"ui-grid-col-8\\\">\\r\\n              <span class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"\\\"></i></span>\\r\\n              <span style=\\\"padding: 3px; font-style: italic;\\\">{{selectedOrder?.status}}</span>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div style=\\\"margin-bottom: 5px\\\" class=\\\"ui-grid-row\\\" *ngIf=\\\"selectedOrder?.status\\\">\\r\\n            <div class=\\\"ui-grid-col-4\\\">Wartość zamówienia:</div>\\r\\n            <div class=\\\"ui-grid-col-8\\\">\\r\\n              <span style=\\\"font-style: italic;\\\">{{selectedOrder?.price}} PLN</span>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"ui-grid-row\\\" *ngIf=\\\"selectedOrder?.status\\\">\\r\\n            <div class=\\\"ui-grid-col-4\\\">Numer protokołu:</div>\\r\\n            <div class=\\\"ui-grid-col-8\\\">\\r\\n              <span style=\\\"font-style: italic;\\\">{{selectedOrder?.protocolNo}}</span>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div style=\\\"margin-bottom: 5px; margin-top: 5px;\\\" class=\\\"ui-grid-row\\\" *ngIf=\\\"selectedOrder?.isFromPool\\\">\\r\\n            <div class=\\\"ui-grid-col-4\\\">W ramach puli:</div>\\r\\n            <div class=\\\"ui-grid-col-8\\\">\\r\\n                    <span class=\\\"ui-inputgroup-addon\\\"><i\\r\\n                            [class]=\\\"selectedOrder.isFromPool=='Y' ? 'fa fa-users': 'fa fa-street-view'\\\"></i></span>\\r\\n              <span style=\\\"padding: 3px; font-style: italic;\\\">{{selectedOrder?.isFromPool == 'Y' ? 'TAK' : 'NIE'}}</span>\\r\\n            </div>\\r\\n          </div>\\r\\n          <hr *ngIf=\\\"selectedOrder?.type || selectedOrder?.complexity || selectedOrder?.status \\\">\\r\\n          <div *ngIf=\\\"selectedOrder?.assigneeFull && selectedOrder?.assigneeFull?.length > 0\\\" class=\\\"ui-grid-row\\\">\\r\\n            <strong>Wykonawcy</strong>\\r\\n          </div>\\r\\n          <div class=\\\"ui-grid-row\\\" *ngFor=\\\"let a of selectedOrder.assigneeFull\\\">\\r\\n            <div class=\\\"ui-grid-col-12\\\"><u>{{a.email}}</u></div>\\r\\n            <div class=\\\"ui-grid-col-12\\\">{{a.firstName}} {{a.lastName}}</div>\\r\\n            <div class=\\\"ui-grid-col-12\\\">{{a.role}} @ {{a.office}}</div>\\r\\n          </div>\\r\\n        </p-fieldset>\\r\\n      </div>\\r\\n      <div class=\\\"ui-grid-col-6\\\">\\r\\n        <div *ngIf=\\\"selectedOrder?.ventureDisplay || selectedOrder?.ventureCompany\\\" class=\\\"ui-grid-row\\\"\\r\\n             style=\\\"margin-top: 10px;\\\">\\r\\n          <p-fieldset legend=\\\"Inwestor\\\">\\r\\n            {{selectedOrder?.ventureDisplay}} @ {{selectedOrder?.ventureCompany}}\\r\\n          </p-fieldset>\\r\\n        </div>\\r\\n        <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n          <p-fieldset legend=\\\"Obiekt inwestycji\\\">\\r\\n            <div *ngIf=\\\"selectedOrder?.relatedItems[0]?.itemNo || selectedOrder?.relatedItems[0]?.address || selectedOrder?.relatedItems[0]?.mdBuildingType || selectedOrder?.relatedItems[0]?.description || selectedOrder?.relatedItems[0]?.mdConstructionCategory;else noRelatedItem\\\">\\r\\n              <div *ngIf=\\\"selectedOrder?.relatedItems[0]?.itemNo\\\" class=\\\"ui-grid-row\\\">\\r\\n                <div class=\\\"ui-grid-col-4\\\">Numer:</div>\\r\\n                <div class=\\\"ui-grid-col-8\\\">{{selectedOrder?.relatedItems[0]?.itemNo}}</div>\\r\\n              </div>\\r\\n              <div *ngIf=\\\"selectedOrder?.relatedItems[0]?.address\\\" class=\\\"ui-grid-row\\\">\\r\\n                <div class=\\\"ui-grid-col-4\\\">Adres:</div>\\r\\n                <div class=\\\"ui-grid-col-8\\\">{{selectedOrder?.relatedItems[0]?.address}}</div>\\r\\n              </div>\\r\\n              <div *ngIf=\\\"selectedOrder?.relatedItems[0]?.mdBuildingType\\\" class=\\\"ui-grid-row\\\">\\r\\n                <div class=\\\"ui-grid-col-4\\\">Typ budynku:</div>\\r\\n                <div class=\\\"ui-grid-col-8\\\">{{selectedOrder?.relatedItems[0]?.mdBuildingType}}</div>\\r\\n              </div>\\r\\n              <div *ngIf=\\\"selectedOrder?.relatedItems[0]?.mdConstructionCategory\\\" class=\\\"ui-grid-row\\\">\\r\\n                <div class=\\\"ui-grid-col-4\\\">Konstrukcja:</div>\\r\\n                <div class=\\\"ui-grid-col-8\\\">{{selectedOrder?.relatedItems[0]?.mdConstructionCategory}}</div>\\r\\n              </div>\\r\\n              <div *ngIf=\\\"selectedOrder?.relatedItems[0]?.description\\\" class=\\\"ui-grid-row\\\">\\r\\n                <div class=\\\"ui-grid-col-4\\\">Opis:</div>\\r\\n                <div class=\\\"ui-grid-col-8\\\">{{selectedOrder?.relatedItems[0]?.description}}</div>\\r\\n              </div>\\r\\n              <div *ngIf=\\\"selectedOrder?.relatedItems[0]?.creationDate\\\" class=\\\"ui-grid-row\\\">\\r\\n                <div class=\\\"ui-grid-col-4\\\">Dodano:</div>\\r\\n                <div class=\\\"ui-grid-col-8\\\">{{selectedOrder?.relatedItems[0]?.creationDate}}</div>\\r\\n              </div>\\r\\n            </div>\\r\\n            <ng-template #noRelatedItem><strong style=\\\"color: darkorange;\\\">Nie przypisano...</strong></ng-template>\\r\\n          </p-fieldset>\\r\\n        </div>\\r\\n      </div>\\r\\n      <br>\\r\\n    </div>\\r\\n    <br>\\r\\n    <p-fieldset legend=\\\"Dodaj komentarz do zlecenia\\\">\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n        <div class=\\\"ui-grid-col-2\\\"><label for=\\\"newComment\\\">Dodaj komentarz</label></div>\\r\\n        <div class=\\\"ui-grid-col-10\\\">\\r\\n          <textarea [disabled]=\\\"false\\\" pInputTextarea id=\\\"newComment\\\" name=\\\"newComment\\\" [(ngModel)]=\\\"newComment\\\" [rows]=\\\"3\\\" [cols]=\\\"80\\\"  autoResize=\\\"autoResize\\\" placeholder=\\\"Wewnętrzny komentarz dotyczący zlecenia...\\\"></textarea>\\r\\n        </div>\\r\\n      </div>\\r\\n    </p-fieldset>\\r\\n    <p-footer>\\r\\n      <div class=\\\"ui-dialog-buttonpane ui-helper-clearfix\\\">\\r\\n        <button width=\\\"200px\\\" type=\\\"button\\\" pButton icon=\\\"fa fa-check\\\" (click)=\\\"saveComment()\\\" label=\\\"Zakończ\\\"></button>\\r\\n      </div>\\r\\n    </p-footer>\\r\\n  </p-dialog>\\r\\n  <!--end add comment-->\\r\\n\\r\\n</p-panel>\"","import { Component, OnInit, Input } from '@angular/core';\r\n\r\nimport { Observable } from 'rxjs';\r\n\r\n\r\nimport { User, RelatedItem, Order, OrderHistory, WorkType, CodeValue } from '../_models/index';\r\nimport { Comments, commentCancelOrHoldAsString, commentAdd } from '../_models/comment';\r\nimport { WOService, RelatedItemService, UserService, DictService, AlertService, WorkTypeService, AuthenticationService, ToolsService } from '../_services/index';\r\nimport { MenuItem } from 'primeng/primeng';\r\n\r\n@Component({\r\n    selector: 'app-wo-stopped-list',\r\n    templateUrl: './wo-stopped-list.component.html',\r\n    styleUrls: ['./wo-stopped-list.component.css']\r\n})\r\nexport class WoStoppedListComponent implements OnInit {\r\n\r\n\r\n    @Input()\r\n    orderStatus: string;\r\n\r\n    @Input()\r\n    allowRecover: boolean;\r\n\r\n    engineers:User[] = [];\r\n\r\n    items:MenuItem[] = [];\r\n    operator:User;\r\n\r\n    orders:Order[];\r\n    selectedOrder:Order;\r\n    displayDetailsDialog:boolean;\r\n\r\n    //add comment\r\n    newComment:string;\r\n    displayAddComment:boolean;\r\n    commentOrder:Order;\r\n    // end add comment\r\n\r\n\r\n    constructor(private woService:WOService,\r\n                private userService:UserService,\r\n                public dictService:DictService,\r\n                private authSerice:AuthenticationService,\r\n                private toolsService:ToolsService,\r\n                private alertService:AlertService) {\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.items = [\r\n            {label: 'Dodaj komentarz', icon: 'fa fa-pencil-square-o', command: (event) => this.addComment()}\r\n        ];\r\n\r\n        if (this.allowRecover) {\r\n            this.items.push({label: 'Przywróć/Wznów', icon: 'fa fa-check', disabled: true, command: (event) => this.recover()});\r\n        }\r\n\r\n        this.authSerice.userAsObs.subscribe(user => this.assignOperator(user));\r\n        this.dictService.init();\r\n        this.userService.getEngineers().subscribe(engineers => this.engineers = engineers);\r\n\r\n        this.search();\r\n    }\r\n\r\n    //add comment\r\n    private addComment():void {\r\n        this.displayAddComment = true;\r\n    }\r\n\r\n    saveComment():void {\r\n        if (this.newComment && this.newComment.length > 0) {\r\n            this.addCommentToOrder(this.selectedOrder, this.newComment);\r\n        }\r\n        this.displayAddComment = false;\r\n        this.newComment = null;\r\n    }\r\n\r\n    private addCommentToOrder(order:Order, newComment:string):void {\r\n        let reason:string = 'Anulowanie';\r\n        if (!order.comments) {\r\n            order.comments = new Comments(null);\r\n        }\r\n        commentAdd(order.comments, reason, this.operator, newComment);\r\n        this.woService.updateOrder(order).subscribe(order=>this.search());\r\n        this.alertService.info('Pomyślnie dodano komentarz do zlecenia: ' + order.workNo);\r\n        newComment = null;\r\n\r\n    }\r\n\r\n    //end add comment\r\n\r\n    private assignOperator(operator:User):void {\r\n        console.log('operator: ' + JSON.stringify(operator));\r\n        this.operator = operator;\r\n        if (operator && operator.roleCode && operator.roleCode.indexOf('OP') > -1) {\r\n            for (let item of this.items) {\r\n                item.disabled = false;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    search() {\r\n        this.woService.getOrdersByStatus(this.orderStatus).subscribe(orders => this.orders = orders);\r\n    }\r\n\r\n    public showWoDetails(event, order) {\r\n        this.selectedOrder = order;\r\n        this.onRowSelect(event);\r\n        this.displayDetailsDialog = true;\r\n    }\r\n\r\n    public getCancelOrHoldComment(order:Order):string {\r\n        if (order.comments) {\r\n\r\n            return commentCancelOrHoldAsString(order.comments);\r\n        } else {\r\n\r\n            return '';\r\n        }\r\n\r\n    }\r\n\r\n    onRowSelect(event) {\r\n        console.log(\"selected row!\" + JSON.stringify(this.selectedOrder));\r\n        this.selectedOrder.assigneeFull = this.toolsService.getEngineers(this.selectedOrder.assignee, this.engineers);\r\n    }\r\n\r\n    private recover():void {\r\n        this.woService.getOrderHistoryById(this.selectedOrder.id).subscribe(history => this.updateWithLastStatusAndRefresh(history));\r\n    }\r\n\r\n    private updateWithLastStatusAndRefresh(history:OrderHistory[]):void {\r\n\r\n        this.selectedOrder.statusCode = this.getLastStatusCode(history);\r\n        this.woService.updateOrder(this.selectedOrder).subscribe(order => this.removeOrder(order));\r\n    }\r\n\r\n    private getLastStatusCode(history:OrderHistory[]):string {\r\n        if (history && history.length > 0 && history[0].statusCode && history[0].statusCode != 'SU') {\r\n            return history[0].statusCode;\r\n        }\r\n        return 'OP';\r\n    }\r\n\r\n    private removeOrder(order:Order):void {\r\n        let newOrders:Order[] = [];\r\n        console.log(\"Removing id \" + order.id);\r\n        for (let order of this.orders) {\r\n            if (order.id != this.selectedOrder.id) {\r\n                newOrders.push(order);\r\n            }\r\n        }\r\n        this.orders = newOrders;\r\n    }\r\n\r\n}\r\n","module.exports = \"\"","module.exports = \"<app-wo-stopped-list [orderStatus]=\\\"'SU'\\\" [allowRecover]=\\\"true\\\"></app-wo-stopped-list>\"","import { Component, OnInit } from '@angular/core';\r\n\r\nimport { Observable } from 'rxjs';\r\n\r\n\r\nimport { User, RelatedItem, Order, OrderHistory, WorkType, CodeValue } from '../_models/index';\r\nimport { Comments, commentCancelOrHoldAsString, commentAdd } from '../_models/comment';\r\nimport { WOService, RelatedItemService, UserService, DictService, AlertService, WorkTypeService, AuthenticationService, ToolsService } from '../_services/index';\r\nimport { MenuItem } from 'primeng/primeng';\r\n\r\n\r\n@Component({\r\n    selector: 'app-wo-suspended',\r\n    templateUrl: './wo-suspended.component.html',\r\n    styleUrls: ['./wo-suspended.component.css']\r\n})\r\nexport class WoSuspendedComponent {\r\n\r\n}\r\n","module.exports = \".text-center {\\r\\n    text-align:center;\\r\\n    width :45px;\\r\\n}\\r\\n\\r\\n.text-center-55 {\\r\\n    text-align:center;\\r\\n    width :55px;\\r\\n}\\r\\n\\r\\n.width-35 {\\r\\n    width: 35px;\\r\\n}\\r\\n\\r\\n.width-70 {\\r\\n    width: 70px;\\r\\n}\\r\\n\\r\\n.width-100 {\\r\\n    width: 100px;\\r\\n}\\r\\n\\r\\n.width-135 {\\r\\n    width: 135px;\\r\\n}\\r\\n\\r\\n.width-125 {\\r\\n    width: 125px;\\r\\n}\\r\\n\\r\\ntd {\\r\\n    white-space: nowrap;\\r\\n    overflow: hidden;\\r\\n    text-overflow: ellipsis\\r\\n}\\r\\n\\r\\n.header {\\r\\n    white-space: nowrap;\\r\\n    overflow: hidden;\\r\\n    text-overflow: ellipsis\\r\\n}\"","module.exports = \"\\r\\n\\r\\n<p-panel header=\\\"Turbo Table z zleceniami WO\\\">\\r\\n\\r\\n  <div class=\\\"ui-grid-row\\\">\\r\\n    <div class=\\\"ui-grid-col-6\\\">\\r\\n      <p-fieldset legend=\\\"Wyszukiwanie zleceń\\\">\\r\\n        <form #f=\\\"ngForm\\\" (submit)=\\\"search()\\\">\\r\\n\\r\\n          <div class=\\\"ui-grid ui-grid-responsive ui-fluid ui-grid-pad\\\">\\r\\n            <div class=\\\"ui-grid-row\\\"  style=\\\"margin-top: 20px;\\\">\\r\\n              <div class=\\\"ui-grid-col-1\\\"></div>\\r\\n              <div class=\\\"ui-grid-col-5\\\">\\r\\n                <label for=\\\"lastModAfter\\\">zmodyfikowano od</label>\\r\\n                <p-calendar name=\\\"lastModAfter\\\" [locale]=\\\"pl\\\" [(ngModel)]=\\\"lastModAfter\\\" [showIcon]=\\\"true\\\" dateFormat=\\\"dd.mm.yy\\\" utc=\\\"true\\\"></p-calendar>\\r\\n              </div>\\r\\n              <!--<div class=\\\"ui-grid-col-1\\\"></div>-->\\r\\n              <div class=\\\"ui-grid-col-5\\\">\\r\\n                <label for=\\\"lastModBefore\\\">zmodyfikowano do</label>\\r\\n                <p-calendar name=\\\"lastModBefore\\\" [locale]=\\\"pl\\\" [(ngModel)]=\\\"lastModBefore\\\" [showIcon]=\\\"true\\\" dateFormat=\\\"dd.mm.yy\\\" utc=\\\"true\\\"></p-calendar>\\r\\n              </div>\\r\\n              <div class=\\\"ui-grid-col-1\\\"></div>\\r\\n            </div>\\r\\n            <div class=\\\"ui-grid-row\\\"  style=\\\"margin-top: 15px; margin-bottom: 65px;\\\">\\r\\n              <div class=\\\"ui-grid-col-4\\\"></div>\\r\\n              <div class=\\\"ui-grid-col-4\\\">\\r\\n                <button pButton type=\\\"button\\\" (click)=\\\"search()\\\" icon=\\\"fa fa-search\\\" label=\\\"Szukaj Tena\\\" style=\\\"margin-left: 0px; min-width: 140px;\\\" [disabled]=\\\"!f?.valid\\\"></button>\\r\\n              </div>\\r\\n              <div class=\\\"ui-grid-col-4\\\"></div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </form>\\r\\n      </p-fieldset>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"ui-grid-col-6\\\">\\r\\n      <app-status-details></app-status-details>     \\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n  <p-dialog [(visible)]=\\\"displayChangeStatusDialog\\\" header=\\\"Zlecenia do zmany statusu\\\" [minWidth]=\\\"800\\\" [width]=\\\"1200\\\" [responsive]=\\\"true\\\" [blockScroll]=\\\"true\\\">\\r\\n    <app-group-status-change [parent]=\\\"this\\\" [listToDisplay]=\\\"orders\\\" [operator]=\\\"operator\\\" [operatorMode]=\\\"true\\\" (closeModalEvent)=\\\"onClose($event)\\\"></app-group-status-change>\\r\\n  </p-dialog>\\r\\n  <div style=\\\"margin-top: 5px\\\" *ngIf=\\\"orders\\\" class=\\\"ui-g\\\">\\r\\n    <p-contextMenu #cm [model]=\\\"items\\\"></p-contextMenu>\\r\\n\\r\\n   \\r\\n  </div>\\r\\n\\r\\n  <p-dialog [(visible)]=\\\"displayDetailsDialog\\\" [header]=\\\"'Zamówienie '+selectedOrder?.workNo\\\" [minWidth]=\\\"600\\\" [responsive]=\\\"true\\\" [blockScroll]=\\\"true\\\" [contentStyle]=\\\"{'height': '800px'}\\\">\\r\\n    <app-wo-details [selectedOrder]=\\\"selectedOrder\\\"></app-wo-details>\\r\\n  </p-dialog>\\r\\n\\r\\n\\r\\n  <p-dialog [header]=\\\"newOrder? 'Nowe zlecenie' : 'Modyfikacja zlecenia'\\\" [(visible)]=\\\"displayEditDialog\\\" [responsive]=\\\"true\\\" [minWidth]=\\\"800\\\">\\r\\n    <div class=\\\"ui-grid ui-grid-responsive ui-fluid\\\" *ngIf=\\\"editedOrder\\\">\\r\\n\\r\\n      <form #f=\\\"ngForm\\\">\\r\\n        <!--(keydown.enter)=\\\"saveOrders()\\\"-->\\r\\n\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n        <div class=\\\"ui-grid-col-2\\\"><label for=\\\"ventureRepresentative\\\">Zleceniodawca</label></div>\\r\\n        <div class=\\\"ui-grid-col-10\\\">\\r\\n          <p-autoComplete [forceSelection]=\\\"true\\\" [showTransitionOptions]=\\\"'0ms'\\\" [hideTransitionOptions]=\\\"'0ms'\\\" id=\\\"ventureRepresentative\\\" name=\\\"ventureRepresentative\\\" [(ngModel)]=\\\"assignedVentureRepresentative\\\" [suggestions]=\\\"suggestedVentureRepresentatives\\\" (completeMethod)=\\\"suggestVentureRepresentative($event)\\\" [dropdown]=\\\"true\\\" field=\\\"displayName\\\" pTooltip=\\\"Od lokalizacji wybranego zleceniodawcy zależeć będzie logika nadawania numerów zleceń\\\" tooltipPosition=\\\"top\\\"></p-autoComplete>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div *ngIf=\\\"!assignedVentureRepresentative\\\" class=\\\"ui-grid-row\\\" style=\\\"margin-top: 0px;\\\" >\\r\\n        <div class=\\\"ui-grid-col-2\\\"></div>\\r\\n        <div class=\\\"ui-grid-col-10\\\">\\r\\n          <p-message severity=\\\"warn\\\" text=\\\"Przypisanie zleceniodawcy jest wymagane!\\\"></p-message>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <hr>\\r\\n\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px; \\\" *ngIf=\\\"newOrder && assignedVentureRepresentative && assignedVentureRepresentative?.user?.officeCode !== 'WAW'\\\">\\r\\n        <div class=\\\"ui-grid-col-2\\\"><label for=\\\"generategroup\\\">Generuj numer zlecenia</label></div>\\r\\n        <div class=\\\"form-group ui-grid-col-10\\\">\\r\\n          <p-radioButton name=\\\"generategroup\\\" value=\\\"Y\\\" [(ngModel)]=\\\"generateWorkNoFlag\\\" label=\\\"TAK\\\"></p-radioButton>\\r\\n          <p-radioButton name=\\\"generategroup\\\" value=\\\"N\\\" [(ngModel)]=\\\"generateWorkNoFlag\\\" label=\\\"NIE\\\"></p-radioButton>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px; \\\" *ngIf=\\\"!newOrder || assignedVentureRepresentative?.user?.officeCode === 'WAW' || generateWorkNoFlag === 'N'\\\">\\r\\n        <div class=\\\"ui-grid-col-2\\\"><label for=\\\"workNo\\\">Numer zlecenia*</label></div>\\r\\n        <div class=\\\"ui-grid-col-10 ui-fluid\\\"><input pInputText [disabled]=\\\"!assignedVentureRepresentative\\\" id=\\\"workNo\\\" name=\\\"workNo\\\" [(ngModel)]=\\\"editedOrder.workNo\\\" width=\\\"auto\\\" [required]=\\\"true\\\" minlength=\\\"2\\\" [pTooltip]=\\\"'Uzupełnij jeśli posiadasz numer zlecenia w innym przypadku pozostaw wartość '+this.toolsService.NO_WO\\\" tooltipPosition=\\\"top\\\"/></div>\\r\\n      </div>\\r\\n\\r\\n      <div *ngIf=\\\"assignedVentureRepresentative?.user?.officeCode === 'KAT'\\\" class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n        <div class=\\\"ui-grid-col-2\\\"><label for=\\\"mdCapex\\\">Capex</label></div>\\r\\n        <div class=\\\"ui-grid-col-10\\\"><input [disabled]=\\\"!assignedVentureRepresentative\\\" pInputText id=\\\"mdCapex\\\" name=\\\"mdCapex\\\" [(ngModel)]=\\\"editedOrder.mdCapex\\\" [pTooltip]=\\\"'Uzupełnij jeśli posiadzasz numer CAPEX w innym przypadku pozostaw wartość '+this.toolsService.NO_CAPEX\\\"/></div>\\r\\n      </div>\\r\\n\\r\\n        <div *ngIf=\\\"newOrder && assignedVentureRepresentative?.user?.office\\\" class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\" >\\r\\n          <div class=\\\"ui-grid-col-9\\\"></div>\\r\\n          <div class=\\\"ui-grid-col-3\\\">\\r\\n            <p-message severity=\\\"info\\\" [text]=\\\"'Cennik - '+assignedVentureRepresentative.user.office\\\"></p-message>\\r\\n          </div>\\r\\n        </div> \\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 2px;\\\">\\r\\n        <div class=\\\"ui-grid-col-2\\\"><label for=\\\"orderType\\\">Typ zlecenia*</label></div>\\r\\n        <div class=\\\"ui-grid-col-5\\\">\\r\\n            <p-autoComplete [forceSelection]=\\\"true\\\" [disabled]=\\\"!assignedVentureRepresentative\\\" [showTransitionOptions]=\\\"'0ms'\\\" [hideTransitionOptions]=\\\"'0ms'\\\" id=\\\"orderType\\\" name=\\\"orderType\\\" [(ngModel)]=\\\"workType\\\" [suggestions]=\\\"suggestedTypes\\\" (completeMethod)=\\\"suggestType($event)\\\" (onSelect)=\\\"fillPrice($event, -1)\\\" [dropdown]=\\\"true\\\" field=\\\"paramChar\\\" required placeholder=\\\"Wybierz typ zlecenia...\\\">\\r\\n              <ng-template let-orderType pTemplate=\\\"item\\\">\\r\\n                <div class=\\\"ui-helper-clearfix\\\">\\r\\n                  <span [style.color]=\\\"toolsService.getOrderColor(orderType.code)\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-square'\\\"></i></span>\\r\\n                  <span style=\\\"padding: 3px\\\">{{orderType.paramChar}}</span>\\r\\n                </div>\\r\\n              </ng-template>\\r\\n            </p-autoComplete>\\r\\n        </div>\\r\\n\\r\\n          <div class=\\\"ui-grid-col-2\\\" *ngIf=\\\"operator.roleCode.indexOf('PR') != -1 || editedOrder?.typeCode != 'OT'\\\" style=\\\"margin-left: 15px;\\\"><label for=\\\"price\\\">Wartość zlecenia</label></div>\\r\\n          <div class=\\\"ui-grid-col-3\\\" *ngIf=\\\"operator.roleCode.indexOf('PR') != -1 || editedOrder?.typeCode != 'OT'\\\">\\r\\n            <p-autoComplete [disabled]=\\\"!assignedVentureRepresentative\\\" [showTransitionOptions]=\\\"'0ms'\\\" [hideTransitionOptions]=\\\"'0ms'\\\" id=\\\"price\\\" name=\\\"price\\\" [(ngModel)]=\\\"price\\\" [suggestions]=\\\"suggestedPrice\\\" (completeMethod)=\\\"suggestPrice($event, workType)\\\" [dropdown]=\\\"true\\\" field=\\\"paramChar\\\" [forceSelection]=\\\"false\\\" pTooltip=\\\"Można zmienić cenę (podaj liczbę)\\\" tooltipPosition=\\\"top\\\"></p-autoComplete>\\r\\n          </div>\\r\\n      </div>\\r\\n\\r\\n\\r\\n      <div *ngIf=\\\"newOrder && workType?.code\\\">\\r\\n\\r\\n          <div *ngFor=\\\"let addWorkType of additionalWorkTypes; let i = index\\\">\\r\\n              <div class=\\\"ui-grid-row\\\" *ngIf=\\\"i===0 || additionalWorkTypes[i-1]?.code\\\" style=\\\"margin-top: 5px;\\\">\\r\\n                  <div class=\\\"ui-grid-col-2\\\"><label for=\\\"additionalOrderType\\\">Dod. {{i+2}} Zl.*</label></div>\\r\\n                  <div class=\\\"ui-grid-col-5\\\">\\r\\n                      <p-autoComplete [forceSelection]=\\\"true\\\" [showTransitionOptions]=\\\"'0ms'\\\" [hideTransitionOptions]=\\\"'0ms'\\\" [id]=\\\"'additionalWorkTypes'+i\\\" [name]=\\\"'additionalWorkTypes'+i\\\" [disabled]=\\\"!assignedVentureRepresentative\\\" [(ngModel)]=\\\"additionalWorkTypes[i]\\\" [suggestions]=\\\"suggestedTypes\\\" (completeMethod)=\\\"suggestType($event)\\\" (onSelect)=\\\"fillPrice($event, i)\\\" [dropdown]=\\\"true\\\" field=\\\"paramChar\\\" required [placeholder]=\\\"'Wybierz '+(i+2)+' dodatkowy typ zlecenia...'\\\">\\r\\n                        <ng-template let-orderType pTemplate=\\\"item\\\">\\r\\n                          <div class=\\\"ui-helper-clearfix\\\">\\r\\n                            <span [style.color]=\\\"toolsService.getOrderColor(orderType.code)\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-square'\\\"></i></span>\\r\\n                            <span style=\\\"padding: 3px\\\">{{orderType.paramChar}}</span>\\r\\n                          </div>\\r\\n                        </ng-template>\\r\\n                      </p-autoComplete>\\r\\n                  </div>\\r\\n\\r\\n                  <div class=\\\"ui-grid-col-2\\\" *ngIf=\\\"operator.roleCode.indexOf('PR') != -1 || editedOrder?.typeCode != 'OT'\\\" style=\\\"margin-left: 15px;\\\"><label for=\\\"additionalPrices\\\">Wartość zlecenia</label></div>\\r\\n                  <div class=\\\"ui-grid-col-3\\\" *ngIf=\\\"operator.roleCode.indexOf('PR') != -1 || editedOrder?.typeCode != 'OT'\\\">\\r\\n                      <p-autoComplete [disabled]=\\\"!assignedVentureRepresentative\\\" [showTransitionOptions]=\\\"'0ms'\\\" [hideTransitionOptions]=\\\"'0ms'\\\" [id]=\\\"'price'+i\\\" [name]=\\\"'price'+i\\\" [(ngModel)]=\\\"additionalPrices[i]\\\" [suggestions]=\\\"suggestedPrice\\\" (completeMethod)=\\\"suggestPrice($event, additionalWorkTypes[i])\\\" [dropdown]=\\\"true\\\" field=\\\"paramChar\\\" [forceSelection]=\\\"false\\\" pTooltip=\\\"Można zmienić cenę (podaj liczbę)\\\" tooltipPosition=\\\"top\\\"></p-autoComplete>\\r\\n                  </div>\\r\\n              </div>\\r\\n          </div>\\r\\n\\r\\n      </div>\\r\\n\\r\\n        \\r\\n      <div class=\\\"ui-grid-row\\\" *ngIf=\\\"newOrder == false\\\" style=\\\"margin-top: 10px;\\\"><!-- editing status is not allowed for new orders-->\\r\\n            <div class=\\\"ui-grid-col-2\\\"><label for=\\\"status\\\">Status</label></div>\\r\\n            <div class=\\\"ui-grid-col-10\\\">\\r\\n                <p-autoComplete [forceSelection]=\\\"true\\\" [disabled]=\\\"!assignedVentureRepresentative\\\" id=\\\"status\\\" name=\\\"status\\\" [(ngModel)]=\\\"status\\\" [suggestions]=\\\"suggestedStatuses\\\" (completeMethod)=\\\"suggestStatus($event)\\\" [dropdown]=\\\"true\\\" field=\\\"paramChar\\\"></p-autoComplete>\\r\\n            </div>\\r\\n      </div>\\r\\n\\r\\n        <div *ngIf=\\\"comment\\\" class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n          <div class=\\\"ui-grid-col-2\\\"><label for=\\\"comment\\\">Poprzednie komentarze</label></div>\\r\\n          <div class=\\\"ui-grid-col-10\\\">\\r\\n            <!--<input pInputText id=\\\"comment\\\" [(ngModel)]=\\\"editedOrder.comment\\\" />-->\\r\\n            <textarea readonly=\\\"readonly\\\" pInputTextarea id=\\\"comment\\\" name=\\\"comment\\\" [(ngModel)]=\\\"comment\\\" [rows]=\\\"2\\\" [cols]=\\\"30\\\" placeholder=\\\"Dotychczasowe komentarze dotyczące zlecenia...\\\"></textarea>\\r\\n          </div>\\r\\n        </div>\\r\\n          <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n            <div class=\\\"ui-grid-col-2\\\"><label for=\\\"newComment\\\">Dodaj komentarz</label></div>\\r\\n            <div class=\\\"ui-grid-col-10\\\">\\r\\n              <!--<input pInputText id=\\\"comment\\\" [(ngModel)]=\\\"editedOrder.comment\\\" />-->\\r\\n                <textarea [disabled]=\\\"!assignedVentureRepresentative\\\" pInputTextarea id=\\\"newComment\\\" name=\\\"newComment\\\" [(ngModel)]=\\\"newComment\\\" [rows]=\\\"2\\\" [cols]=\\\"30\\\" placeholder=\\\"Wewnętrzny komentarz dotyczący zlecenia...\\\"></textarea>\\r\\n\\r\\n              <!--<textarea *ngIf=\\\"status.code === 'SU' || status.code === 'CA'\\\" required [disabled]=\\\"!assignedVentureRepresentative\\\" pInputTextarea id=\\\"newComment\\\" name=\\\"newComment\\\" [(ngModel)]=\\\"newComment\\\" [rows]=\\\"2\\\" [cols]=\\\"30\\\"  autoResize=\\\"autoResize\\\" placeholder=\\\"Wewnętrzny komentarz dotyczący WO...\\\"></textarea>\\r\\n                <textarea *ngIf=\\\"status.code !== 'SU' && status.code !== 'CA'\\\" [disabled]=\\\"!assignedVentureRepresentative\\\" pInputTextarea id=\\\"newComment\\\" name=\\\"newComment\\\" [(ngModel)]=\\\"newComment\\\" [rows]=\\\"2\\\" [cols]=\\\"30\\\"  autoResize=\\\"autoResize\\\" placeholder=\\\"Wewnętrzny komentarz dotyczący WO...\\\"></textarea>-->\\r\\n            </div>\\r\\n          </div>\\r\\n          <div *ngIf=\\\"!newComment && (status?.code === 'SU' || status?.code === 'CA')\\\" class=\\\"ui-grid-row\\\" style=\\\"margin-top: 0px;\\\" >\\r\\n            <div class=\\\"ui-grid-col-2\\\"></div>\\r\\n            <div class=\\\"ui-grid-col-10\\\">\\r\\n              <p-message severity=\\\"warn\\\" text=\\\"Dodaj powód anulujowania/wstrzymania zlecenia!\\\"></p-message>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n        <div class=\\\"ui-grid-col-2\\\"><label for=\\\"description\\\">Opis</label></div>\\r\\n        <div class=\\\"ui-grid-col-10\\\">\\r\\n          <!--<input pInputText id=\\\"description\\\" [(ngModel)]=\\\"editedOrder.description\\\" />-->\\r\\n          <textarea [disabled]=\\\"!assignedVentureRepresentative\\\" pInputTextarea id=\\\"description\\\" name=\\\"description\\\" [(ngModel)]=\\\"editedOrder.description\\\"  placeholder=\\\"Opis dotyczący zlecenia...\\\" [rows]=\\\"2\\\" [cols]=\\\"30\\\"></textarea>\\r\\n        </div>\\r\\n      </div>\\r\\n      <!--Assign engener -->\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 20px;\\\">\\r\\n        <div class=\\\"ui-grid-col-2\\\"><label for=\\\"assignEngineer\\\">Wykonawca</label></div>\\r\\n        <div class=\\\"ui-grid-col-10\\\">\\r\\n          <p-autoComplete id=\\\"assignEngineer\\\" \\r\\n          [(ngModel)]=\\\"assignedEngineer\\\" \\r\\n          [suggestions]=\\\"suggestedEngineers\\\" \\r\\n          (completeMethod)=\\\"suggestEngineer($event)\\\" \\r\\n          [dropdown]=\\\"true\\\" \\r\\n          field=\\\"displayName\\\" \\r\\n          [forceSelection]=\\\"true\\\"\\r\\n          [ngModelOptions]=\\\"{standalone: true}\\\">\\r\\n          \\r\\n        </p-autoComplete>\\r\\n        </div>\\r\\n    </div>\\r\\n      <hr>\\r\\n      <!-- related item -->\\r\\n\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n        <div class=\\\"ui-grid-col-2\\\"><label for=\\\"itemNo\\\">Numer obiektu</label></div>\\r\\n        <div class=\\\"ui-grid-col-10\\\">\\r\\n              <p-autoComplete placeholder=\\\"Numer obiektu np. stacji/kandydata\\\" id=\\\"itemNo\\\" name=\\\"itemNo\\\" [(ngModel)]=\\\"relatedItem\\\" [suggestions]=\\\"suggestedRelatedItems\\\" (onBlur)=\\\"updateRelatedItem($event.target.value)\\\" (onKeyUp)=\\\"updateRelatedItem($event.target.value)\\\" (onFocus)=\\\"copyRelatedItem($event.target.value)\\\" (completeMethod)=\\\"suggestRelatedItem($event)\\\" [dropdown]=\\\"true\\\" field=\\\"itemNo\\\" [forceSelection]=\\\"false\\\" pTooltip=\\\"Uzupełnij nowy obiekt lub wybierz istniejący z listy. Obiekt wybrany z listy można zmodyfikowac/uzupełnić, co bedzie miało wpływ na inne zlecenia powiązane z tym obiektem, ale po wybraniu z listy nie można już definiować nowego. Możesz też przypisać lub zmienić później tj. po utworzeniu WO.\\\" tooltipPosition=\\\"top\\\"></p-autoComplete>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div *ngIf=\\\"relatedItem?.id && isRelatedItemChanged(relatedItem)\\\" class=\\\"ui-grid-row\\\" style=\\\"margin-top: 0px;\\\" >\\r\\n        <div class=\\\"ui-grid-col-2\\\"></div>\\r\\n        <div class=\\\"ui-grid-col-10\\\">\\r\\n          <p-message severity=\\\"warn\\\" text=\\\"Modyfikacja istniejącego obiektu\\\"></p-message>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div *ngIf=\\\"relatedItem?.itemNo !== undefined && relatedItem?.id === undefined\\\" class=\\\"ui-grid-row\\\" style=\\\"margin-top: 0px;\\\" >\\r\\n        <div class=\\\"ui-grid-col-2\\\"></div>\\r\\n        <div class=\\\"ui-grid-col-10\\\">\\r\\n          <p-message severity=\\\"info\\\" text=\\\"Dodawanie nowego obiektu\\\"></p-message>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n        <div class=\\\"ui-grid-col-2\\\"><label for=\\\"itemAddress\\\">Adres</label></div>\\r\\n        <div class=\\\"ui-grid-col-10\\\"><input pInputText name=\\\"itemAddress\\\" id=\\\"itemAddress\\\" [(ngModel)]=\\\"relatedItem.address\\\" placeholder=\\\"Adres objektu inwestycji\\\"/></div>\\r\\n      </div>\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n        <div class=\\\"ui-grid-col-2\\\"><label for=\\\"itemBuildingType\\\">Typ budynku</label></div>\\r\\n        <div class=\\\"ui-grid-col-10\\\"><input pInputText name=\\\"itemBuildingType\\\" id=\\\"itemBuildingType\\\" [(ngModel)]=\\\"relatedItem.mdBuildingType\\\" placeholder=\\\"Typ budynku...\\\"/></div>\\r\\n      </div>\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n        <div class=\\\"ui-grid-col-2\\\"><label for=\\\"itemConstructionCategory\\\">Konstrukcja</label></div>\\r\\n        <div class=\\\"ui-grid-col-10\\\"><input pInputText name=\\\"itemConstructionCategory\\\" id=\\\"itemConstructionCategory\\\" [(ngModel)]=\\\"relatedItem.mdConstructionCategory\\\" placeholder=\\\"Typ konstrukcji...\\\" /></div>\\r\\n      </div>\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n        <div class=\\\"ui-grid-col-2\\\"><label for=\\\"itemDescription\\\">Opis obiektu</label></div>\\r\\n        <div class=\\\"ui-grid-col-10\\\">\\r\\n          <textarea pInputTextarea name=\\\"itemDescription\\\" id=\\\"itemDescription\\\" [(ngModel)]=\\\"relatedItem.description\\\" [rows]=\\\"2\\\" [cols]=\\\"30\\\" placeholder=\\\"Opis objektu inwestycji...\\\"></textarea>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div *ngIf=\\\"relatedItem?.creationDate\\\" class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n        <div class=\\\"ui-grid-col-2\\\"><label for=\\\"itemCreationDate\\\">Data utworzenia</label></div>\\r\\n        <div class=\\\"ui-grid-col-10\\\">\\r\\n          <input pInputText name=\\\"itemCreationDate\\\"  id=\\\"itemCreationDate\\\" disabled=\\\"true\\\" [(ngModel)]=\\\"relatedItem.creationDate\\\"/>\\r\\n        </div>\\r\\n      </div>\\r\\n      </form>\\r\\n    </div>\\r\\n    <p-footer>\\r\\n      <div class=\\\"ui-dialog-buttonpane ui-helper-clearfix\\\">\\r\\n        <button type=\\\"submit\\\" [disabled]=\\\"!canSaveOrders()\\\" width=\\\"200px\\\" type=\\\"button\\\" pButton icon=\\\"fa fa-check\\\" (click)=\\\"saveOrders()\\\" label=\\\"Zapisz\\\"></button>\\r\\n      </div>\\r\\n    </p-footer>\\r\\n\\r\\n\\r\\n\\r\\n  </p-dialog>\\r\\n\\r\\n\\r\\n  <p-dialog [header]=\\\"isNewOrderOwner ? 'Przypisywanie/przepisywanie zlecenia': 'Dopisywanie do zlecenia'\\\" [(visible)]=\\\"displayAssignDialog\\\" [responsive]=\\\"true\\\" [minWidth]=\\\"400\\\">\\r\\n    <div class=\\\"ui-grid ui-grid-responsive ui-fluid\\\" *ngIf=\\\"editedOrder\\\">\\r\\n        <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 20px;\\\">\\r\\n            <div class=\\\"ui-grid-col-4\\\"><label for=\\\"person\\\">Osoba</label></div>\\r\\n            <div class=\\\"ui-grid-col-8\\\">\\r\\n              <p-autoComplete id=\\\"person\\\" [(ngModel)]=\\\"assignedEngineer\\\" [suggestions]=\\\"suggestedEngineers\\\" (completeMethod)=\\\"suggestEngineer($event)\\\" [dropdown]=\\\"true\\\" field=\\\"displayName\\\" [forceSelection]=\\\"true\\\"></p-autoComplete>\\r\\n            </div>\\r\\n        </div>\\r\\n        <div *ngIf=\\\"isNewOrderOwner && selectedOrder?.assignee !== undefined\\\" class=\\\"ui-grid-row\\\" style=\\\"margin-top: 0px;\\\" >\\r\\n          <div class=\\\"ui-grid-col-4\\\"></div>\\r\\n          <div class=\\\"ui-grid-col-8\\\">\\r\\n            <p-message severity=\\\"warn\\\" text=\\\"Zmiana właściciela zlecenia...\\\"></p-message>\\r\\n          </div>\\r\\n        </div>\\r\\n\\r\\n        <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 20px;\\\" *ngIf=\\\"editedOrder?.officeCode === 'KAT'\\\">\\r\\n            <div class=\\\"ui-grid-col-4\\\"><label for=\\\"mdCapex\\\">Numer CAPEX</label></div>\\r\\n            <div class=\\\"ui-grid-col-8\\\"><input pInputText id=\\\"mdCapex\\\" [(ngModel)]=\\\"editedOrder.mdCapex\\\" disabled=\\\"true\\\"/></div>\\r\\n        </div>\\r\\n        <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 20px;\\\">\\r\\n            <div class=\\\"ui-grid-col-4\\\"><label for=\\\"workNo\\\">Numer Zl.</label></div>\\r\\n            <div class=\\\"ui-grid-col-8\\\"><input pInputText id=\\\"workNo\\\" [(ngModel)]=\\\"editedOrder.workNo\\\" disabled=\\\"true\\\"/></div>\\r\\n        </div>\\r\\n        <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 20px;\\\">\\r\\n            <div class=\\\"ui-grid-col-4\\\"><label for=\\\"type\\\">Typ Zl.</label></div>\\r\\n            <div class=\\\"ui-grid-col-8\\\"><input pInputText id=\\\"type\\\" [(ngModel)]=\\\"editedOrder.type\\\" disabled=\\\"true\\\"/></div>\\r\\n        </div>\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 20px;\\\">\\r\\n        <div class=\\\"ui-grid-col-4\\\"><label for=\\\"status\\\">Status</label></div>\\r\\n        <div class=\\\"ui-grid-col-8\\\">\\r\\n          <div class=\\\"ui-grid-col-8\\\"><input pInputText id=\\\"status\\\" [(ngModel)]=\\\"editedOrder.status\\\" disabled=\\\"true\\\"/></div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <p-footer>\\r\\n      <div class=\\\"ui-dialog-buttonpane ui-helper-clearfix\\\">\\r\\n        <button width=\\\"200px\\\" type=\\\"button\\\" pButton [icon]=\\\"isNewOrderOwner ? 'fa fa-user': 'fa fa-share'\\\" (click)=\\\"saveAssignment()\\\" [label]=\\\"isNewOrderOwner ? 'Przypisz': 'Dopisz'\\\"></button>\\r\\n      </div>\\r\\n    </p-footer>\\r\\n  </p-dialog>\\r\\n\\r\\n  <p-table #tt dataKey=\\\"id\\\" [columns]=\\\"cols\\\" [value]=\\\"orders\\\" [rows]=\\\"20\\\" [paginator]=\\\"true\\\" [resizableColumns]=\\\"true\\\" sortOrder=\\\"-1\\\" selectionMode=\\\"single\\\" [(selection)]=\\\"selectedOrder\\\" (onRowSelect)=\\\"onRowSelect($event)\\\" \\r\\n     [loading]=\\\"loading\\\" loadingIcon=\\\"fa fa-spinner\\\" [contextMenu]=\\\"cm\\\" csvSeparator=\\\";\\\"  exportFilename=\\\"Turbo Zlecenia\\\">\\r\\n    <ng-template pTemplate=\\\"caption\\\">\\r\\n        <div>\\r\\n            <i class=\\\"fa fa-search\\\"></i>\\r\\n            <input type=\\\"text\\\" pInputText size=\\\"50\\\" placeholder=\\\"Filtruj\\\" (input)=\\\"tt.filterGlobal($event.target.value, 'contains')\\\" style=\\\"width:auto\\\">\\r\\n            <button [disabled]=\\\"operator.roleCode.indexOf('OP') == -1\\\" type=\\\"button\\\" pButton icon=\\\"fa fa-plus\\\" style=\\\"float:left\\\" (click)=\\\"add()\\\" label=\\\"Dodaj\\\"></button>\\r\\n          </div>\\r\\n    </ng-template>\\r\\n    <ng-template pTemplate=\\\"header\\\">\\r\\n        <tr>\\r\\n          <th *ngFor=\\\"let col of cols\\\"\\r\\n          [hidden]=\\\"col.hidden\\\"\\r\\n          [pSortableColumn]=\\\"col.field\\\"\\r\\n          [ngClass]=\\\"col.class\\\"\\r\\n          pResizableColumn\\r\\n          >\\r\\n          <span class=\\\"header\\\">\\r\\n              {{col.header}}\\r\\n              <p-sortIcon *ngIf=\\\"!col.button\\\" [field]=\\\"col.field\\\"></p-sortIcon>\\r\\n          </span>\\r\\n          \\r\\n          </th>\\r\\n        </tr>\\r\\n        <tr>\\r\\n          <th *ngFor=\\\"let col of cols\\\"  [hidden]=\\\"col.hidden\\\" >\\r\\n            <input [attr.placeholder]=\\\"col.header === 'Pula' ? 'Y/N' : 'Filtruj'\\\" pInputText type=\\\"text\\\" (input)=\\\"tt.filter($event.target.value, col.field, col.filterMatchMode)\\\" *ngIf=\\\"col.filter\\\">            \\r\\n          </th>\\r\\n        </tr>\\r\\n    </ng-template>\\r\\n    <ng-template pTemplate=\\\"body\\\" let-rowData let-order>\\r\\n        <tr [pSelectableRow]=\\\"rowData\\\" (dblclick)=\\\"onRowDblclick($event)\\\">\\r\\n            <td *ngFor=\\\"let col of cols\\\"\\r\\n            [hidden]=\\\"col.hidden\\\"\\r\\n            filterMatchMode=\\\"col.contains\\\"\\r\\n            [ngClass]=\\\"col.class\\\"\\r\\n            [pSelectableRowDblClick]=\\\"rowData\\\"\\r\\n            >           \\r\\n              <i *ngIf=\\\"col.statusCode\\\" [class]=\\\"toolsService.getStatusIcon(order.statusCode)\\\"></i>\\r\\n              <span *ngIf=\\\"col.type\\\" [style.color]=\\\"toolsService.getOrderColor(order.typeCode)\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-square'\\\"></i> </span>\\r\\n              <span *ngIf=\\\"col.complexity\\\"  class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"order[col.field]=='STD' ? 'fa fa-thumbs-o-up': 'fa fa-life-bouy'\\\"></i></span>\\r\\n              <span *ngIf=\\\"col.isFromPool\\\">\\r\\n                <span *ngIf=\\\"order[col.field]=='Y'\\\" [style.color]=\\\"'green'\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-users'\\\"></i></span>\\r\\n                <span *ngIf=\\\"order[col.field]!='Y'\\\" [style.color]=\\\"'grey'\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-street-view'\\\"></i></span>\\r\\n              </span>\\r\\n              <p-button *ngIf=\\\"col.button\\\" type=\\\"button\\\" style=\\\"width:25px\\\"  (click)=\\\"showWoDetails($event, order)\\\" icon=\\\"fa fa-search\\\"></p-button>\\r\\n              <span *ngIf=\\\"!col.icon\\\">\\r\\n                {{order[col.field]}}\\r\\n              </span>            \\r\\n        </td>\\r\\n        </tr>\\r\\n    </ng-template>\\r\\n    <ng-template pTemplate=\\\"summary\\\">\\r\\n      <div class=\\\"ui-grid ui-grid-responsive ui-fluid ui-grid-pad\\\">\\r\\n        <div class=\\\"ui-grid-row\\\"  style=\\\"margin-top: 15px;\\\">\\r\\n          <div class=\\\"ui-grid-col-1\\\"></div>\\r\\n          <div class=\\\"ui-grid-col-2\\\">\\r\\n            <button [disabled]=\\\"operator.roleCode.indexOf('OP') == -1\\\" type=\\\"button\\\" pButton icon=\\\"fa fa-plus\\\" style=\\\"float:left\\\" (click)=\\\"add()\\\" label=\\\"Dodaj\\\"></button>\\r\\n          </div>\\r\\n\\r\\n          <div class=\\\"ui-grid-col-2\\\">  </div>\\r\\n          <div class=\\\"ui-grid-col-2\\\"> </div>\\r\\n          <div class=\\\"ui-grid-col-1\\\"> </div>\\r\\n\\r\\n          <div class=\\\"ui-grid-col-2\\\">\\r\\n            <button type=\\\"button\\\" [disabled]=\\\"operator.roleCode.indexOf('OP') == -1\\\" pButton icon=\\\"fa fa-file-o\\\" iconPos=\\\"left\\\" label=\\\"CSV\\\" (click)=\\\"tt.exportCSV()\\\"></button>\\r\\n          </div>\\r\\n          <div class=\\\"ui-grid-col-2\\\"><button type=\\\"button\\\" pButton (click)=\\\"showChangeStatusDialog()\\\" label=\\\"Zmiana statusów\\\" icon=\\\"fa fa-list\\\" iconPos=\\\"left\\\" [disabled]=\\\"operator.roleCode.indexOf('OP') == -1\\\"></button>  </div>\\r\\n        </div>\\r\\n      </div>\\r\\n  </ng-template>\\r\\n</p-table>\\r\\n\\r\\n</p-panel>\"","import { Component, OnInit } from '@angular/core';\r\nimport { CurrencyPipe } from '@angular/common';\r\nimport { Observable } from 'rxjs';\r\nimport { catchError, map, tap, delay, mergeMap } from 'rxjs/operators';\r\n\r\n\r\nimport { User, RelatedItem, Order, WorkType, CodeValue, SearchUser } from '../_models/index';\r\nimport { Comments, commentAsSimpleString, commentAsString, commentAdd } from '../_models/comment';\r\nimport { WOService, RelatedItemService, UserService, DictService, AlertService, WorkTypeService, AuthenticationService, ToolsService } from '../_services/index';\r\n\r\nimport { MenuItem } from 'primeng/primeng';\r\nimport { Calendar } from '../_models/calendar';\r\n\r\n@Component({\r\n  selector: 'app-wo-turbo-table',\r\n  templateUrl: './wo-turbo-table.component.html',\r\n  styleUrls: ['./wo-turbo-table.component.css']\r\n})\r\nexport class WoTurboTableComponent implements OnInit {\r\n\r\n   /* search and selection */\r\n   lastModAfter:Date;\r\n   lastModBefore:Date;\r\n   orders:Order[];\r\n   selectedOrder:Order;\r\n\r\n   /*  */\r\n   editedOrder:Order;\r\n   newOrder:boolean;\r\n   isNewOrderOwner:boolean;\r\n   generateWorkNoFlag: string;\r\n   displayEditDialog:boolean;\r\n   displayAssignDialog:boolean;\r\n   displayDetailsDialog: boolean;\r\n   items:MenuItem[] = [];\r\n\r\n   /* autocompletion assignedEngineer */\r\n   engineers:User[] = [];\r\n   suggestedEngineers:SearchUser[];\r\n   assignedEngineer:SearchUser;\r\n\r\n   /* autocompletion ventureRepresentatives */\r\n   ventureRepresentatives:User[] = [];\r\n   suggestedVentureRepresentatives:SearchUser[];\r\n   assignedVentureRepresentative:SearchUser;\r\n\r\n   /* autocompletion workType */\r\n   workTypes:CodeValue[] = [];\r\n   suggestedTypes:CodeValue[];\r\n   workType:CodeValue;\r\n   additionalWorkTypes:CodeValue[];\r\n   //this is related with addtionalPrice!\r\n\r\n   /* autocompletion statuses */\r\n   statuses:CodeValue[] = [];\r\n   suggestedStatuses:CodeValue[];\r\n   status:CodeValue;\r\n\r\n   /* autocompletion relatedItem */\r\n   relatedItems:RelatedItem[];\r\n   suggestedRelatedItems:RelatedItem[];\r\n   relatedItem:RelatedItem;\r\n   relatedItemCopy:RelatedItem;\r\n\r\n   /* autocompletion prize */\r\n   workTypesDetails:WorkType[];\r\n   suggestedPrice:CodeValue[];\r\n   price:CodeValue;\r\n   additionalPrices:CodeValue[];\r\n\r\n   comment; string;\r\n   newComment: string;\r\n\r\n   operator:User;\r\n   pl:Calendar;\r\n   displayChangeStatusDialog:boolean;\r\n\r\n   cols:any[] ;\r\n   \r\n   constructor(private woService:WOService,\r\n               private userService:UserService,\r\n               private itemService:RelatedItemService,\r\n               private workTypeService:WorkTypeService,\r\n               private dictService:DictService,\r\n               private alertService:AlertService,\r\n               private authSerice:AuthenticationService,\r\n               private toolsService: ToolsService) {\r\n       this.lastModAfter = toolsService.getCurrentDateDayOperation(-45);\r\n       this.lastModBefore = toolsService.getCurrentDateDayOperation(0);\r\n       this.items = [\r\n           {label: 'Przypisz/Zmień wykonawce', icon: 'fa fa-user', disabled: true, command: (event) => this.assign(true)},\r\n           {label: 'Dopisz wykonawce', icon: 'fa fa-share', disabled: true, command: (event) => this.assign(false)},\r\n           {label: 'Edycja zlecenia', icon: 'fa fa-pencil-square-o', disabled: true, command: (event) => this.edit()},\r\n           {label: 'Dodaj nowe zlecenie', icon: 'fa fa-plus', disabled: true, command: (event) => this.add()}\r\n       ];\r\n       this.relatedItem = <RelatedItem>{};\r\n       this.pl=new Calendar();\r\n   }\r\n\r\n   ngOnInit() {\r\n       this.userService.getEngineersAndContractors().subscribe(engineers => this.engineers = engineers);\r\n       this.userService.getVentureRepresentatives().subscribe(ventureRepresentatives => this.ventureRepresentatives = ventureRepresentatives);\r\n       this.itemService.getAllItems().subscribe(relatedItems => this.relatedItems = relatedItems);\r\n       this.workTypeService.getAllWorkTypes().subscribe(workTypesDetails => this.workTypesDetails = workTypesDetails);\r\n       this.authSerice.userAsObs.subscribe(user => this.assignOperator(user));\r\n\r\n       this.workTypeService.getWorkTypes().subscribe(workTypes => this.workTypes = workTypes);\r\n       this.statuses = this.dictService.getWorkStatuses();\r\n      \r\n       this.search();\r\n       this.cols = [\r\n           { field: 'officeCode', header: 'Biuro' , sortable: true, filter:true,class:\"text-center-55\"},\r\n           { field: 'id', header: 'id', hidden: true, sortable: true, filter:true},\r\n           { field: 'workNo', header: 'Zlecenie', sortable: true, filter:true, class:\"width-100\"},\r\n           { field: 'status', header: 'Status' , filter:true,statusCode:true, class:\"width-135\"},\r\n           { field: 'type', header: 'Typ', sortable:true, filter:true, type:true, class:\"width-135\"},\r\n           { field: 'complexityCode', header: 'Zł.', sortable:true, filter:false,complexity:true, icon:true,class:\"text-center\" },\r\n           { field: 'complexity', header: 'Wycena' , sortable:true, filter:false,class:\"text-center-55\"},\r\n           { field: 'mdCapex', header: 'CAPEX', sortable:true, filter:true,class:\"width-100\" },\r\n           { field: 'price', header: 'Cena', sortable:true, filter:true,class:\"width-70 text-right\" },\r\n           { field: 'sComments', header: 'Komentarz', hidden:true, sortable:true , filter:true},\r\n           { field: 'description', header: 'Opis', hidden:true, filter:true },\r\n           { field: 'assignee', header: 'Wykonawca', sortable:true, filter:true, class:\"width-100\" },\r\n           { field: 'isFromPool', header: 'Pula' , sortable:true, filter:true, isFromPool:true, icon:true, class:\"text-center\"},\r\n           { field: 'protocolNo', header: 'Protokół', sortable:true, filter:true, class:\"width-100\" },\r\n           { field: 'lastModDate', header: 'Mod.' , sortable:true, filter:true, class:\"width-100\"},\r\n           { field: 'creationDate', header: 'Utw.', sortable:true , filter:true, class:\"width-100\"},\r\n           { field: 'itemNo', header: 'Numer obiektu' , sortable:true, filter:true, class:\"width-125\"},\r\n           { field: 'itemBuildingType', header: 'Typ obiektu', hidden:true, sortable:true, filter:true },\r\n           { field: 'itemConstructionCategory', header: 'Konstrukcja', hidden:true, sortable:true, filter:true },\r\n           { field: 'itemAddress', header: 'Adres', hidden:true, sortable:true, filter:true },\r\n           { field: 'itemDescription', header: 'Opis obiektu', hidden:true, sortable:true , filter:true},\r\n           { field: 'ventureCompany', header: 'Inwestor', sortable:true , filter:true, class:\"width-135\"},\r\n           { field: 'ventureDisplay', header: 'Zleceniodawca', sortable:true , filter:true, class:\"width-135\" },\r\n           { button: true, icone:true, class:\"width-35\"}\r\n          \r\n           \r\n       ];     \r\n   }\r\n\r\n   showChangeStatusDialog() {\r\n       this.displayChangeStatusDialog=true;\r\n   }\r\n\r\n   onClose(isVisible: boolean){\r\n       this.displayChangeStatusDialog = isVisible;\r\n       this.search();\r\n   }\r\n\r\n\r\n   private assignOperator(operator:User):void {\r\n       console.log('operator: '+JSON.stringify(operator));\r\n       this.operator = operator;\r\n       if (operator && operator.roleCode && operator.roleCode.indexOf('OP') > -1) {\r\n           for(let item of this.items) {\r\n               item.disabled = false;\r\n           }\r\n       }\r\n\r\n   }\r\n\r\n   refresh() {\r\n       this.lastModBefore = this.toolsService.getCurrentDateDayOperation(0);\r\n       this.search();\r\n   }\r\n\r\n   search() {\r\n       this.woService.getOrdersByDates(\r\n           this.toolsService.formatDate(this.lastModAfter, 'yyyy-MM-dd'),\r\n           this.toolsService.formatDate(this.lastModBefore, 'yyyy-MM-dd')\r\n       ).pipe(mergeMap(orders => this.callVentures(orders)))\r\n       .subscribe(vrs => this.mapVentureRepresentative(this.orders, vrs));\r\n   }\r\n\r\n   private callVentures(orders: Order[]):Observable<User[]> {\r\n       //this.orders = orders;\r\n       //filter\r\n       this.orders = [];\r\n       for (let order of orders) {\r\n           if (order.statusCode !== 'CA' && order.statusCode != 'SU') {\r\n               this.orders.push(order);\r\n           }\r\n       }\r\n\r\n       return this.userService.getVentureRepresentatives();\r\n   }\r\n\r\n   private mapVentureRepresentative(orders: Order[], vrs:User[]):void {\r\n       for(let order of orders) {\r\n           for(let vr of vrs) {\r\n               if (order.ventureId === vr.id) {\r\n                   order.ventureDisplay = vr.firstName+' '+vr.lastName;\r\n                   order.ventureCompany = vr.company;\r\n                   order.ventureFull = vr;\r\n               }\r\n           }\r\n       }\r\n   }\r\n\r\n   copyRelatedItem(value: any) {\r\n       console.log('copyRelatedItem ' + JSON.stringify(this.relatedItem));\r\n       if (typeof this.relatedItem == 'string' || this.relatedItem instanceof String) {\r\n           console.log('copyRelatedItem skipping due to string');\r\n       } else {\r\n           this.relatedItemCopy = JSON.parse(JSON.stringify(this.relatedItem));\r\n       }\r\n   }\r\n\r\n   updateRelatedItem(value: any) {\r\n       //this is tricky sometimes object sometimes string\r\n       console.log('updateRelatedItem ' + JSON.stringify(this.relatedItem)+'\\nJSON '+JSON.stringify(value));\r\n       if (this.relatedItem !== undefined) {\r\n           if (typeof value == 'string' || value instanceof String) {\r\n               if (this.relatedItemCopy !== undefined) {\r\n                   this.relatedItem = this.relatedItemCopy;\r\n               } else {\r\n                   this.relatedItem = <RelatedItem> {};\r\n               }\r\n               this.relatedItem.itemNo = ''+value;\r\n               this.copyRelatedItem(undefined);\r\n           }\r\n       }\r\n   }\r\n\r\n   suggestPrice(event, workType: CodeValue) {\r\n       console.log('all ' + JSON.stringify(this.workTypesDetails));\r\n\r\n       let suggestedPrice: CodeValue[] = [];\r\n       if (this.workTypesDetails && this.workTypesDetails.length > 0) {\r\n           for (let workTypeDetails of this.workTypesDetails) {\r\n               let sPrice:string = <string> '' + workTypeDetails.price;\r\n               if (sPrice.indexOf(event.query) > -1 && (workTypeDetails.typeCode === workType.code || workType.code === undefined) && workTypeDetails.officeCode === this.assignedVentureRepresentative.user.officeCode && workTypeDetails.complexityCode === 'STD') {\r\n                   //let type: string = this.dictService.getWorkType(workTypeDetails.typeCode);\r\n                   //suggestedPrice.push(new CodeValue(sPrice, sPrice + ' PLN (cennik ' + this.dictService.getOffice(workTypeDetails.officeCode) + ')'));\r\n                   suggestedPrice.push(new CodeValue(sPrice, sPrice + ' PLN'));\r\n               }\r\n           }\r\n       }\r\n       this.suggestedPrice = suggestedPrice;\r\n       console.log('suggestedWorkTypeDetails: ' + JSON.stringify(this.suggestedPrice));\r\n   }\r\n\r\n   suggestRelatedItem(event) {\r\n       console.log('all ' + JSON.stringify(this.relatedItems));\r\n       let queryIgnoreCase: string = event.query ? event.query.toLowerCase(): event.query;\r\n\r\n       let suggestedRelatedItems: RelatedItem[] = [];\r\n       if (this.relatedItems && this.relatedItems.length > 0) {\r\n           for (let item of this.relatedItems) {\r\n               if (item.itemNo.toLowerCase().indexOf(queryIgnoreCase) > -1) {\r\n                   suggestedRelatedItems.push(item);\r\n               }\r\n           }\r\n       }\r\n       this.suggestedRelatedItems = suggestedRelatedItems;\r\n       console.log('suggestedRelatedItems: ' + JSON.stringify(this.suggestedRelatedItems));\r\n   }\r\n\r\n   suggestStatus(event) {\r\n       let suggestedStatuses: CodeValue[] = [];\r\n       let queryIgnoreCase: string = event.query ? event.query.toLowerCase(): event.query;\r\n       if (this.statuses && this.statuses.length > 0) {\r\n           for (let status of this.statuses) {\r\n               if (status.paramChar.toLowerCase().indexOf(queryIgnoreCase) > -1 && this.toolsService.isStatusAllowed(this.editedOrder, status.code)) {\r\n                   suggestedStatuses.push(status);\r\n               }\r\n           }\r\n       }\r\n       this.suggestedStatuses = suggestedStatuses;\r\n       console.log('suggestedStatuses: ' + JSON.stringify(this.suggestedStatuses));\r\n   }\r\n\r\n   fillPrice(event: any, index: number): void {\r\n       console.log(\"fillPrice \"+JSON.stringify(event));\r\n\r\n       if (this.workTypesDetails && this.workTypesDetails.length > 0) {\r\n           for (let workTypeDetails of this.workTypesDetails) {\r\n               let sPrice:string = <string> '' + workTypeDetails.price;\r\n               if ((workTypeDetails.typeCode === event.code || event.code === undefined) && workTypeDetails.officeCode === this.assignedVentureRepresentative.user.officeCode && workTypeDetails.complexityCode === 'STD') {\r\n                   if (index < 0) {\r\n                       this.price = new CodeValue(sPrice, sPrice + ' PLN');\r\n                   } else {\r\n                       this.additionalPrices[index] = new CodeValue(sPrice, sPrice + ' PLN');\r\n                   }\r\n                   console.log(\"fillPrice found \" + sPrice);\r\n               }\r\n           }\r\n       }\r\n   }\r\n\r\n   suggestType(event): void {\r\n       let suggestedTypes:CodeValue[] = [];\r\n       let queryIgnoreCase: string = event.query ? event.query.toLowerCase(): event.query;\r\n       if (this.workTypes && this.workTypes.length > 0) {\r\n           for (let workType of this.workTypes) {\r\n               if (workType.paramChar.toLowerCase().indexOf(queryIgnoreCase) > -1) {\r\n                   suggestedTypes.push(workType);\r\n               }\r\n           }\r\n       }\r\n       suggestedTypes.sort( function (a,b) {           \r\n           return parseFloat(a.code) - parseFloat(b.code);\r\n       });\r\n       suggestedTypes.sort(function (a,b) {       \r\n\r\n           if (parseFloat(a.code.split(\".\")[0]) === parseFloat(b.code.split(\".\")[0])){\r\n               if (parseFloat(a.code.split(\".\")[1]) > parseFloat(b.code.split(\".\")[1])) {\r\n                   return 1;\r\n                 } else if (parseFloat(b.code.split(\".\")[1]) > parseFloat(a.code.split(\".\")[1])) {\r\n                   return -1;\r\n                 } else {\r\n                   return 0;\r\n                 }\r\n               }\r\n               else {\r\n                   return 0;\r\n               }\r\n       }\r\n     );\r\n       this.suggestedTypes = suggestedTypes;\r\n       console.log('suggestedTypes: ' + JSON.stringify(this.suggestedTypes));\r\n   }\r\n\r\n   suggestEngineer(event): void {\r\n       let suggestedEngineers:SearchUser[] = [];\r\n       let queryIgnoreCase: string = event.query ? event.query.toLowerCase(): event.query;\r\n       if (this.engineers && this.engineers.length > 0) {\r\n           for (let engineer of this.engineers) {\r\n               let suggestion:string = JSON.stringify(engineer).toLowerCase();\r\n               console.log('suggestEngineer ' + suggestion + ' for ' + JSON.stringify(event));\r\n               if (suggestion.indexOf(queryIgnoreCase) > -1 && (this.editedOrder.assignee === undefined || this.editedOrder.assignee.indexOf(engineer.email) === -1)) {\r\n                   let displayName:string = engineer.firstName + ' ' + engineer.lastName + ' (' + engineer.role + ')';\r\n                   suggestedEngineers.push(new SearchUser(displayName, engineer));\r\n               }\r\n           }\r\n       }\r\n       this.suggestedEngineers = suggestedEngineers;\r\n       console.log('suggestedEngineers ' + JSON.stringify(this.suggestedEngineers));\r\n   }\r\n\r\n   suggestVentureRepresentative(event) {\r\n       let suggestedVentureRepresentatives: SearchUser[] = [];\r\n       let queryIgnoreCase: string = event.query ? event.query.toLowerCase(): event.query;\r\n       if (this.ventureRepresentatives && this.ventureRepresentatives.length > 0) {\r\n           for (let v of this.ventureRepresentatives) {\r\n               let suggestion:string = JSON.stringify(v).toLowerCase();\r\n               console.log('suggestVentureRepresentative ' + suggestion + ' for ' + JSON.stringify(event));\r\n               if (suggestion.indexOf(queryIgnoreCase) > -1) {\r\n                   let displayName:string = v.firstName + ' ' + v.lastName + ' (' + v.company + ' - '+v.office+')';\r\n                   suggestedVentureRepresentatives.push(new SearchUser(displayName, v));\r\n               }\r\n           }\r\n       }\r\n       this.suggestedVentureRepresentatives = suggestedVentureRepresentatives;\r\n       console.log('suggestedVentureRepresentatives ' + JSON.stringify(this.suggestedVentureRepresentatives));\r\n   }\r\n\r\n   public showWoDetails(event, order) {\r\n       this.selectedOrder=order;\r\n       this.onRowSelect(event);\r\n       this.displayDetailsDialog=true;\r\n   }\r\n\r\n   onRowSelect(event) {\r\n       console.log('selected row!' + JSON.stringify(this.selectedOrder));\r\n       this.selectedOrder.assigneeFull = this.toolsService.getEngineers(this.selectedOrder.assignee, this.engineers);\r\n   }\r\n\r\n   onRowDblclick(event) {\r\n       console.log('onRowDblclick row!' + JSON.stringify(this.selectedOrder));\r\n       if (this.operator && this.operator.roleCode && this.operator.roleCode.indexOf('OP') > -1) {\r\n           this.edit();\r\n       }\r\n   }\r\n\r\n   assign(isNewOrderOwner:boolean):void {\r\n       console.log('assigning!' + JSON.stringify(this.selectedOrder));\r\n       if (isNewOrderOwner && this.selectedOrder.assignee !== undefined) {\r\n           this.alertService.warn('Zmiana wykonawcy zlecenia ' + this.selectedOrder.workNo + ', bieżący wykonawca/y' + this.selectedOrder.assignee);\r\n       }\r\n       if (isNewOrderOwner && this.selectedOrder.statusCode === 'CO') {\r\n           this.alertService.error('Nie można przypisac zlecenia w stanie ' + this.selectedOrder.status);\r\n       } else if (!isNewOrderOwner && this.selectedOrder.assignee === undefined) {\r\n           this.alertService.error('Nie można DOPISAĆ do zlecenia gdyż nie ma jeszcze pierwszego wykonawcy!');\r\n       } else {\r\n           this.isNewOrderOwner = isNewOrderOwner;\r\n           this.newOrder = false;\r\n           this.editedOrder = this.selectedOrder;\r\n           this.displayAssignDialog = true;\r\n       }\r\n   }\r\n\r\n\r\n   add() {\r\n\r\n       this.editedOrder = new Order(this.toolsService.NO_WO, 'OP', this.dictService.getWorkStatus('OP'), null, null, 'STD', -1, null, new Comments(null), this.toolsService.NO_CAPEX, null);\r\n       this.additionalWorkTypes = [new CodeValue('', ''), new CodeValue('', ''), new CodeValue('', ''), new CodeValue('', '')];\r\n       this.additionalPrices = [new CodeValue('', ''), new CodeValue('', ''), new CodeValue('', ''), new CodeValue('', '')];\r\n       this.generateWorkNoFlag = 'Y';\r\n       this.comment = undefined;\r\n       this.newComment = undefined;\r\n\r\n       this.status = new CodeValue(this.editedOrder.statusCode, this.editedOrder.status);\r\n\r\n       this.relatedItem = <RelatedItem> {};\r\n       this.relatedItemCopy = <RelatedItem> {};\r\n\r\n       this.price = <CodeValue> {};\r\n       this.workType = <CodeValue> {};\r\n       this.newComment = undefined;\r\n\r\n       this.newOrder = true;\r\n       this.displayEditDialog = true;\r\n\r\n       this.assignedEngineer = undefined;\r\n   }\r\n\r\n   edit():void {\r\n\r\n       console.log('editing!' + JSON.stringify(this.selectedOrder));\r\n       this.generateWorkNoFlag = 'N';\r\n       this.comment = this.selectedOrder.comments ? commentAsString(this.selectedOrder.comments) : undefined;\r\n       this.newComment = undefined;\r\n\r\n       //initial values based on selectedOrder for form preparation\r\n       let price: string = this.selectedOrder.price !== undefined? ''+this.selectedOrder.price : '';\r\n       this.price = new CodeValue(price, price);\r\n\r\n       this.workType = new CodeValue(this.selectedOrder.typeCode, this.selectedOrder.type);\r\n       this.status = new CodeValue(this.selectedOrder.statusCode, this.selectedOrder.status);\r\n       this.relatedItem = (this.selectedOrder.relatedItems[0] === undefined ? <RelatedItem> {} : this.selectedOrder.relatedItems[0]);\r\n       if (this.selectedOrder.ventureFull !== undefined && this.selectedOrder.ventureFull !== undefined) {\r\n           this.assignedVentureRepresentative = new SearchUser(this.selectedOrder.ventureDisplay, this.selectedOrder.ventureFull);\r\n       }\r\n\r\n       this.editedOrder = JSON.parse(JSON.stringify(this.selectedOrder));\r\n       this.additionalWorkTypes = [new CodeValue('', ''), new CodeValue('', ''), new CodeValue('', ''), new CodeValue('', '')];\r\n       this.additionalPrices = [new CodeValue('', ''), new CodeValue('', ''), new CodeValue('', ''), new CodeValue('', '')];\r\n\r\n       this.newOrder = false;\r\n       this.displayEditDialog = true;\r\n   }\r\n\r\n\r\n\r\n   saveAssignment() {\r\n       console.log('saving assignment!' + JSON.stringify(this.editedOrder) + ' for ' + JSON.stringify(this.assignedEngineer.user));\r\n       this.displayAssignDialog = false;\r\n       this.userService.assignWorkOrder(this.assignedEngineer.user, this.editedOrder, this.isNewOrderOwner)\r\n           .subscribe(json => this.updateOrderStatus(json.created, this.isNewOrderOwner, this.editedOrder, this.assignedEngineer.user));\r\n   }\r\n\r\n\r\n   private updateOrderStatus(created:number, isNewOrderOwner:boolean, order:Order, engineer:User):void {\r\n       if (!created || created === -1) {\r\n           console.log('Assignment problem! ' + created);\r\n           this.alertService.error('Blad przypisania zlecenia ' + order.workNo + ' do ' + engineer.email);\r\n           return;\r\n       } else if (isNewOrderOwner && order.statusCode != 'AS') { //update status\r\n           console.log('Setting status to AS, current ' + order.statusCode);\r\n           order.statusCode = 'AS';\r\n       }\r\n       this.alertService.info('Pomyślnie przypisano zlecenie ' + order.workNo + ' do ' + engineer.email);\r\n\r\n       //this.woService.updateOrder(order).subscribe(updatedOrder => this.refreshTable(updatedOrder, false));\r\n       this.woService.updateOrder(order).subscribe(updatedOrder => this.refresh());\r\n   }\r\n\r\n   canSaveOrders(): boolean {\r\n       return (\r\n           this.assignedVentureRepresentative && this.assignedVentureRepresentative.user &&\r\n           ((this.editedOrder && this.editedOrder.workNo && this.editedOrder.workNo.length > 2) || this.assignedVentureRepresentative.user.officeCode !== 'WAW') &&\r\n           this.workType && this.workType.paramChar && this.workType.paramChar.length > 1\r\n       );\r\n   }\r\n\r\n   saveOrders() {\r\n       if (this.canSaveOrders()) {\r\n           this.displayEditDialog = false;\r\n           this.setWorkTypeAndPrice(this.editedOrder, this.workType, this.price);\r\n           this.saveOrder(this.editedOrder, this.saveOrderSubscribeCallback);\r\n       }\r\n   }\r\n\r\n   private saveOrder(order: Order, saveOrderCallback: (o: Order, that: WoTurboTableComponent) => any): void {\r\n\r\n       order.id            = this.newOrder ? undefined : order.id;\r\n       order.statusCode    = this.newOrder ? 'OP' : this.status.code;\r\n       order.status        = this.dictService.getWorkStatus(order.statusCode);\r\n\r\n       if (this.newComment && this.newComment.length > 0) {\r\n           if (this.newOrder || !order.comments) {\r\n               order.comments = new Comments(null);\r\n           }\r\n           let reason: string = (order.statusCode === 'SU' || order.statusCode === 'CA') ? \"Anulowanie\" : \"Edycja\";\r\n           commentAdd(order.comments, reason, this.operator, this.newComment);\r\n       }\r\n\r\n       if (this.toolsService.isStatusLowerThanProtocol(order.statusCode)) {\r\n           order.protocolNo = ''; //According to LE its null for sqlite\r\n       }\r\n\r\n       if (this.assignedVentureRepresentative && this.assignedVentureRepresentative.user && this.assignedVentureRepresentative.user.id) {\r\n           order.officeCode = this.assignedVentureRepresentative.user.officeCode;\r\n           order.office = this.assignedVentureRepresentative.user.office;\r\n           order.ventureId = this.assignedVentureRepresentative.user.id;\r\n           if (order.officeCode !== 'WAW' && this.generateWorkNoFlag === 'Y') {\r\n               this.editedOrder.workNo = undefined;\r\n           }\r\n           if (order.officeCode !== 'KAT') {\r\n               order.mdCapex = undefined;\r\n           }\r\n       } else {\r\n           this.alertService.error('Zlecenie nie zostało zapiasane, nieprawidlowy (pusty?) region zleceniodawcy!');\r\n           return;\r\n       }\r\n\r\n       if (this.newOrder) {\r\n           let workTypeParam: WorkType = this.workTypeService.getWorkType(order.typeCode, order.officeCode, 'STD');\r\n           if (workTypeParam && workTypeParam.complexity != null) {\r\n               order.complexity = workTypeParam.complexity;\r\n           } else {\r\n               console.log(\"workTypeParam = \"+JSON.stringify(workTypeParam));\r\n               this.alertService.error('Zlecenie nie zostało zapisane, brak pracochlonnosci w parametryzacji dla '+order.type+', '+order.officeCode+'!');\r\n               return;\r\n           }\r\n           order.type = this.workTypeService.getWorkTypeDescription(order);\r\n       }\r\n\r\n\r\n       //trying to optimize all actions newOrder-newRelatedItem(noId), changeOrder-newRelatedItem(noId), newOrder-changeRelatedItem(Id), changeOrder-changeRelatedItem(Id)\r\n       if (this.relatedItem.itemNo !== undefined && this.relatedItem.id !== undefined) {\r\n           if (this.isRelatedItemChanged(this.relatedItem)) {\r\n               console.log('changing existing relatedItem itemNo:' + this.relatedItem.itemNo + ', id:' + this.relatedItem.id);\r\n               this.itemService.updateItem(this.relatedItem).subscribe(item => this.storeOrder(item, order, this.newOrder, false).subscribe(order => saveOrderCallback(order, this)));\r\n           } else {\r\n               console.log('no action on relatedItem but could be reassignment - this will be handled in storeOrder');\r\n               this.storeOrder(this.relatedItem, order, this.newOrder, false).subscribe(order => saveOrderCallback(order, this));\r\n           }\r\n       } else if (this.relatedItem.itemNo !== undefined && this.relatedItem.id === undefined) {\r\n           console.log('adding new relatedItem itemNo:' + this.relatedItem.itemNo + ', id:' + this.relatedItem.id);\r\n           this.itemService.addItem(this.relatedItem).subscribe(item => this.storeOrder(item, order, this.newOrder, true).subscribe(order => saveOrderCallback(order, this)));\r\n       } else {\r\n           console.log('no action on relatedItem itemNo:' + this.relatedItem.itemNo + ', id:' + this.relatedItem.id);\r\n           this.storeOrder(this.relatedItem, order, this.newOrder, false)\r\n           .subscribe(order =>{\r\n               if (this.assignedEngineer != null){\r\n                   this.editedOrder = order;\r\n                   this.saveAssignment();\r\n                   this.updateOrderStatus(this.editedOrder.id,this.newOrder,order,this.assignedEngineer.user);\r\n               }              \r\n               saveOrderCallback(order, this);                                          \r\n           });         \r\n       }     \r\n   }\r\n\r\n   private storeOrder(item:RelatedItem, order:Order, newOrder:boolean, newItem:boolean):Observable<Order> {\r\n       console.log('changing order related item to ' + item.id);\r\n       order.itemId = item.id;\r\n\r\n       if (newOrder) {\r\n           console.log('saving new!' + JSON.stringify(order));\r\n           return this.woService.addOrder(order)\r\n       } else {\r\n           console.log('changing!' + JSON.stringify(order));\r\n           return this.woService.updateOrder(order);\r\n       }\r\n   }\r\n\r\n   private saveOrderSubscribeCallback(order: Order, that: WoTurboTableComponent) {\r\n       if (order.statusCode === 'OP') {\r\n           that.removeAssignment(order, that);\r\n       }\r\n\r\n       if (that.additionalWorkTypes.length > 0 && that.additionalWorkTypes[0].code !== '') {\r\n           console.log('Still work todo, up to '+that.additionalWorkTypes.length +\", order.workNo: \"+order.workNo);\r\n           let nextOrder: Order = JSON.parse(JSON.stringify(order));\r\n           nextOrder.workNo = order.workNo;\r\n           that.setWorkTypeAndPrice(nextOrder, that.additionalWorkTypes[0], that.additionalPrices[0]);\r\n           that.saveOrder(nextOrder, that.saveOrderSubscribeCallback);\r\n           that.additionalWorkTypes.shift();\r\n           that.additionalPrices.shift();          \r\n       } else {\r\n           console.log('No more order to save, refreshing...');\r\n           that.refresh();\r\n       }\r\n   }\r\n\r\n   public removeAssignment(order: Order, that: WoTurboTableComponent): void {\r\n       if (order.assignee && order.assignee.length > 0 && !order.assigneeFull) {\r\n           order.assigneeFull = that.toolsService.getEngineers(order.assignee, that.engineers)\r\n       }\r\n\r\n       if (order.assigneeFull && order.assigneeFull.length > 0) {\r\n\r\n           let user: User = order.assigneeFull.shift();\r\n           console.log('About to clean assignment for '+order.statusCode+' assignments: '+order.assigneeFull.length+' userId: '+user.id+'...');\r\n\r\n           that.userService.deleteRelation(user, order).subscribe(result => that.removeAssignment(order, that));\r\n       }\r\n\r\n   }\r\n\r\n   //this can differ when creating many orders in one dialog\r\n   private setWorkTypeAndPrice(order: Order, workType: CodeValue, price: CodeValue): void {\r\n       order.typeCode = workType.code;\r\n       order.price = (price != undefined && price.code !== undefined) ? <number> +price.code : this.toolsService.parsePrice(JSON.stringify(price), order.workNo);\r\n       console.log('price ' + order.price);\r\n   }\r\n\r\n   private isRelatedItemChanged(relatedItem:RelatedItem):boolean {\r\n       //console.log('isRelatedItemChanged');\r\n       let originalItem:RelatedItem = this.getOriginalRelatedItemById(relatedItem.id);\r\n\r\n       if (JSON.stringify(originalItem) === JSON.stringify(relatedItem)) {\r\n           return false;\r\n       }\r\n       console.log('isRelatedItemChanged differs: original=' + JSON.stringify(originalItem) + '\\n changed=' + JSON.stringify(relatedItem));\r\n       return true;\r\n   }\r\n\r\n   private getOriginalRelatedItemById(id:number):RelatedItem {\r\n       for (let item of this.relatedItems) {\r\n           if (item.id === id) {\r\n               return item;\r\n           }\r\n       }\r\n       return null;\r\n   }\r\n\r\n\r\n}\r\n","module.exports = \"\"","module.exports = \"\\r\\n\\r\\n<p-panel header=\\\"Zlecenia - WO\\\">\\r\\n\\r\\n  <div class=\\\"ui-grid-row\\\">\\r\\n    <div class=\\\"ui-grid-col-6\\\">\\r\\n      <p-fieldset legend=\\\"Wyszukiwanie zleceń\\\">\\r\\n        <form #f=\\\"ngForm\\\" (submit)=\\\"search()\\\">\\r\\n\\r\\n          <div class=\\\"ui-grid ui-grid-responsive ui-fluid ui-grid-pad\\\">\\r\\n            <div class=\\\"ui-grid-row\\\"  style=\\\"margin-top: 20px;\\\">\\r\\n              <div class=\\\"ui-grid-col-1\\\"></div>\\r\\n              <div class=\\\"ui-grid-col-5\\\">\\r\\n                <label for=\\\"lastModAfter\\\">zmodyfikowano od</label>\\r\\n                <p-calendar name=\\\"lastModAfter\\\" [locale]=\\\"pl\\\" [(ngModel)]=\\\"lastModAfter\\\" [showIcon]=\\\"true\\\" dateFormat=\\\"dd.mm.yy\\\" utc=\\\"true\\\"></p-calendar>\\r\\n              </div>\\r\\n              <!--<div class=\\\"ui-grid-col-1\\\"></div>-->\\r\\n              <div class=\\\"ui-grid-col-5\\\">\\r\\n                <label for=\\\"lastModBefore\\\">zmodyfikowano do</label>\\r\\n                <p-calendar name=\\\"lastModBefore\\\" [locale]=\\\"pl\\\" [(ngModel)]=\\\"lastModBefore\\\" [showIcon]=\\\"true\\\" dateFormat=\\\"dd.mm.yy\\\" utc=\\\"true\\\"></p-calendar>\\r\\n              </div>\\r\\n              <div class=\\\"ui-grid-col-1\\\"></div>\\r\\n            </div>\\r\\n            <div class=\\\"ui-grid-row\\\"  style=\\\"margin-top: 15px; margin-bottom: 65px;\\\">\\r\\n              <div class=\\\"ui-grid-col-4\\\"></div>\\r\\n              <div class=\\\"ui-grid-col-4\\\">\\r\\n                <button pButton type=\\\"button\\\" (click)=\\\"search()\\\" icon=\\\"fa fa-search\\\" label=\\\"Szukaj Tena\\\" style=\\\"margin-left: 0px; min-width: 140px;\\\" [disabled]=\\\"!f?.valid\\\"></button>\\r\\n              </div>\\r\\n              <div class=\\\"ui-grid-col-4\\\"></div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </form>\\r\\n      </p-fieldset>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"ui-grid-col-6\\\">\\r\\n      <app-status-details></app-status-details>     \\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n  <p-dialog [(visible)]=\\\"displayChangeStatusDialog\\\" header=\\\"Zlecenia do zmany statusu\\\" [minWidth]=\\\"800\\\" [width]=\\\"1200\\\" [responsive]=\\\"true\\\" [blockScroll]=\\\"true\\\">\\r\\n    <app-group-status-change [parent]=\\\"this\\\" [listToDisplay]=\\\"orders\\\" [operator]=\\\"operator\\\" [operatorMode]=\\\"true\\\" (closeModalEvent)=\\\"onClose($event)\\\"></app-group-status-change>\\r\\n  </p-dialog>\\r\\n  <div style=\\\"margin-top: 5px\\\" *ngIf=\\\"orders\\\" class=\\\"ui-g\\\">\\r\\n    <p-contextMenu #cm [model]=\\\"items\\\"></p-contextMenu>\\r\\n\\r\\n    <!-- sortField=\\\"lastModDate\\\" -->\\r\\n    <p-dataTable [value]=\\\"orders\\\" [rows]=\\\"20\\\" [paginator]=\\\"true\\\" [globalFilter]=\\\"gb\\\" #dt dataKey=\\\"id\\\"\\r\\n                 selectionMode=\\\"single\\\" [(selection)]=\\\"selectedOrder\\\" (onRowSelect)=\\\"onRowSelect($event)\\\" (onRowDblclick)=\\\"onRowDblclick($event)\\\"\\r\\n                 resizableColumns=\\\"true\\\" sortOrder=\\\"-1\\\" [loading]=\\\"loading\\\" loadingIcon=\\\"fa fa-spinner\\\" [contextMenu]=\\\"cm\\\" csvSeparator=\\\";\\\" exportFilename=\\\"Zlecenia\\\">\\r\\n      <p-header>\\r\\n        <div>\\r\\n          <i class=\\\"fa fa-search\\\"></i>\\r\\n          <input #gb type=\\\"text\\\" pInputText size=\\\"50\\\" placeholder=\\\"Filtruj\\\">\\r\\n          <button [disabled]=\\\"operator.roleCode.indexOf('OP') == -1\\\" type=\\\"button\\\" pButton icon=\\\"fa fa-plus\\\" style=\\\"float:left\\\" (click)=\\\"add()\\\" label=\\\"Dodaj\\\"></button>\\r\\n        </div>\\r\\n      </p-header>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"officeCode\\\" header=\\\"Biuro\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'width':'45px'}\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"id\\\" header=\\\"id\\\" hidden=\\\"true\\\" ></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"workNo\\\" header=\\\"Zlecenie\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n\\r\\n      <!--<p-column [sortable]=\\\"true\\\" field=\\\"status\\\" header=\\\"statusSearch\\\" [style]=\\\"{'width':'0px'}\\\" hidden=\\\"true\\\"></p-column>&lt;!&ndash; search &ndash;&gt;-->\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"status\\\" header=\\\"Status\\\" [style]=\\\"{'width':'135px'}\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" filterMatchMode=\\\"contains\\\">\\r\\n        <ng-template let-col let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          <span class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"toolsService.getStatusIcon(order.statusCode)\\\"></i></span>\\r\\n          <span style=\\\"padding: 3px\\\">{{order.status}}</span>\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n\\r\\n      <!--<p-column [sortable]=\\\"true\\\" field=\\\"type\\\" header=\\\"typeSearch\\\" [style]=\\\"{'width':'0px'}\\\" hidden=\\\"true\\\"></p-column>&lt;!&ndash; search &ndash;&gt;-->\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"type\\\" header=\\\"Typ\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" filterMatchMode=\\\"contains\\\">\\r\\n        <ng-template let-col let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          <span [style.color]=\\\"toolsService.getOrderColor(order.typeCode)\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-square'\\\"></i></span>\\r\\n          <span style=\\\"padding: 3px\\\">{{order.type}}</span>\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"complexityCode\\\" header=\\\"Zł.\\\" [style]=\\\"{'text-align':'center', 'width':'45px'}\\\">\\r\\n        <ng-template let-col let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          <span class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"order[col.field]=='STD' ? 'fa fa-thumbs-o-up': 'fa fa-life-bouy'\\\"></i></span>\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"complexity\\\" header=\\\"Wycena\\\" [style]=\\\"{'text-align':'center', 'width':'55px'}\\\"></p-column>\\r\\n\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"mdCapex\\\" header=\\\"CAPEX\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"price\\\" header=\\\"Cena\\\" styleClass=\\\"text-right\\\" [style]=\\\"{'width':'70px'}\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"sComments\\\" header=\\\"Komentarz\\\" hidden=\\\"true\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"description\\\" header=\\\"Opis\\\" hidden=\\\"true\\\"></p-column>\\r\\n\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"assignee\\\" header=\\\"Wykonawca\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column><!--this is array -->\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"isFromPool\\\" header=\\\"Pula\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Y/N\\\" [style]=\\\"{'text-align':'center', 'width':'45px'}\\\">\\r\\n          <ng-template let-col let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n            <span *ngIf=\\\"order[col.field]=='Y'\\\" [style.color]=\\\"'green'\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-users'\\\"></i></span>\\r\\n            <span *ngIf=\\\"order[col.field]!='Y'\\\" [style.color]=\\\"'grey'\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-street-view'\\\"></i></span>\\r\\n          </ng-template>\\r\\n\\r\\n      </p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"protocolNo\\\" header=\\\"Protokół\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n\\r\\n\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"lastModDate\\\" header=\\\"Mod.\\\" [style]=\\\"{'width':'82px'}\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"creationDate\\\" header=\\\"Utw.\\\" [style]=\\\"{'width':'82px'}\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"itemNo\\\" header=\\\"Numer obiektu\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n      <!-- search by invisible colums flatten into order by wo.service -->\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"itemBuildingType\\\" header=\\\"Typ obiektu\\\" hidden=\\\"true\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"itemConstructionCategory\\\" header=\\\"Konstukcja\\\" hidden=\\\"true\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"itemAddress\\\" header=\\\"Adres\\\" hidden=\\\"true\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"itemDescription\\\" header=\\\"Opis obiektu\\\" hidden=\\\"true\\\"></p-column>\\r\\n\\r\\n      <!-- these are original childobject props but could not be used to filter\\r\\n      <p-column [sortable]=\\\"true\\\" header=\\\"Obiekt\\\">\\r\\n        <ng-template let-col let-relatedItem=\\\"rowData.relatedItems[0]\\\" pTemplate=\\\"body\\\">\\r\\n          <span *ngIf=\\\"relatedItem?.itemNo\\\">{{relatedItem?.itemNo}}<br></span>\\r\\n          <span *ngIf=\\\"relatedItem?.address\\\">{{relatedItem?.address}}<br></span>\\r\\n          <span *ngIf=\\\"relatedItem?.mdBuildingType\\\">{{relatedItem?.mdBuildingType}}<br></span>\\r\\n          <span *ngIf=\\\"relatedItem?.mdConstructionCategory\\\">{{relatedItem?.mdConstructionCategory}}<br></span>\\r\\n          <span *ngIf=\\\"relatedItem?.description\\\">{{relatedItem?.description}}<br></span>\\r\\n        </ng-template>\\r\\n      </p-column>-->\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"ventureCompany\\\" header=\\\"Inwestor\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n      <p-column [sortable]=\\\"true\\\" field=\\\"ventureDisplay\\\" header=\\\"Zleceniodawca\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n      <p-column [style]=\\\"{'width':'40px','text-align':'center'}\\\">\\r\\n        <ng-template let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n          <p-button type=\\\"button\\\" styleClass=\\\"btn btn-info btn-lg\\\" style=\\\"width:25px\\\" (click)=\\\"showWoDetails($event, order)\\\" icon=\\\"fa fa-search\\\"></p-button>\\r\\n        </ng-template>\\r\\n      </p-column>\\r\\n\\r\\n      <p-footer>\\r\\n        <div class=\\\"ui-grid ui-grid-responsive ui-fluid ui-grid-pad\\\">\\r\\n          <div class=\\\"ui-grid-row\\\"  style=\\\"margin-top: 15px;\\\">\\r\\n            <div class=\\\"ui-grid-col-1\\\"></div>\\r\\n            <div class=\\\"ui-grid-col-2\\\">\\r\\n              <button [disabled]=\\\"operator.roleCode.indexOf('OP') == -1\\\" type=\\\"button\\\" pButton icon=\\\"fa fa-plus\\\" style=\\\"float:left\\\" (click)=\\\"add()\\\" label=\\\"Dodaj\\\"></button>\\r\\n            </div>\\r\\n\\r\\n            <div class=\\\"ui-grid-col-2\\\">  </div>\\r\\n            <div class=\\\"ui-grid-col-2\\\"> </div>\\r\\n            <div class=\\\"ui-grid-col-1\\\"> </div>\\r\\n\\r\\n            <div class=\\\"ui-grid-col-2\\\">\\r\\n              <button type=\\\"button\\\" [disabled]=\\\"operator.roleCode.indexOf('OP') == -1\\\" pButton icon=\\\"fa fa-file-o\\\" iconPos=\\\"left\\\" label=\\\"CSV\\\" (click)=\\\"dt.exportCSV()\\\"></button>\\r\\n            </div>\\r\\n            <div class=\\\"ui-grid-col-2\\\"><button type=\\\"button\\\" pButton (click)=\\\"showChangeStatusDialog()\\\" label=\\\"Zmiana statusów\\\" icon=\\\"fa fa-list\\\" iconPos=\\\"left\\\" [disabled]=\\\"operator.roleCode.indexOf('OP') == -1\\\"></button>  </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </p-footer>\\r\\n\\r\\n      <ng-template pTemplate=\\\"emptymessage\\\">\\r\\n        Brak zleceń...\\r\\n      </ng-template>\\r\\n\\r\\n    </p-dataTable>\\r\\n  </div>\\r\\n\\r\\n  <p-dialog [(visible)]=\\\"displayDetailsDialog\\\" [header]=\\\"'Zamówienie '+selectedOrder?.workNo\\\" [minWidth]=\\\"600\\\" [responsive]=\\\"true\\\" [blockScroll]=\\\"true\\\" [contentStyle]=\\\"{'height': '800px'}\\\">\\r\\n    <app-wo-details [selectedOrder]=\\\"selectedOrder\\\"></app-wo-details>\\r\\n  </p-dialog>\\r\\n\\r\\n\\r\\n  <p-dialog [header]=\\\"newOrder? 'Nowe zlecenie' : 'Modyfikacja zlecenia'\\\" [(visible)]=\\\"displayEditDialog\\\" [responsive]=\\\"true\\\" [minWidth]=\\\"800\\\">\\r\\n    <div class=\\\"ui-grid ui-grid-responsive ui-fluid\\\" *ngIf=\\\"editedOrder\\\">\\r\\n\\r\\n      <form #f=\\\"ngForm\\\">\\r\\n        <!--(keydown.enter)=\\\"saveOrders()\\\"-->\\r\\n\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n        <div class=\\\"ui-grid-col-2\\\"><label for=\\\"ventureRepresentative\\\">Zleceniodawca</label></div>\\r\\n        <div class=\\\"ui-grid-col-10\\\">\\r\\n          <p-autoComplete [forceSelection]=\\\"true\\\" [showTransitionOptions]=\\\"'0ms'\\\" [hideTransitionOptions]=\\\"'0ms'\\\" id=\\\"ventureRepresentative\\\" name=\\\"ventureRepresentative\\\" [(ngModel)]=\\\"assignedVentureRepresentative\\\" [suggestions]=\\\"suggestedVentureRepresentatives\\\" (completeMethod)=\\\"suggestVentureRepresentative($event)\\\" [dropdown]=\\\"true\\\" field=\\\"displayName\\\" pTooltip=\\\"Od lokalizacji wybranego zleceniodawcy zależeć będzie logika nadawania numerów zleceń\\\" tooltipPosition=\\\"top\\\"></p-autoComplete>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div *ngIf=\\\"!assignedVentureRepresentative\\\" class=\\\"ui-grid-row\\\" style=\\\"margin-top: 0px;\\\" >\\r\\n        <div class=\\\"ui-grid-col-2\\\"></div>\\r\\n        <div class=\\\"ui-grid-col-10\\\">\\r\\n          <p-message severity=\\\"warn\\\" text=\\\"Przypisanie zleceniodawcy jest wymagane!\\\"></p-message>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <hr>\\r\\n\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px; \\\" *ngIf=\\\"newOrder && assignedVentureRepresentative && assignedVentureRepresentative?.user?.officeCode !== 'WAW'\\\">\\r\\n        <div class=\\\"ui-grid-col-2\\\"><label for=\\\"generategroup\\\">Generuj numer zlecenia</label></div>\\r\\n        <div class=\\\"form-group ui-grid-col-10\\\">\\r\\n          <p-radioButton name=\\\"generategroup\\\" value=\\\"Y\\\" [(ngModel)]=\\\"generateWorkNoFlag\\\" label=\\\"TAK\\\"></p-radioButton>\\r\\n          <p-radioButton name=\\\"generategroup\\\" value=\\\"N\\\" [(ngModel)]=\\\"generateWorkNoFlag\\\" label=\\\"NIE\\\"></p-radioButton>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px; \\\" *ngIf=\\\"!newOrder || assignedVentureRepresentative?.user?.officeCode === 'WAW' || generateWorkNoFlag === 'N'\\\">\\r\\n        <div class=\\\"ui-grid-col-2\\\"><label for=\\\"workNo\\\">Numer zlecenia*</label></div>\\r\\n        <div class=\\\"ui-grid-col-10 ui-fluid\\\"><input pInputText [disabled]=\\\"!assignedVentureRepresentative\\\" id=\\\"workNo\\\" name=\\\"workNo\\\" [(ngModel)]=\\\"editedOrder.workNo\\\" width=\\\"auto\\\" [required]=\\\"true\\\" minlength=\\\"2\\\" [pTooltip]=\\\"'Uzupełnij jeśli posiadasz numer zlecenia w innym przypadku pozostaw wartość '+this.toolsService.NO_WO\\\" tooltipPosition=\\\"top\\\"/></div>\\r\\n      </div>\\r\\n\\r\\n      <div *ngIf=\\\"assignedVentureRepresentative?.user?.officeCode === 'KAT'\\\" class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n        <div class=\\\"ui-grid-col-2\\\"><label for=\\\"mdCapex\\\">Capex</label></div>\\r\\n        <div class=\\\"ui-grid-col-10\\\"><input [disabled]=\\\"!assignedVentureRepresentative\\\" pInputText id=\\\"mdCapex\\\" name=\\\"mdCapex\\\" [(ngModel)]=\\\"editedOrder.mdCapex\\\" [pTooltip]=\\\"'Uzupełnij jeśli posiadzasz numer CAPEX w innym przypadku pozostaw wartość '+this.toolsService.NO_CAPEX\\\"/></div>\\r\\n      </div>\\r\\n\\r\\n        <div *ngIf=\\\"newOrder && assignedVentureRepresentative?.user?.office\\\" class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\" >\\r\\n          <div class=\\\"ui-grid-col-9\\\"></div>\\r\\n          <div class=\\\"ui-grid-col-3\\\">\\r\\n            <p-message severity=\\\"info\\\" [text]=\\\"'Cennik - '+assignedVentureRepresentative.user.office\\\"></p-message>\\r\\n          </div>\\r\\n        </div> \\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 2px;\\\">\\r\\n        <div class=\\\"ui-grid-col-2\\\"><label for=\\\"orderType\\\">Typ zlecenia*</label></div>\\r\\n        <div class=\\\"ui-grid-col-5\\\">\\r\\n            <p-autoComplete [forceSelection]=\\\"true\\\" [disabled]=\\\"!assignedVentureRepresentative\\\" [showTransitionOptions]=\\\"'0ms'\\\" [hideTransitionOptions]=\\\"'0ms'\\\" id=\\\"orderType\\\" name=\\\"orderType\\\" [(ngModel)]=\\\"workType\\\" [suggestions]=\\\"suggestedTypes\\\" (completeMethod)=\\\"suggestType($event)\\\" (onSelect)=\\\"fillPrice($event, -1)\\\" [dropdown]=\\\"true\\\" field=\\\"paramChar\\\" required placeholder=\\\"Wybierz typ zlecenia...\\\">\\r\\n              <ng-template let-orderType pTemplate=\\\"item\\\">\\r\\n                <div class=\\\"ui-helper-clearfix\\\">\\r\\n                  <span [style.color]=\\\"toolsService.getOrderColor(orderType.code)\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-square'\\\"></i></span>\\r\\n                  <span style=\\\"padding: 3px\\\">{{orderType.paramChar}}</span>\\r\\n                </div>\\r\\n              </ng-template>\\r\\n            </p-autoComplete>\\r\\n        </div>\\r\\n\\r\\n          <div class=\\\"ui-grid-col-2\\\" *ngIf=\\\"operator.roleCode.indexOf('PR') != -1 || editedOrder?.typeCode != 'OT'\\\" style=\\\"margin-left: 15px;\\\"><label for=\\\"price\\\">Wartość zlecenia</label></div>\\r\\n          <div class=\\\"ui-grid-col-3\\\" *ngIf=\\\"operator.roleCode.indexOf('PR') != -1 || editedOrder?.typeCode != 'OT'\\\">\\r\\n            <p-autoComplete [disabled]=\\\"!assignedVentureRepresentative\\\" [showTransitionOptions]=\\\"'0ms'\\\" [hideTransitionOptions]=\\\"'0ms'\\\" id=\\\"price\\\" name=\\\"price\\\" [(ngModel)]=\\\"price\\\" [suggestions]=\\\"suggestedPrice\\\" (completeMethod)=\\\"suggestPrice($event, workType)\\\" [dropdown]=\\\"true\\\" field=\\\"paramChar\\\" [forceSelection]=\\\"false\\\" pTooltip=\\\"Można zmienić cenę (podaj liczbę)\\\" tooltipPosition=\\\"top\\\"></p-autoComplete>\\r\\n          </div>\\r\\n      </div>\\r\\n\\r\\n\\r\\n      <div *ngIf=\\\"newOrder && workType?.code\\\">\\r\\n\\r\\n          <div *ngFor=\\\"let addWorkType of additionalWorkTypes; let i = index\\\">\\r\\n              <div class=\\\"ui-grid-row\\\" *ngIf=\\\"i===0 || additionalWorkTypes[i-1]?.code\\\" style=\\\"margin-top: 5px;\\\">\\r\\n                  <div class=\\\"ui-grid-col-2\\\"><label for=\\\"additionalOrderType\\\">Dod. {{i+2}} Zl.*</label></div>\\r\\n                  <div class=\\\"ui-grid-col-5\\\">\\r\\n                      <p-autoComplete [forceSelection]=\\\"true\\\" [showTransitionOptions]=\\\"'0ms'\\\" [hideTransitionOptions]=\\\"'0ms'\\\" [id]=\\\"'additionalWorkTypes'+i\\\" [name]=\\\"'additionalWorkTypes'+i\\\" [disabled]=\\\"!assignedVentureRepresentative\\\" [(ngModel)]=\\\"additionalWorkTypes[i]\\\" [suggestions]=\\\"suggestedTypes\\\" (completeMethod)=\\\"suggestType($event)\\\" (onSelect)=\\\"fillPrice($event, i)\\\" [dropdown]=\\\"true\\\" field=\\\"paramChar\\\" required [placeholder]=\\\"'Wybierz '+(i+2)+' dodatkowy typ zlecenia...'\\\">\\r\\n                        <ng-template let-orderType pTemplate=\\\"item\\\">\\r\\n                          <div class=\\\"ui-helper-clearfix\\\">\\r\\n                            <span [style.color]=\\\"toolsService.getOrderColor(orderType.code)\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-square'\\\"></i></span>\\r\\n                            <span style=\\\"padding: 3px\\\">{{orderType.paramChar}}</span>\\r\\n                          </div>\\r\\n                        </ng-template>\\r\\n                      </p-autoComplete>\\r\\n                  </div>\\r\\n\\r\\n                  <div class=\\\"ui-grid-col-2\\\" *ngIf=\\\"operator.roleCode.indexOf('PR') != -1 || editedOrder?.typeCode != 'OT'\\\" style=\\\"margin-left: 15px;\\\"><label for=\\\"additionalPrices\\\">Wartość zlecenia</label></div>\\r\\n                  <div class=\\\"ui-grid-col-3\\\" *ngIf=\\\"operator.roleCode.indexOf('PR') != -1 || editedOrder?.typeCode != 'OT'\\\">\\r\\n                      <p-autoComplete [disabled]=\\\"!assignedVentureRepresentative\\\" [showTransitionOptions]=\\\"'0ms'\\\" [hideTransitionOptions]=\\\"'0ms'\\\" [id]=\\\"'price'+i\\\" [name]=\\\"'price'+i\\\" [(ngModel)]=\\\"additionalPrices[i]\\\" [suggestions]=\\\"suggestedPrice\\\" (completeMethod)=\\\"suggestPrice($event, additionalWorkTypes[i])\\\" [dropdown]=\\\"true\\\" field=\\\"paramChar\\\" [forceSelection]=\\\"false\\\" pTooltip=\\\"Można zmienić cenę (podaj liczbę)\\\" tooltipPosition=\\\"top\\\"></p-autoComplete>\\r\\n                  </div>\\r\\n              </div>\\r\\n          </div>\\r\\n\\r\\n      </div>\\r\\n\\r\\n        \\r\\n      <div class=\\\"ui-grid-row\\\" *ngIf=\\\"newOrder == false\\\" style=\\\"margin-top: 10px;\\\"><!-- editing status is not allowed for new orders-->\\r\\n            <div class=\\\"ui-grid-col-2\\\"><label for=\\\"status\\\">Status</label></div>\\r\\n            <div class=\\\"ui-grid-col-10\\\">\\r\\n                <p-autoComplete [forceSelection]=\\\"true\\\" [disabled]=\\\"!assignedVentureRepresentative\\\" id=\\\"status\\\" name=\\\"status\\\" [(ngModel)]=\\\"status\\\" [suggestions]=\\\"suggestedStatuses\\\" (completeMethod)=\\\"suggestStatus($event)\\\" [dropdown]=\\\"true\\\" field=\\\"paramChar\\\"></p-autoComplete>\\r\\n            </div>\\r\\n      </div>\\r\\n\\r\\n        <div *ngIf=\\\"comment\\\" class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n          <div class=\\\"ui-grid-col-2\\\"><label for=\\\"comment\\\">Poprzednie komentarze</label></div>\\r\\n          <div class=\\\"ui-grid-col-10\\\">\\r\\n            <!--<input pInputText id=\\\"comment\\\" [(ngModel)]=\\\"editedOrder.comment\\\" />-->\\r\\n            <textarea readonly=\\\"readonly\\\" pInputTextarea id=\\\"comment\\\" name=\\\"comment\\\" [(ngModel)]=\\\"comment\\\" [rows]=\\\"2\\\" [cols]=\\\"30\\\" placeholder=\\\"Dotychczasowe komentarze dotyczące zlecenia...\\\"></textarea>\\r\\n          </div>\\r\\n        </div>\\r\\n          <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n            <div class=\\\"ui-grid-col-2\\\"><label for=\\\"newComment\\\">Dodaj komentarz</label></div>\\r\\n            <div class=\\\"ui-grid-col-10\\\">\\r\\n              <!--<input pInputText id=\\\"comment\\\" [(ngModel)]=\\\"editedOrder.comment\\\" />-->\\r\\n                <textarea [disabled]=\\\"!assignedVentureRepresentative\\\" pInputTextarea id=\\\"newComment\\\" name=\\\"newComment\\\" [(ngModel)]=\\\"newComment\\\" [rows]=\\\"2\\\" [cols]=\\\"30\\\" placeholder=\\\"Wewnętrzny komentarz dotyczący zlecenia...\\\"></textarea>\\r\\n\\r\\n              <!--<textarea *ngIf=\\\"status.code === 'SU' || status.code === 'CA'\\\" required [disabled]=\\\"!assignedVentureRepresentative\\\" pInputTextarea id=\\\"newComment\\\" name=\\\"newComment\\\" [(ngModel)]=\\\"newComment\\\" [rows]=\\\"2\\\" [cols]=\\\"30\\\"  autoResize=\\\"autoResize\\\" placeholder=\\\"Wewnętrzny komentarz dotyczący WO...\\\"></textarea>\\r\\n                <textarea *ngIf=\\\"status.code !== 'SU' && status.code !== 'CA'\\\" [disabled]=\\\"!assignedVentureRepresentative\\\" pInputTextarea id=\\\"newComment\\\" name=\\\"newComment\\\" [(ngModel)]=\\\"newComment\\\" [rows]=\\\"2\\\" [cols]=\\\"30\\\"  autoResize=\\\"autoResize\\\" placeholder=\\\"Wewnętrzny komentarz dotyczący WO...\\\"></textarea>-->\\r\\n            </div>\\r\\n          </div>\\r\\n          <div *ngIf=\\\"!newComment && (status?.code === 'SU' || status?.code === 'CA')\\\" class=\\\"ui-grid-row\\\" style=\\\"margin-top: 0px;\\\" >\\r\\n            <div class=\\\"ui-grid-col-2\\\"></div>\\r\\n            <div class=\\\"ui-grid-col-10\\\">\\r\\n              <p-message severity=\\\"warn\\\" text=\\\"Dodaj powód anulujowania/wstrzymania zlecenia!\\\"></p-message>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n        <div class=\\\"ui-grid-col-2\\\"><label for=\\\"description\\\">Opis</label></div>\\r\\n        <div class=\\\"ui-grid-col-10\\\">\\r\\n          <!--<input pInputText id=\\\"description\\\" [(ngModel)]=\\\"editedOrder.description\\\" />-->\\r\\n          <textarea [disabled]=\\\"!assignedVentureRepresentative\\\" pInputTextarea id=\\\"description\\\" name=\\\"description\\\" [(ngModel)]=\\\"editedOrder.description\\\"  placeholder=\\\"Opis dotyczący zlecenia...\\\" [rows]=\\\"2\\\" [cols]=\\\"30\\\"></textarea>\\r\\n        </div>\\r\\n      </div>\\r\\n      <!--Assign engener -->\\r\\n      <div *ngIf=\\\"newOrder\\\" class=\\\"ui-grid-row\\\" style=\\\"margin-top: 20px;\\\">\\r\\n        <div class=\\\"ui-grid-col-2\\\"><label for=\\\"assignEngineer\\\">Wykonawca</label></div>\\r\\n        <div class=\\\"ui-grid-col-10\\\">\\r\\n          <p-autoComplete id=\\\"assignEngineer\\\" \\r\\n          [(ngModel)]=\\\"assignedEngineer\\\" \\r\\n          [suggestions]=\\\"suggestedEngineers\\\" \\r\\n          (completeMethod)=\\\"suggestEngineer($event)\\\" \\r\\n          [dropdown]=\\\"true\\\" \\r\\n          field=\\\"displayName\\\" \\r\\n          [forceSelection]=\\\"true\\\"\\r\\n          pTooltip=\\\"Opcjonalne wybranie wykonawcy spowoduje jego przypisanie\\\"\\r\\n          [ngModelOptions]=\\\"{standalone: true}\\\">\\r\\n          \\r\\n        </p-autoComplete>\\r\\n        </div>\\r\\n    </div>\\r\\n      <hr>\\r\\n      <!-- related item -->\\r\\n\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n        <div class=\\\"ui-grid-col-2\\\"><label for=\\\"itemNo\\\">Numer obiektu</label></div>\\r\\n        <div class=\\\"ui-grid-col-10\\\">\\r\\n              <p-autoComplete placeholder=\\\"Numer obiektu np. stacji/kandydata\\\" id=\\\"itemNo\\\" name=\\\"itemNo\\\" [(ngModel)]=\\\"relatedItem\\\" [suggestions]=\\\"suggestedRelatedItems\\\" (onBlur)=\\\"updateRelatedItem($event.target.value)\\\" (onKeyUp)=\\\"updateRelatedItem($event.target.value)\\\" (onFocus)=\\\"copyRelatedItem($event.target.value)\\\" (completeMethod)=\\\"suggestRelatedItem($event)\\\" [dropdown]=\\\"true\\\" field=\\\"itemNo\\\" [forceSelection]=\\\"false\\\" pTooltip=\\\"Uzupełnij nowy obiekt lub wybierz istniejący z listy. Obiekt wybrany z listy można zmodyfikowac/uzupełnić, co bedzie miało wpływ na inne zlecenia powiązane z tym obiektem, ale po wybraniu z listy nie można już definiować nowego. Możesz też przypisać lub zmienić później tj. po utworzeniu WO.\\\" tooltipPosition=\\\"top\\\"></p-autoComplete>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div *ngIf=\\\"relatedItem?.id && isRelatedItemChanged(relatedItem)\\\" class=\\\"ui-grid-row\\\" style=\\\"margin-top: 0px;\\\" >\\r\\n        <div class=\\\"ui-grid-col-2\\\"></div>\\r\\n        <div class=\\\"ui-grid-col-10\\\">\\r\\n          <p-message severity=\\\"warn\\\" text=\\\"Modyfikacja istniejącego obiektu\\\"></p-message>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div *ngIf=\\\"relatedItem?.itemNo !== undefined && relatedItem?.id === undefined\\\" class=\\\"ui-grid-row\\\" style=\\\"margin-top: 0px;\\\" >\\r\\n        <div class=\\\"ui-grid-col-2\\\"></div>\\r\\n        <div class=\\\"ui-grid-col-10\\\">\\r\\n          <p-message severity=\\\"info\\\" text=\\\"Dodawanie nowego obiektu\\\"></p-message>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n        <div class=\\\"ui-grid-col-2\\\"><label for=\\\"itemAddress\\\">Adres</label></div>\\r\\n        <div class=\\\"ui-grid-col-10\\\"><input pInputText name=\\\"itemAddress\\\" id=\\\"itemAddress\\\" [(ngModel)]=\\\"relatedItem.address\\\" placeholder=\\\"Adres objektu inwestycji\\\"/></div>\\r\\n      </div>\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n        <div class=\\\"ui-grid-col-2\\\"><label for=\\\"itemBuildingType\\\">Typ budynku</label></div>\\r\\n        <div class=\\\"ui-grid-col-10\\\"><input pInputText name=\\\"itemBuildingType\\\" id=\\\"itemBuildingType\\\" [(ngModel)]=\\\"relatedItem.mdBuildingType\\\" placeholder=\\\"Typ budynku...\\\"/></div>\\r\\n      </div>\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n        <div class=\\\"ui-grid-col-2\\\"><label for=\\\"itemConstructionCategory\\\">Konstrukcja</label></div>\\r\\n        <div class=\\\"ui-grid-col-10\\\"><input pInputText name=\\\"itemConstructionCategory\\\" id=\\\"itemConstructionCategory\\\" [(ngModel)]=\\\"relatedItem.mdConstructionCategory\\\" placeholder=\\\"Typ konstrukcji...\\\" /></div>\\r\\n      </div>\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n        <div class=\\\"ui-grid-col-2\\\"><label for=\\\"itemDescription\\\">Opis obiektu</label></div>\\r\\n        <div class=\\\"ui-grid-col-10\\\">\\r\\n          <textarea pInputTextarea name=\\\"itemDescription\\\" id=\\\"itemDescription\\\" [(ngModel)]=\\\"relatedItem.description\\\" [rows]=\\\"2\\\" [cols]=\\\"30\\\" placeholder=\\\"Opis objektu inwestycji...\\\"></textarea>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div *ngIf=\\\"relatedItem?.creationDate\\\" class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n        <div class=\\\"ui-grid-col-2\\\"><label for=\\\"itemCreationDate\\\">Data utworzenia</label></div>\\r\\n        <div class=\\\"ui-grid-col-10\\\">\\r\\n          <input pInputText name=\\\"itemCreationDate\\\"  id=\\\"itemCreationDate\\\" disabled=\\\"true\\\" [(ngModel)]=\\\"relatedItem.creationDate\\\"/>\\r\\n        </div>\\r\\n      </div>\\r\\n      </form>\\r\\n    </div>\\r\\n    <p-footer>\\r\\n      <div class=\\\"ui-dialog-buttonpane ui-helper-clearfix\\\">\\r\\n        <button type=\\\"submit\\\" [disabled]=\\\"!canSaveOrders()\\\" width=\\\"200px\\\" type=\\\"button\\\" pButton icon=\\\"fa fa-check\\\" (click)=\\\"saveOrders()\\\" label=\\\"Zapisz\\\"></button>\\r\\n      </div>\\r\\n    </p-footer>\\r\\n\\r\\n\\r\\n\\r\\n  </p-dialog>\\r\\n\\r\\n\\r\\n  <p-dialog [header]=\\\"isNewOrderOwner ? 'Przypisywanie/przepisywanie zlecenia': 'Dopisywanie do zlecenia'\\\" [(visible)]=\\\"displayAssignDialog\\\" [responsive]=\\\"true\\\" [minWidth]=\\\"400\\\">\\r\\n    <div class=\\\"ui-grid ui-grid-responsive ui-fluid\\\" *ngIf=\\\"editedOrder\\\">\\r\\n        <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 20px;\\\">\\r\\n            <div class=\\\"ui-grid-col-4\\\"><label for=\\\"person\\\">Osoba</label></div>\\r\\n            <div class=\\\"ui-grid-col-8\\\">\\r\\n              <p-autoComplete id=\\\"person\\\" [(ngModel)]=\\\"assignedEngineer\\\" [suggestions]=\\\"suggestedEngineers\\\" (completeMethod)=\\\"suggestEngineer($event)\\\" [dropdown]=\\\"true\\\" field=\\\"displayName\\\" [forceSelection]=\\\"true\\\"></p-autoComplete>\\r\\n            </div>\\r\\n        </div>\\r\\n        <div *ngIf=\\\"isNewOrderOwner && selectedOrder?.assignee !== undefined\\\" class=\\\"ui-grid-row\\\" style=\\\"margin-top: 0px;\\\" >\\r\\n          <div class=\\\"ui-grid-col-4\\\"></div>\\r\\n          <div class=\\\"ui-grid-col-8\\\">\\r\\n            <p-message severity=\\\"warn\\\" text=\\\"Zmiana właściciela zlecenia...\\\"></p-message>\\r\\n          </div>\\r\\n        </div>\\r\\n\\r\\n        <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 20px;\\\" *ngIf=\\\"editedOrder?.officeCode === 'KAT'\\\">\\r\\n            <div class=\\\"ui-grid-col-4\\\"><label for=\\\"mdCapex\\\">Numer CAPEX</label></div>\\r\\n            <div class=\\\"ui-grid-col-8\\\"><input pInputText id=\\\"mdCapex\\\" [(ngModel)]=\\\"editedOrder.mdCapex\\\" disabled=\\\"true\\\"/></div>\\r\\n        </div>\\r\\n        <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 20px;\\\">\\r\\n            <div class=\\\"ui-grid-col-4\\\"><label for=\\\"workNo\\\">Numer Zl.</label></div>\\r\\n            <div class=\\\"ui-grid-col-8\\\"><input pInputText id=\\\"workNo\\\" [(ngModel)]=\\\"editedOrder.workNo\\\" disabled=\\\"true\\\"/></div>\\r\\n        </div>\\r\\n        <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 20px;\\\">\\r\\n            <div class=\\\"ui-grid-col-4\\\"><label for=\\\"type\\\">Typ Zl.</label></div>\\r\\n            <div class=\\\"ui-grid-col-8\\\"><input pInputText id=\\\"type\\\" [(ngModel)]=\\\"editedOrder.type\\\" disabled=\\\"true\\\"/></div>\\r\\n        </div>\\r\\n      <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 20px;\\\">\\r\\n        <div class=\\\"ui-grid-col-4\\\"><label for=\\\"status\\\">Status</label></div>\\r\\n        <div class=\\\"ui-grid-col-8\\\">\\r\\n          <div class=\\\"ui-grid-col-8\\\"><input pInputText id=\\\"status\\\" [(ngModel)]=\\\"editedOrder.status\\\" disabled=\\\"true\\\"/></div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <p-footer>\\r\\n      <div class=\\\"ui-dialog-buttonpane ui-helper-clearfix\\\">\\r\\n        <button width=\\\"200px\\\" type=\\\"button\\\" pButton [icon]=\\\"isNewOrderOwner ? 'fa fa-user': 'fa fa-share'\\\" (click)=\\\"saveAssignment()\\\" [label]=\\\"isNewOrderOwner ? 'Przypisz': 'Dopisz'\\\"></button>\\r\\n      </div>\\r\\n    </p-footer>\\r\\n  </p-dialog>\\r\\n\\r\\n</p-panel>\"","import { Component, OnInit } from '@angular/core';\r\nimport { CurrencyPipe } from '@angular/common';\r\nimport { Observable } from 'rxjs';\r\nimport { catchError, map, tap, delay, mergeMap } from 'rxjs/operators';\r\n\r\n\r\nimport { User, RelatedItem, Order, WorkType, CodeValue, SearchUser } from '../_models/index';\r\nimport { Comments, commentAsSimpleString, commentAsString, commentAdd } from '../_models/comment';\r\nimport { WOService, RelatedItemService, UserService, DictService, AlertService, WorkTypeService, AuthenticationService, ToolsService } from '../_services/index';\r\n\r\nimport { MenuItem } from 'primeng/primeng';\r\nimport { Calendar } from '../_models/calendar';\r\n\r\n@Component({\r\n    selector: 'app-wo',\r\n    templateUrl: './wo.component.html',\r\n    styleUrls: ['./wo.component.css']\r\n})\r\nexport class WoComponent implements OnInit {\r\n\r\n    /* search and selection */\r\n    lastModAfter:Date;\r\n    lastModBefore:Date;\r\n    orders:Order[];\r\n    selectedOrder:Order;\r\n\r\n    /*  */\r\n    editedOrder:Order;\r\n    newOrder:boolean;\r\n    isNewOrderOwner:boolean;\r\n    generateWorkNoFlag: string;\r\n    displayEditDialog:boolean;\r\n    displayAssignDialog:boolean;\r\n    displayDetailsDialog: boolean;\r\n    items:MenuItem[] = [];\r\n\r\n    /* autocompletion assignedEngineer */\r\n    engineers:User[] = [];\r\n    suggestedEngineers:SearchUser[];\r\n    assignedEngineer:SearchUser;\r\n\r\n    /* autocompletion ventureRepresentatives */\r\n    ventureRepresentatives:User[] = [];\r\n    suggestedVentureRepresentatives:SearchUser[];\r\n    assignedVentureRepresentative:SearchUser;\r\n\r\n    /* autocompletion workType */\r\n    workTypes:CodeValue[] = [];\r\n    suggestedTypes:CodeValue[];\r\n    workType:CodeValue;\r\n    additionalWorkTypes:CodeValue[];\r\n    //this is related with addtionalPrice!\r\n\r\n    /* autocompletion statuses */\r\n    statuses:CodeValue[] = [];\r\n    suggestedStatuses:CodeValue[];\r\n    status:CodeValue;\r\n\r\n    /* autocompletion relatedItem */\r\n    relatedItems:RelatedItem[];\r\n    suggestedRelatedItems:RelatedItem[];\r\n    relatedItem:RelatedItem;\r\n    relatedItemCopy:RelatedItem;\r\n\r\n    /* autocompletion prize */\r\n    workTypesDetails:WorkType[];\r\n    suggestedPrice:CodeValue[];\r\n    price:CodeValue;\r\n    additionalPrices:CodeValue[];\r\n\r\n    comment; string;\r\n    newComment: string;\r\n\r\n    operator:User;\r\n    pl:Calendar;\r\n    displayChangeStatusDialog:boolean;\r\n    \r\n    constructor(private woService:WOService,\r\n                private userService:UserService,\r\n                private itemService:RelatedItemService,\r\n                private workTypeService:WorkTypeService,\r\n                private dictService:DictService,\r\n                private alertService:AlertService,\r\n                private authSerice:AuthenticationService,\r\n                private toolsService: ToolsService) {\r\n        this.lastModAfter = toolsService.getCurrentDateDayOperation(-45);\r\n        this.lastModBefore = toolsService.getCurrentDateDayOperation(0);\r\n        this.items = [\r\n            {label: 'Przypisz/Zmień wykonawce', icon: 'fa fa-user', disabled: true, command: (event) => this.assign(true)},\r\n            {label: 'Dopisz wykonawce', icon: 'fa fa-share', disabled: true, command: (event) => this.assign(false)},\r\n            {label: 'Edycja zlecenia', icon: 'fa fa-pencil-square-o', disabled: true, command: (event) => this.edit()},\r\n            {label: 'Dodaj nowe zlecenie', icon: 'fa fa-plus', disabled: true, command: (event) => this.add()}\r\n        ];\r\n        this.relatedItem = <RelatedItem>{};\r\n        this.pl=new Calendar();\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.userService.getEngineersAndContractors().subscribe(engineers => this.engineers = engineers);\r\n        this.userService.getVentureRepresentatives().subscribe(ventureRepresentatives => this.ventureRepresentatives = ventureRepresentatives);\r\n        this.itemService.getAllItems().subscribe(relatedItems => this.relatedItems = relatedItems);\r\n        this.workTypeService.getAllWorkTypes().subscribe(workTypesDetails => this.workTypesDetails = workTypesDetails);\r\n        this.authSerice.userAsObs.subscribe(user => this.assignOperator(user));\r\n\r\n        this.workTypeService.getWorkTypes().subscribe(workTypes => this.workTypes = workTypes);\r\n        this.statuses = this.dictService.getWorkStatuses();\r\n       \r\n        this.search();\r\n    }\r\n\r\n    showChangeStatusDialog() {\r\n        this.displayChangeStatusDialog=true;\r\n    }\r\n\r\n    onClose(isVisible: boolean){\r\n        this.displayChangeStatusDialog = isVisible;\r\n        this.search();\r\n    }\r\n \r\n\r\n    private assignOperator(operator:User):void {\r\n        console.log('operator: '+JSON.stringify(operator));\r\n        this.operator = operator;\r\n        if (operator && operator.roleCode && operator.roleCode.indexOf('OP') > -1) {\r\n            for(let item of this.items) {\r\n                item.disabled = false;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    refresh() {\r\n        this.lastModBefore = this.toolsService.getCurrentDateDayOperation(0);\r\n        this.search();\r\n    }\r\n\r\n    search() {\r\n        this.woService.getOrdersByDates(\r\n            this.toolsService.formatDate(this.lastModAfter, 'yyyy-MM-dd'),\r\n            this.toolsService.formatDate(this.lastModBefore, 'yyyy-MM-dd')\r\n        ).pipe(mergeMap(orders => this.callVentures(orders)))\r\n        .subscribe(vrs => this.mapVentureRepresentative(this.orders, vrs));\r\n    }\r\n\r\n    private callVentures(orders: Order[]):Observable<User[]> {\r\n        //this.orders = orders;\r\n        //filter\r\n        this.orders = [];\r\n        for (let order of orders) {\r\n            if (order.statusCode !== 'CA' && order.statusCode != 'SU') {\r\n                this.orders.push(order);\r\n            }\r\n        }\r\n\r\n        return this.userService.getVentureRepresentatives();\r\n    }\r\n\r\n    private mapVentureRepresentative(orders: Order[], vrs:User[]):void {\r\n        for(let order of orders) {\r\n            for(let vr of vrs) {\r\n                if (order.ventureId === vr.id) {\r\n                    order.ventureDisplay = vr.firstName+' '+vr.lastName;\r\n                    order.ventureCompany = vr.company;\r\n                    order.ventureFull = vr;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    copyRelatedItem(value: any) {\r\n        console.log('copyRelatedItem ' + JSON.stringify(this.relatedItem));\r\n        if (typeof this.relatedItem == 'string' || this.relatedItem instanceof String) {\r\n            console.log('copyRelatedItem skipping due to string');\r\n        } else {\r\n            this.relatedItemCopy = JSON.parse(JSON.stringify(this.relatedItem));\r\n        }\r\n    }\r\n\r\n    updateRelatedItem(value: any) {\r\n        //this is tricky sometimes object sometimes string\r\n        console.log('updateRelatedItem ' + JSON.stringify(this.relatedItem)+'\\nJSON '+JSON.stringify(value));\r\n        if (this.relatedItem !== undefined) {\r\n            if (typeof value == 'string' || value instanceof String) {\r\n                if (this.relatedItemCopy !== undefined) {\r\n                    this.relatedItem = this.relatedItemCopy;\r\n                } else {\r\n                    this.relatedItem = <RelatedItem> {};\r\n                }\r\n                this.relatedItem.itemNo = ''+value;\r\n                this.copyRelatedItem(undefined);\r\n            }\r\n        }\r\n    }\r\n\r\n    suggestPrice(event, workType: CodeValue) {\r\n        console.log('all ' + JSON.stringify(this.workTypesDetails));\r\n\r\n        let suggestedPrice: CodeValue[] = [];\r\n        if (this.workTypesDetails && this.workTypesDetails.length > 0) {\r\n            for (let workTypeDetails of this.workTypesDetails) {\r\n                let sPrice:string = <string> '' + workTypeDetails.price;\r\n                if (sPrice.indexOf(event.query) > -1 && (workTypeDetails.typeCode === workType.code || workType.code === undefined) && workTypeDetails.officeCode === this.assignedVentureRepresentative.user.officeCode && workTypeDetails.complexityCode === 'STD') {\r\n                    //let type: string = this.dictService.getWorkType(workTypeDetails.typeCode);\r\n                    //suggestedPrice.push(new CodeValue(sPrice, sPrice + ' PLN (cennik ' + this.dictService.getOffice(workTypeDetails.officeCode) + ')'));\r\n                    suggestedPrice.push(new CodeValue(sPrice, sPrice + ' PLN'));\r\n                }\r\n            }\r\n        }\r\n        this.suggestedPrice = suggestedPrice;\r\n        console.log('suggestedWorkTypeDetails: ' + JSON.stringify(this.suggestedPrice));\r\n    }\r\n\r\n    suggestRelatedItem(event) {\r\n        console.log('all ' + JSON.stringify(this.relatedItems));\r\n        let queryIgnoreCase: string = event.query ? event.query.toLowerCase(): event.query;\r\n\r\n        let suggestedRelatedItems: RelatedItem[] = [];\r\n        if (this.relatedItems && this.relatedItems.length > 0) {\r\n            for (let item of this.relatedItems) {\r\n                if (item.itemNo.toLowerCase().indexOf(queryIgnoreCase) > -1) {\r\n                    suggestedRelatedItems.push(item);\r\n                }\r\n            }\r\n        }\r\n        this.suggestedRelatedItems = suggestedRelatedItems;\r\n        console.log('suggestedRelatedItems: ' + JSON.stringify(this.suggestedRelatedItems));\r\n    }\r\n\r\n    suggestStatus(event) {\r\n        let suggestedStatuses: CodeValue[] = [];\r\n        let queryIgnoreCase: string = event.query ? event.query.toLowerCase(): event.query;\r\n        if (this.statuses && this.statuses.length > 0) {\r\n            for (let status of this.statuses) {\r\n                if (status.paramChar.toLowerCase().indexOf(queryIgnoreCase) > -1 && this.toolsService.isStatusAllowed(this.editedOrder, status.code)) {\r\n                    suggestedStatuses.push(status);\r\n                }\r\n            }\r\n        }\r\n        this.suggestedStatuses = suggestedStatuses;\r\n        console.log('suggestedStatuses: ' + JSON.stringify(this.suggestedStatuses));\r\n    }\r\n\r\n    fillPrice(event: any, index: number): void {\r\n        console.log(\"fillPrice \"+JSON.stringify(event));\r\n\r\n        if (this.workTypesDetails && this.workTypesDetails.length > 0) {\r\n            for (let workTypeDetails of this.workTypesDetails) {\r\n                let sPrice:string = <string> '' + workTypeDetails.price;\r\n                if ((workTypeDetails.typeCode === event.code || event.code === undefined) && workTypeDetails.officeCode === this.assignedVentureRepresentative.user.officeCode && workTypeDetails.complexityCode === 'STD') {\r\n                    if (index < 0) {\r\n                        this.price = new CodeValue(sPrice, sPrice + ' PLN');\r\n                    } else {\r\n                        this.additionalPrices[index] = new CodeValue(sPrice, sPrice + ' PLN');\r\n                    }\r\n                    console.log(\"fillPrice found \" + sPrice);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    suggestType(event): void {\r\n        let suggestedTypes:CodeValue[] = [];\r\n        let queryIgnoreCase: string = event.query ? event.query.toLowerCase(): event.query;\r\n        if (this.workTypes && this.workTypes.length > 0) {\r\n            for (let workType of this.workTypes) {\r\n                if (workType.paramChar.toLowerCase().indexOf(queryIgnoreCase) > -1) {\r\n                    suggestedTypes.push(workType);\r\n                }\r\n            }\r\n        }\r\n        suggestedTypes.sort( function (a,b) {           \r\n            return parseFloat(a.code) - parseFloat(b.code);\r\n        });\r\n        suggestedTypes.sort(function (a,b) {       \r\n\r\n            if (parseFloat(a.code.split(\".\")[0]) === parseFloat(b.code.split(\".\")[0])){\r\n                if (parseFloat(a.code.split(\".\")[1]) > parseFloat(b.code.split(\".\")[1])) {\r\n                    return 1;\r\n                  } else if (parseFloat(b.code.split(\".\")[1]) > parseFloat(a.code.split(\".\")[1])) {\r\n                    return -1;\r\n                  } else {\r\n                    return 0;\r\n                  }\r\n                }\r\n                else {\r\n                    return 0;\r\n                }\r\n        }\r\n      );\r\n        this.suggestedTypes = suggestedTypes;\r\n        console.log('suggestedTypes: ' + JSON.stringify(this.suggestedTypes));\r\n    }\r\n\r\n    suggestEngineer(event): void {\r\n        let suggestedEngineers:SearchUser[] = [];\r\n        let queryIgnoreCase: string = event.query ? event.query.toLowerCase(): event.query;\r\n        if (this.engineers && this.engineers.length > 0) {\r\n            for (let engineer of this.engineers) {\r\n                let suggestion:string = JSON.stringify(engineer).toLowerCase();\r\n                console.log('suggestEngineer ' + suggestion + ' for ' + JSON.stringify(event));\r\n                if (suggestion.indexOf(queryIgnoreCase) > -1 && (this.editedOrder.assignee === undefined || this.editedOrder.assignee.indexOf(engineer.email) === -1)) {\r\n                    let displayName:string = engineer.firstName + ' ' + engineer.lastName + ' (' + engineer.role + ')';\r\n                    suggestedEngineers.push(new SearchUser(displayName, engineer));\r\n                }\r\n            }\r\n        }\r\n        this.suggestedEngineers = suggestedEngineers;\r\n        console.log('suggestedEngineers ' + JSON.stringify(this.suggestedEngineers));\r\n    }\r\n\r\n    suggestVentureRepresentative(event) {\r\n        let suggestedVentureRepresentatives: SearchUser[] = [];\r\n        let queryIgnoreCase: string = event.query ? event.query.toLowerCase(): event.query;\r\n        if (this.ventureRepresentatives && this.ventureRepresentatives.length > 0) {\r\n            for (let v of this.ventureRepresentatives) {\r\n                let suggestion:string = JSON.stringify(v).toLowerCase();\r\n                console.log('suggestVentureRepresentative ' + suggestion + ' for ' + JSON.stringify(event));\r\n                if (suggestion.indexOf(queryIgnoreCase) > -1) {\r\n                    let displayName:string = v.firstName + ' ' + v.lastName + ' (' + v.company + ' - '+v.office+')';\r\n                    suggestedVentureRepresentatives.push(new SearchUser(displayName, v));\r\n                }\r\n            }\r\n        }\r\n        this.suggestedVentureRepresentatives = suggestedVentureRepresentatives;\r\n        console.log('suggestedVentureRepresentatives ' + JSON.stringify(this.suggestedVentureRepresentatives));\r\n    }\r\n\r\n    public showWoDetails(event, order) {\r\n        this.selectedOrder=order;\r\n        this.onRowSelect(event);\r\n        this.displayDetailsDialog=true;\r\n    }\r\n\r\n    onRowSelect(event) {\r\n        console.log('selected row!' + JSON.stringify(this.selectedOrder));\r\n        this.selectedOrder.assigneeFull = this.toolsService.getEngineers(this.selectedOrder.assignee, this.engineers);\r\n    }\r\n\r\n    onRowDblclick(event) {\r\n        console.log('onRowDblclick row!' + JSON.stringify(this.selectedOrder));\r\n        if (this.operator && this.operator.roleCode && this.operator.roleCode.indexOf('OP') > -1) {\r\n            this.edit();\r\n        }\r\n    }\r\n\r\n    assign(isNewOrderOwner:boolean):void {\r\n        console.log('assigning!' + JSON.stringify(this.selectedOrder));\r\n        if (isNewOrderOwner && this.selectedOrder.assignee !== undefined) {\r\n            this.alertService.warn('Zmiana wykonawcy zlecenia ' + this.selectedOrder.workNo + ', bieżący wykonawca/y' + this.selectedOrder.assignee);\r\n        }\r\n        if (isNewOrderOwner && this.selectedOrder.statusCode === 'CO') {\r\n            this.alertService.error('Nie można przypisac zlecenia w stanie ' + this.selectedOrder.status);\r\n        } else if (!isNewOrderOwner && this.selectedOrder.assignee === undefined) {\r\n            this.alertService.error('Nie można DOPISAĆ do zlecenia gdyż nie ma jeszcze pierwszego wykonawcy!');\r\n        } else {\r\n            this.isNewOrderOwner = isNewOrderOwner;\r\n            this.newOrder = false;\r\n            this.editedOrder = this.selectedOrder;\r\n            this.displayAssignDialog = true;\r\n        }\r\n    }\r\n\r\n\r\n    add() {\r\n\r\n        this.editedOrder = new Order(this.toolsService.NO_WO, 'OP', this.dictService.getWorkStatus('OP'), null, null, 'STD', -1, null, new Comments(null), this.toolsService.NO_CAPEX, null);\r\n        this.additionalWorkTypes = [new CodeValue('', ''), new CodeValue('', ''), new CodeValue('', ''), new CodeValue('', '')];\r\n        this.additionalPrices = [new CodeValue('', ''), new CodeValue('', ''), new CodeValue('', ''), new CodeValue('', '')];\r\n        this.generateWorkNoFlag = 'Y';\r\n        this.comment = undefined;\r\n        this.newComment = undefined;\r\n\r\n        this.status = new CodeValue(this.editedOrder.statusCode, this.editedOrder.status);\r\n\r\n        this.relatedItem = <RelatedItem> {};\r\n        this.relatedItemCopy = <RelatedItem> {};\r\n\r\n        this.price = <CodeValue> {};\r\n        this.workType = <CodeValue> {};\r\n        this.newComment = undefined;\r\n\r\n        this.newOrder = true;\r\n        this.displayEditDialog = true;\r\n\r\n        this.assignedEngineer = undefined;\r\n    }\r\n\r\n    edit():void {\r\n\r\n        console.log('editing!' + JSON.stringify(this.selectedOrder));\r\n        this.generateWorkNoFlag = 'N';\r\n        this.comment = this.selectedOrder.comments ? commentAsString(this.selectedOrder.comments) : undefined;\r\n        this.newComment = undefined;\r\n\r\n        //initial values based on selectedOrder for form preparation\r\n        let price: string = this.selectedOrder.price !== undefined? ''+this.selectedOrder.price : '';\r\n        this.price = new CodeValue(price, price);\r\n\r\n        this.workType = new CodeValue(this.selectedOrder.typeCode, this.selectedOrder.type);\r\n        this.status = new CodeValue(this.selectedOrder.statusCode, this.selectedOrder.status);\r\n        this.relatedItem = (this.selectedOrder.relatedItems[0] === undefined ? <RelatedItem> {} : this.selectedOrder.relatedItems[0]);\r\n        if (this.selectedOrder.ventureFull !== undefined && this.selectedOrder.ventureFull !== undefined) {\r\n            this.assignedVentureRepresentative = new SearchUser(this.selectedOrder.ventureDisplay, this.selectedOrder.ventureFull);\r\n        }\r\n\r\n        this.editedOrder = JSON.parse(JSON.stringify(this.selectedOrder));\r\n        this.additionalWorkTypes = [new CodeValue('', ''), new CodeValue('', ''), new CodeValue('', ''), new CodeValue('', '')];\r\n        this.additionalPrices = [new CodeValue('', ''), new CodeValue('', ''), new CodeValue('', ''), new CodeValue('', '')];\r\n\r\n        this.newOrder = false;\r\n        this.displayEditDialog = true;\r\n    }\r\n\r\n\r\n\r\n    saveAssignment() {\r\n        console.log('saving assignment!' + JSON.stringify(this.editedOrder) + ' for ' + JSON.stringify(this.assignedEngineer.user));\r\n        this.displayAssignDialog = false;\r\n        this.userService.assignWorkOrder(this.assignedEngineer.user, this.editedOrder, this.isNewOrderOwner)\r\n            .subscribe(json => this.updateOrderStatus(json.created, this.isNewOrderOwner, this.editedOrder, this.assignedEngineer.user));\r\n    }\r\n\r\n    synchronousSaveAssignment() {\r\n        console.log('Synchronous saving assignment!' + JSON.stringify(this.editedOrder) + ' for ' + JSON.stringify(this.assignedEngineer.user));\r\n        this.isNewOrderOwner = true;\r\n        this.displayAssignDialog = false;\r\n        this.userService.assignWorkOrder(this.assignedEngineer.user, this.editedOrder, this.isNewOrderOwner).toPromise()\r\n            .then(result => {\r\n                this.updateOrderStatusObs(result['created'], this.isNewOrderOwner, this.editedOrder, this.assignedEngineer.user).toPromise()\r\n                    .then(result => {\r\n                        console.log('Status from promise!');\r\n                    });\r\n            });\r\n    }\r\n\r\n    private updateOrderStatusObs(created:number, isNewOrderOwner:boolean, order:Order, engineer:User):Observable<Order> {\r\n        console.log('updateOrderStatus setting status to AS, current ' + order.statusCode + ' isNewOrderOwner:' + isNewOrderOwner);\r\n        if (!created || created === -1) {\r\n            console.log('Assignment problem! ' + created);\r\n            this.alertService.error('Blad przypisania zlecenia ' + order.workNo + ' do ' + engineer.email);\r\n            return;\r\n        } else if (isNewOrderOwner && order.statusCode != 'AS') { //update status\r\n            console.log('Setting status to AS, current ' + order.statusCode);\r\n            order.statusCode = 'AS';\r\n        }\r\n        this.alertService.info('Pomyślnie przypisano zlecenie ' + order.workNo + ' do ' + engineer.email);\r\n\r\n        //this.woService.updateOrder(order).subscribe(updatedOrder => this.refreshTable(updatedOrder, false));\r\n        return this.woService.updateOrder(order);\r\n    }\r\n\r\n    private updateOrderStatus(created:number, isNewOrderOwner:boolean, order:Order, engineer:User):void {\r\n        this.updateOrderStatusObs(created, isNewOrderOwner, order, engineer).subscribe(updatedOrder => this.refresh());\r\n    }\r\n\r\n    canSaveOrders(): boolean {\r\n        return (\r\n            this.assignedVentureRepresentative && this.assignedVentureRepresentative.user &&\r\n            ((this.editedOrder && this.editedOrder.workNo && this.editedOrder.workNo.length > 2) || this.assignedVentureRepresentative.user.officeCode !== 'WAW') &&\r\n            this.workType && this.workType.paramChar && this.workType.paramChar.length > 1\r\n        );\r\n    }\r\n\r\n    saveOrders() {\r\n        if (this.canSaveOrders()) {\r\n            this.displayEditDialog = false;\r\n            this.setWorkTypeAndPrice(this.editedOrder, this.workType, this.price);\r\n            this.saveOrder(this.editedOrder, this.saveOrderSubscribeCallback);\r\n        }\r\n    }\r\n\r\n    private saveOrder(order: Order, saveOrderCallback: (o: Order, that: WoComponent) => any): void {\r\n\r\n        order.id            = this.newOrder ? undefined : order.id;\r\n        order.statusCode    = this.newOrder ? 'OP' : this.status.code;\r\n        order.status        = this.dictService.getWorkStatus(order.statusCode);\r\n\r\n        if (this.newComment && this.newComment.length > 0) {\r\n            if (this.newOrder || !order.comments) {\r\n                order.comments = new Comments(null);\r\n            }\r\n            let reason: string = (order.statusCode === 'SU' || order.statusCode === 'CA') ? \"Anulowanie\" : \"Edycja\";\r\n            commentAdd(order.comments, reason, this.operator, this.newComment);\r\n        }\r\n\r\n        if (this.toolsService.isStatusLowerThanProtocol(order.statusCode)) {\r\n            order.protocolNo = ''; //According to LE its null for sqlite\r\n        }\r\n\r\n        if (this.assignedVentureRepresentative && this.assignedVentureRepresentative.user && this.assignedVentureRepresentative.user.id) {\r\n            order.officeCode = this.assignedVentureRepresentative.user.officeCode;\r\n            order.office = this.assignedVentureRepresentative.user.office;\r\n            order.ventureId = this.assignedVentureRepresentative.user.id;\r\n            if (order.officeCode !== 'WAW' && this.generateWorkNoFlag === 'Y') {\r\n                this.editedOrder.workNo = undefined;\r\n            }\r\n            if (order.officeCode !== 'KAT') {\r\n                order.mdCapex = undefined;\r\n            }\r\n        } else {\r\n            this.alertService.error('Zlecenie nie zostało zapiasane, nieprawidlowy (pusty?) region zleceniodawcy!');\r\n            return;\r\n        }\r\n\r\n        if (this.newOrder) {\r\n            let workTypeParam: WorkType = this.workTypeService.getWorkType(order.typeCode, order.officeCode, 'STD');\r\n            if (workTypeParam && workTypeParam.complexity != null) {\r\n                order.complexity = workTypeParam.complexity;\r\n            } else {\r\n                console.log(\"workTypeParam = \"+JSON.stringify(workTypeParam));\r\n                this.alertService.error('Zlecenie nie zostało zapisane, brak pracochlonnosci w parametryzacji dla '+order.type+', '+order.officeCode+'!');\r\n                return;\r\n            }\r\n            order.type = this.workTypeService.getWorkTypeDescription(order);\r\n        }\r\n\r\n\r\n        //trying to optimize all actions newOrder-newRelatedItem(noId), changeOrder-newRelatedItem(noId), newOrder-changeRelatedItem(Id), changeOrder-changeRelatedItem(Id)\r\n        if (this.relatedItem.itemNo !== undefined && this.relatedItem.id !== undefined) {\r\n            if (this.isRelatedItemChanged(this.relatedItem)) {\r\n                console.log('changing existing relatedItem itemNo:' + this.relatedItem.itemNo + ', id:' + this.relatedItem.id);\r\n                this.itemService.updateItem(this.relatedItem).subscribe(item => this.storeOrder(item, order, this.newOrder, false).subscribe(order => saveOrderCallback(order, this)));\r\n            } else {\r\n                console.log('no action on relatedItem but could be reassignment - this will be handled in storeOrder');\r\n                this.storeOrder(this.relatedItem, order, this.newOrder, false).subscribe(order => saveOrderCallback(order, this));\r\n            }\r\n        } else if (this.relatedItem.itemNo !== undefined && this.relatedItem.id === undefined) {\r\n            console.log('adding new relatedItem itemNo:' + this.relatedItem.itemNo + ', id:' + this.relatedItem.id);\r\n            this.itemService.addItem(this.relatedItem).subscribe(item => this.storeOrder(item, order, this.newOrder, true).subscribe(order => saveOrderCallback(order, this)));\r\n        } else {\r\n            console.log('no action on relatedItem itemNo:' + this.relatedItem.itemNo + ', id:' + this.relatedItem.id);\r\n            this.storeOrder(this.relatedItem, order, this.newOrder, false)\r\n            .subscribe(order =>{\r\n                if (this.assignedEngineer != null){\r\n                    this.editedOrder = order;\r\n                    this.synchronousSaveAssignment();\r\n                }              \r\n                saveOrderCallback(order, this);                                          \r\n            });         \r\n        }     \r\n    }\r\n\r\n    private storeOrder(item:RelatedItem, order:Order, newOrder:boolean, newItem:boolean):Observable<Order> {\r\n        console.log('changing order related item to ' + item.id);\r\n        order.itemId = item.id;\r\n\r\n        if (newOrder) {\r\n            console.log('saving new!' + JSON.stringify(order));\r\n            return this.woService.addOrder(order)\r\n        } else {\r\n            console.log('changing!' + JSON.stringify(order));\r\n            return this.woService.updateOrder(order);\r\n        }\r\n    }\r\n\r\n    private saveOrderSubscribeCallback(order: Order, that: WoComponent) {\r\n        if (order.statusCode === 'OP') {\r\n            that.removeAssignment(order, that);\r\n        }\r\n\r\n        if (that.additionalWorkTypes.length > 0 && that.additionalWorkTypes[0].code !== '') {\r\n            console.log('Still work todo, up to '+that.additionalWorkTypes.length +\", order.workNo: \"+order.workNo);\r\n            let nextOrder: Order = JSON.parse(JSON.stringify(order));\r\n            nextOrder.workNo = order.workNo;\r\n            that.setWorkTypeAndPrice(nextOrder, that.additionalWorkTypes[0], that.additionalPrices[0]);\r\n            that.saveOrder(nextOrder, that.saveOrderSubscribeCallback);\r\n            that.additionalWorkTypes.shift();\r\n            that.additionalPrices.shift();          \r\n        } else {\r\n            console.log('No more order to save, refreshing...');\r\n            that.refresh();\r\n        }\r\n    }\r\n\r\n    public removeAssignment(order: Order, that: WoComponent): void {\r\n        if (order.assignee && order.assignee.length > 0 && !order.assigneeFull) {\r\n            order.assigneeFull = that.toolsService.getEngineers(order.assignee, that.engineers)\r\n        }\r\n\r\n        if (order.assigneeFull && order.assigneeFull.length > 0) {\r\n\r\n            let user: User = order.assigneeFull.shift();\r\n            console.log('About to clean assignment for '+order.statusCode+' assignments: '+order.assigneeFull.length+' userId: '+user.id+'...');\r\n\r\n            that.userService.deleteRelation(user, order).subscribe(result => that.removeAssignment(order, that));\r\n        }\r\n\r\n    }\r\n\r\n    //this can differ when creating many orders in one dialog\r\n    private setWorkTypeAndPrice(order: Order, workType: CodeValue, price: CodeValue): void {\r\n        order.typeCode = workType.code;\r\n        order.price = (price != undefined && price.code !== undefined) ? <number> +price.code : this.toolsService.parsePrice(JSON.stringify(price), order.workNo);\r\n        console.log('price ' + order.price);\r\n    }\r\n\r\n    private isRelatedItemChanged(relatedItem:RelatedItem):boolean {\r\n        //console.log('isRelatedItemChanged');\r\n        let originalItem:RelatedItem = this.getOriginalRelatedItemById(relatedItem.id);\r\n\r\n        if (JSON.stringify(originalItem) === JSON.stringify(relatedItem)) {\r\n            return false;\r\n        }\r\n        console.log('isRelatedItemChanged differs: original=' + JSON.stringify(originalItem) + '\\n changed=' + JSON.stringify(relatedItem));\r\n        return true;\r\n    }\r\n\r\n    private getOriginalRelatedItemById(id:number):RelatedItem {\r\n        for (let item of this.relatedItems) {\r\n            if (item.id === id) {\r\n                return item;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n","module.exports = \"\"","module.exports = \"<div style=\\\"margin-top: 5px\\\" *ngIf=\\\"workTypes\\\" class=\\\"ui-g\\\">\\r\\n  <p-dataTable [value]=\\\"workTypes\\\" [rows]=\\\"20\\\" [paginator]=\\\"true\\\" [globalFilter]=\\\"gb\\\" #dt selectionMode=\\\"single\\\" [(selection)]=\\\"selectedWorkType\\\" (onRowDblclick)=\\\"onRowDblclick($event)\\\" (onRowSelect)=\\\"onRowSelect($event)\\\" dataKey=\\\"id\\\" resizableColumns=\\\"true\\\" sortField=\\\"lastModDate\\\" sortOrder=\\\"-1\\\" [loading]=\\\"loading\\\" loadingIcon=\\\"fa fa-spinner\\\" [contextMenu]=\\\"cm\\\">\\r\\n    <p-header>\\r\\n      <div>\\r\\n        <i class=\\\"fa fa-search\\\"></i>\\r\\n        <input #gb type=\\\"text\\\" pInputText size=\\\"50\\\" placeholder=\\\"Filtruj\\\">\\r\\n        <button type=\\\"button\\\" pButton icon=\\\"fa fa-plus\\\" style=\\\"float:left\\\" (click)=\\\"add()\\\" label=\\\"Dodaj\\\"></button>\\r\\n      </div>\\r\\n    </p-header>\\r\\n\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"id\\\" header=\\\"id\\\" hidden=\\\"true\\\" ></p-column>\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"typeCode\\\" header=\\\"Typ\\\" [style]=\\\"{'text-align':'center'}\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\"></p-column>\\r\\n\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"description\\\" header=\\\"Opis typu\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" filterMatchMode=\\\"contains\\\">\\r\\n      <ng-template let-col let-workType=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n        <span [style.color]=\\\"toolsService.getOrderColor(workType.typeCode)\\\" class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"'fa fa-square'\\\"></i></span>\\r\\n        <span style=\\\"padding: 3px\\\">{{workType.description}}</span>\\r\\n      </ng-template>\\r\\n    </p-column>\\r\\n\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"officeCode\\\" header=\\\"Biuro\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center', 'width':'120px'}\\\">\\r\\n        <ng-template let-col let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n            {{dictService.getOffice(order[col.field])}}\\r\\n        </ng-template>\\r\\n    </p-column>\\r\\n\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"complexityCode\\\" header=\\\"Złożoność\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'center'}\\\">\\r\\n      <ng-template let-col let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n        <span class=\\\"ui-inputgroup-addon\\\"><i [class]=\\\"order[col.field]=='STD' ? 'fa fa-thumbs-o-up': 'fa fa-life-bouy'\\\"></i></span><span style=\\\"margin-left: 5px;\\\">{{dictService.getComplexitiy(order[col.field])}}</span>\\r\\n      </ng-template>\\r\\n    </p-column>\\r\\n\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"complexity\\\" header=\\\"Pracochłonność [H]\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'right'}\\\">\\r\\n        <ng-template let-col let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n            <span style=\\\"margin-left: 5px;\\\">{{order[col.field]}}</span><span> godzin</span>\\r\\n        </ng-template>\\r\\n    </p-column>\\r\\n\\r\\n    <p-column [sortable]=\\\"true\\\" field=\\\"price\\\" header=\\\"Cena [PLN]\\\" [filter]=\\\"true\\\" filterPlaceholder=\\\"Filtruj\\\" [style]=\\\"{'text-align':'right'}\\\">\\r\\n        <ng-template let-col let-order=\\\"rowData\\\" pTemplate=\\\"body\\\">\\r\\n            <span style=\\\"margin-left: 5px;\\\">{{order[col.field] | currency:'PLN'}}</span>\\r\\n        </ng-template>\\r\\n    </p-column>\\r\\n\\r\\n\\r\\n    <ng-template pTemplate=\\\"emptymessage\\\">\\r\\n      Brak typów zleceń...\\r\\n    </ng-template>\\r\\n\\r\\n    <p-footer>\\r\\n    </p-footer>\\r\\n\\r\\n  </p-dataTable>\\r\\n\\r\\n  <p-contextMenu #cm [model]=\\\"items\\\"></p-contextMenu>\\r\\n</div>\\r\\n\\r\\n\\r\\n\\r\\n<p-dialog [header]=\\\"newWorkType? 'Tworzysz nowy typ zlecenia' : 'Modyfikacja typu zlecenia'\\\" [(visible)]=\\\"displayEditDialog\\\" [responsive]=\\\"true\\\" [minWidth]=\\\"800\\\">\\r\\n    <form name=\\\"f\\\" (ngSubmit)=\\\"f.form?.valid && save()\\\" #f=\\\"ngForm\\\">\\r\\n        <div class=\\\"ui-grid ui-grid-responsive ui-fluid\\\" *ngIf=\\\"editedWorkType\\\">\\r\\n\\r\\n        <div class=\\\"form-group\\\" [ngClass]=\\\"{ 'has-error': f.submitted && !typeCode?.valid }\\\">\\r\\n            <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n              <div class=\\\"ui-grid-col-4\\\"><label for=\\\"typeCode\\\">Typ*</label></div>\\r\\n              <div class=\\\"ui-grid-col-8\\\">\\r\\n                  <input [disabled]=\\\"!newWorkType\\\" pInputText id=\\\"typeCode\\\" class=\\\"form-control\\\" name=\\\"typeCode\\\" [(ngModel)]=\\\"editedWorkType.typeCode\\\" placeholder=\\\"Typ zlecenia\\\" required/>\\r\\n                  <div *ngIf=\\\"f.submitted && !typeCode?.valid\\\" class=\\\"help-block\\\">Typ jest wymagany</div>\\r\\n              </div>\\r\\n            </div>\\r\\n              <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n                  <div class=\\\"ui-grid-col-4\\\"><label for=\\\"description\\\">Opis typu*</label></div>\\r\\n                  <div class=\\\"ui-grid-col-8\\\">\\r\\n                      <input pInputText id=\\\"description\\\" class=\\\"form-control\\\" name=\\\"description\\\" [(ngModel)]=\\\"editedWorkType.description\\\" placeholder=\\\"Opis zlecenia\\\" required minLength=\\\"3\\\"/>\\r\\n                      <div *ngIf=\\\"f.submitted && !description?.valid\\\" class=\\\"help-block\\\">Opis jest wymagany</div>\\r\\n                  </div>\\r\\n              </div>\\r\\n            <div *ngIf=\\\"showOffices\\\" class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n              <div class=\\\"ui-grid-col-4\\\"><label for=\\\"officeCode\\\">Region*</label></div>\\r\\n              <div class=\\\"ui-grid-col-8\\\">\\r\\n                  <p-dropdown placeholder=\\\"Wybierz biuro obsługujące...\\\" [style]=\\\"{'width': '100%'}\\\" [disabled]=\\\"!newWorkType\\\" id=\\\"officeCode\\\" name=\\\"officeCode\\\" [options]=\\\"offices\\\" [(ngModel)]=\\\"editedWorkType.officeCode\\\" required autoWidth=\\\"false\\\" ></p-dropdown>\\r\\n                  <!--<input [disabled]=\\\"!newWorkType\\\" pInputText id=\\\"officeCode\\\" name=\\\"officeCode\\\" class=\\\"form-control\\\" [(ngModel)]=\\\"editedWorkType.officeCode\\\" placeholder=\\\"Region\\\" required/>-->\\r\\n              </div>\\r\\n            </div>\\r\\n            <div *ngIf=\\\"showComplexities\\\" class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n              <div class=\\\"ui-grid-col-4\\\"><label for=\\\"complexityCode\\\">Złożoność*</label></div>\\r\\n              <div class=\\\"ui-grid-col-8\\\">\\r\\n                  <p-dropdown placeholder=\\\"Wybierz złożoność...\\\" [style]=\\\"{'width': '100%'}\\\" [disabled]=\\\"!newWorkType\\\" id=\\\"complexityCode\\\" name=\\\"complexityCode\\\" [options]=\\\"complexities\\\" [(ngModel)]=\\\"editedWorkType.complexityCode\\\" required autoWidth=\\\"false\\\" ></p-dropdown>\\r\\n                  <!--<input [disabled]=\\\"!newWorkType\\\" pInputText id=\\\"complexityCode\\\" name=\\\"complexityCode\\\" class=\\\"form-control\\\" [(ngModel)]=\\\"editedWorkType.complexityCode\\\" placeholder=\\\"Złożoność HRD lub STD\\\" required/>-->\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n              <div class=\\\"ui-grid-col-4\\\"><label for=\\\"complexity\\\">Pracochłonność [H]*</label></div>\\r\\n              <div class=\\\"ui-grid-col-8\\\">\\r\\n                  <input type=\\\"number\\\" pInputText id=\\\"complexity\\\" class=\\\"form-control\\\" name=\\\"complexity\\\" [(ngModel)]=\\\"editedWorkType.complexity\\\" placeholder=\\\"Pracochłonność w godzinach\\\" required/>\\r\\n                  <div *ngIf=\\\"f.submitted && !complexity?.valid\\\" class=\\\"help-block\\\">Pracochłonność jest wymagana</div>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\\\"ui-grid-row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n              <div class=\\\"ui-grid-col-4\\\"><label for=\\\"price\\\">Cena*</label></div>\\r\\n              <div class=\\\"ui-grid-col-8\\\">\\r\\n                  <input type=\\\"number\\\" pInputText id=\\\"price\\\" class=\\\"form-control\\\" name=\\\"price\\\" [(ngModel)]=\\\"editedWorkType.price\\\" placeholder=\\\"Cena w PLN\\\" required/>\\r\\n                  <div *ngIf=\\\"f.submitted && !price?.valid\\\" class=\\\"help-block\\\">Cena jest wymagana</div>\\r\\n              </div>\\r\\n            </div>\\r\\n        </div>\\r\\n\\r\\n\\r\\n      </div>\\r\\n      <p-footer>\\r\\n        <div class=\\\"ui-dialog-buttonpane ui-helper-clearfix\\\">\\r\\n          <!--<button [disabled]=\\\"!(editedWorkType?.typeCode?.length > 0 && editedWorkType?.officeCode?.length > 0 && editedWorkType?.complexityCode?.length > 0 && editedWorkType?.complexity && editedWorkType?.complexity >= 0 && editedWorkType?.price && editedWorkType?.price >= 0)\\\"\\r\\n                  width=\\\"200px\\\" type=\\\"button\\\" pButton icon=\\\"fa fa-check\\\" (click)=\\\"save()\\\" label=\\\"Zapisz\\\"></button>-->\\r\\n\\r\\n            <button [disabled]=\\\"!(editedWorkType?.description?.length > 0 && editedWorkType?.typeCode?.length > 0 && editedWorkType?.officeCode?.length > 0 && editedWorkType?.complexity >= 0 && editedWorkType?.price >= 0)\\\" style=\\\"width: 200px; height: 30px;\\\" width=\\\"200px\\\" pButton class=\\\"btn btn-primary\\\"><i [class]=\\\"'fa fa-check'\\\"></i> Zapisz</button>\\r\\n        </div>\\r\\n      </p-footer>\\r\\n    </form>\\r\\n\\r\\n</p-dialog>\\r\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\n\r\n\r\nimport { User, RelatedItem, Order, WorkType, CodeValue } from '../_models/index';\r\nimport { WOService, RelatedItemService, UserService, DictService, AlertService, WorkTypeService, AuthenticationService, ToolsService } from '../_services/index';\r\nimport { MenuItem } from 'primeng/primeng';\r\nimport { SelectItem } from 'primeng/primeng'\r\n\r\n@Component({\r\n    selector: 'app-work-types',\r\n    templateUrl: './work-types.component.html',\r\n    styleUrls: ['./work-types.component.css']\r\n})\r\nexport class WorkTypesComponent implements OnInit {\r\n\r\n    workTypes: WorkType[];\r\n    selectedWorkType: WorkType;\r\n    editedWorkType: WorkType;\r\n    items:MenuItem[] = [];\r\n    displayEditDialog: boolean;\r\n    newWorkType: boolean;\r\n\r\n    showOffices: boolean;\r\n    offices:SelectItem[] = [];\r\n\r\n    showComplexities: boolean;\r\n    complexities:SelectItem[] = [];\r\n\r\n    constructor(private workService:WorkTypeService,\r\n                private dictService:DictService,\r\n                private toolsService:ToolsService,\r\n                private alertService:AlertService,\r\n                private authSerice:AuthenticationService) {\r\n    }\r\n\r\n\r\n    ngOnInit() {\r\n        this.workService.getAllWorkTypes().subscribe(workTypes => this.workTypes = workTypes);\r\n        this.dictService.getOfficesObs().subscribe((offices:CodeValue[]) => this.mapToOffices(offices));\r\n        this.mapToComplexities(this.dictService.getComplexities());\r\n\r\n        this.items = [\r\n            {label: 'Dodaj', icon: 'fa fa-plus', command: (event) => this.add()},\r\n            {label: 'Zmień', icon: 'fa fa-pencil-square-o', command: (event) => this.change()}\r\n        ];\r\n    }\r\n\r\n    onRowSelect(event) {\r\n\r\n    }\r\n\r\n    onRowDblclick(event) {\r\n        console.log('onRowDblclick row!' + JSON.stringify(this.selectedWorkType));\r\n        this.change();\r\n    }\r\n\r\n    private change():void {\r\n        this.editedWorkType = this.selectedWorkType;\r\n        this.newWorkType = false;\r\n        this.displayEditDialog = true;\r\n    }\r\n\r\n    private add():void {\r\n        //this.editedWorkType = JSON.parse(JSON.stringify(this.selectedWorkType));\r\n        this.editedWorkType = new WorkType;\r\n        this.newWorkType = true;\r\n        this.displayEditDialog = true;\r\n    }\r\n\r\n    save(): void {\r\n        if (this.newWorkType) {\r\n            if (this.editedWorkType.officeCode === 'ALL') {\r\n                for(let office of this.offices) {\r\n                    if (office.value !== 'ALL') {\r\n                        this.editedWorkType.officeCode = office.value;\r\n                        this.insert(this.editedWorkType);\r\n                    }\r\n                }\r\n            } else {\r\n                this.insert(this.editedWorkType);\r\n            }\r\n        } else {\r\n            this.update(this.editedWorkType);\r\n        }\r\n        this.displayEditDialog = false;\r\n    }\r\n\r\n    private update(workType: WorkType):void {\r\n        this.workService.updateWorkType(workType)\r\n            .subscribe(result => this.processResult(result));\r\n    }\r\n\r\n    private insert(workType: WorkType) {\r\n        this.workService.addWorkType(workType)\r\n            .subscribe(result => this.processResult(result));\r\n    }\r\n\r\n    private processResult(result:any):any {\r\n        console.log(\"Received \"+JSON.stringify(result));\r\n        this.workService.refreshCache().subscribe(workTypes => this.workTypes = workTypes);\r\n    }\r\n\r\n    private mapToOffices(pairs:CodeValue[]):void {\r\n        let all: CodeValue = new CodeValue('ALL', 'WSZYSTKIE');\r\n        pairs.unshift(all);\r\n        this.showOffices = this.toolsService.mapToSelectItem(pairs, this.offices);\r\n    }\r\n\r\n    private mapToComplexities(pairs:CodeValue[]):void {\r\n        this.showComplexities = this.toolsService.mapToSelectItem(pairs, this.complexities);\r\n    }\r\n}\r\n","// The file contents for the current environment will overwrite these during build.\r\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\r\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\r\n// The list of which env maps to which file can be found in `.angular-cli.json`.\r\n\r\nexport const environment = {\r\n  production: false\r\n};\r\n","import './polyfills';\r\n\r\nimport { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule);\r\n","/**\r\n * This file includes polyfills needed by Angular and is loaded before the app.\r\n * You can add your own extra polyfills to this file.\r\n *\r\n * This file is divided into 2 sections:\r\n *   1. Browser polyfills. These are applied before loading ZoneJS and are sorted by browsers.\r\n *   2. Application imports. Files imported after ZoneJS that should be loaded before your main\r\n *      file.\r\n *\r\n * The current setup is for so-called \"evergreen\" browsers; the last versions of browsers that\r\n * automatically update themselves. This includes Safari >= 10, Chrome >= 55 (including Opera),\r\n * Edge >= 13 on the desktop, and iOS 10 and Chrome on mobile.\r\n *\r\n * Learn more in https://angular.io/docs/ts/latest/guide/browser-support.html\r\n */\r\n\r\n/***************************************************************************************************\r\n * BROWSER POLYFILLS\r\n */\r\n\r\n/** IE9, IE10 and IE11 requires all of the following polyfills. **/\r\n// import 'core-js/es6/symbol';\r\n// import 'core-js/es6/object';\r\n// import 'core-js/es6/function';\r\n// import 'core-js/es6/parse-int';\r\n// import 'core-js/es6/parse-float';\r\n// import 'core-js/es6/number';\r\n// import 'core-js/es6/math';\r\n// import 'core-js/es6/string';\r\n// import 'core-js/es6/date';\r\n// import 'core-js/es6/array';\r\n// import 'core-js/es6/regexp';\r\n// import 'core-js/es6/map';\r\n// import 'core-js/es6/set';\r\n\r\n/** IE10 and IE11 requires the following for NgClass support on SVG elements */\r\n// import 'classlist.js';  // Run `npm install --save classlist.js`.\r\n\r\n/** IE10 and IE11 requires the following to support `@angular/animation`. */\r\n// import 'web-animations-js';  // Run `npm install --save web-animations-js`.\r\n\r\n\r\n/** Evergreen browsers require these. **/\r\nimport 'core-js/es6/reflect';\r\nimport 'core-js/es7/reflect';\r\n\r\n\r\n/** ALL Firefox browsers require the following to support `@angular/animation`. **/\r\n// import 'web-animations-js';  // Run `npm install --save web-animations-js`.\r\n\r\n\r\n\r\n/***************************************************************************************************\r\n * Zone JS is required by Angular itself.\r\n */\r\nimport 'zone.js/dist/zone';  // Included with Angular CLI.\r\n\r\n\r\n\r\n/***************************************************************************************************\r\n * APPLICATION IMPORTS\r\n */\r\n\r\n/**\r\n * Date, currency, decimal and percent pipes.\r\n * Needed for: All but Chrome, Firefox, Edge, IE11 and Safari 10\r\n */\r\n// import 'intl';  // Run `npm install --save intl`.\r\n"],"sourceRoot":""}